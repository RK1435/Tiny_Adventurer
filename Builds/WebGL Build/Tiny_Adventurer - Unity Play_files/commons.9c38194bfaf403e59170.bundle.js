!function(l){var u=window.webpackJsonp_name_;window.webpackJsonp_name_=function(e,t,n){for(var r,a,o,s=0,i=[];s<e.length;s++)a=e[s],c[a]&&i.push(c[a][0]),c[a]=0;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(l[r]=t[r]);for(u&&u(e,t,n);i.length;)i.shift()();if(n)for(s=0;s<n.length;s++)o=d(d.s=n[s]);return o};var n={},c={9:0};function d(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,d),t.l=!0,t.exports}d.e=function(n){var r=c[n];if(0===r)return new Promise(function(e){e()});if(r)return r[2];var e=new Promise(function(e,t){r=c[n]=[e,t]});r[2]=e;var t=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,d.nc&&a.setAttribute("nonce",d.nc),a.src=d.p+""+n+".9c38194bfaf403e59170.bundle.js";var o=setTimeout(s,12e4);function s(){a.onerror=a.onload=null,clearTimeout(o);var e=c[n];0!==e&&(e&&e[1](new Error("Loading chunk "+n+" failed.")),c[n]=void 0)}return a.onerror=a.onload=s,t.appendChild(a),e},d.m=l,d.c=n,d.d=function(e,t,n){d.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="https://play-static.unity.com/public/assets/Project",d.oe=function(e){throw console.error(e),e}}([function(e,t,n){e.exports=n(8)(154)},function(e,t,n){e.exports=n(8)(12)},function(e,t,n){e.exports=n(8)(121)},function(e,t,n){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(2)),a=u(n(1)),o=u(n(48)),i=u(n(15)),l=u(n(49));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d="";"undefined"!=typeof window&&(d=""+-(new Date).getTimezoneOffset(),l.default.set("utcOffset",d,{expires:7}));var f=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,a.default.Component),p.contextTypes={locale:r.default.string,i18nOverrides:r.default.object,i18nKeyOnly:r.default.string,utcOffset:r.default.string,cookies:r.default.object},s=function(){this.moment=function(){var e=o.default.apply(void 0,arguments);d?e.utcOffset(parseInt(d,10)):this.context.cookies.utcOffset?e.utcOffset(parseInt(this.context.cookies.utcOffset,10)):this.context.utcOffset&&e.utcOffset(parseInt(this.context.utcOffset,10));var t=i.default.MOMENT_LOCALE[this.context.locale];return t&&e.locale(t),e}.bind(this),this.duration=function(){var e=o.default.duration.apply(o.default,arguments),t=i.default.MOMENT_LOCALE[this.context.locale];return t&&e.locale(t),e}.bind(this)},p);function p(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=n=c(this,(e=p.__proto__||Object.getPrototypeOf(p)).call.apply(e,[this].concat(a))),s.call(n),c(n,t)}t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.default)(e);return function(e){return e.prototype.ss=function(){return t.apply(void 0,arguments)},e}};var r,a=n(612),o=(r=a)&&r.__esModule?r:{default:r}},function(e,t,n){e.exports=n(8)(1700)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.i18n=o,t.default=function(n){return function(e){return e.prototype.__=function(e,t){return o(this.context,n,e,t)},e}};var v=a(n(553)),y=a(n(122)),r=a(n(49));function a(e){return e&&e.__esModule?e:{default:e}}var _=/\{.+?}/,b=/[~*_]{2}.+?[~*_]{2}|\[.+?]\(.+?\)|:([^\s:]+?):|\n\n/,w="";function o(e,t,n,r){var a=e.locale,o=e.i18nOverrides,s=e.i18nKeyOnly,i=e.utcOffset,l=e.cookies.utcOffset,u=t[n];if(!u)return n;if(s)return u;var c=w||l||i,d=t.__i18nPlugin||"undefined"!=typeof window&&window.__i18nPlugin;if(a){var f=o&&o[a]&&o[a][u]||d&&d[a]&&d[a][u];if(f){var p=_.test(f),g=!0;r&&r.noMarkDown&&(g=!1);var h=g&&b.test(f);if(p||h)try{var m=(0,v.default)(f,a,c);return h?(0,y.default)(m.format(r),r):m.format(r)}catch(e){return console.error("fail to parse intl message, key: "+u+", result: "+f,e),f}return f}}return n}"undefined"!=typeof window&&(w=""+-(new Date).getTimezoneOffset(),r.default.set("utcOffset",w,{expires:7}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLoading=s,t.isSucceeded=i,t.isFailed=l,t.isInitial=function(e){return e===o.initial},t.isLoadingOrSucceeded=function(e){return s(e)||i(e)},t.isFailedOrSucceeded=function(e){return l(e)||i(e)};var r,a=n(25);var o=(0,((r=a)&&r.__esModule?r:{default:r}).default)({initial:null,succeeded:null,failed:null,inProgress:null});function s(e){return e===o.inProgress}function i(e){return e===o.succeeded}function l(e){return e===o.failed}t.default=o},,function(e,t,n){e.exports=n(8)(973)},function(e,t,n){"use strict";var r=f(n(711)),a=n(475),o=n(179),s=f(n(715)),i=f(n(477)),l=f(n(716)),u=f(n(717)),c=f(n(478)),d=n(476);function f(e){return e&&e.__esModule?e:{default:e}}n(718),e.exports={Editor:r.default,composeDecorators:a.composeDecorators,EditorBlock:o.EditorBlock,EditorState:o.EditorState,BlockMapBuilder:o.BlockMapBuilder,CharacterMetadata:o.CharacterMetadata,ContentBlock:o.ContentBlock,ContentState:o.ContentState,SelectionState:o.SelectionState,Modifier:o.Modifier,RichUtils:o.RichUtils,convertToRaw:o.convertToRaw,convertFromRaw:o.convertFromRaw,genKey:o.genKey,getVisibleSelectionRect:o.getVisibleSelectionRect,isSoftNewlineEvent:s.default,DraftOffsetKey:i.default,setDraftEditorSelection:l.default,getEntityKeyForSelection:u.default,expandRangeToStartOfLine:c.default,createEditorStateWithText:d.createEditorStateWithText,findEditorKey:d.findEditorKey,getSelectionInlineStyle:d.getSelectionInlineStyle,toggleBlockType:d.toggleBlockType,moveAtomicBlockBefore:d.moveAtomicBlockBefore,addEmptyBlockBefore:d.addEmptyBlockBefore,addAtomicBlockBefore:d.addAtomicBlockBefore,isAtomicBlockSelected:d.isAtomicBlockSelected,moveToPrevBlock:d.moveToPrevBlock,moveToNextBlock:d.moveToNextBlock,moveToLastBlock:d.moveToLastBlock,isBlockBeforeAtomic:d.isBlockBeforeAtomic,isBlockAfterAtomic:d.isBlockAfterAtomic,isFocusAtLastLine:d.isFocusAtLastLine,isFocusAtFirstLine:d.isFocusAtFirstLine,isSelectionAtBlockStart:d.isSelectionAtBlockStart,isSelectionAtBlockEnd:d.isSelectionAtBlockEnd,isSelectionAtFirstBlock:d.isSelectionAtFirstBlock,isSelectionAtLastBlock:d.isSelectionAtLastBlock,getLeafOffsetKeyAndOffset:d.getLeafOffsetKeyAndOffset,getLeafBoundingClientRect:d.getLeafBoundingClientRect,getSelectedEntity:d.getSelectedEntity,getSelectedEntityData:d.getSelectedEntityData,addUserMention:d.addUserMention,addLearnMention:d.addLearnMention,mergeAtomicEntityData:d.mergeAtomicEntityData,normalizeValidAtomicBlocks:d.normalizeValidAtomicBlocks,removeAllBlocks:d.removeAllBlocks,isEmptyContent:d.isEmptyContent,normalizeRepostMentions:d.normalizeRepostMentions,normalizeEmbedLinks:d.normalizeEmbedLinks,markTextOverLength:d.markTextOverLength,$editorStateFromText:d.$editorStateFromText,$editorStateFromJSON:d.$editorStateFromJSON}},function(e,t,n){"use strict";var r,a=n(585),o=(r=a)&&r.__esModule?r:{default:r};function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var d=/<iframe.*(\/>|<\/iframe>)/i,f=/\bwidth="(\s|\d)*"/i,p=/\bheight="(\s|\d)*"/i;function i(e,t,n){var r,a=e||{},o=a.width,s=a.height,i=1;0<t&&(i=Math.round(100*t/o)/100),1<n&&(r=Math.round(100*n/s)/100,i=Math.min(i,r));var l=Math.round(o*i),u=Math.round(s*i);return 0<t&&(l=Math.min(l,t)),1<n&&(u=Math.min(u,n)),{width:l,height:u}}var l=/<[^>]+>/g,u=[{reg:/&nbsp;/g,str:" "},{reg:/&lt;/g,str:"<"},{reg:/&gt;/g,str:">"},{reg:/&amp;/g,str:"&"},{reg:/&quot;/g,str:'"'},{reg:/&apos;/g,str:"'"}];function c(e,t){if(!t)return null;var n=t.errorCode,r=t.target,a=t.message,o=[e,n];return r?o.push(r.trim().replace(/(\s|[-:.])+/g,"_")):a&&o.push(a.trim().replace(/(\s|[-:.])+/g,"_")),o.join("_")}e.exports={formatSize:function(e){var t=["Bytes","KB","MB","GB","TB"],n=0,r=0;return 0<e&&(r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),n=(e/Math.pow(1024,r)).toFixed(1)),n+" "+t[r]},formatNumber:function(e){var t=["","K","M"],n=0,r=0;return 0<e&&(n=0<(r=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),t.length-1))?(e/Math.pow(1e3,r)).toFixed(1):Math.round(e/Math.pow(1e3,r))),n+" "+t[r]},formatNumberV2:function(e){return e<1e3?e:e<1e6?Math.sign(e)*(Math.abs(e)/1e3).toFixed(0)+"K":Math.sign(e)*(Math.abs(e)/1e6).toFixed(0)+"M"},getPackageVersionDescription:function(e,t){return e&&e.locales?(e.locales[t]||e.locales.en_US||e.locales[0]).longDescription:null},getCategoryPath:function n(e,r){var a=null;return e.forEach(function(e){var t;e.id===r?a=e.path:!e.categories||(t=n(e.categories,r))&&(a=t)}),a},getCountryData:function(){return{BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BA:"Bosnia and Herzegovina",BB:"Barbados",WF:"Wallis and Futuna",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei",BO:"Bolivia",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BT:"Bhutan",JM:"Jamaica",BV:"Bouvet Island",BW:"Botswana",WS:"Samoa",BQ:"Bonaire, Saint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",JE:"Jersey",BY:"Belarus",BZ:"Belize",RU:"Russia",RW:"Rwanda",RS:"Serbia",TL:"East Timor",RE:"Reunion",TM:"Turkmenistan",TJ:"Tajikistan",RO:"Romania",TK:"Tokelau",GW:"Guinea-Bissau",GU:"Guam",GT:"Guatemala",GS:"South Georgia and the South Sandwich Islands",GR:"Greece",GQ:"Equatorial Guinea",GP:"Guadeloupe",JP:"Japan",GY:"Guyana",GG:"Guernsey",GF:"French Guiana",GE:"Georgia",GD:"Grenada",GB:"United Kingdom",GA:"Gabon",SV:"El Salvador",GN:"Guinea",GM:"Gambia",GL:"Greenland",GI:"Gibraltar",GH:"Ghana",OM:"Oman",TN:"Tunisia",JO:"Jordan",HR:"Croatia",HT:"Haiti",HU:"Hungary",HK:"Hong Kong",HN:"Honduras",HM:"Heard Island and McDonald Islands",VE:"Venezuela",PR:"Puerto Rico",PS:"Palestinian Territory",PW:"Palau",PT:"Portugal",SJ:"Svalbard and Jan Mayen",PY:"Paraguay",IQ:"Iraq",PA:"Panama",PF:"French Polynesia",PG:"Papua New Guinea",PE:"Peru",PK:"Pakistan",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PM:"Saint Pierre and Miquelon",ZM:"Zambia",EH:"Western Sahara",EE:"Estonia",EG:"Egypt",ZA:"South Africa",EC:"Ecuador",IT:"Italy",VN:"Vietnam",SB:"Solomon Islands",ET:"Ethiopia",SO:"Somalia",ZW:"Zimbabwe",SA:"Saudi Arabia",ES:"Spain",ER:"Eritrea",ME:"Montenegro",MD:"Moldova",MG:"Madagascar",MF:"Saint Martin",MA:"Morocco",MC:"Monaco",UZ:"Uzbekistan",MM:"Myanmar",ML:"Mali",MO:"Macao",MN:"Mongolia",MH:"Marshall Islands",MK:"Macedonia",MU:"Mauritius",MT:"Malta",MW:"Malawi",MV:"Maldives",MQ:"Martinique",MP:"Northern Mariana Islands",MS:"Montserrat",MR:"Mauritania",IM:"Isle of Man",UG:"Uganda",TZ:"Tanzania",MY:"Malaysia",MX:"Mexico",IL:"Israel",FR:"France",IO:"British Indian Ocean Territory",SH:"Saint Helena",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Micronesia",FO:"Faroe Islands",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NA:"Namibia",VU:"Vanuatu",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NZ:"New Zealand",NP:"Nepal",NR:"Nauru",NU:"Niue",CK:"Cook Islands",XK:"Kosovo",CI:"Ivory Coast",CH:"Switzerland",CO:"Colombia",CN:"China",CM:"Cameroon",CL:"Chile",CC:"Cocos Islands",CA:"Canada",CG:"Republic of the Congo",CF:"Central African Republic",CD:"Democratic Republic of the Congo",CZ:"Czech Republic",CY:"Cyprus",CX:"Christmas Island",CR:"Costa Rica",CW:"Curacao",CV:"Cape Verde",CU:"Cuba",SZ:"Swaziland",SY:"Syria",SX:"Sint Maarten",KG:"Kyrgyzstan",KE:"Kenya",SS:"South Sudan",SR:"Suriname",KI:"Kiribati",KH:"Cambodia",KN:"Saint Kitts and Nevis",KM:"Comoros",ST:"Sao Tome and Principe",SK:"Slovakia",KR:"South Korea",SI:"Slovenia",KP:"North Korea",KW:"Kuwait",SN:"Senegal",SM:"San Marino",SL:"Sierra Leone",SC:"Seychelles",KZ:"Kazakhstan",KY:"Cayman Islands",SG:"Singapore",SE:"Sweden",SD:"Sudan",DO:"Dominican Republic",DM:"Dominica",DJ:"Djibouti",DK:"Denmark",VG:"British Virgin Islands",DE:"Germany",YE:"Yemen",DZ:"Algeria",US:"United States",UY:"Uruguay",YT:"Mayotte",UM:"United States Minor Outlying Islands",LB:"Lebanon",LC:"Saint Lucia",LA:"Laos",TV:"Tuvalu",TW:"Taiwan",TT:"Trinidad and Tobago",TR:"Turkey",LK:"Sri Lanka",LI:"Liechtenstein",LV:"Latvia",TO:"Tonga",LT:"Lithuania",LU:"Luxembourg",LR:"Liberia",LS:"Lesotho",TH:"Thailand",TF:"French Southern Territories",TG:"Togo",TD:"Chad",TC:"Turks and Caicos Islands",LY:"Libya",VA:"Vatican",VC:"Saint Vincent and the Grenadines",AE:"United Arab Emirates",AD:"Andorra",AG:"Antigua and Barbuda",AF:"Afghanistan",AI:"Anguilla",VI:"U.S. Virgin Islands",IS:"Iceland",IR:"Iran",AM:"Armenia",AL:"Albania",AO:"Angola",AQ:"Antarctica",AS:"American Samoa",AR:"Argentina",AU:"Australia",AT:"Austria",AW:"Aruba",IN:"India",AX:"Aland Islands",AZ:"Azerbaijan",IE:"Ireland",ID:"Indonesia",UA:"Ukraine",QA:"Qatar",MZ:"Mozambique"}},isChild:function(e,t){if(e.hasChildNodes())for(var n=e.children||e.childNodes,r=0;r<n.length;r++)if(n[r]===t)return!0;return!1},isParent:function(e,t){if(null===e||null===t)return!1;for(t=t.parentNode;t!==document.body;){if(t===e)return!0;t=t.parentNode}return!1},buildAssetStoreUrl:function(e){return"https://www.assetstore.unity3d.com/"+e},buildAssetStorePackageUrl:function(e,t){var n,r="en";return!t||0<(n=t.split("_")).length&&n[0]!==r&&(r=n[n.length-1].toLowerCase()),"https://www.assetstore.unity3d.com/"+r+"/#!/content/"+e},toProposalAttachmentUrl:function(e,t){return"/proposal-attachments/"+t+"/"+e},buildGithubUrl:function(e){return"https://github.com/"+e},buildFacebookUrl:function(e){return"https://www.facebook.com/"+e},buildTwitterUrl:function(e){return"https://twitter.com/"+e},buildLinkedinUrl:function(e){return"https://www.linkedin.com/in/"+e},compare:function(e,t){return e.startTime>t.startTime?-1:e.startTime<t.startTime?1:0},buildOutWebsiteUrl:function(e,t){return e?e.startsWith("http")?e:t?"http://"+e:"https://"+e:""},extractName:function(e){return e?(e=e.trim(),/^\W+/.test(e)?e[0]:(t=0<e.indexOf(" ")?" ":",",1<(r=(n=e.split(t)).length)?""+n[0][0]+n[r-1][0]:n[0][0])):"";var t,n,r},validateEmail:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},getHost:function(e){return e?e=(e=(e=(e=e.replace("http://","")).replace("https://","")).split("/")[0]).replace("www.",""):""},normalizeHtml:function(e,t,n){var r=e||{},a=r.html,o=r.width,s=r.height;if(d.test(a)){var i,l=1;0<t&&(l=Math.round(100*t/o)/100),1<n&&(i=Math.round(100*n/s)/100,l=Math.min(l,i));var u=Math.round(o*l),c=Math.round(s*l);return 0<t&&(u=Math.min(u,t)),1<n&&(c=Math.min(c,n)),a.replace(f,'width="'+u+'"').replace(p,'height="'+c+'"')}return a},normalizeImage:function(e,t,n){var r=e||{},a=r.width,o=r.height;return i(e,Math.min(a,t),Math.min(o,n))},normalizeContent:i,arrayEqual:function e(t,n){if(!t)return!1;if(!n)return!1;if(t.length!==n.length)return!1;for(var r=0,a=t.length;r<a;r++)if(t[r]instanceof Array&&n[r]instanceof Array){if(!e(t[r],n[r]))return!1}else if(t[r]!==n[r])return(0,o.default)(t[r],n[2]);return!0},getPreviewText:function(e,t){if(!e)return{};if(t>=e.length||t<=0)return{text:e,isShort:!1};for(var n=t,r=e[n];0<n&&/\w/.test(r);)r=e[--n];return{text:e.substr(0,n||t),isShort:!0}},getPreviewTextV2:function(e,t){var n=/[^\x00-\xff]/g;if(e.replace(n,"mm").length<=t)return{text:e,isShort:!1};for(var r=Math.floor(t/2);r<e.length;r++)if(e.substr(0,r).replace(n,"mm").length>=t)return{text:e.substr(0,r),isShort:!0};return{text:e,isShort:!1}},getDaysFromNumOfUnit:function(e,t,n){if(e&&t&&n){var r=n().subtract(e,t);return n().diff(r,"days")}return 0},getNumOfUnitFromDays:function(e,t){var n,r={num:1,unit:"days"},a=[];return e&&t&&(n=t().subtract(e,"days"),a=["months","weeks","days"].map(function(e){return{num:t().diff(n,e),unit:e}})),(a=a.filter(function(e){return 0<e.num}))&&0<a.length&&(r=a[0]),r},splitTags:function(e){return e?e.trim().split(/\s*[,|，|、]\s*/):[""]},arrayInsert:function(e,t){var n,r=[];return e&&(n=e.findIndex(function(e){return e===t}),r=[].concat(s(e)),n<0&&t&&r.push(t)),r},arrayRemove:function(e,t){var n,r=[];return e&&(n=e.findIndex(function(e){return e===t}),r=[].concat(s(e)),0<=n&&t&&r.splice(n,1)),r},arrayMove:function(e,a,o){if(a===o)return e;var s=e[a];return e.reduce(function(e,t,n){var r=t;return n===o&&(a<o&&(e=e.concat(t),r=s),o<a&&(e=e.concat(s))),n===a?e:e.concat(r)},[])},minWindowWidth:800,getFileIcon:function(e){return"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e||"application/msword"===e?"file-word":"application/pdf"===e?"file-pdf":"file-empty"},pauseEvent:function(e){e.stopPropagation(),e.preventDefault()},timeCompare:function(e,t,n){if(!e)return 1;if(!t)return-1;if(!n)return 0;var r=n(e),a=n(t),o=r.diff(a);return o<0?1:0<o?-1:0},convertHtmlToStr:function(e){if(!e||"string"!=typeof e||""===e)return e;var t=e.replace(l,"");return u.forEach(function(e){t=t.replace(e.reg,e.str)}),t},getUserTitleRole:function(e,t){if(!e||!t)return null;var n,r=e.title,a=e.jobRoleIds,o=r;return a&&0<a.length&&(n=t[a[0]],o=o?r+" - "+n.name:n.name),o},securedURL:function(e){return e?e.startsWith("https://")||e.startsWith("//")?e:e.replace(/^(http:\/\/)?/,"https://"):""},getLangText:function(e){switch(e){case"zh_CN":return"简体中文";case"ja_JP":return"日本語";case"ko_KR":return"한국어";case"ru_RU":return"Русский";case"es_ES":return"Español";case"fr_FR":return"Français";case"de_DE":return"Deutsch";case"pt_PT":return"Português";default:return"English"}},getErrorMsg:c,onError:function(o){return function(e){var t=e.props,n=e.controller,r=t.result,a=c(o,r);a&&n.getSignal("header.showMessage")({message:a})}},contains:function(e,t){return!(!e||0===e.length)&&0<=e.findIndex(function(e){return e===t})},parseCriteria:function(e){var t=(e||{}).k,n=t?JSON.parse(t):[],a={};return n.forEach(function(e,t){var n,r=e.split(":");2===r.length&&((n=a[r[0]]||[]).push({value:r[1],index:t}),a[r[0]]=n)}),a},isUserDeleted:function(e,t){return"Deleted User"===t&&(e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e))},groupLimitations:{pro:"pro",plus:"plus",none:""}}},function(e,t,n){e.exports=n(8)(70)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=d(n(2)),g=d(n(1)),l=d(n(3)),u=d(n(4)),c=d(n(732));function d(e){return e&&e.__esModule?e:{default:e}}var f=(0,u.default)(c.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,l.default),o(h,[{key:"onThisClick",value:function(e){var t=this.props,n=t.onClick,r=t.href;t.loading||(r?this.refs.aTag.click():n&&n(e))}},{key:"renderContent",value:function(){var e=this.props,t=e.label,n=e.loading,r=e.loadingClassName,a=[],o={pointerEvents:"none"};return n&&(a.push(g.default.createElement("div",{key:"loading",className:this.ss("raised-btn-loading-wrap")},g.default.createElement("div",{className:this.ss("raised-btn-loading",r)}))),o.opacity=0,o.cursor="auto"),a.push(g.default.createElement("div",{key:"label",style:o},t)),a}},{key:"render",value:function(){var t=this,e=this.props,n=e.href,r=(e.onClick,e.className),a=e.target,o=e.theme,s=(e.loading,e.loadingClassName,e.size),i=e.widthType,l=e.gaTag,u=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["href","onClick","className","target","theme","loading","loadingClassName","size","widthType","gaTag"]),c=["raised-btn","raised-btn-"+(o||"default"),r,l,s&&"size-"+s,i&&"width-"+i],d=a||"_self",f=void 0;return n&&(f=g.default.createElement("a",{href:n,ref:"aTag",target:d})),g.default.createElement("button",p({},u,{ref:"button",className:this.ss.apply(this,c),onClick:function(e){return t.onThisClick(e)}}),this.renderContent(),f)}}]),(a=h).propTypes={label:i.default.string,className:i.default.string,loadingClassName:i.default.string,gaTag:i.default.string,href:i.default.string,onClick:i.default.func,disabled:i.default.bool,target:i.default.string,loading:i.default.bool,size:i.default.oneOf(["xxsmall","xsmall","small","medium","large","xlarge","xxlarge","new-small","new-medium","new-large","new-xlarge","new-xxlarge"]),theme:i.default.oneOf(["primary","default","secondary","black","thirdly","fourthly","fifthly","red","blue","white","transparent","link","pink","link-border","white-link-border","blue-link-border","gray","purple","header-default","primary-blue","webgl","violet","new-default"]),widthType:i.default.oneOf(["full","auto"])},r=a))||r;function h(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=f(n(2)),E=f(n(1)),u=f(n(3)),O=f(n(471)),C=f(n(186)),c=(f(n(728)),f(n(4))),d=f(n(729)),k=f(n(15));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var I=[200,400,600,800,1e3,1200,1400,1600,1800,2e3],j=["video/x-m4v","video/webm","video/x-ms-wmv","video/x-msvideo","video/3gpp","video/ogg","video/flv","video/x-flv","video/mp4","video/quicktime","video/mpeg","video/ogv"],g=(0,c.default)(d.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,u.default),s(h,[{key:"componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.setState({loaded:!1})}},{key:"render",value:function(){var t,n,r,e=this.props,a=e.src,o=(e.sizes,e.alt),s=e.objectFit,i=e.objectPosition,l=e.placeholderSrc,u=e.gif,c=e.contentType,d=void 0,f=k.default.CDN_URLS.some(function(e){return a&&a.startsWith(e)}),p=a&&a.endsWith(".gif")||u,g=-1!==j.indexOf(c),h=(0,C.default)(O.default&&O.default.ua),d=g?E.default.createElement("video",{className:this.ss("image"),onLoad:this.onLoad,preload:"metadata",style:{objectFit:s,objectPosition:i},src:a}):f?p&&!h?E.default.createElement("picture",{className:this.ss("image"),onLoad:this.onLoad},E.default.createElement("img",{className:"lazyload","data-src":a,alt:o,style:{objectFit:s,objectPosition:i}})):(t=[],I.forEach(function(e){t.push(a+"."+e+"x0x1.webp "+e+"w")}),t=t.join(","),n=a.endsWith(".png"),r=[],I.forEach(function(e){var t=n?".png":".jpg";r.push(a+"."+e+"x0x1"+t+" "+e+"w")}),r=r.join(","),E.default.createElement("picture",{onLoad:this.onLoad},E.default.createElement("img",{className:"lazyload","data-src":a,alt:o,style:{objectFit:s,objectPosition:i}}))):E.default.createElement("picture",{onLoad:this.onLoad},E.default.createElement("img",{className:"lazyload","data-src":a,alt:o,style:{objectFit:s,objectPosition:i}}));d=l&&!this.state.loaded?E.default.createElement("div",{className:this.ss("placeholder-wrapper")},E.default.createElement("picture",null,E.default.createElement("img",{src:l,alt:o,style:{objectFit:s,objectPosition:i}})),E.default.createElement("div",{style:{height:"0",overflow:"hidden"}},d)):E.default.createElement("div",{className:this.ss("placeholder-wrapper")},d);var m=this.props,v=m.width,y=m.height,_=m.maxWidth,b=m.maxHeight;if(0===v||0===y)return d;var w={maxWidth:0!==_?_+"px":"100%",maxHeight:0!==b?b+"px":"100%"},S={paddingBottom:100*y/v+"%"};return E.default.createElement("div",{className:this.ss("image-wrapper"),style:w},E.default.createElement("div",{style:S}),E.default.createElement("div",{className:this.ss("imageholder")},d))}}]),o=a=h,a.propTypes={src:l.default.string.isRequired,gif:l.default.bool,sizes:l.default.string.isRequired,alt:l.default.string,objectFit:l.default.oneOf(["fill","contain","cover","none","scale-down"]),objectPosition:l.default.string,contentType:l.default.string,width:l.default.number,height:l.default.number,maxWidth:l.default.number,maxHeight:l.default.number,placeholderSrc:l.default.string},a.defaultProps={objectFit:"cover",objectPosition:"center center",width:0,height:0,maxWidth:0,maxHeight:0},r=o))||r;function h(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=p(this,(e=h.__proto__||Object.getPrototypeOf(h)).call.apply(e,[this].concat(a)))).state={loaded:!1},n.onLoad=function(){n.state.loaded||n.setState({loaded:!0})},p(n,t)}t.default=g},,function(e,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,a,k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=p(C(2)),I=p(C(1)),l=p(C(3)),j=C(11),M=p(C(22)),T=p(C(14)),u=p(C(4)),c=p(C(730)),d=p(C(6)),f=p(C(731));function p(e){return e&&e.__esModule?e:{default:e}}var g=(0,u.default)(c.default)(n=(0,d.default)(f.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,l.default),o(h,[{key:"render",value:function(){var e,t=this.props,n=t.user,r=t.typing,a=t.size,o=t.status,s=t.shape,i=t.className,l=t.statusClassName,u=t.isFollowed,c=t.nameClassName,d=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["user","typing","size","status","shape","className","statusClassName","isFollowed","nameClassName"]),f=n||{},p=f.avatar,g=f.name,h=f.fullName,m=f.fullname,v=f.username,y=f.anonymous,_=f.isBot,b=p&&0===p.indexOf("data:image"),w=p&&b?{backgroundImage:'url("'+p+'")'}:null,S=null;p||(S=(0,j.isUserDeleted)(v,h)||(0,j.isUserDeleted)(v,m)?I.default.createElement("div",{className:this.ss("name","ifont","ifont-icons-user")}):y?I.default.createElement("div",{className:this.ss("anonymous","ifont","ifont-icons-anonymous")}):(e=g||h||m,I.default.createElement("div",{className:this.ss("name",c)},(0,j.extractName)(e))),"company-card"===a&&(S=I.default.createElement("div",{className:this.ss("name","ifont","ifont-icons-company")})));var E=I.default.createElement("div",{className:this.ss("status","status-"+o,r&&"status-typing",l)},r&&I.default.createElement("div",{className:this.ss("ellipsis")},I.default.createElement("div",null),I.default.createElement("div",null),I.default.createElement("div",null))),O=p&&!b&&I.default.createElement("div",{className:this.ss("image-wrap")},I.default.createElement(T.default,{src:p,sizes:"100px"}));return _&&(O=I.default.createElement("div",{className:this.ss("image-wrap")},I.default.createElement(T.default,{src:C(187),sizes:"100px"})),S=null),I.default.createElement("div",k({},d,{className:this.ss("avatar","avatar-"+a,s,!p&&!y&&"default-bg",i),style:w}),O,S,o&&E,u&&I.default.createElement(M.default,{text:this.__("followed"),position:"bottom"},I.default.createElement("div",{className:this.ss("followed")},I.default.createElement("div",{className:this.ss("check","ifont","ifont-check")}))))}}]),a=r=h,r.propTypes={user:i.default.object.isRequired,typing:i.default.bool,size:i.default.oneOf(["xxxxxsmall","xxxxsmall","xxxsmall","xxsmall","xsmall","xmsmall","small","medium","large","xlarge","xxlarge","xxxlarge","xxxxlarge","message-card","company-card","user-card","message-menu","profile","quick-search","repost","group","group-small","unified-profile","expert-card","suggest","v2-large","v2-medium","v2-small"]),status:i.default.oneOf(["online","offline","idle"]),shape:i.default.oneOf(["circle","square"]),className:i.default.string,nameClassName:i.default.string,statusClassName:i.default.string,isFollowed:i.default.bool},r.defaultProps={typing:!1,size:"small",shape:"circle"},n=a))||n)||n;function h(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=p(r(2)),v=p(r(1)),u=p(r(3)),y=r(24),c=p(r(49)),_=r(26),d=p(r(4)),f=p(r(724));function p(e){return e&&e.__esModule?e:{default:e}}var b=y.presets.noWobble,g=(0,d.default)(f.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,u.default),s(h,[{key:"componentDidMount",value:function(){var t=this;this._handleResize=function(){return t.handleResize()},window.addEventListener("resize",this._handleResize),this._handleMouseMove=function(e){return t.handleMouseMove(e)},this._handleMouseUp=function(e){return t.handleMouseUp(e)},window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp),this.setScrollerWidth(),this.setScrollerState()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._handleResize),window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp),this.setScrollerWidthTimeout&&(clearTimeout(this.setScrollerWidthTimeout),this.setScrollerWidthTimeout=null)}},{key:"getScrollerNode",value:function(){return this.refs.scroller||{}}},{key:"getScrollbarOffset",value:function(){var e=this.dimension,t=e.scrollTop,n=e.offsetHeight,r=e.scrollHeight;if(0===r||r<=n)return 0;if((0,_.isDevice)())return 0;var a=t/(r-n);return(n-this.getScrollbarHeight())*a}},{key:"getScrollbarHeight",value:function(){var e=this.dimension,t=e.offsetHeight,n=e.scrollHeight;return 0===n||n<=t||(0,_.isDevice)()?0:Math.max(14,t/n*t)}},{key:"setScrollerWidth",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:0;this.setScrollerWidthTimeout&&(clearTimeout(this.setScrollerWidthTimeout),this.setScrollerWidthTimeout=null),this.setScrollerWidthTimeout=setTimeout(function(){var e=r(725)();t.state.scrollerWidth!==e&&(t.setState({scrollerWidth:e}),c.default.set("scrollerWidth",e,{expires:7})),t.setScrollerWidth(15e3)},n)}},{key:"setScrollerState",value:function(e){var t,n,r,a,o,s=0<arguments.length&&void 0!==e&&e,i=this.getScrollerNode();i&&(n=(t=this.dimension).scrollTop,r=t.scrollHeight,a=t.offsetHeight,s&&this.props.onScrollEnd&&!this.scrollToEnd(this.dimension)&&this.scrollToEnd(i)&&this.props.onScrollEnd(),o={isScroll:s,scrollTop:i.scrollTop,scrollHeight:i.scrollHeight,offsetHeight:i.offsetHeight},n!==i.scrollTop||r!==i.scrollHeight||a!==i.offsetHeight?(this.dimension={scrollTop:i.scrollTop,scrollHeight:i.scrollHeight,offsetHeight:i.offsetHeight},(0,_.isDevice)()||this.forceUpdate(),this.props.onUpdate&&this.props.onUpdate(o)):s&&this.props.onUpdate&&this.props.onUpdate(o))}},{key:"handleOnScroll",value:function(){this.setScrollerState(!0),this.props.onScroll&&this.props.onScroll(this.getScrollerNode())}},{key:"handleResize",value:function(){this.setScrollerState()}},{key:"handleMouseDown",value:function(e){e.preventDefault();var t=e.pageY;this.setState({isPressed:!0,initialScrollTop:this.dimension.scrollTop,initialPageY:t})}},{key:"handleMouseMove",value:function(e){var t,n,r=e.pageY,a=this.state,o=a.isPressed,s=a.initialScrollTop,i=a.initialPageY,l=this.dimension,u=l.offsetHeight,c=l.scrollHeight;o&&(t=r-i,n=(c-u)/(u-this.getScrollbarHeight()),this.scrollTo(t*n+s))}},{key:"handleMouseUp",value:function(){this.state.isPressed&&this.setState({isPressed:!1})}},{key:"scrollTo",value:function(e,t){var n=this;if(!(1<arguments.length&&void 0!==t&&t)){this.setState({scrollTo:null});var r=this.getScrollerNode();return e<0&&(e=0),e>r.scrollHeight-r.offsetHeight&&(e=r.scrollHeight-r.offsetHeight),void(r.scrollTop!==e?r.scrollTop=e:setTimeout(function(){return n.handleOnScroll()},0))}this.setState({scrollTo:{stepId:this.currentStepId,scrollTop:e}})}},{key:"scrollToEnd",value:function(e){var t=e.scrollTop;return e.scrollHeight-1<=t+e.clientHeight}},{key:"render",value:function(){var e,t,r=this,n=this.props,a=n.className,o=n.theme,s=n.fade,i=n.children,l=n.position,u=this.state,c=u.scrollTo,d=u.scrollerWidth,f=u.isPressed,p={height:this.getScrollbarHeight()+"px",top:this.getScrollbarOffset()+"px"},g=v.default.createElement("div",{className:this.ss("scrollbar")},v.default.createElement("div",{className:this.ss("track")}),v.default.createElement("div",{className:this.ss("thumb"),style:p,onMouseDown:function(e){return r.handleMouseDown(e)}})),h=void 0;c&&c.stepId===this.currentStepId&&(e={scrollTop:this.dimension.scrollTop},t={scrollTop:(0,y.spring)(c.scrollTop,b)},h=v.default.createElement(y.Motion,{defaultStyle:e,style:t},function(e){var t,n=e.scrollTop;return c.stepId===r.currentStepId&&(n===c.scrollTop&&r.currentStepId++,n<0&&(n=0),n>(t=r.getScrollerNode()).scrollHeight-t.offsetHeight&&(n=t.scrollHeight-t.offsetHeight),t.scrollTop!==n?t.scrollTop=n:setTimeout(function(){return r.handleOnScroll()},0)),v.default.createElement("noscript",null)}));var m=50;return this.dimension.offsetHeight&&(0,_.isDevice)()&&(m=d),v.default.createElement("div",{className:this.ss("scroller-wrap",s&&"fade",f&&"isPressed",o)},v.default.createElement("div",{ref:"scroller",className:this.ss("scroller",l,a),style:{marginRight:-m+"px",paddingRight:m-d+"px"},onScroll:function(){return r.handleOnScroll()}},i),g,h)}}]),o=a=h,a.propTypes={onUpdate:l.default.func,className:l.default.string,theme:l.default.string,fade:l.default.bool,children:l.default.any,onScroll:l.default.func,onScrollEnd:l.default.func,position:l.default.oneOf(["top","center","auto"])},a.contextTypes={platform:l.default.object,cookies:l.default.object},a.defaultProps={theme:"dark",fade:!0,position:"auto"},n=o))||n;function h(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var n,r,a,o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,t)),s=0;return o.context.cookies.scrollerWidth?s=parseInt(o.context.cookies.scrollerWidth,10):o.context.platform&&(r=(n=o.context.platform).name,(a=n.os)&&a.family&&-1<a.family.indexOf("Windows")?s="Microsoft Edge"===r?12:17:a&&a.family&&-1<a.family.indexOf("Ubuntu")&&("Firefox"===r?s=15:"Chrome"===r&&(s=13))),o.state={scrollerWidth:s,scrollTo:null},o.dimension={scrollTop:0,scrollHeight:0,offsetHeight:0},o.currentStepId=0,o}t.default=g},function(e,t,n){"use strict";var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=l(n(12)),o=l(n(3)),s=l(n(2)),i=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=d(e,t,void 0);return window.addEventListener("touchstart",n),window.addEventListener("mousedown",n),function(){window.removeEventListener("touchstart",n),window.removeEventListener("mousedown",n)}}function d(s,i,l){return function(e){for(var t=s.map(function(e){return"function"==typeof e&&(e=e()),"string"==typeof e?document.getElementById(e):u.default.findDOMNode(e)}),n=!1,r=!1,a=e.target,o=function(e){return e===a};a;){if(a===document&&(r=!0),t.find(o)){n=!0;break}a=a.parentNode}r&&!n&&i(e),r&&n&&l&&l(e)}}var f=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,o.default),r(p,[{key:"componentDidMount",value:function(){var e=this;this.removeClickOutside=c([this.refs.child],function(){e.props.onClickOutside&&e.props.onClickOutside()})}},{key:"componentWillUnmount",value:function(){this.removeClickOutside()}},{key:"render",value:function(){var e=this.props.children;return i.default.cloneElement(i.default.Children.only(e),{ref:"child"})}}]),p.propTypes={onClickOutside:s.default.func,children:s.default.any},p);function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}e.exports={ClickOutside:function(e,t,n){for(var r=!1,a=!1,o=e.target;o;){if(o===document&&(a=!0),u.default.findDOMNode(t)===o){r=!0;break}o=o.parentNode}a&&!r&&n&&n()},addClickOutside:c,getClickOutside:d,ClickOutsideWrap:f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.location.href=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=Object.freeze(Object.defineProperties(["header.setting.windowHeight"],{raw:{value:Object.freeze(["header.setting.windowHeight"])}})),l=h(n(2)),y=h(n(1)),u=n(5),c=n(0),d=h(n(3)),f=n(24),_=h(n(17)),p=h(n(4)),g=h(n(733));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=f.presets.stiff,b=(0,u.decorator)({windowHeight:(0,c.state)(i)})(r=(0,p.default)(g.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(w,d.default),o(w,[{key:"componentDidMount",value:function(){var t=this;this._handKeyDown=function(e){return t.onKeyDown(e)},window.addEventListener("keydown",this._handKeyDown,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this._handKeyDown,!0)}},{key:"renderDialog",value:function(e){var t=e.backDropOpacity,n=e.modalScale,r=e.modalOpacity,a=this.props,o=a.className,s=a.scrollerClassName,i=a.modalContentClassName,l=a.windowHeight,u=a.noScroller,c=a.position,d=a.backDropHeight,f=a.maxHeight;if(t<.1||r<.1)return null;var p={};0<l&&(p.maxHeight=Math.max(l-128,128));var g=this.props.children,h={opacity:t,height:d||"100%"},m={transform:"scale3d("+n+", "+n+", 1)",opacity:r},v=y.default.createElement(_.default,{className:this.ss(s),position:c},y.default.createElement("div",{className:this.ss("modal-inner-scrollable",i),style:p},g));return u&&(v=y.default.createElement("div",{className:this.ss("modal-inner-scrollable",i),style:p},g)),y.default.createElement("div",null,y.default.createElement("div",{className:this.ss("backdrop"),style:h,onClick:this.onClose}),y.default.createElement("div",{className:this.ss("modal",f&&"max-height")},y.default.createElement("div",{className:this.ss(o,"modal-inner",c),style:m},v)))}},{key:"render",value:function(){var t=this,e=this.props,n=e.noAnimation,r=void 0!==n&&n,a=e.backDropOpacity;if(!0===r){var o=!0===this.props.open?{backDropOpacity:a||.8,modalScale:1,modalOpacity:1}:{backDropOpacity:0,modalScale:.75,modalOpacity:0};return this.renderDialog(o)}var s=this.props.open?{backDropOpacity:(0,f.spring)(a||.8,v),modalScale:(0,f.spring)(1,v),modalOpacity:(0,f.spring)(1,v)}:{backDropOpacity:(0,f.spring)(0,v),modalScale:(0,f.spring)(.75,v),modalOpacity:(0,f.spring)(0,v)};return y.default.createElement(f.Motion,{defaultStyle:{backDropOpacity:0,modalScale:.75,modalOpacity:0},style:s},function(e){return t.renderDialog(e)})}}]),(a=w).propTypes={onCloseModal:l.default.func,open:l.default.bool,children:l.default.any,className:l.default.string,scrollerClassName:l.default.string,modalContentClassName:l.default.string,windowHeight:l.default.number,noScroller:l.default.bool,noAnimation:l.default.bool,position:l.default.oneOf(["center","top"]),backDropOpacity:l.default.number,backDropHeight:l.default.string,maxHeight:l.default.bool,disableBackDrop:l.default.bool},r=a))||r)||r;function w(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=r=m(this,(e=w.__proto__||Object.getPrototypeOf(w)).call.apply(e,[this].concat(a)))).onClose=function(){var e=r.props,t=e.open,n=e.disableBackDrop;t&&!n&&r.props.onCloseModal&&r.props.onCloseModal()},r.onKeyDown=function(e){switch(e.keyCode){case 27:r.onClose()}},m(r,t)}t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chains=t.isValidatingForm=t.isValidForm=t.Form=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.Forms=function(){return(0,s.default)()};var o=v(n(123)),a=n(153),s=v(n(567)),i=v(n(455)),l=v(n(581)),u=v(n(583)),c=v(n(448)),d=v(n(452)),f=v(n(451)),p=v(n(456)),g=v(n(457)),h=v(n(454)),m=v(n(449));function v(e){return e&&e.__esModule?e:{default:e}}o.default.requiredIfFieldEquals=function(e,t,n){var r=n.field,a=n.value;return t[r].value!==a||o.default.isValue(e)},o.default.lessZero=function(e){return!!o.default.isNumeric(e)&&("number"==typeof e?0<=e:0<=parseFloat(e))},o.default.lessOne=function(e){return!!o.default.isNumeric(e)&&("number"==typeof e?1<=e:1<=parseInt(e,10))},o.default.moreHundred=function(e){return!!o.default.isNumeric(e)&&("number"==typeof e?e<=100:parseInt(e,10)<=100)},o.default.maxSkills=function(e){return!(e instanceof Array)||e.length<=10},o.default.isLocation=function(e){return!!(e&&e instanceof Object&&""!==e.country)},o.default.isWebsite=function(e){return!(e&&("string"!=typeof e||!/^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i.test(e)))},o.default.isSocialUrl=function(e,t,n){return!(e&&("string"!=typeof e||!(0,a.testSocialUrl)(n)(e)))},o.default.isAssetstoreUrl=function(e){return!(e&&("string"!=typeof e||!/^(https?:\/\/)?(www\.)?assetstore.unity3d.com\/.+$/i.test(e)))},o.default.isPathOfWebsite=function(e,t,n){var r={applestore:/(https?:\/\/)?(itunes\.)?(apple)\.(com)\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i,googleplay:/(https?:\/\/)?(play\.)?(google)\.(com)\/store\/apps\/details\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i,steam:/(https?:\/\/)?(store\.)?(steampowered)\.(com)\/app\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i,url:/(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i};return!(e&&("string"!=typeof e||!(r[n||"url"]||r.url).test(e)))},o.default.isNotLess=function(e,t,n){return!(t[n].value&&e&&parseInt(t[n].value,10)>parseInt(e,10))},o.default.isNotLarger=function(e,t,n){return!(t[n].value&&e&&parseInt(t[n].value,10)<parseInt(e,10))},o.default.isNotLessThan=function(e,t,n){return!(parseInt(e,10)<parseInt(n,10))},o.default.isHour=function(e){return!e||!!o.default.isNumeric(e)&&("number"!=typeof e&&(e=parseInt(e,10)),0<=e&&e<=23)},o.default.isMinute=function(e){return!e||!!o.default.isNumeric(e)&&("number"!=typeof e&&(e=parseInt(e,10)),0<=e&&e<=59)},o.default.anyUpperCase=function(e){return!(e&&("string"!=typeof e||!/[A-Z]+/g.test(e)))},o.default.anyLowerCase=function(e){return!(e&&("string"!=typeof e||!/[a-z]+/g.test(e)))},o.default.anyNumber=function(e){return!(e&&("string"!=typeof e||!/\d/g.test(e)))},o.default.isScale=function(e){return!!(e&&"object"===(void 0===e?"undefined":r(e))&&"from"in e&&"to"in e)&&!(0===e.from&&!e.to)},o.default.notNullDepends=function(e,t,n){return!(e&&!t[n].value)},o.default.typeInArray=function(e,t,n){if(e&&e instanceof Array)switch(n){case"boolean":return-1!==e.findIndex(function(e){return"boolean"==typeof e});case"number":return-1!==e.findIndex(function(e){return"number"==typeof e});case"object":return-1!==e.findIndex(function(e){return"object"===(void 0===e?"undefined":r(e))});case"string":default:return-1!==e.findIndex(function(e){return"string"==typeof e&&""!==e.trim()})}return!1},o.default.isUdpPackageName=function(e){return!(e&&("string"!=typeof e||!/^([a-z]{1}[a-z\d_]*\.)*[a-z][a-z\d_]*$/.test(e)))},o.default.isPrice=function(e){return!(e&&("string"!=typeof e||!/(^[0-9]\d*(\.\d{1,2})?$)|(^0(\.\d{1,2})?$)/g.test(e)))},o.default.isPositive=function(e){return!e||!!o.default.isNumeric(e)&&("number"==typeof e?0<e:0<parseFloat(e))},o.default.isGameCredit=function(e){return!(e&&("string"!=typeof e||!/(^[1-9]\d*(\.\d{1,8})?$)|(^0(\.\d{1,8})?$)/g.test(e)))},o.default.isApkVersion=function(e){return!(e&&("string"!=typeof e||!/^\d+(\.\d+)+$/g.test(e)))},o.default.isUdpCallbackUrl=function(e){return!(e&&("string"!=typeof e||!/^(https?:\/\/[\w-]+(\.[\w-]+)+(:\d+)?((\/|\/[\w-]+)?)*(\?[\w-]+=[\w-]+((&[\w-]+=[\w-]+)?)*)?)?$/.test(e)))},o.default.isUdpIapSlug=function(e){return!(e&&("string"!=typeof e||!/^[a-z0-9][a-z0-9_.]*$/.test(e)))},o.default.urlInArray=function(e){if(e&&e instanceof Array&&!e.find(function(e){return!e.url}))return!0;return!1},o.default.isSlug=function(e){return null!=e&&/^[\w-]*$/g.test(e)},o.default.isObjectEmpty=function(e){return 0<Object.keys(e||{}).length},o.default.isObjectLength=function(e,t,n){return Object.keys(e||{}).length===n};t.Form=i.default,t.isValidForm=l.default,t.isValidatingForm=u.default,t.chains={fieldAdded:c.default,fieldChanged:d.default,fieldRemoved:f.default,formValidated:p.default,reset:g.default,validate:h.default,addField:m.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=b(["header.tooltips"],["header.tooltips"]),u=b(["header.tooltipShow"],["header.tooltipShow"]),c=b(["header.tooltipHide"],["header.tooltipHide"]),d=y(n(2)),f=y(n(1)),p=y(n(12)),g=y(n(3)),h=n(5),m=n(0),v=n(26);function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var w=0,S=(0,h.decorator)({tooltips:(0,m.state)(l),tooltipShow:(0,m.signal)(u),tooltipHide:(0,m.signal)(c)})((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,g.default),s(E,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.tooltips,r=t.text,a=this.state.tooltipId,o=e.text;n[a]&&r!==o&&this.tooltipShow(o)}},{key:"componentWillUnmount",value:function(){this.tooltipHide()}},{key:"tooltipShow",value:function(e){var t,n,r,a,o,s,i,l,u,c;(0,v.isDevice)()||(n=(t=p.default.findDOMNode(this.refs.child).getBoundingClientRect()).left,r=t.right,a=t.top,o=t.bottom,i=(s=this.props).text,l=s.type,u=s.position,c=s.tooltipShow,c({id:this.state.tooltipId,text:e||i,type:l,position:u,targetWidth:r-n,targetHeight:o-a,left:n,top:a}))}},{key:"tooltipHide",value:function(){var e;(0,v.isDevice)()||(e=this.props.tooltipHide,e({id:this.state.tooltipId}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,a=t.isSpan,o=t.clickToHide;if(!n)return null;var s=f.default.Children.only(n),s=f.default.cloneElement(s,{ref:"child"}),i=a?"span":"div";return f.default.createElement(i,{onMouseOver:function(){return e.tooltipShow()},onMouseOut:function(){return e.tooltipHide()},onClick:function(){return o&&e.tooltipHide()},className:["tooltip-wrapper",r].join(" ")},s)}}]),o=a=E,a.propTypes={text:d.default.oneOfType([d.default.string,d.default.array]).isRequired,type:d.default.oneOf(["normal","success","warning","error"]),position:d.default.oneOf(["top","left","bottom","right","bottom-left"]),isSpan:d.default.bool,clickToHide:d.default.bool,children:d.default.any,className:d.default.string,tooltips:d.default.object,tooltipShow:d.default.func,tooltipHide:d.default.func},a.defaultProps={type:"normal",position:"top",isSpan:!1,clickToHide:!0},r=o))||r;function E(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=_(this,(e=E.__proto__||Object.getPrototypeOf(E)).call.apply(e,[this].concat(a)))).state={tooltipId:(w++).toString()},_(n,t)}t.default=S},function(e,t,n){e.exports=n(8)(1023)},function(e,t,n){e.exports=n(8)(1110)},function(e,t,n){e.exports=n(8)(609)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTouch=function(){return window.matchMedia("screen and (max-width: "+(r-1)+"px)").matches},t.isDesktop=function(){return window.matchMedia("screen and (min-width: "+r+"px)").matches},t.isDevice=function(){return void 0===o?o=a.test(navigator.userAgent):o};var r=1e3;var a=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/,o=void 0},function(e,o,s){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n=s(23),u=(t=n)&&t.__esModule?t:{default:t};var c=["messages","users"],d=["messages","currentUserId"];function f(e,t,n){var r=e[t.id];return(!r||r.id!==t.id||r.fullname!==t.fullname||r.avatar!==t.avatar||t.presenceStatus&&r.presenceStatus!==t.presenceStatus)&&(n.changed||(n.changed=!0,e=u.default.clone(e)),e[t.id]={id:t.id,username:t.username,fullname:t.fullname,avatar:t.avatar,title:t.title||"",coverImage:t.coverImage||"",followCount:t.followCount,likeCount:t.likeCount,isStaff:t.isStaff,presenceStatus:t.presenceStatus||r&&r.presenceStatus},t.isBot&&(e[t.id].isBot=!0)),e}function r(e){var t=e.props,n=e.state,r=t.messages,a=t.parents,o=t.quotes,s=t.parentMessage,i=n.get(c),l={};r.forEach(function(e){var t=e.author,n=e.mentions,r=e.reactions,a=e.replyUsers;i=f(i,t,l),n.forEach(function(e){i=f(i,e,l)}),r.forEach(function(e){i=f(i,e.user,l)}),a.forEach(function(e){i=f(i,e,l)})}),a&&a.forEach(function(e){var t=e.author,n=e.mentions,r=e.reactions,a=e.replyUsers;i=f(i,t,l),n.forEach(function(e){i=f(i,e,l)}),r.forEach(function(e){i=f(i,e.user,l)}),a.forEach(function(e){i=f(i,e,l)})}),o&&o.forEach(function(e){var t=e.author,n=e.mentions,r=e.reactions,a=e.replyUsers;i=f(i,t,l),n.forEach(function(e){i=f(i,e,l)}),r.forEach(function(e){i=f(i,e.user,l)}),a.forEach(function(e){i=f(i,e,l)})}),s&&(i=f(i,s.author,l),s.mentions.forEach(function(e){i=f(i,e,l)}),s.reactions.forEach(function(e){i=f(i,e.user,l)}),s.replyUsers.forEach(function(e){i=f(i,e,l)})),l.changed&&n.set(c,i)}function a(e){var t=e.props,n=e.state,r=t.author,a=t.mentions,o=n.get(c),s={},o=f(o,r,s);a.forEach(function(e){o=f(o,e,s)}),s.changed&&n.set(c,o)}o.default={name:e,depends:[],signals:{channelReady:[function(e){var t=e.props,n=e.state,r=t.userId,a=t.users;n.set(d,r);var o=n.get(c),s=o?l({},o):{},i={changed:!0};a.forEach(function(e){s=f(s,e,i)}),n.set(c,s)}],connectionOpen:[function(e){var t=e.props,n=e.state,r=t.userId,a=t.users;n.set(d,r);var o=n.get(c),s=o?u.default.clone(o):{},i={changed:!0};a.forEach(function(e){s=f(s,e,i)}),n.set(c,s)}],channelCreate:[function(e){var t=e.props,n=e.state,r=t.recipient,a=t.members,o=n.get(c),s={};r&&(o=f(o,r,s)),a&&a.forEach(function(e){o=f(o,e.user,s)}),s.changed&&n.set(c,o)}],channelMemberAdd:[function(e){var t=e.props,n=e.state,r={},a=f(a=n.get(c),t.user,r);r.changed&&n.set(c,a)}],fetchMessagesSuccess:[r],messageCreate:[a],messageUpdate:[function(e){a({props:e.props,state:e.state})}],addMentionUser:[function(e){var t=e.props,n=e.state,r=u.default.clone(t.user),a=n.get(c),o={};a[r.id]||(a=f(a,r,o),o.changed&&n.set(c,a))}],syncChannelMembers:[function(e){var n,r,t=e.props,a=e.state,o=t.result;200===t.status&&o&&(n=a.get(c),r={},o.forEach(function(e){var t=e.user;n=f(n,t,r)}),r.changed&&a.set(c,n))}],syncWorkspaceMembers:[function(e){var n,r,t=e.props,a=e.state,o=t.result;200===t.status&&o&&(n=a.get(c),r={},o.forEach(function(e){var t=e.user;n=f(n,t,r)}),r.changed&&a.set(c,n))}],syncFetchedMentionInfo:[r],syncFetchedStarInfo:[r],syncFetchedReplyInfo:[r],syncSearchMessageResult:[r],syncFetchedReportInfo:[function(e){var t=e.props,n=e.state,r=t.reports,o=n.get(c),s={};r.forEach(function(e){var t=e.reportUser,n=e.message,r=n.author,a=n.mentions;o=f(o,t,s),o=f(o,r,s),a.forEach(function(e){o=f(o,e,s)})}),s.changed&&n.set(c,o)}],idle:[function(e){var t,n,r,a=e.props,o=e.state,s=o.get(d);s&&(t=o.get(c),n={},(r=u.default.clone(t[s])).presenceStatus=a.idle?"idle":"online",t=f(t,r,n),n.changed&&o.set(c,t))}],presenceUpdate:[function(e){var t=e.props,n=e.state,r=t.userId,a=t.status,o=n.get(c),s={},i=u.default.clone(o[r]);i&&(i.presenceStatus=a,o=f(o,i,s),s.changed&&n.set(c,o))}]},getState:function(){return{currentUserId:null,users:{}}},getCurrentUserId:function(e){return e.get(d)},getCurrentUser:function(e){return e.get([].concat(c,[e.get(d)]))},getUsers:function(e){return e.get(c)},getUser:function(e,t){return e.get([].concat(c,[t]))}}}).call(o,"views/v2/modules/messages/UserStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=g(n(2)),A=g(n(1)),u=g(n(3)),D=g(n(20)),R=g(n(13)),c=g(n(4)),d=g(n(734)),f=g(n(6)),p=g(n(735));function g(e){return e&&e.__esModule?e:{default:e}}var h=(0,c.default)(d.default)(r=(0,f.default)(p.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,u.default),s(m,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.titleClass,r=e.error,a=e.children,o=e.width,s=e.onClose,i=e.onSubmit,l=e.submitStyle,u=e.submitText,c=e.closeText,d=e.submitInProgress,f=e.cancelInProgress,p=e.onDelete,g=e.deleteEnable,h=e.showSubmitButton,m=e.buttonTheme,v=e.showCancelButton,y=e.reverseButtonOrder,_=e.onCancel,b=e.showTitleCloseButton,w=e.submitDisable,S=e.buttonWrapClass,E=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["title","titleClass","error","children","width","onClose","onSubmit","submitStyle","submitText","closeText","submitInProgress","cancelInProgress","onDelete","deleteEnable","showSubmitButton","buttonTheme","showCancelButton","reverseButtonOrder","onCancel","showTitleCloseButton","submitDisable","buttonWrapClass"]),O=A.default.createElement("span",{className:this.ss("error")},r),C=o?{width:o}:{},k=u||"yes/no"===l&&this.__("yes")||"ok/cancel"===l&&this.__("ok"),I=c||"yes/no"===l&&this.__("no")||"ok/cancel"===l&&this.__("cancel"),j="blue";m&&(j=m);var M=y?j:"default",T=y?"default":j,P=void 0;return"none"!==l&&(P=A.default.createElement("div",{className:this.ss("button-wrap",y&&"reverse",S)},g&&A.default.createElement("button",{className:this.ss("button-delete"),onClick:function(){return p&&p()}},A.default.createElement("div",{className:this.ss("close","ifont","ifont-icons-trash")})),A.default.createElement("div",{className:this.ss("buttons")},v&&A.default.createElement(R.default,{className:this.ss("button",M),label:I,theme:M,onClick:function(){return _?_():s&&s()},loading:f}),h&&A.default.createElement(R.default,{className:this.ss("button",T),theme:T,label:k,disabled:w,onClick:function(){return i&&i()},loading:d})))),A.default.createElement(D.default,x({},E,{onCloseModal:function(){return s&&s()},className:this.ss("dialog-contents")}),A.default.createElement("div",{ref:"contents",className:this.ss("dialog-contents"),style:C},A.default.createElement("div",{className:this.ss("title-wrap")},A.default.createElement("div",{className:n||this.ss("title")},t||"",r&&O),b&&A.default.createElement("button",{className:this.ss("button-close"),onClick:function(){return s&&s()}},A.default.createElement("div",{className:this.ss("close","ifont","ifont-icon-close2")}))),A.default.createElement("div",{className:this.ss("content")},a),P))}}]),o=a=m,a.propTypes={title:l.default.string,titleClass:l.default.string,children:l.default.any,submitStyle:l.default.oneOf(["yes/no","ok/cancel","none"]),onSubmit:l.default.func,onDelete:l.default.func,onCancel:l.default.func,onClose:l.default.func,deleteEnable:l.default.bool,submitText:l.default.string,closeText:l.default.string,submitInProgress:l.default.bool,cancelInProgress:l.default.bool,showCancelButton:l.default.bool,showTitleCloseButton:l.default.bool,showSubmitButton:l.default.bool,buttonTheme:l.default.string,reverseButtonOrder:l.default.bool,error:l.default.string,width:l.default.number,backDropOpacity:l.default.number,submitDisable:l.default.bool,buttonWrapClass:l.default.string},a.defaultProps={showCancelButton:!0,showSubmitButton:!0,submitStyle:"ok/cancel",showTitleCloseButton:!0},r=o))||r)||r;function m(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.editorKey,o=e.nextEditorKey,s=e.prevEditorKey,n=e.renderOnly,r=e.returnToNextEditor,a=void 0!==r&&r;if(!t)throw new Error("editorKey is empty");function i(e,t){var n,r=e.getState("draft.editorStates."+t);!r||(n=r.getCurrentContent().getFirstBlock())&&(e.getSignal("draft.setEditorEditable")({editorKey:t}),e.getSignal("draft.setEditorState")({editorKey:t,editorState:u.EditorState.forceSelection(r,new u.SelectionState({anchorKey:n.getKey(),anchorOffset:0,focusKey:n.getKey(),focusOffset:0}))}))}function l(e,t){var n,r=e.getState("draft.editorStates."+t);!r||(n=r.getCurrentContent().getLastBlock())&&(e.getSignal("draft.setEditorEditable")({editorKey:t}),e.getSignal("draft.setEditorState")({editorKey:t,editorState:u.EditorState.forceSelection(r,new u.SelectionState({anchorKey:n.getKey(),anchorOffset:"atomic"===n.getType()?0:n.getLength(),focusKey:n.getKey(),focusOffset:"atomic"===n.getType()?0:n.getLength()}))}))}return{keyBindingFn:n?void 0:function(e,t){var n=t.getEditorState,r=t.getProps;if(!e.shiftKey){var a=n();if(37===e.keyCode)if(s&&(0,u.isSelectionAtBlockStart)(a)&&(0,u.isSelectionAtFirstBlock)(a))return l(r().controller,s),"";if(39===e.keyCode)if(o&&(0,u.isSelectionAtBlockEnd)(a)&&(0,u.isSelectionAtLastBlock)(a))return i(r().controller,o),""}},onDownArrow:n?void 0:function(e,t){var n,r=t.getEditorState,a=t.getProps;e.shiftKey||(n=r(),o&&((0,u.isAtomicBlockSelected)(n)||(0,u.isFocusAtLastLine)())&&(0,u.isSelectionAtLastBlock)(n)&&(e.preventDefault(),i(a().controller,o)))},onUpArrow:n?void 0:function(e,t){var n,r=t.getEditorState,a=t.getProps;e.shiftKey||(n=r(),s&&((0,u.isAtomicBlockSelected)(n)||(0,u.isFocusAtFirstLine)())&&(0,u.isSelectionAtFirstBlock)(n)&&(e.preventDefault(),l(a().controller,s)))},handleReturn:n?void 0:a&&function(e,t,n){var r=n.getProps;return o?(i(r().controller,o),"handled"):"not-handled"}}};var u=n(10)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.editorKey,n=e.renderOnly,i=e.registerActionPath;if(!t)throw new Error("editorKey is empty");return{onChange:n?void 0:function(e,t){var n,r,a=t.getEditorState,o=t.getProps,s=a();return s&&s.getCurrentContent()===e.getCurrentContent()||(n=o().controller,r=i||"project.draftChanged",n.getSignal(r)()),e}}}},function(e,p,g){"use strict";(function(e){Object.defineProperty(p,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=Object.freeze(Object.defineProperties(["header.login"],{raw:{value:Object.freeze(["header.login"])}})),n=g(9),r=g(0),u=a(g(15)),c=a(g(19)),d=g(26);function a(e){return e&&e.__esModule?e:{default:e}}var s=["header","login"],i={open:!1};function l(e){var t,n,r=e.props,a=e.state,o=e.controller,s=r.url||a.get("currentUrl"),i=!!r.isReg,l=a.get("loginUser");(0,d.isDevice)()||!0!==u.default.LOGIN_POPUP||null!==l?(t=window&&window.location||{},n=s||t.pathname,null===l?i?(0,c.default)("/auth/signup?redirect_to="+encodeURIComponent(n)):(0,c.default)("/auth/login?redirect_to="+encodeURIComponent(n)):(0,c.default)(n)):o.getSignal("header.openLoginWindow")({url:s,isReg:i})}function f(e){var t=e.state,n=e.path;return t.get("loginUser")?n.yes():n.no()}p.default={name:e,depends:[],signals:{loginTo:[l],openLoginWindow:[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.url,s=t.isReg,i={redirect_to:o||n.get("currentUrl"),locale:n.get("locale")};return s&&(i.is_reg=!0),r.get("/api/authUrl",i).then(a.success).catch(a.error)},{success:[function(e){var t,n=e.props,r=e.state,a=n.result;200===n.status&&a&&(t=a.url,r.set([].concat(s),o({},i,{open:!0,url:t})))}],error:[]}],closeLoginWindow:[(0,n.set)((0,r.state)(t),i)]},getServices:function(){},getState:function(){return{login:i}},LoginRequired:function(e){return[f,{yes:[Array.isArray(e)?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)):[e]],no:[l]}]}}}).call(p,"views/modules/common/header/LoginStore.js")},function(e,f,p){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=o(p(23)),t=o(p(19)),n=o(p(42)),r=o(p(52)),a=o(p(7));function o(e){return e&&e.__esModule?e:{default:e}}var m="messages",v=[m,"channels"];function y(e){return{id:e.id,type:e.type,workspaceId:e.workspaceId||"",recipientId:e.recipient&&e.recipient.id||null,proposalId:e.proposalId||"",projectId:e.projectId||"",ticketId:e.ticketId||"",eventId:e.eventId||"",groupId:e.groupId||"",name:e.name||"",thumbnail:e.thumbnail||"",teamAvatar:e.teamAvatar||"",topic:e.topic||"",isArchived:e.isArchived||!1,readonly:e.readonly||!1,stickTimestamp:e.stickTime||"",isMute:e.isMute||!1,lastMessageId:e.lastMessage?e.lastMessage.id:e.lastMessageId||"",tags:e.tags||[],ticket:e.ticket||null,memberCount:e.memberCount||0,liveChannelId:e.liveChannelId||"",stream:e.stream||"",live:e.live||!1,milestone:e.milestone||[],records:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.records||[])).reverse(),onlineMemberCount:e.onlineMemberCount||null,event:e.event,meetUpEventId:e.meetUpEventId,privateVisible:e.privateVisible,directChannelKey:e.directChannelKey||""}}function s(a){return function(e){var t=e.props,n=e.state,r=t.channelId;n.set("messages.stickStatus."+r,a)}}function i(a){return function(e){var t=e.props,n=e.state,r=t.channelId;n.set("messages.muteStatus."+r,a)}}function u(e){var t=e.controller,n=e.props.result;t.getSignal("messages.channelSelect")({channelId:n.id,workspaceId:n.workspaceId}),t.getSignal("messages.handleChannelScroll")()}function c(t){return function(e){e.state.set("messages.addMember.submitStatus",t)}}function d(e){var t,n=e.props,r=e.state,a=n.channelId,o=n.memberCount,s=r.get([].concat(v,[a]));s&&o&&s.memberCount!==o&&(t=h({},s,{memberCount:o}),r.set([].concat(v,[a]),t))}f.default={name:e,depends:[n.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,r=t.directChannels,a=t.privateChannels,o=t.publicChannels,s=t.ticketChannels,i=t.lobbyChannels,l=t.liveChannels,u=t.groupMap,c=t.skillMap,d=t.languageMap,f=t.placeMap,p=n.get(v),g=p?h({},p):{};r.forEach(function(e){g[e.id]=y(e)}),a.forEach(function(e){g[e.id]=y(e)}),o.forEach(function(e){g[e.id]=y(e)}),s.forEach(function(e){g[e.id]=y(e)}),i.forEach(function(e){g[e.id]=y(e)}),l.forEach(function(e){g[e.id]=y(e)}),n.set(v,g),n.merge([m,"groupMap"],u||{}),n.merge([m,"skillMap"],c||{}),n.merge([m,"languageMap"],d||{}),n.merge([m,"placeMap"],f||{})}],channelCreate:[function(e){var t=e.props,n=e.state;n.set([].concat(v,[t.id]),y(t)),n.merge([m,"groupMap"],t.groupMap||{}),n.merge([m,"skillMap"],t.skillMap||{}),n.merge([m,"languageMap"],t.languageMap||{}),n.merge([m,"placeMap"],t.placeMap||{})}],channelUpdate:[function(e){var t=e.props;e.state.set([].concat(v,[t.id]),y(t))}],channelDelete:[function(e){var t=e.props,n=e.state,r=e.controller,a=n.get("messages.channels")[t.id];a&&"lobby"===a.type&&r.getSignal("messages.openExplore")({workspaceId:a.workspaceId}),n.unset([].concat(v,[t.id]))}],fetchMessagesSuccess:[function(e){var t,n=e.props,r=e.state,a=n.channelId,o=n.messages,s=[].concat(v,[a]),i=r.get(s);i&&(t=!1,o.forEach(function(e){e.id>i.lastMessageId&&(t||(i=l.default.clone(i),t=!0),i.lastMessageId=e.id)}),t&&r.set(s,i))}],messageCreate:[function(e){var t=e.props,n=e.state,r=[].concat(v,[t.channelId]),a=n.get(r);a&&a.lastMessageId<t.id&&"SENDING"!==t.state&&((a=l.default.clone(a)).lastMessageId=t.id,n.set(r,a))}],closeChannel:[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.channelId,s=n.get([].concat(v,[o]));return s&&"direct"===s.type?r.post("/api/channels/"+o+"/close").then(a.success).catch(a.error):a.dummy()},{success:[function(e){var t=e.state,n=e.props,r=e.controller,a=n.channelId,o=t.get([].concat(v,[a]));r.getSignal("messages.channelDelete")(o)}],error:[],dummy:[]}],stickChannel:[s(a.default.inProgress),[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.channelId,s=n.get([].concat(v,[o]));return s&&!s.stickTimestamp?r.post("/api/channels/"+o+"/stick").then(a.success).catch(a.error):a.dummy()},{success:[s(a.default.succeeded),function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelUpdate")(r)}],error:[s(a.default.failed)],dummy:[]}]],unStickChannel:[s(a.default.inProgress),[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.channelId,s=n.get([].concat(v,[o]));return s&&s.stickTimestamp?r.post("/api/channels/"+o+"/unStick").then(a.success).catch(a.error):a.dummy()},{success:[s(a.default.succeeded),function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelUpdate")(r)}],error:[s(a.default.failed)],dummy:[]}]],muteChannel:[i(a.default.inProgress),[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.channelId,s=n.get([].concat(v,[o]));return s&&!s.isMute?r.post("/api/channels/"+o+"/mute").then(a.success).catch(a.error):a.dummy()},{success:[i(a.default.succeeded),function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelUpdate")(r)}],error:[i(a.default.failed)],dummy:[]}]],unMuteChannel:[i(a.default.inProgress),[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.channelId,s=n.get([].concat(v,[o]));return s&&s.isMute?r.post("/api/channels/"+o+"/unMute").then(a.success).catch(a.error):a.dummy()},{success:[i(a.default.succeeded),function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelUpdate")(r)}],error:[i(a.default.failed)],dummy:[]}]],toggleChannelReadonly:[[function(e){var t=e.props,n=e.http,r=e.path,a=t.channelId;return t.value?n.post("/api/channels/"+a+"/makeReadonly").then(r.success).catch(r.error):n.post("/api/channels/"+a+"/cancelReadonly").then(r.success).catch(r.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelUpdate")(r)}],error:[]}]],openProposalChannel:[function(e){var t="/messages/p/"+e.props.proposalId;window.open(t,"_blank")}],createGroupChannel:r.default.EmailRequired([c(a.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.selectedUserIds,o=t.workspaceId;return n.post("/api/workspaces/"+o+"/channels_group",{memberIds:a,name:""}).then(r.success).catch(r.error)},{success:[c(a.default.succeeded),u],error:[c(a.default.failed)]}]]),createDirectChannel:[c(a.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.recipientId,o=t.workspaceId;return n.post("/api/workspaces/"+o+"/channels_direct",{recipientId:a}).then(r.success).catch(r.error)},{success:[c(a.default.succeeded),u],error:[c(a.default.failed)]}]],channelMemberAdd:[d],channelMemberRemove:[d],workspaceDelete:[function(e){var t=e.controller,n=e.props,r=e.state,a=n,o=r.get(v);Object.values(o).forEach(function(e){e.workspaceId===a.id&&t.getSignal("messages.channelDelete")(e)})}],touchChannel:[[function(e){var t=e.controller,n=e.props,r=e.http,a=e.path,o=e.state,s=n.channelId,i=o.get([].concat(v,[s]));return i?(t.getSignal("messages.channelSelect")({channelId:i.id,workspaceId:i.workspaceId}),a.dummy()):r.get("/api/channels/"+s+"/touch").then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelReady")(r)}],error:[],dummy:[]}]],joinChannel:[[function(e){var t=e.controller,n=e.props,r=e.http,a=e.path,o=e.state,s=n.channelId,i=o.get([].concat(v,[s]));return i?(t.getSignal("messages.channelSelect")({channelId:i.id,workspaceId:i.workspaceId}),a.dummy()):r.post("/api/channels/"+s+"/join").then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&r.forEach(function(e){n.getSignal("messages.channelCreate")(e),n.getSignal("messages.channelSelect")({channelId:e.id,workspaceId:e.workspaceId})})}],error:[],dummy:[]}]],channelReady:[function(e){var t=e.props,n=e.state,r=t.normalChannels,a=t.directChannel,o=n.get(v),s=o?h({},o):{};r&&r.forEach(function(e){s[e.id]=y(e)}),a&&(s[a.id]=y(a)),n.set(v,s)}]},getServices:function(){return{locationHref:t.default}},getState:function(){return{channels:{},stickStatus:{},muteStatus:{}}},getChannel:function(e,t){return e.get([].concat(v,[t]))},getLobbyChannel:function(e){var t=e.get(v);return Object.values(t).find(function(e){return"lobby"===e.type})},getChannels:function(e){return e.get(v)},getWorkspaceChannels:function(e,t){var n=e.get(v);return Object.values(n).filter(function(e){return e.workspaceId===t}).reduce(function(e,t){return e[t.id]=t,e},{})}}}).call(f,"views/v2/modules/messages/ChannelStore.js")},function(e,d,y){"use strict";(function(e){Object.defineProperty(d,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w=a(y(23)),g=a(y(41)),h=a(y(79)),S=a(y(34)),E=a(y(616)),m=a(y(80)),v=y(6),c=y(460),O=a(y(27)),n=a(y(81)),s=a(y(124)),l=a(y(35)),C=a(y(42)),u=a(y(32)),k=a(y(461));function a(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function I(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=["messages","channelMessages"],j="fail-message-ids";function M(e){return"failed-message-"+e}function T(c,d){var e,n,t,r,a,o=d.mentionEveryone||d.mentions.some(function(e){var t,n,r,a,o,s,i=c.get("messages.channels."+d.channelId+".type"),l=O.default.getCurrentUserId(c),u=e.id===l;return"ticket"===i&&(n=(t=c.get("messages.channels."+d.channelId)).ticketId,r=t.workspaceId,a=c.get("support.tickets.entities."+n+".data.assignee")||{},s=(o=c.get("messages.workspaces."+r)||{}).botId,a!==l&&o.residentId!==l||(u=e.id===s)),u}),s=C.default.getMember(c,d.channelId,d.author.id),i=s&&("admin"===s.role||"owner"===s.role),l=function(e,t,n,r){var a,o,s,i,l=t.content||"";"call"===t.type?(a=t.call.duration,o=t.author.fullname,s=e.get(),l=a?(0,v.i18n)(s,m.default,"call_is_ended",{fullname:o,noMarkDown:!0}):(0,v.i18n)(s,m.default,"call_is_created",{fullname:o,noMarkDown:!0})):"normal"!==t.type&&(i=e.get(),l=(0,v.i18n)(i,m.default,""+t.type,b({},t.data,{noMarkDown:!0})));var u=g.default.parse(l,!0,{channelId:t.channelId,mentioned:n,authorIsAdmin:r,mentionType:"message",messageId:t.id}),c={};return c[t.author.id]=t.author,t.mentions.forEach(function(e){c[e.id]=e}),{contentParsed:u,contentParsedPlainText:h.default.unparse(l,{users:c})}}(c,d,o,i),u=l.contentParsed,f=l.contentParsedPlainText,p=(d.replyUsers||[]).map(function(e){return e.id});return{id:d.id,type:d.type,call:d.call,channelId:d.channelId,quoteMessageId:d.quoteMessageId||"",parentMessageId:d.parentMessageId||"",authorId:d.author.id,colorString:(t=c,r=d,(a=C.default.getMember(t,r.channelId,r.author.id))&&a.colorString),content:d.content||"",origContent:d.origContent||"",contentParsed:u,contentParsedPlainText:f,attachments:d.attachments,mentions:d.mentions.map(function(e){return e.id}),mentionEveryone:d.mentionEveryone,mentioned:o,timestamp:S.default.extractTimestamp(d.id),editedTimestamp:S.default.extractTimestamp(d.lastEditedId||""),state:d.state||"SENT",nonce:d.nonce,embeds:d.embeds||[],data:d.data,starred:d.starred,reactions:(e=d.reactions||[],n={},e.forEach(function(e){var t=n[e.type]||{};t[e.user.id]={id:e.id,channelId:e.channelId,messageId:e.messageId,type:e.type,updatedTime:e.updatedTime,userId:e.user.id},n[e.type]=t}),n),replyMessageIds:d.replyMessageIds||[],replyUserIds:p,lastReplyTimestamp:S.default.extractTimestamp(d.lastReplyId||""),pending:d.pending,deletedTime:d.deletedTime||""}}var P=(t(i,null,[{key:"getRaw",value:function(e){return e.get(o)}},{key:"get",value:function(e,t){var n=[].concat(o,[t]);return e.get(n)||e.set(n,{channelId:t,ready:!1,hasMore:!1,hasMoreNew:!1,loading:!1,loadingFailed:!1,loadingParams:null,loadingMode:null,scrollMessageId:"",highlightMessageId:"",messagesList:[],messages:{},moreMessageIds:[]}),new i(e,t)}},{key:"clear",value:function(e,t){var n=[].concat(o,[t]);e.unset(n)}}]),t(i,[{key:"getRaw",value:function(){return this.state.get(this.key)}},{key:"setRaw",value:function(e){this.state.set(this.key,e)}},{key:"update",value:function(e){var t=this.getRaw(),n=t.messages[e.id];n&&(n.editedTimestamp<e.editedTimestamp||e.embeds||e.starred!==n.starred||e.reactions!==n.reactions)&&((t=w.default.clone(t)).messages=w.default.clone(t.messages),"SEND_FAILED"===e.state&&(e.state="SENT"),t.messages[e.id]=e,this.setRaw(t))}},{key:"setMessageState",value:function(e,t){var n=this.getRaw(),r=n.messages[e];r&&r.state!==t&&((n=w.default.clone(n)).messages=w.default.clone(n.messages),n.messages[e]=w.default.clone(n.messages[e]),n.messages[e].state=t,this.setRaw(n))}},{key:"setProps",value:function(e){var t=e.ready,n=e.hasMore,r=e.hasMoreNew,a=e.loading,o=e.loadingFailed,s=e.loadingParams,i=e.loadingMode,l=e.scrollMessageId,u=e.highlightMessageId,c=this.getRaw();(c=w.default.clone(c)).ready=void 0!==t?t:c.ready,c.hasMore=void 0!==n?n:c.hasMore,c.hasMoreNew=void 0!==r?r:c.hasMoreNew,c.loading=void 0!==a?a:c.loading,c.loadingFailed=void 0!==o?o:c.loading,c.loadingParams=void 0!==s?s:c.loadingParams,c.loadingMode=void 0!==i?i:c.loadingMode,c.scrollMessageId=void 0!==l?l:c.scrollMessageId,c.highlightMessageId=void 0!==u?u:c.highlightMessageId,this.setRaw(c)}},{key:"replace",value:function(e,t){var n=this.getRaw();n.messages[e]&&((n=w.default.clone(n)).messages=w.default.clone(n.messages),n.messagesList=w.default.clone(n.messagesList),delete n.messages[e],n.messages[t.id]=t,n.messagesList[n.messagesList.indexOf(e)]=t.id,this.setRaw(n))}},{key:"unset",value:function(e){var t=this.getRaw();t.messages[e.id]&&((t=w.default.clone(t)).messages=w.default.clone(t.messages),t.messagesList=w.default.clone(t.messagesList),delete t.messages[e.id],t.messagesList.splice(t.messagesList.indexOf(e.id),1),this.setRaw(t))}},{key:"replaceAfterReSend",value:function(e,t){var n,r=this.getRaw();r.messages[e]&&((r=w.default.clone(r)).messages=w.default.clone(r.messages),r.messagesList=w.default.clone(r.messagesList),delete r.messages[e],r.messages[t.id]=t,n=r.messagesList.indexOf(e),r.messagesList.splice(n,1),-1===r.messagesList.indexOf(t.id)&&r.messagesList.push(t.id),this.setRaw(r))}},{key:"merge",value:function(e,t,n){var r=1<arguments.length&&void 0!==t?t:[],a=2<arguments.length&&void 0!==n&&n,o=w.default.clone(this.getRaw());o.messages=w.default.clone(o.messages),e=e.filter(function(t){var e,n=!!Object.values(o.messages).find(function(e){return e.nonce===t.id});return n||(e=o.messages[t.id])&&e.content===t.content&&0!==(e.embeds||[]).length||(o.messages[t.id]=t),-1===o.messagesList.indexOf(t.id)&&!n}),r.forEach(function(e){o.messages[e.id]=e});var s,i=!1,l=!1;e.length&&(a?(o.messagesList=e.map(function(e){return e.id}).concat(o.messagesList),l=!0):(o.messagesList=o.messagesList.concat(e.map(function(e){return e.id})),i=!0),s=e.reduce(function(e,t){return t.id>e?t.id:e},""),o.moreMessageIds=o.moreMessageIds.filter(function(e){return s<e})),this.setRaw(o),i&&this.truncateOldMessages(),l&&this.truncateNewMessages()}},{key:"reset",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],r=w.default.clone(this.getRaw());r.messagesList=e.map(function(e){return e.id}),r.messages=[].concat(I(e),I(n)).reduce(function(e,t){return e[t.id]=t,e},{}),r.moreMessageIds=[],this.setRaw(r)}},{key:"truncateOldMessages",value:function(e){var t=0<arguments.length&&void 0!==e?e:500,n=this.getRaw(),r=n.messagesList.length-t;if(!(r<=0)){(n=w.default.clone(n)).hasMore=!0,n.messages=w.default.clone(n.messages);for(var a={},o=r;o<n.messagesList.length;o++){var s=n.messagesList[o];a[s]=!0;var i=n.messages[s].parentMessageId;i&&(a[i]=!0)}for(var l=0;l<r;l++){var u=n.messagesList[l];a[u]||delete n.messages[u]}n.messagesList=n.messagesList.slice(r),this.setRaw(n)}}},{key:"truncateNewMessages",value:function(e){var t=0<arguments.length&&void 0!==e?e:500,n=this.getRaw();if(!(n.messagesList.length-t<=0)){(n=w.default.clone(n)).hasMoreNew=!0,n.messages=w.default.clone(n.messages);for(var r={},a=0;a<t;a++){var o=n.messagesList[a];r[o]=!0;var s=n.messages[o].parentMessageId;s&&(r[s]=!0)}for(var i=t;i<n.messagesList.length;i++){var l=n.messagesList[i];r[l]||delete n.messages[l]}n.messagesList=n.messagesList.slice(0,t),this.setRaw(n)}}},{key:"addMoreMessageId",value:function(e){var t=this.getRaw();t.moreMessageIds.includes(e)||((t=w.default.clone(t)).moreMessageIds=t.moreMessageIds.concat([e]),this.setRaw(t))}}]),i);function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.state=e,this.channelId=t,this.key=[].concat(o,[this.channelId])}function p(e){var n=e.props,t=e.state,r=e.http,a=e.controller,o=n.channelId,s=n.before,i=n.after,l=n.around,u=P.get(t,o),c={},d="latest";l?(c={around:l},d="around"):s?(c={before:s},d="before"):i&&(c={after:i},d="after"),u.setProps({loading:!0,loadingFailed:!1,loadingParams:c,loadingMode:d}),"latest"!==d&&"around"!==d||(u.setProps({ready:!1,hasMore:!1,hasMoreNew:!1}),u.reset([])),r.get("/api/channels/"+o+"/messages",c).then(function(e){var t=e.result;a.getSignal("messages.fetchMessagesSuccess")({loadingParams:c,channelId:n.channelId,messages:t.items,hasMore:t.hasMore,hasMoreNew:t.hasMoreNew,parents:t.parents,quotes:t.quotes})},function(){a.getSignal("messages.fetchMessagesError")({loadingParams:c,channelId:n.channelId,error:"request error"})})}d.default={name:e,depends:[n.default,O.default,s.default,C.default,l.default],signals:{channelReady:[function(e){var t=e.props,c=e.state;(t.messagesItems||[]).forEach(function(e){var t=e.hasMore,n=e.items,r=e.parents,a=e.quotes,o=P.get(c,e.channelId);o.setProps({ready:!0,hasMore:t,hasMoreNew:void 0,loading:!1});var s=(0,w.default)(n).reverse().map(function(e){return T(c,e)}).value(),i=r.map(function(e){return T(c,e)}),l=a.map(function(e){return T(c,e)}),u=w.default.sortBy(s,function(e){return e.id});o.merge(u,[].concat(I(i),I(l)),!0)})}],connectionOpen:[function(e){var t=e.state,n=e.props,r=t.get("currentPath"),a=l.default.getChannelId(t),o=P.getRaw(t);!r||-1===r.indexOf("/workspace")&&-1===r.indexOf("/session_detail")||(a=t.get("channelId"));var s=n.lobbyChannels.find(function(e){return e.id===a}),i=s?s.liveChannelId:"";w.default.forEach(o,function(e){e.channelId===a||i&&e.channelId===i||P.clear(t,e.channelId)})}],fetchMessages:[p],fetchMessagesSuccess:[function(e){var n,t,r,a,o,s=e.props,i=e.state,l=s.loadingParams,u=s.channelId,c=s.hasMore,d=s.hasMoreNew,f=s.messages,p=s.parents,g=s.quotes,h=P.get(i,u),m=h.getRaw(),v=m.loading,y=m.loadingParams,_=m.loadingMode;v&&w.default.isEqual(y,l)&&(h.setProps({ready:!!["latest","around"].includes(_)||void 0,hasMore:["latest","around","before"].includes(_)?c:void 0,hasMoreNew:["around","after"].includes(_)?d:void 0,loading:!1}),n=(0,w.default)(f).reverse().map(function(e){return T(i,e)}).value(),t=p.map(function(e){return T(i,e)}),r=g.map(function(e){return T(i,e)}),a=JSON.parse(localStorage.getItem(j)),w.default.forEach(a,function(e){var t=JSON.parse(localStorage.getItem(M(e)));t&&t.channelId===u&&n.push(t)}),o=w.default.sortBy(n,function(e){return e.id}),"latest"===_?h.merge(o,[].concat(I(t),I(r)),!0):"around"===_?h.reset(o,[].concat(I(t),I(r))):"before"===_?h.merge(o,[].concat(I(t),I(r)),!0):"after"===_&&h.merge(o,[].concat(I(t),I(r)),!1))}],fetchMessagesError:[function(e){var t=e.props,n=e.state,r=t.loadingParams,a=t.channelId,o=P.get(n,a),s=o.getRaw(),i=s.loading,l=s.loadingParams;i&&w.default.isEqual(l,r)&&(o.setProps({loading:!1,loadingFailed:!0}),console.log("failed to get messages for channelId "+a+": ",t.error))}],loadMore:[function(e){for(var t=e.props,n=e.state,r=f(e,["props","state"]),a=t.channelId,o=P.get(n,a).getRaw(),s=o.messagesList,i=o.messages,l=void 0,u=0;u<s.length;u++){var c=s[u],d=i[c];if(d&&"SENT"===d.state){l=c;break}}l&&p(b({props:b({},t,{before:l}),state:n},r))}],loadMoreNew:[function(e){for(var t=e.props,n=e.state,r=f(e,["props","state"]),a=t.channelId,o=P.get(n,a).getRaw(),s=o.messagesList,i=o.messages,l=void 0,u=s.length-1;0<=u;u--){var c=s[u],d=i[c];if(d&&"SENT"===d.state){l=c;break}}l&&p(b({props:b({},t,{after:l}),state:n},r))}],channelCreate:[function(e){var t=e.state,n=e.props;P.get(t,n.id)}],channelSelect:[function(e){var t,n,r=e.props,a=e.state,o=e.controller,s=r.channelId,i=u.default.getChannel(a,s);i&&(i.liveChannelId&&((t=P.get(a,i.liveChannelId).getRaw()).loading||(t.ready?t.hasMoreNew||o.getSignal("messages.loadMoreNew")({channelId:i.liveChannelId}):o.getSignal("messages.fetchMessages")({channelId:i.liveChannelId}))),(n=P.get(a,s).getRaw()).loading||(n.ready?n.hasMoreNew||o.getSignal("messages.loadMoreNew")({channelId:s}):o.getSignal("messages.fetchMessages")({channelId:s})))}],channelDelete:[function(e){var t=e.props,n=e.state,r=t.id;P.clear(n,r)}],updateDimensions:[function(e){var t=e.props,n=e.state,r=e.controller,a=t.channelId,o=P.get(n,a).getRaw();o.ready&&!o.loading&&(o.hasMore&&s.default.scrolledToTop(n,a)?r.getSignal("messages.loadMore")({channelId:a}):o.hasMoreNew&&s.default.scrolledToBottom(n,a)&&r.getSignal("messages.loadMoreNew")({channelId:a}))}],messageCreate:[function(e){var t=e.props,n=e.state,r=e.controller,a=t.channelId,o=t.parentMessage,s=t.quotedMessage,i=T(n,t),l=P.get(n,a),u=l.getRaw();u.ready&&u.hasMoreNew?"SENDING"===i.state?r.getSignal("messages.fetchMessages")({channelId:a}):l.addMoreMessageId(i.id):(o&&l.merge([],[T(n,o)]),s&&l.merge([],[T(n,s)]),!(!i.nonce||!u.messages[i.nonce])?l.replace(i.nonce,i):l.merge([i]),i.nonce&&!t.fromAjaxCall&&i.contentParsedPlainText&&"voice"!==i.type&&i.contentParsedPlainText.length<=40&&Object.values((0,c.getPipe)(a)).forEach(function(e){return e(i)}))}],messageUpdate:[function(e){var t=e.props,n=e.state,r=t.channelId,a=T(n,t);P.get(n,r).update(a)}],messageDelete:[function(e){var t=e.props,n=e.state,r=T(n,t),a=r.channelId;P.get(n,a).update(r)}],sendMessage:[function(e){var t=e.props,n=e.state,a=e.controller,r=t.channelId,o=t.content,s=t.parentMessage,i=t.trackingId,l=n.get("messages.channels."+r)||{},u=O.default.getCurrentUser(n),c=n.get("messages.selectedWorkspaceId"),d=n.get("messages.workspaces."+c);!C.default.getMember(n,r,u.id)&&(d.residentId===u.id||"ticket"===l.type&&n.get("support.tickets.entities."+l.ticketId+".data.assignee"===u.id))&&(u=O.default.getUser(n,d.botId));var f,p,g,h,m,v=(f=n,p=r,g=o,h=s?s.id:"",m=u,{id:S.default.createNonce(),type:"normal",channelId:p,author:m||O.default.getCurrentUser(f),parentMessageId:h||"",quoteMessageId:"",replyMessageIds:[],replyUsers:[],lastReplyTimestamp:0,content:g,attachments:[],reactions:[],mentionEveryone:!1,mentions:[],state:"SENDING"}),y=P.get(n,r);s&&y.merge([],[s]);var _=k.default.getPendingQuoteMessage(n,r);_&&(y.merge([],[_]),a.getSignal("messages.unsetPendingQuote")({liveChannelId:r})),a.getSignal("messages.messageCreate")(v),E.default.enqueue({type:"send",message:{channelId:r,content:o,nonce:v.id,parentMessageId:v.parentMessageId,quoteMessageId:_?_.id:null}},function(e){var t,n,r;200===e.status?(t=b({},e.result,{fromAjaxCall:!0}),a.getSignal("messages.messageCreate")(i?b({},t,{trackingId:i}):t)):(n=e&&e.result&&e.result.target,r=e&&e.result&&e.result.errorCode,n&&"ticketChannelClosed"===n?a.getSignal("header.showMessage")({message:"support_ticket_resolved"}):"rate_error"===r?a.getSignal("header.showMessage")({message:e.result.messages}):a.getSignal("messages.sendMessageFailed")(i?b({},v,{trackingId:i}):v))})}],editMessage:[function(e){var t=e.props,n=e.controller,r=t.channelId,a=t.id,o=t.content;E.default.enqueue({type:"edit",message:{channelId:r,content:o,messageId:a}},function(e){200===e.status?(n.getSignal("messages.editMessageEnd")(),n.getSignal("messages.messageUpdate")(e.result)):n.getSignal("messages.editMessageEnd")()})}],editMessageEnd:[function(){}],deleteMessage:[function(e){var t=e.props,n=e.controller,r=t.messageId,a=t.deleteAsAdmin;E.default.enqueue({type:"delete",message:{messageId:r,deleteAsAdmin:a}},function(e){200===e.status?(n.getSignal("messages.deleteMessageEnd")(),n.getSignal("messages.messageUpdate")(e.result)):n.getSignal("messages.deleteMessageEnd")()})}],reSendMessage:[function(e){var t=e.props,n=e.controller,r=e.state,a=t.message,o=JSON.parse(localStorage.getItem(j)),s=o.indexOf(a.id);-1<s&&(o.splice(s,1),localStorage.setItem(j,JSON.stringify(o)),localStorage.removeItem(M(a.id))),P.get(r,a.channelId).unset(a),n.getSignal("messages.sendMessage")({channelId:a.channelId,content:a.content,parentMessageId:a.parentMessageId})}],messageReSendSuccess:[function(e){var t=e.props,n=e.state,r=t.oldMsgId,a=t.newMessage,o=a.channelId,s=T(n,a);P.get(n,o).replaceAfterReSend(r,s)}],sendMessageFailed:[function(e){var t=e.props,n=e.state,r=t,a=P.get(n,r.channelId);a.setMessageState(r.id,"SEND_FAILED");var o,s,i=a.getRaw().messages[r.id];i&&(o=M(r.id),(s=JSON.parse(localStorage.getItem(j))||[]).push(r.id),localStorage.setItem(j,JSON.stringify(s)),localStorage.setItem(o,JSON.stringify(i)))}],chooseMessage:[function(e){var t=e.props,n=e.state,r=t.messageId,a=t.channelId;P.get(n,a).setProps({scrollMessageId:r})}],unsetScrollMessage:[function(e){var t=e.props,n=e.state,r=t.channelId;P.get(n,r).setProps({scrollMessageId:""})}],setHighlightMessageId:[function(e){var t=e.props,n=e.state,r=t.channelId,a=t.messageId;P.get(n,r).setProps({highlightMessageId:a})}],unsetHighlightMessageId:[function(e){var t=e.props,n=e.state,r=t.channelId;P.get(n,r).setProps({highlightMessageId:""})}]},getState:function(){return{channelMessages:{}}},getMessages:function(e,t){return e.get([].concat(o,[t]))},getMessage:function(e,t,n){var r=this.getMessages(e,t);return r&&r.messages&&r.messages[n]},transformMessage:T}}).call(d,"views/v2/modules/messages/MessageStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(615),o=(r=a)&&r.__esModule?r:{default:r};var s=Date.UTC(2016,0,1),i=o.default.fromNumber(1);t.default={extractTimestamp:function(e){return e?o.default.fromString(e,!0,16).shiftRight(22).add(o.default.fromNumber(s)).toNumber():0},createNonce:function(){for(var e=o.default.fromNumber(Date.now()).subtract(s).add(i).shiftLeft(22).subtract(i).toString(16);e.length<16;)e="0"+e;return e}}},function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t(o(32)),r=t(o(55));function t(e){return e&&e.__esModule?e:{default:e}}var u=["messages","selectedChannelIds"],a=["messages","needScrollTicker"];n.default={name:e,depends:[i.default],signals:{channelReady:[function(e){var t=e.state,n=e.props,r=e.controller,a=n.workspace,o=n.channelId,s=t.get(u),i=s?l({},s):{};i[a.id]=o,t.set(u,i),r.getSignal("messages.channelSelect")({channelId:o,workspaceId:a.id})}],connectionOpen:[function(e){var t=e.state,n=e.props.workspaces,r=t.get(u),a=r?l({},r):{};n.forEach(function(e){a[e.id]||(a[e.id]="")}),t.set(u,a)}],channelSelect:[function(e){var t=e.controller,n=e.props,r=e.state,a=n.channelId,o=n.workspaceId;r.get([].concat(u,[o]))!==a&&i.default.getChannel(r,a)&&r.set([].concat(u,[o]),a);var s=i.default.getChannel(r,a);s&&s.ticketId&&t.getSignal("support.getTicket")({id:s.ticketId})}],channelUnselect:[function(e){var t=e.state,n=e.props.workspaceId;t.get([].concat(u,[n]))&&t.set([].concat(u,[n]),"")}],channelDelete:[function(e){var t=e.props,n=e.state,r=e.controller,a=t;n.get([].concat(u,[a.workspaceId]))===a.id&&r.getSignal("messages.channelUnselect")({workspaceId:a.workspaceId})}],handleChannelScroll:[function(e){var t=e.state,n=t.get(a);t.set(a,n+1)}],openExplore:[function(e){var t=e.controller,n=e.props.workspaceId;t.getSignal("messages.channelUnselect")({workspaceId:n})}],openSupportTickets:[function(e){var t=e.controller,n=e.props.workspaceId;t.getSignal("messages.channelUnselect")({workspaceId:n})}],workspaceCreate:[function(e){var t=e.props;e.state.set([].concat(u,[t.id]),"")}],workspaceDelete:[function(e){var t=e.props,n=e.state,r=t;n.get([].concat(u,[r.id]))&&n.unset([].concat(u,[r.id]))}]},getState:function(){return{selectedChannelIds:{},needScrollTicker:0}},getChannelId:function(e,t){var n=(n=1<arguments.length&&void 0!==t?t:null)||r.default.getWorkspaceId(e);return e.get([].concat(u,[n]))}}}).call(n,"views/v2/modules/messages/SelectedChannelStore.js")},function(e,t,n){e.exports=n(8)(917)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=m(n(2)),O=m(n(1)),u=m(n(3)),c=m(n(12)),C=m(n(7)),d=n(480),f=m(n(4)),p=m(n(736)),g=m(n(6)),h=m(n(737));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(0,f.default)(p.default)(r=(0,g.default)(h.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_,u.default),s(_,[{key:"componentDidMount",value:function(){this.setFocus(this.props.autoFocus)}},{key:"componentWillReceiveProps",value:function(e){var t=e.value;t!==this.props.value&&this.setInputValue(t)}},{key:"onSave",value:function(){this.props.onSave&&this.props.onSave(this.state.value),this.props.autoClear&&this.onClearInput()}},{key:"onClear",value:function(e){this.props.onClear&&this.props.onClear(e),this.props.onChange&&this.props.onChange(null,""),this.props.onSave&&this.props.onSave(""),this.onClearInput()}},{key:"onFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e),this.setState({focus:!0})}},{key:"onBlur",value:function(e){this.props.onBlur?this.props.onBlur(e):this.onSave(),this.setState({focus:!1});try{(0,d.weiXinScrollIntoView)()}catch(e){console.error(e)}}},{key:"onChange",value:function(e){var t,n=e.target.value,r="";r="number"===this.props.type&&this.hasValue(n)?(t=this.__("numberOutput",{value:n}),this.hasValue(t)&&t.toString()||""):n,this.setState({value:r}),this.props.onChange&&this.props.onChange(e,r)}},{key:"onKeyDown",value:function(e){e&&e.stopPropagation();var t=e.keyCode;switch(this.props.onKeyDown&&this.props.onKeyDown(e),t){case 13:this.onSave();break;case 27:this.onClear()}}},{key:"onClearInput",value:function(){this.setInputValue("")}},{key:"setInputValue",value:function(e){this.setState({value:e})}},{key:"setFocus",value:function(e){var t=c.default.findDOMNode(this.refs.input);e&&t&&setTimeout(function(){return t.focus()},100)}},{key:"getNotice",value:function(){var e=this.props.errorText;return(e?{text:e,type:C.default.failed}:null)||this.props.notice||{}}},{key:"getText",value:function(){return this.refs.input.value}},{key:"getValue",value:function(e){return this.hasValue(e)?e:""}},{key:"hasValue",value:function(e){return""!==e&&null!=e}},{key:"focus",value:function(){var e=this.refs.input;e&&e.focus()}},{key:"renderNoticeText",value:function(){var e=this.props,t=e.noticeClassName,n=e.noticePosition,r=this.getNotice(),a=r.text,o=r.type;if(!o)return null;var s=["notice",t,n,o,this.state.hide&&"hide"];return O.default.createElement("div",{className:this.ss.apply(this,s)},a||this.__(o))}},{key:"render",value:function(){var t=this,e=this.props,n=e.type,r=e.className,a=e.iconName,o=e.iconClassName,s=e.inputClassName,i=e.closeIconClassName,l=e.borderClassName,u=(e.noticeClassName,e.noticePosition,e.disabled),c=(e.autoFocus,e.autoClear,e.errorText,e.onSave,e.onClear,e.notice,e.theme),d=e.showNoticeText,f=e.readOnly,p=e.focusTheme,g=e.rightHint,h=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["type","className","iconName","iconClassName","inputClassName","closeIconClassName","borderClassName","noticeClassName","noticePosition","disabled","autoFocus","autoClear","errorText","onSave","onClear","notice","theme","showNoticeText","readOnly","focusTheme","rightHint"]),m=this.state.value,v="number"===n&&this.hasValue(m)?this.__("numberInput",{value:m}):this.getValue(m),y=O.default.createElement("div",{className:this.ss(o,"icon","ifont","ifont-"+a)}),_="small"===c,b=O.default.createElement("div",{className:this.ss(i,"close","ifont","ifont-icon-close"),onClick:function(e){return t.onClear(e)}}),w=["input-wrap",u&&"disabled",this.getNotice().type===C.default.failed&&"failed",l];this.state.focus&&w.push("active-"+p);var S=O.default.createElement("div",{key:"input",className:this.ss.apply(this,w),onClick:function(){return t.focus()}},a&&y,O.default.createElement("input",E({},h,{className:this.ss("input",s),type:"number"!==n&&n||"text",value:v,disabled:u,readOnly:f,onChange:function(e){return t.onChange(e)},onKeyDown:function(e){return t.onKeyDown(e)},onFocus:function(e){return t.onFocus(e)},onBlur:function(e){return t.onBlur(e)},ref:"input"})),!_&&!u&&!f&&this.hasValue(m)&&b,g&&O.default.createElement("div",{className:this.ss("right-hint")},g));return O.default.createElement("div",{className:this.ss("text-input",r,"theme-"+c)},S,d&&this.renderNoticeText())}}]),o=a=_,a.propTypes={type:l.default.string,value:l.default.oneOfType([l.default.string,l.default.number,l.default.array]),iconName:l.default.string,className:l.default.string,iconClassName:l.default.string,inputClassName:l.default.string,borderClassName:l.default.string,closeIconClassName:l.default.string,noticeClassName:l.default.string,showNoticeText:l.default.bool,errorText:l.default.any,autoFocus:l.default.bool,autoClear:l.default.bool,disabled:l.default.bool,readOnly:l.default.bool,onSave:l.default.func,onChange:l.default.func,onClear:l.default.func,onFocus:l.default.func,onBlur:l.default.func,onKeyDown:l.default.func,notice:l.default.shape({text:l.default.string,type:l.default.oneOf(["",C.default.initial,C.default.inProgress,C.default.succeeded,C.default.failed])}),theme:l.default.oneOf(["small","transparent","dark","light"]),noticePosition:l.default.oneOf(["right","bottom"]),focusTheme:l.default.oneOf(["blue-green","primary-blue"]),rightHint:l.default.string},a.defaultProps={noticePosition:"right",showNoticeText:!0,theme:"dark",focusTheme:"blue-green"},r=o))||r)||r;function _(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=v(this,(e=_.__proto__||Object.getPrototypeOf(_)).call.apply(e,[this].concat(a)))).state={value:n.getValue(n.props.value)},v(n,t)}t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setUserProperties=t.isAmplitudeInitialized=t.amplitudeEvents=t.USER_ROLES=t.USER_PROPERTIES=void 0;var r,a=n(960),o=(r=a)&&r.__esModule?r:{default:r};function s(t){return(0,o.default)(function(e){window.amplitude&&window.amplitude.getInstance().logEvent(t,e)},250,{leading:!0,trailing:!1})}var i=t.USER_PROPERTIES={ROLE:"role",LAST_SEEN:"lastSeen",FIRST_SEEN:"firstSeen",NUMBER_OF_SESSIONS:"numberOfSessions"},l=(t.USER_ROLES={ADMIN:"ADMIN",CUSTOMER:"CUSTOMER"},t.amplitudeEvents={newSession:s("CORE/NEW_SESSION"),headerUnityLogoClick:s("CORE/HEADER/UNITY_LOGO_CLICK"),headerAboutClick:s("CORE/HEADER/ABOUT_CLICK"),headerMessagesClick:s("CORE/HEADER/MESSAGES_CLICK"),headerNotificationsClick:s("CORE/HEADER/NOTIFICATIONS_CLICK"),headerPostProjectClick:s("CORE/HEADER/POST_PROJECT_CLICK"),applicationSwitcherClick:s("CORE/HEADER/APPLICATION_SWITCHER_CLICK"),applicationSwitcherDashboardClick:s("CORE/HEADER/APPLICATION_SWITCHER/DASHBOARD_CLICK"),applicationSwitcherAssetStoreClick:s("CORE/HEADER/APPLICATION_SWITCHER/ASSET_STORE_CLICK"),applicationSwitcherAnswersClick:s("CORE/HEADER/APPLICATION_SWITCHER/ANSWERS_CLICK"),applicationSwitcherForumClick:s("CORE/HEADER/APPLICATION_SWITCHER/FORUM_CLICK"),applicationSwitcherDistributeClick:s("CORE/HEADER/APPLICATION_SWITCHER/DISTRIBUTE_CLICK"),applicationSwitcherLearnClick:s("CORE/HEADER/APPLICATION_SWITCHER/LEARN_CLICK"),howToPageView:s("CORE/PAGE_VIEW/HOW_TO"),howToGetUnityClick:s("CORE/HOW_TO/GET_UNITY"),howToGetUnityAccept:s("CORE/HOW_TO/GET_UNITY/ACCEPT"),howToStartHerePlayVideo:s("CORE/HOW_TO/START_HERE/VIDEO_PLAY"),howToDownloadHub:s("CORE/HOW_TO/DOWNLOAD_HUB"),howToDownloadHubAccept:s("CORE/HOW_TO/DOWNLOAD_HUB/ACCEPT"),howToLearnVideoPlay:s("CORE/HOW_TO/LEARN/VIDEO_PLAY"),howToLearnHowCta:s("CORE/HOW_TO/LEARN_HOW"),howToGalleryItemClick:s("CORE/HOW_TO/GALLERY/ITEM_CLICK"),howToParticipateNowCta:s("CORE/HOW_TO/PARTICIPATE_NOW"),howToShowcasesVideoPlay:s("CORE/HOW_TO/SHOWCASES/VIDEO_PLAY"),howToJoinDiscord:s("CORE/HOW_TO/JOIN_DISCORD"),howToGetSupport:s("CORE/HOW_TO/GET_SUPPORT"),howToShareInsight:s("CORE/HOW_TO/SHARE_INSIGHTS"),homePageView:s("CORE/PAGE_VIEW/HOME"),homeAllChallengesPageView:s("CORE/PAGE_VIEW/HOME/ALL_SHOWCASES"),homeAllChallengesItemClick:s("CORE/PAGE_VIEW/HOME/ALL_SHOWCASES/ITEM_CLICK"),homeFeaturedPageView:s("CORE/PAGE_VIEW/HOME/FEATURED"),homeTrendingPageView:s("CORE/PAGE_VIEW/HOME/TRENDING"),homeFreshPageView:s("CORE/PAGE_VIEW/HOME/FRESH"),homeMyGamesPageView:s("CORE/PAGE_VIEW/HOME/MY_GAMES"),homeBannerClick:s("CORE/HOME/BANNER_CLICK"),homeGetUnityClick:s("CORE/HOME/GET_UNITY"),homeGetUnityAccept:s("CORE/HOME/GET_UNITY/ACCEPT"),homeStartCreatingClick:s("CORE/HOME/START_CREATING"),homeChallengesItemClick:s("CORE/HOME/CHALLENGES/ITEM_CLICK"),homeChallengesAllClick:s("CORE/HOME/CHALLENGES/ALL_CLICK"),homeFeaturedItemClick:s("CORE/HOME/FEATURED/ITEM_CLICK"),homeFeaturedAllClick:s("CORE/HOME/FEATURED/ALL_CLICK"),homeTrendingItemClick:s("CORE/HOME/TRENDING/ITEM_CLICK"),homeTrendingAllClick:s("CORE/HOME/TRENDING/ALL_CLICK"),homeFreshItemClick:s("CORE/HOME/FRESH/ITEM_CLICK"),homeFreshAllClick:s("CORE/HOME/FRESH/ALL_CLICK"),homeMyGamesItemClick:s("CORE/HOME/MY_GAMES/ITEM_CLICK"),homeMyGamesAllClick:s("CORE/HOME/MY_GAMES/ALL_CLICK"),webglEditMadeWithChosen:s("CORE/WEBGL_EDIT/MADE_WITH/CHOSEN"),webglDetailPageView:s("CORE/PAGE_VIEW/WEBGL_DETAIL"),webglDetailChallengeBannerNotNow:s("CORE/WEBGL_DETAIL/CHALLENGE_BANNER/NOT_NOW"),webglDetailChallengeBannerJoin:s("CORE/WEBGL_DETAIL/CHALLENGE_BANNER/JOIN"),webglDetailRecommendedItemClick:s("CORE/WEBGL_DETAIL/RECOMMENDED/ITEM_CLICK"),webglDetailMadeWithUnityClick:s("CORE/WEBGL_DETAIL/MADE_WITH/UNITY"),webglDetailMadeWithMicrogameClick:s("CORE/WEBGL_DETAIL/MADE_WITH/MICROGAME"),webglDetailCustomMadeWithClick:s("CORE/WEBGL_DETAIL/MADE_WITH/CUSTOM"),webglDetailCommentCreated:s("CORE/WEBGL_DETAIL/COMMENTS/CREATED"),webglDetailCommentLikeClick:s("CORE/WEBGL_DETAIL/COMMENTS/LIKE_CLICK"),webglDetailCommentReplyClick:s("CORE/WEBGL_DETAIL/COMMENTS/REPLY_CLICK"),webglDetailReplyCommentCreated:s("CORE/WEBGL_DETAIL/COMMENTS/REPLY_COMMENT/CREATED"),webglDetailAuthorClick:s("CORE/WEBGL_DETAIL/WEBGL/AUTHOR_CLICK"),webglDetailEditClick:s("CORE/WEBGL_DETAIL/WEBGL/EDIT_CLICK"),webglDetailReportClick:s("CORE/WEBGL_DETAIL/WEBGL/REPORT_CLICK"),webglDetailDeleteClick:s("CORE/WEBGL_DETAIL/WEBGL/DELETE_CLICK"),webglDetailLikeClick:s("CORE/WEBGL_DETAIL/WEBGL/LIKE_CLICK"),webglDetailShareEmbedClick:s("CORE/WEBGL_DETAIL/SHARE/EMBED_CLICK"),webglDetailShareMailClick:s("CORE/WEBGL_DETAIL/SHARE/MAIL_CLICK"),webglDetailShareMessengerClick:s("CORE/WEBGL_DETAIL/SHARE/MESSENGER_CLICK"),webglDetailShareTwitterClick:s("CORE/WEBGL_DETAIL/SHARE/TWITTER_CLICK"),webglDetailShareFacebookClick:s("CORE/WEBGL_DETAIL/SHARE/FACEBOOK_CLICK"),webglDetailShareRedditClick:s("CORE/WEBGL_DETAIL/SHARE/REDDIT_CLICK"),webglDetailShareCopyClick:s("CORE/WEBGL_DETAIL/SHARE/COPY_CLICK"),webglDetailFullscreenClick:s("CORE/WEBGL_DETAIL/PLAYER/FULLSCREEN_CLICK"),webglDetailUnmuteClick:s("CORE/WEBGL_DETAIL/PLAYER/UNMUTE_CLICK"),webglDetailScreenshotCommentClick:s("CORE/WEBGL_DETAIL/PLAYER/SCREENSHOT_COMMENT_CLICK"),webglDetailRecordClick:s("CORE/WEBGL_DETAIL/PLAYER/RECORD_CLICK"),webglDetailPauseRecordingClick:s("CORE/WEBGL_DETAIL/PLAYER/PAUSE_RECORDING_CLICK"),webglDetailStopRecordingClick:s("CORE/WEBGL_DETAIL/PLAYER/STOP_RECORDING_CLICK"),webglDetailAcceptRecordingClick:s("CORE/WEBGL_DETAIL/PLAYER/ACCEPT_RECORDING_CLICK"),webglDetailRetryRecordingClick:s("CORE/WEBGL_DETAIL/PLAYER/RETRY_RECORDING_CLICK"),webglDetailPlayClick:s("CORE/WEBGL_DETAIL/PLAYER/PLAY_CLICK"),webglDetailDownloadClick:s("CORE/WEBGL_DETAIL/MADE_WITH/UNITY/DOWNLOAD"),webglDetailEnableMobile:s("CORE/WEBGL_DETAIL/GAME/EDIT/MOBILE/ENABLE"),webglDetailDisableMobile:s("CORE/WEBGL_DETAIL/GAME/EDIT/MOBILE/DISABLE"),assetUnlockGetAssetClicked:s("CORE/ASSET_UNLOCK/ACTIONS/GET_ASSET_CLICKED"),assetUnlockNotNowClicked:s("CORE/ASSET_UNLOCK/ACTIONS/NOT_NOW_CLICKED"),assetUnlockFirstAndThirdKartingDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/KARTING/FIRST_AND THIRD"),assetUnlockFirstKartingDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/KARTING/FIRST"),assetUnlockSecondKartingDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/KARTING/SECOND"),assetUnlockThirdKartingDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/KARTING/THIRD"),assetUnlockFirstAndThirdFpsDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/FPS/FIRST_AND THIRD"),assetUnlockFirstFpsDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/FPS/FIRST"),assetUnlockSecondFpsDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/FPS/SECOND"),assetUnlockThirdFpsDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/FPS/THIRD"),assetUnlockFirstAndThirdLegoDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/LEGO/FIRST_AND THIRD"),assetUnlockFirstLegoDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/LEGO/FIRST"),assetUnlockSecondLegoDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/LEGO/SECOND"),assetUnlockThirdLegoDisplayed:s("CORE/ASSET_UNLOCK/DISPLAYED/LEGO/THIRD"),downloadTermDialogAgreeAndDownload:s("CORE/WEBGL_DETAIL/MADE_WITH/UNITY/DOWNLOAD/ACCEPT")});t.isAmplitudeInitialized=function(){return!!window.amplitude&&window.amplitude.getInstance()._isInitialized},t.setUserProperties=function(e){var t,n;e&&(t=new window.amplitude.Identify,(n=window.amplitude.getInstance()).setUserId(e.id),t.set(i.ROLE,e.role).set(i.LAST_SEEN,(new Date).toISOString()).setOnce(i.FIRST_SEEN,(new Date).toISOString()),window.amplitude.isNewSession()&&(t.add(i.NUMBER_OF_SESSIONS,1),l.newSession()),n.identify(t))}},function(e,t,n){"use strict";e.exports=function(e){return Array.isArray(e)||(e=e.split(".")),e}},function(e,t,n){"use strict";var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=(r(i,[{key:"get",value:function(e){var t=localStorage.getItem(e);try{t=JSON.parse(t)}catch(e){}return t}},{key:"set",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"clear",value:function(){localStorage.clear()}}]),i);function i(){o(this,i)}var l=(r(u,[{key:"get",value:function(e){return this.storage[e]}},{key:"set",value:function(e,t){this.storage[e]=t}},{key:"remove",value:function(e){delete this.storage[e]}},{key:"clear",value:function(){this.storage={}}}]),u);function u(){o(this,u),this.storage={}}e.exports=new(function(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),1}catch(e){return}}()?s:l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=r(n(1)),a=n(152),s=r(a),l=r(n(459)),u=r(n(611));function r(e){return e&&e.__esModule?e:{default:e}}n(614);var c={newline:a.defaultRules.newline,paragraph:o({},a.defaultRules.paragraph,{react:function(e,t,n){return i.default.createElement("p",{key:n.key},t(e.content,n))}}),escape:a.defaultRules.escape,link:o({},a.defaultRules.link,{react:function(e,t,n){return i.default.createElement("a",{key:n.key,href:s.default.sanitizeUrl(e.target),title:e.title,target:"_blank",rel:"noopener noreferrer"},t(e.content,n))}}),autolink:a.defaultRules.autolink,mailto:a.defaultRules.mailto,url:a.defaultRules.url,strong:a.defaultRules.strong,em:a.defaultRules.em,u:a.defaultRules.u,s:{order:a.defaultRules.u.order,match:s.default.inlineRegex(/^~~([\s\S]+?)~~(?!_)/),parse:a.defaultRules.u.parse,react:function(e,t,n){return i.default.createElement("s",{key:n.key},t(e.content,n))}},text:a.defaultRules.text,inlineCode:o({},a.defaultRules.inlineCode,{react:function(e,t,n){return i.default.createElement("code",{key:n.key,className:"inline"},e.content)}}),codeBlock:{order:a.defaultRules.codeBlock.order,match:function(e){return/^```(([A-z0-9-]+?)\n+)?\n*?([^]+?)```/.exec(e)},parse:function(e){return{lang:(e[2]||"").trim(),content:(e[3]||"").trim()}},react:function(e,t,n){if(e.lang&&l.default.getLanguage(e.lang)){var r=l.default.highlight(e.lang,e.content);return i.default.createElement("pre",{key:n.key},i.default.createElement("code",{className:"hljs "+r.language,dangerouslySetInnerHTML:{__html:r.value}}))}var a=l.default.highlightAuto(e.content);return i.default.createElement("pre",{key:n.key},i.default.createElement("code",{className:"hljs "+a.language,dangerouslySetInnerHTML:{__html:a.value}}))}},mention:{order:a.defaultRules.text.order,match:function(e){return/^<@([a-f0-9]+)>|^(@everyone)/.exec(e)},parse:function(e){return{userId:e[1]||e[2],content:[{type:"text",content:e[0]}]}},react:function(e,t,n){var r,a,o,s=n.mentionType;return"message"===s?i.default.createElement(u.default,{key:n.key,authorIsAdmin:!!n.authorIsAdmin,channelId:n.channelId,userId:e.userId,messageId:n.messageId,mentioned:n.mentioned,mentionType:n.mentionType},t(e.content,n)):"project"===s||"post"===s?i.default.createElement(u.default,{key:n.key,userId:e.userId,mentioned:n.mentioned,mentionType:n.mentionType},t(e.content,n)):(r=n.mentionUsers,a=e.userId,o=r.filter(function(e){return e.id===a})[0],i.default.createElement(u.default,{key:n.key,userId:e.userId,mentioned:n.mentioned,mentionUser:o,mentionType:n.mentionType},t(e.content,n)))}}};function d(e,t,n){return t(e.content,n)}var f={newline:a.defaultRules.newline,paragraph:o({},a.defaultRules.paragraph,{react:d}),url:o({},a.defaultRules.url,{parse:function(e,t,n){var r=a.defaultRules.url.parse(e,t,n);return r.context=n.context,r}}),link:o({},a.defaultRules.link,{parse:function(e,t,n){var r=a.defaultRules.link.parse(e,t,n);return r.context=n.context,r},react:function(t,e,n){var r={},a=t.context&&(t.context[t.target]||t.context.onClick);return a?r.onClick=function(e){return a(e,t.target)}:(r.href=s.default.sanitizeUrl(t.target),r.target="_blank"),r.title=t.title,i.default.createElement("a",o({key:n.key},r),e(t.content,n))}}),strong:o({},a.defaultRules.strong,{react:d}),u:o({},a.defaultRules.u,{react:d}),noparse:{order:a.defaultRules.text.order,match:s.default.inlineRegex(/^!!(.+?)!!/),parse:function(e){return{type:"text",content:e[1]}},react:function(e){return e.content}},text:a.defaultRules.text,ifont:{order:a.defaultRules.text.order,match:function(e){return/^:ifont-([^\s:]+?):/.exec(e)},parse:function(e){return{ifont:e[1]}},react:function(e,t,n){return i.default.createElement("span",{key:n.key,className:"ifont ifont-"+e.ifont})}},list:o({},a.defaultRules.list,{react:function(e,t,n){return t(e.items,n)}})};function p(e){var r=s.default.parserFor(e),a=s.default.outputFor(s.default.ruleOutput(e,"react"));return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t||(e+="\n\n"),a(r(e,o({inline:t},n)),o({},n))}}t.default={getDefaultRules:function(){return o({},c)},getPlainTextRules:function(){return o({},f)},parserFor:p,parse:p(c),plainTextParse:p(f)}},function(e,g,h){"use strict";(function(e){Object.defineProperty(g,"__esModule",{value:!0});var t=c(["messages.finishLobbyGuideStatus"],["messages.finishLobbyGuideStatus"]),n=c(["messages.acceptChannelTermsStatus"],["messages.acceptChannelTermsStatus"]),r=c(["messages.fetchMemberStatus.",""],["messages.fetchMemberStatus.",""]),a=c(["channelId"],["channelId"]),o=h(0),s=h(9),i=u(h(7)),l=u(h(27));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=["messages","channelMembers"];function f(e,t){var n={id:e.id,userId:e.user.id,role:e.role,isBanned:e.isBanned||!1,isSupport:e.user.isSupport||!1};return t===e.user.id&&(n.showTerms=e.showTerms||!1,n.guideFinished=e.guideFinished||!1),n}function p(o){return function(e){var t=e.props,n=e.state,r=t.channelId,a=t.userId;n.get("messages.banStatus."+r)||n.set("messages.banStatus."+r,{}),n.set("messages.banStatus."+r+"."+a,o)}}g.default={name:e,depends:[],signals:{channelReady:[function(e){var n,t=e.props,r=e.state,a=t.normalChannels;a&&(n=r.get(d)||{},a.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,e.user.id)}),n[e.id]=t}),r.set(d,n))}],connectionOpen:[function(e){var t=e.props,n=e.state,r=t.privateChannels,a=t.publicChannels,o=t.lobbyChannels,s=t.liveChannels,i=t.userId,l={};r.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,i)}),l[e.id]=t}),a.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,i)}),l[e.id]=t}),o.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,i)}),l[e.id]=t}),s.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,i)}),l[e.id]=t}),n.set(d,l)}],channelCreate:[function(e){var t,n,r=e.props,a=e.state;"direct"!==r.type&&(t={},n=l.default.getCurrentUserId(a),r.members&&r.members.forEach(function(e){t[e.user.id]=f(e,n)}),a.set([].concat(d,[r.id]),t))}],channelDelete:[function(e){var t=e.props,n=e.state;"direct"!==t.type&&n.unset([].concat(d,[t.id]))}],channelMemberAdd:[function(e){var t=e.props,n=e.state,r=[].concat(d,[t.channelId,t.user.id]),a=l.default.getCurrentUserId(n);n.set(r,f(t,a))}],channelMemberRemove:[function(e){var t=e.props,n=e.state,r=[].concat(d,[t.channelId,t.user.id]);n.unset(r)}],syncChannelMembers:[function(e){var t,n,r=e.props,a=e.state,o=r.result,s=r.status,i=r.channelId;200===s&&o&&(t={},n=l.default.getCurrentUserId(a),o.forEach(function(e){t[e.user.id]=f(e,n)}),a.set([].concat(d,[i]),t))}],finishLobbyGuide:[(0,s.set)((0,o.state)(t),i.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.userId;return n.post("/api/finishLobbyGuide",{userId:a}).then(r.success).catch(r.error)},{success:[(0,s.set)((0,o.state)(t),i.default.succeeded),function(e){var n,t=e.props,r=e.state,a=t.status,o=t.result;200===a&&o&&(n=l.default.getCurrentUserId(r),o.forEach(function(e){var t=[].concat(d,[e.channelId,e.user.id]);r.set(t,f(e,n))}))}],error:[(0,s.set)((0,o.state)(t),i.default.failed)]}]],acceptChannelTerms:[(0,s.set)((0,o.state)(n),i.default.inProgress),[function(e){var t=e.props,n=e.path,r=e.http,a=t.channelId;return r.post("/api/channels/"+a+"/acceptTerms",{}).then(n.success).catch(n.error)},{success:[(0,s.set)((0,o.state)(n),i.default.succeeded),function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelMemberAdd")(r)}],error:[(0,s.set)((0,o.state)(n),i.default.failed)]}]],addChannelMembers:[[function(e){var t=e.props,n=e.http,r=e.path,a=t.selectedChannelId,o=t.userIds,s=t.role;return n.post("/api/channels/"+a+"/members",{userIds:o,role:s}).then(r.success).catch(r.error)},{success:[function(e){var t,n=e.controller,r=e.props.result;r&&0!==r.length&&(t=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r.map(function(e){return e.memberCount}))),r.forEach(function(e){n.getSignal("messages.channelMemberAdd")({id:e.id,channelId:e.channelId,user:e.user,role:e.role,memberCount:t})}))}],error:[]}]],removeChannelMember:[[function(e){var t=e.props,n=e.path,r=e.http,a=t.channelId,o=t.userId;return r.post("/api/channels/"+a+"/members/"+o+"/remove").then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;n.getSignal("messages.channelMemberRemove")({channelId:t.channelId,user:{id:t.userId},memberCount:r.memberCount})}],error:[]}]],banChannelMember:[p(i.default.inProgress),[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.channelId,s=t.userId,i=n.get([].concat(d,[o,s]));return i&&!i.isBanned?r.post("/api/channels/"+o+"/members/"+s+"/ban").then(a.success).catch(a.error):a.dummy()},{success:[p(i.default.succeeded),function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelMemberAdd")(r)}],error:[p(i.default.failed)],dummy:[]}]],unbanChannelMember:[p(i.default.inProgress),[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.channelId,s=t.userId,i=n.get([].concat(d,[o,s]));return i&&i.isBanned?r.post("/api/channels/"+o+"/members/"+s+"/unban").then(a.success).catch(a.error):a.dummy()},{success:[p(i.default.succeeded),function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelMemberAdd")(r)}],error:[p(i.default.failed)],dummy:[]}]],leaveChannel:[function(e){var t=e.props,n=e.http,r=e.path,a=t.channelId;return n.post("/api/channels/"+a+"/leave",{}).then(r.success).catch(r.error)},{success:[],error:[]}],fetchChannelMember:[(0,s.set)((0,o.state)(r,(0,o.props)(a)),i.default.inProgress),function(e){var t=e.props,n=e.path,r=e.http,a=t.channelId;return r.get("/api/channels/"+a+"/members").then(n.success).catch(n.error)},{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncChannelMembers")(n)},(0,s.set)((0,o.state)(r,(0,o.props)(a)),i.default.succeeded)],error:[(0,s.set)((0,o.state)(r,(0,o.props)(a)),i.default.failed)]}],channelSelect:[function(e){var t=e.props,n=e.controller,r=t.channelId;n.getSignal("messages.fetchChannelMember")({channelId:r})}]},getState:function(){return{channelMembers:{}}},getMembers:function(e,t){return e.get([].concat(d,[t]))},getMember:function(e,t,n){return e.get([].concat(d,[t,n]))}}}).call(g,"views/v2/modules/messages/ChannelMemberStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=n||{};var r=Object.keys(n).map(function(e){return e+"="+n[e]}).join(",");return window.open(e,t,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=p(n(2)),_=p(n(1)),l=p(n(3)),c=n(18),u=p(n(17)),d=p(n(4)),f=p(n(726));function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=(0,d.default)(f.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.default),o(m,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleClick),window.addEventListener("keypress",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick),window.removeEventListener("keypress",this.handleKeyPress)}},{key:"renderSelects",value:function(){var a=this,e=this.props,t=e.selects,o=e.value,s=e.onChange,i=e.optClassName,l=e.optActiveClassName,u=e.renderItem,c=this.state.selectedIndex;return t.map(function(n,r){var e=n.text;u&&(e=u(n,!0));var t=["active",l];return _.default.createElement("div",{className:a.ss("selectItem",i,r===c&&a.ss.apply(a,t)),value:n.value,key:n.value,onClick:function(e){return t=e,a.setState({showSelects:!1,selectedIndex:r}),void(o!==n.value&&s(t,r,n.value));var t}},e)})}},{key:"renderCaseScroller",value:function(){return 5<this.props.selects.length?_.default.createElement(u.default,{theme:"light",fade:!1,className:this.ss("scroller"),ref:"scroller"},_.default.createElement("div",{className:this.ss("selects"),ref:"selects"},this.renderSelects())):_.default.createElement("div",{className:this.ss("selects")},this.renderSelects())}},{key:"renderDescription",value:function(){var e=this.props.description;return e?_.default.createElement("div",{className:this.ss("description")},e):null}},{key:"renderErrorText",value:function(){var e=this.props.errorText;return e?_.default.createElement("div",{className:this.ss("errorText")},e):null}},{key:"renderIcon",value:function(){var e=this.props,t=e.iconClassName,n=e.renderIcon;return n?n():_.default.createElement("div",{className:this.ss("triangle","ifont","ifont-icon-triangle-down",t)})}},{key:"render",value:function(){var t=this,e=this.props,n=e.hintText,r=e.selects,a=e.value,o=e.className,s=e.textClassName,i=(e.iconClassName,e.optGroupClassName),l=(e.optClassName,e.optActiveClassName,e.buttonClassName),u=(e.errorText,e.disabled),c=e.renderItem,d=(e.renderIcon,e.isToggleButton,e.buttonActiveClassName),f=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["hintText","selects","value","className","textClassName","iconClassName","optGroupClassName","optClassName","optActiveClassName","buttonClassName","errorText","disabled","renderItem","renderIcon","isToggleButton","buttonActiveClassName"]),p=this.state.showSelects,g={transform:p?"scaleY(1)":"scaleY(0)",opacity:p?1:0},h=r.find(function(e){return e.value===a}),m=h?h.text:n;c&&h&&(m=c(h,!1));var v=!h;return _.default.createElement("div",y({},f,{className:this.ss("container",o)}),_.default.createElement("button",{className:this.ss("currentText",l,p&&d,u&&"disabled"),onClick:function(){return!u&&t.onTextClick()},onKeyDown:function(e){return!u&&t.onKeyDown(e)}},_.default.createElement("div",{className:this.ss("innerCurrentText")},_.default.createElement("div",{className:this.ss("text",s,v&&"hint")},m),this.renderIcon())),_.default.createElement("div",{className:this.ss("selectsWrapContainer",i),style:g},this.renderCaseScroller()),this.renderDescription(),this.renderErrorText())}}]),(a=m).propTypes={selects:i.default.arrayOf(i.default.shape({text:i.default.string.isRequired,value:i.default.oneOfType([i.default.number.isRequired,i.default.string.isRequired])})).isRequired,hintText:i.default.string,value:i.default.oneOfType([i.default.number.isRequired,i.default.string.isRequired]),onChange:i.default.func,className:i.default.string,isToggleButton:i.default.bool,buttonClassName:i.default.string,buttonActiveClassName:i.default.string,textClassName:i.default.string,iconClassName:i.default.string,optGroupClassName:i.default.string,optActiveClassName:i.default.string,optClassName:i.default.string,disabled:i.default.bool,errorText:i.default.any,description:i.default.string,renderItem:i.default.func,renderIcon:i.default.func},r=a))||r;function m(){var e,t,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=u=g(this,(e=m.__proto__||Object.getPrototypeOf(m)).call.apply(e,[this].concat(r)))).state={showSelects:!1,timeoutEventId:null,periodInput:"",lastHint:-1,selectedIndex:0},u.onKeyDown=function(e){var t=e.keyCode,n=u.props,r=n.selects,a=n.onChange,o=u.state,s=o.showSelects,i=o.selectedIndex,l=r.length;switch(t){case 40:e.preventDefault(),s||u.onTextClick(),u.setState({selectedIndex:(i+1)%l});break;case 38:e.preventDefault(),s||u.onTextClick(),u.setState({selectedIndex:(i+l-1)%l});break;case 13:e.preventDefault(),s?0<=i&&i<l&&(u.setState({showSelects:!1}),a(e,i,r[i].value)):u.onTextClick();break;case 27:u.setState({showSelects:!1})}},u.onTextClick=function(){var e={showSelects:!0,lastHint:Number.MAX_SAFE_INTEGER};u.props.isToggleButton&&(e.showSelects=!u.state.showSelects),u.setState(e)},u.handleClick=function(e){(0,c.ClickOutside)(e,u,function(){u.setState({showSelects:!1})})},u.handleKeyPress=function(e){var t,n,r,a,o,s,i,l;u.state.showSelects&&u.refs.scroller&&(t=e.keyCode,n=e.charCode,u._timeoutEventId&&(window.clearTimeout(u._timeoutEventId),u._timeoutEventId=null),r=String.fromCharCode(t||n).toLowerCase(),a=u.props.selects,o=!1,s=-1,r===u.state.periodInput||""===u.state.periodInput?(a.every(function(e,t){return!(e.text.toLowerCase().startsWith(r)&&t>u.state.lastHint)||(s=t,!1)}),-1===s&&a.every(function(e,t){return!e.text.toLowerCase().startsWith(r)||(s=t,!1)}),-1!==s&&(u.setState({periodInput:r,lastHint:s}),o=!0)):(i=u.state.periodInput+r,a.every(function(e,t){return!e.text.toLowerCase().startsWith(i)||(s=t,!1)}),-1!==s&&(u.setState({periodInput:i}),o=!0)),u._timeoutEventId=window.setTimeout(function(){u.setState({periodInput:"",timeoutEventId:null})},500),o&&(l=u.refs.selects.children[0].offsetHeight,u.refs.scroller.scrollTo(s*l,!0),u.setState({selectedIndex:s})))},g(u,t)}t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=f(n(2)),m=f(n(1)),u=f(n(3)),c=f(n(4)),d=f(n(727));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=(0,c.default)(d.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(v,u.default),s(v,[{key:"renderHintLabel",value:function(){var e=this.props,t=e.hintLabel,n=e.disabled,r=e.theme,a=n?this.ss("hintLabel","disabled",r):this.ss("hintLabel",r);return t?m.default.createElement("div",{className:a},t):null}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.className,r=(e.hintLabel,e.style),a=e.labelStyle,o=(e.onCheck,e.isChecked),s=e.name,i=e.value,l=e.disabled,u=e.children,c=e.theme,d=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["label","className","hintLabel","style","labelStyle","onCheck","isChecked","name","value","disabled","children","theme"]),f=l?this.ss("container","disabled",c):this.ss("container",c),p=u||m.default.createElement("div",{className:this.ss("label"),style:a},t),g="selected"===c;return m.default.createElement("div",{style:r,onClick:this.handlerClick,className:n},m.default.createElement("div",{className:f},m.default.createElement("button",{className:this.ss("radio",o&&"active")},g&&o&&m.default.createElement("div",{className:this.ss("icon","ifont","ifont-selected")}),m.default.createElement("div",{className:this.ss("radioInner")},m.default.createElement("input",h({name:s,value:i,type:"radio",ref:"radio"},d))),"blue"===c&&m.default.createElement("div",{className:this.ss("inner")})),p),this.renderHintLabel())}}]),o=a=v,a.propTypes={label:l.default.string,hintLabel:l.default.string,value:l.default.oneOfType([l.default.string,l.default.number,l.default.bool]),name:l.default.string,isChecked:l.default.bool,onCheck:l.default.func,style:l.default.object,labelStyle:l.default.object,className:l.default.string,disabled:l.default.bool,children:l.default.element,theme:l.default.oneOf(["blue","default","primary","selected","primary-blue"])},a.defaultProps={theme:"default"},r=o))||r;function v(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=p(this,(e=v.__proto__||Object.getPrototypeOf(v)).call.apply(e,[this].concat(a)))).handlerClick=function(e){n.props.disabled||n.props.onCheck&&n.props.onCheck(e,n.props.value)},p(n,t)}t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=e.editorKey,t=e.renderOnly;if(!d)throw new Error("editorKey is empty");return{onDownArrow:t?void 0:function(e,t){var n=(0,t.getProps)().controller;p({editorKey:d,controller:n})&&(n.getSignal("project.moveToNextMentionItem")({editorKey:d}),e.preventDefault())},onUpArrow:t?void 0:function(e,t){var n=(0,t.getProps)().controller;p({editorKey:d,controller:n})&&(n.getSignal("project.moveToPrevMentionItem")({editorKey:d}),e.preventDefault())},onEscape:t?void 0:function(e,t){var n=(0,t.getProps)().controller;p({editorKey:d,controller:n})&&(n.getSignal("project.hideMentionToolbar")({editorKey:d}),e.preventDefault())},onTab:t?void 0:function(e,t){var n,r,a,o,s,i=t.getProps,l=t.getEditorState,u=t.setEditorState,c=i().controller;p({editorKey:d,controller:c})&&(r=(n=c.getState("project.mentionToolbars."+d)).prefix,a=n.index,s=(o=c.getState("suggest.candidate").user).length,u((0,f.addUserMention)(l(),r,o[(a%s+s)%s])),e.preventDefault())},handleReturn:t?void 0:function(e,t,n){var r=n.setEditorState,a=(0,n.getProps)().controller;if(p({editorKey:d,controller:a})){var o=a.getState("project.mentionToolbars."+d),s=o.prefix,i=o.index,l=a.getState("suggest.candidate").user,u=l.length;return r((0,f.addUserMention)(t,s,l[(i%u+u)%u])),"handled"}return"not-handled"},decorators:[o.default],MentionToolbar:t?function(){return null}:(0,r.default)(a.default,{editorKey:d})}};var r=s(n(36)),a=s(n(826)),o=s(n(827)),f=n(10);function s(e){return e&&e.__esModule?e:{default:e}}function p(e){var t=e.editorKey,n=e.controller,r=n.getState("project.mentionToolbars."+t),a=n.getState("suggest.candidate"),o=[];return r&&"user"===a.st&&a.q===r.prefix&&a.user&&(o=a.user),0<o.length}},function(e,t,n){e.exports=n(8)(165)},,function(e,t,n){e.exports=n(8)(1015)},function(e,t,n){e.exports=n.p+"../styles/i/unity-logo-only.f688162d59f85318573b598d4c5b6e26.png"},function(e,d,f){"use strict";(function(e){Object.defineProperty(d,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["header.doTfaStatus"],{raw:{value:Object.freeze(["header.doTfaStatus"])}})),n=f(9),r=f(0),a=i(f(7)),o=i(f(19)),s=i(f(15));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e){var t=e.state,n=e.path;if(!0!==s.default.TFA_ENABLED)return n.yes();var r=(t.get("loginUser")||{}).tfaEndTime;return r&&new Date(r).getTime()>Date.now()?n.yes():n.no()}function c(e){e.state.set("header.tfaConfirmDialog",{open:!0})}d.default={name:e,depends:[],signals:{closeTfaConfirmDialog:[function(e){e.state.set("header.tfaConfirmDialog",{open:!1})}],closeTfaNotifyDialog:[function(e){e.state.set("header.tfaNotifyDialog",{open:!1})}],doTfa:[(0,n.set)((0,r.state)(t),a.default.inProgress),function(e){var t=e.state.get("currentUrl"),n="/auth/tfa?redirect_to="+encodeURIComponent(t);(0,o.default)(n)}],openNeedReviewDialog:[function(e){e.state.set("header.needReviewDialog",{open:!0})}],closeNeedReviewDialog:[function(e){e.state.set("header.needReviewDialog",{open:!1})},function(e){var t=e.state.get("loginUser"),n=t?"/u/"+t.id:"/";(0,o.default)(n)}]},getState:function(){return{tfaConfirmDialog:{open:!1},tfaNotifyDialog:{open:!1},needReviewDialog:{open:!1}}},TfaRequired:function(e){return[u,{yes:[Array.isArray(e)?[].concat(l(e)):[e]],no:[c]}]},TfaNotified:function(e,t){var n;return[u,{yes:[Array.isArray(e)?[].concat(l(e)):[e]],no:[(n=t,function(e){var t=e.props;e.state.set("header.tfaNotifyDialog",{open:!0,signalPath:n,actionProps:t})})]}]}}}).call(d,"views/modules/common/header/TfaStore.js")},function(e,c,d){"use strict";(function(e){Object.defineProperty(c,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["header.doAddEmailStatus"],{raw:{value:Object.freeze(["header.doAddEmailStatus"])}})),n=d(9),r=d(0),a=s(d(7)),o=s(d(19));function s(e){return e&&e.__esModule?e:{default:e}}var i="header.emailRequiredDialog";function l(e){var t=e.state,n=e.path;return!0!==(t.get("loginUser")||{}).emailRequired?n.yes():n.no()}function u(e){e.state.set(i,{open:!0})}c.default={name:e,depends:[],signals:{openEmailRequiredDialog:[u],closeEmailRequiredDialog:[function(e){e.state.set(i,{open:!1})}],doAddEmail:[(0,n.set)((0,r.state)(t),a.default.inProgress),function(e){var t=e.state.get("currentUrl"),n="/auth/email?redirect_to="+encodeURIComponent(t);(0,o.default)(n)}]},getState:function(){return{emailRequiredDialog:{open:!1}}},EmailRequired:function(e){return[l,{yes:[Array.isArray(e)?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)):[e]],no:[u]}]}}}).call(c,"views/modules/common/header/EmailCheckStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(69),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){e=(0,o.default)(e),window.location.href=e}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o="\n  font-weight: bold;\n  color: purple;\n",a=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(s,[{key:"log",value:function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=console)[e||"log"].apply(t,["%c["+this.name+"]",o].concat(r))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,["info"].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,["warn"].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,["error"].concat(t))}},{key:"trace",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,["trace"].concat(t))}}]),s);function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.name=e,this.log=this.log.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this),this.trace=this.trace.bind(this)}var i=new a;t.default={create:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(a,[null].concat(t)))},log:i.log,info:i.info,warn:i.warn,error:i.error,trace:i.trace}},function(e,n,r){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var o=t(r(82)),s=t(r(55));function t(e){return e&&e.__esModule?e:{default:e}}var i=["messages","selectedWorkspaceId"];n.default={name:e,depends:[o.default],signals:{connectionOpen:[function(e){var t,n=e.props,r=e.state;r.get(i)||((t=n.workspaces.find(function(e){return!e.organizationId}))?r.set(i,t.id):r.set(i,null))}],workspaceSelect:[function(e){var t=e.props,n=e.state,r=t.workspaceId;n.get(i)!==r&&o.default.getWorkspace(n,r)&&n.set(i,r)}],workspaceUnselect:[function(e){var t=e.state,n=e.controller,r=t.get(i),a=o.default.getDefaultWorkspace(t);r&&a&&n.getSignal("messages.workspaceRouted")({workspaceId:a.id})}],workspaceDelete:[function(e){var t=e.props,n=e.state,r=e.controller;n.get(i)===t.id&&r.getSignal("messages.workspaceUnselect")()}],channelSelect:[function(e){var t=e.props,n=e.controller,r=e.state,a=t.workspaceId;s.default.getWorkspaceId(r)!==a&&o.default.getWorkspace(r,a)&&n.getSignal("messages.workspaceSelect")({workspaceId:a})}],openExplore:[function(e){var t=e.props,n=e.controller,r=e.state,a=t.workspaceId;s.default.getWorkspaceId(r)!==a&&o.default.getWorkspace(r,a)&&n.getSignal("messages.workspaceSelect")({workspaceId:a})}],openSupportTickets:[function(e){var t=e.props,n=e.controller,r=e.state,a=t.workspaceId;s.default.getWorkspaceId(r)!==a&&o.default.getWorkspace(r,a)&&n.getSignal("messages.workspaceSelect")({workspaceId:a})}],showSupportView:[function(e){e.state.set(i,"")}]},getState:function(){return{selectedWorkspaceId:null}},getWorkspaceId:function(e){return e.get(i)}}}).call(n,"views/v2/modules/messages/SelectedWorkspaceStore.js")},function(e,t,n){e.exports=n(8)(83)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=C(["suggest.candidate"],["suggest.candidate"]),c=C(["suggest.candidateMap"],["suggest.candidateMap"]),d=C(["suggest.fetchCandidates"],["suggest.fetchCandidates"]),f=C(["suggest.clearCandidates"],["suggest.clearCandidates"]),p=C(["suggest.saveToMap"],["suggest.saveToMap"]),g=C(["suggest.removeFromMap"],["suggest.removeFromMap"]),h=E(n(2)),m=E(n(1)),v=n(5),y=n(0),_=E(n(3)),b=E(n(738)),w=E(n(4)),S=E(n(744));function E(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var k=(0,v.decorator)({candidate:(0,y.state)(u),candidateMap:(0,y.state)(c),fetchCandidates:(0,y.signal)(d),clearCandidates:(0,y.signal)(f),saveToMap:(0,y.signal)(p),removeFromMap:(0,y.signal)(g)})(r=(0,w.default)(S.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(I,_.default),s(I,[{key:"componentWillReceiveProps",value:function(e){var t=e||{},n=t.candidate,r=t.st;"fold"===t.fold&&n[r]&&0<n[r].length&&this.onClearCandidate()}},{key:"onFetchCandidate",value:function(e){var t=this.props,n=t.st,r=t.fetchCandidates,a=t.addInputValue,o=t.allPlace,s=t.skillType,i=t.t,l=void 0===i?"":i;this.setState({isActive:!0}),r({st:n,q:e,addNew:a,allPlace:o,skillType:s,t:l})}},{key:"onClearCandidate",value:function(){var e=this.props,t=e.st,n=e.clearCandidates;this.setState({isActive:!1}),n({st:t})}},{key:"onSaveToMap",value:function(e){var t=this.props,n=t.st;(0,t.saveToMap)({st:n,candidate:e})}},{key:"onRemoveFromMap",value:function(e){var t=this.props,n=t.st;(0,t.removeFromMap)({st:n,candidate:e})}},{key:"getIdToCandidateMap",value:function(){var e=this.props,t=e.st,n=e.idToCandidateMap,r=e.candidateMap,a=r&&r[t];return i({},a,n||{})}},{key:"render",value:function(){var t=this,e=this.props,n=e.st,r=e.candidate,a=e.autoFocus,o=e.fold,s=(e.skillType,e.candidateMap,e.addInputValue,e.allPlace,e.modules,e.fetchCandidates,e.clearCandidates,e.saveToMap,e.removeFromMap,e.t,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["st","candidate","autoFocus","fold","skillType","candidateMap","addInputValue","allPlace","modules","fetchCandidates","clearCandidates","saveToMap","removeFromMap","t"]));return m.default.createElement(b.default,i({},s,{candidates:this.state.isActive?r[n]:[],onFetchCandidate:function(e){return t.onFetchCandidate(e)},onClearCandidate:function(){return t.onClearCandidate()},onSaveToMap:function(e){return t.onSaveToMap(e)},onRemoveFromMap:function(e){return t.onRemoveFromMap(e)},selectedIds:this.props.selectedIds,idToCandidateMap:this.getIdToCandidateMap(),fold:o,maxLength:20,autoFocus:a&&("unFold"===o||!o)}))}}]),o=a=I,a.propTypes={candidate:h.default.object,candidateMap:h.default.object,selectedIds:h.default.array,idToCandidateMap:h.default.object,modules:h.default.object,t:h.default.string,st:h.default.string,autoFocus:h.default.bool,addInputValue:h.default.bool,fold:h.default.string,allPlace:h.default.bool,skillType:h.default.string,fetchCandidates:h.default.func,clearCandidates:h.default.func,saveToMap:h.default.func,removeFromMap:h.default.func},a.defaultProps={autoFocus:!1,addInputValue:!1,allPlace:!0,skillType:""},r=o))||r)||r;function I(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=O(this,(e=I.__proto__||Object.getPrototypeOf(I)).call.apply(e,[this].concat(a)))).state={isActive:!1},O(n,t)}t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.editorKey,n=e.renderOnly;if(!t)throw new Error("editorKey is empty");function u(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getStartKey();return"code-block"===n.getBlockForKey(r).getType()}return{handleKeyCommand:n?void 0:function(e,t,n){var r=n.setEditorState;if(u(t)&&"backspace"===e){var a=(0,o.default)(t);if(a)return r(a),"handled"}return"not-handled"},handleReturn:n?void 0:function(e,t,n){var r=n.setEditorState;if(u(t)){if((0,c.isSoftNewlineEvent)(e)){var a=t.getSelection();if(a.isCollapsed()){var o=t.getCurrentContent(),s=(o=c.Modifier.splitBlock(o,a)).getSelectionAfter().getAnchorKey();return o=o.merge({blockMap:o.getBlockMap().set(s,o.getBlockForKey(s).merge({type:"unstyled",depth:0}))}),r(c.EditorState.push(t,o,"split-block")),"handled"}}var i=(0,l.default)(t);if(i)return r(i),"handled"}return"not-handled"},handlePastedText:n?void 0:function(e,t,n,r){var a=r.setEditorState;if(u(n)){e=e.replace(/\r/g,"");var o=c.CharacterMetadata.create(),s=new c.ContentBlock({key:(0,c.genKey)(),type:"unstyled",text:e,characterList:(0,d.List)((0,d.Repeat)(o,e.length))}),i=c.BlockMapBuilder.createFromArray([s]),l=c.Modifier.replaceWithFragment(n.getCurrentContent(),n.getSelection(),i);return a(c.EditorState.push(n,l,"insert-fragment")),"handled"}return"not-handled"},onTab:n?void 0:function(e,t){var n=t.getEditorState,r=t.setEditorState,a=n();if(u(a)){var o=(0,s.default)(e,a);if(o)return r(o),!0}return!1},decorators:[new r.default]}};var c=n(10),d=n(56),o=a(n(774)),l=a(n(777)),s=a(n(779)),r=a(n(780));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.editorKey,n=e.renderOnly;if(!t)throw new Error("editorKey is empty");var r=(0,c.default)(i.default.createElement("div",null),e),a=(0,c.default)(i.default.createElement("ul",{className:"public-DraftStyleDefault-ul"}),e),o=(0,c.default)(i.default.createElement("ol",{className:"public-DraftStyleDefault-ol"}),e),s=(0,c.default)(i.default.createElement("pre",{className:"public-DraftStyleDefault-pre",spellCheck:!1}),e);return{handleReturn:n?void 0:function(e,t,n){var r=n.setEditorState;return(0,u.isSoftNewlineEvent)(e)&&t.getSelection().isCollapsed()?(r(u.RichUtils.insertSoftNewline(t)),"handled"):"not-handled"},handleKeyCommand:n?void 0:function(e,t,n){var r=n.setEditorState,a=u.RichUtils.handleKeyCommand(t,e);return a&&a!==t?(r(a),"handled"):"not-handled"},handleBeforeInput:n?void 0:function(e,t,n){var r=n.setEditorState,a=t.getSelection();if(!a.isCollapsed())return"not-handled";if(" "===e){var o=a.getStartKey(),s=a.getStartOffset(),i=t.getCurrentContent().getBlockForKey(o);if("unstyled"===i.getType()||"paragraph"===i.getType()){var l=i.getText().substring(0,s);if(/^[\d]\./.test(l))return r(f(t," ","ordered-list-item")),"handled";if(/^[*-]/.test(l))return r(f(t," ","unordered-list-item")),"handled"}}else if("`"===e){var u=a.getStartKey(),c=a.getStartOffset(),d=t.getCurrentContent().getBlockForKey(u);if("unstyled"===d.getType()||"paragraph"===d.getType())if("``"===d.getText().substring(0,c))return r(f(t,"`","code-block")),"handled"}return"not-handled"},onTab:n?void 0:function(e,t){var n=t.getEditorState,r=t.setEditorState,a=n(),o=u.RichUtils.onTab(e,a,2);return!(!o||o===a)&&(r(o),!0)},onChange:n?void 0:function(e){var t=e.getCurrentContent(),n=t.getLastBlock();if(n&&"unstyled"===n.getType()&&0===n.getLength())return e;var r=(0,u.genKey)(),a=new u.ContentBlock({key:r}),o=t.getBlockMap().set(r,a),s=t.merge({blockMap:o});return u.EditorState.set(e,{currentContent:s})},customStyleMap:{CODE:{backgroundColor:"#f2fbfd",fontFamily:"Menlo, Consolas, Monaco, monospace",fontSize:"15px",padding:"4px"}},blockRenderMap:(0,l.Map)({"header-one":{element:"h1",wrapper:r},"header-two":{element:"h2",wrapper:r},"header-three":{element:"h3",wrapper:r},"header-four":{element:"h4",wrapper:r},"header-five":{element:"h5",wrapper:r},"header-six":{element:"h6",wrapper:r},"unordered-list-item":{element:"li",wrapper:a},"ordered-list-item":{element:"li",wrapper:o},blockquote:{element:"blockquote",wrapper:r},atomic:{element:"figure",wrapper:r},"code-block":{element:"code",wrapper:s},unstyled:{element:"div",aliasedElements:["p"],wrapper:r}})}};var i=r(n(1)),l=n(56),u=n(10),c=r(n(782));function r(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){var r=e.getSelection(),a=r.getFocusKey(),o=e.getCurrentContent(),o=u.Modifier.insertText(o,r,t,e.getCurrentInlineStyle(),(0,u.getEntityKeyForSelection)(o,r));return o=(e=u.EditorState.push(e,o,"insert-characters")).getCurrentContent(),o=(o=u.Modifier.removeRange(o,o.getSelectionAfter().merge({anchorOffset:0}),"backward")).merge({blockMap:o.getBlockMap().set(a,o.getBlockForKey(a).merge({type:n,depth:0}))}),u.EditorState.push(e,o,"change-block-type")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.editorKey,n=e.renderOnly;if(!t)throw new Error("editorKey is empty");var S=e.breakoutBlockType||r.breakoutBlockType,E=e.breakoutBlocks||r.breakoutBlocks,O=e.doubleBreakoutBlocks||r.doubleBreakoutBlocks;return{handleReturn:n?void 0:function(e,t,n){var r=n.setEditorState,a=C.RichUtils.getCurrentBlockType(t),o=-1<E.indexOf(a),s=-1<O.indexOf(a);if(o||s){var i=t.getSelection();if(i.isCollapsed()){var l=t.getCurrentContent(),u=l.getBlockForKey(i.getEndKey()),c=i.getEndOffset(),d=c===u.getLength(),f=0===c;if(d&&o||f&&o||f&&!u.getLength()){var p=(0,C.genKey)(),g=new C.ContentBlock({key:p,text:"",type:S,characterList:(0,k.List)(),depth:0}),h=l.getBlockMap(),m=h.toSeq().takeUntil(function(e){return e===u}),v=h.toSeq().skipUntil(function(e){return e===u}).rest(),y=void 0,_=void 0,_=d?(y=s?[[p,g]]:[[u.getKey(),u],[p,g]],p):(y=[[p,g],[u.getKey(),u]],u.getKey()),b=m.concat(y,v).toOrderedMap(),w=l.merge({blockMap:b,selectionAfter:i.merge({anchorKey:_,anchorOffset:0,focusKey:_,focusOffset:0})});return r(C.EditorState.push(t,w,"split-block")),"handled"}}}return"not-handled"}}};var C=n(10),k=n(56),r={breakoutBlockType:"unstyled",breakoutBlocks:["header-one","header-two","header-three","header-four","header-five","header-six"],doubleBreakoutBlocks:["blockquote","unordered-list-item","ordered-list-item","code-block"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.editorKey,n=e.renderOnly,r=e.allowImage,a=e.allowVideo,o=e.allowAttachment;if(t)return{SideToolbar:n?function(){return null}:(0,s.default)(i.default,{editorKey:t,allowImage:r,allowVideo:a,allowAttachment:o})};throw new Error("editorKey is empty")};var s=r(n(36)),i=r(n(787));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.editorKey,n=e.renderOnly;if(t)return{decorators:[o.default],InlineToolbar:n?function(){return null}:(0,r.default)(a.default,{editorKey:t})};throw new Error("editorKey is empty")};var r=s(n(36)),a=s(n(815)),o=s(n(489));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.editorKey,n=e.renderOnly;if(t)return{decorator:(0,a.default)(e),AlignmentToolbar:n?function(){return null}:(0,r.default)(o.default,{editorKey:t})};throw new Error("editorKey is empty")};var r=s(n(36)),a=s(n(821)),o=s(n(822));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.editorKey,n=e.renderOnly;if(!t)throw new Error("editorKey is empty");var r=(0,o.default)(e),a=(0,s.default)(e);return{handleDrop:n?void 0:function(e,t,n,r){var a=r.getEditorState,o=r.setEditorState,s=r.getProps;if(!n)return"not-handled";if(!t.data.getData("CONNECT_BLOCK_DRAG"))return"handled";var i,l=s().controller,u=l.getState("project.dragOverBlockKey"),c=l.getState("project.dragStartBlockKey"),d=l.getState("project.dragStartBlockAfterKey");return u!==c&&u!==d&&(i=a(),o((0,f.moveAtomicBlockBefore)(i,u,c))),"handled"},EditorWrapper:r,decorator:a}};var o=r(n(836)),s=r(n(837)),f=n(10);function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=V(["project.uploadVideo.editorKey"],["project.uploadVideo.editorKey"]),l=V(["draft.editorStates.",""],["draft.editorStates.",""]),u=V(["project.uploadVideo.entityKey"],["project.uploadVideo.entityKey"]),c=V(["project.uploadVideo.open"],["project.uploadVideo.open"]),d=V(["project.uploadVideo.url"],["project.uploadVideo.url"]),f=V(["project.uploadVideo.uploadingId"],["project.uploadVideo.uploadingId"]),p=V(["project.uploadVideo.pendingUploadIds"],["project.uploadVideo.pendingUploadIds"]),g=V(["project.uploads"],["project.uploads"]),h=V(["project.addEmbedAuto"],["project.addEmbedAuto"]),m=V(["project.changeVideoUrl"],["project.changeVideoUrl"]),v=V(["project.addPreviewEmbed"],["project.addPreviewEmbed"]),y=V(["project.closeUploadVideo"],["project.closeUploadVideo"]),_=V(["draft.setEditorState"],["draft.setEditorState"]),b=V(["project.uploads.",""],["project.uploads.",""]),w=V(["uploadId"],["uploadId"]),S=V(["project.contentMap"],["project.contentMap"]),E=V(["project.deletePreviewEmbed"],["project.deletePreviewEmbed"]),O=U(n(2)),C=U(n(1)),k=U(n(3)),I=n(5),j=n(0),M=U(n(20)),T=U(n(13)),P=U(n(37)),x=U(n(14)),A=U(n(17)),D=n(11),R=n(7),N=U(n(4)),L=U(n(838)),F=U(n(6)),K=U(n(839));function U(e){return e&&e.__esModule?e:{default:e}}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function V(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var q=n(75),H=(0,I.decorator)({editorKey:(0,j.state)(i),editorState:(0,j.state)(l,(0,j.state)(i)),entityKey:(0,j.state)(u),open:(0,j.state)(c),url:(0,j.state)(d),uploadingId:(0,j.state)(f),uploadIds:(0,j.state)(p),uploads:(0,j.state)(g),addEmbedAuto:(0,j.signal)(h),changeVideoUrl:(0,j.signal)(m),addPreviewEmbed:(0,j.signal)(v),closeUploadVideo:(0,j.signal)(y),setEditorState:(0,j.signal)(_)})(r=(0,N.default)(L.default)(r=(0,F.default)(K.default)((W($,k.default),o($,[{key:"componentDidMount",value:function(){this.checkUpload()}},{key:"componentDidUpdate",value:function(){this.checkUpload()}},{key:"checkUpload",value:function(){var e=this.props,t=e.uploads,n=e.uploadingId,r=e.addPreviewEmbed,a=n&&t[n];(0,R.isSucceeded)(a&&a.status)&&r()}},{key:"renderLoading",value:function(){return C.default.createElement("div",{className:this.ss("loading-wrap")},C.default.createElement("div",{className:this.ss("loading")}))}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.url,r=e.uploadingId,a=e.uploads,o=e.uploadIds,s=void 0===o?[]:o,i=a[r],l=(0,R.isLoading)(i&&i.status);return C.default.createElement(M.default,{open:t,noScroller:!0,position:"center",onCloseModal:this.onClose},C.default.createElement("div",{className:this.ss("content")},C.default.createElement("div",{className:this.ss("head")},C.default.createElement("div",{className:this.ss("title")},this.__("title_add_embed")),C.default.createElement("button",{className:this.ss("button-close"),onClick:this.onClose},C.default.createElement("div",{className:this.ss("close","ifont","ifont-icon-close2")}))),C.default.createElement("div",{className:this.ss("input-wrap")},C.default.createElement("div",{className:this.ss("input")},C.default.createElement(P.default,{ref:"input",placeholder:this.__("input_placeholder"),value:n,autoFocus:!0,disabled:l,onKeyDown:this.onKeyDown,onChange:this.onChange,onPaste:this.onPaste}),l&&this.renderLoading()),C.default.createElement("div",{className:this.ss("supported-hint")},this.__("supported_hint"))),C.default.createElement(A.default,null,C.default.createElement("div",{className:this.ss("embed-wrap")},C.default.createElement("div",{className:this.ss("title")},this.__("total_embeds",{n:s.length})),C.default.createElement("div",{className:this.ss("embed-previews")},[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s||[])).reverse().map(function(e,t){return C.default.createElement(G,{key:"item-"+t,uploadId:e})})))),C.default.createElement("div",{className:this.ss("foot")},C.default.createElement("div",{className:this.ss("button")},C.default.createElement(T.default,{theme:"white",size:"xlarge",widthType:"full",label:this.__("button_cancel"),onClick:this.onClose})),C.default.createElement("div",{className:this.ss("button")},C.default.createElement(T.default,{theme:"blue",size:"xlarge",widthType:"full",disabled:l||0===s.length,label:this.__("button_ok"),onClick:this.onOK})))))}}]),$.propTypes={editorKey:O.default.string,editorState:O.default.object,entityKey:O.default.string,open:O.default.bool,url:O.default.string,uploadingId:O.default.string,uploadIds:O.default.array,uploads:O.default.object,addEmbedAuto:O.default.func,changeVideoUrl:O.default.func,addPreviewEmbed:O.default.func,closeUploadVideo:O.default.func,setEditorState:O.default.func,onOK:O.default.func},r=$))||r)||r)||r;function $(){var e,t,n;B(this,$);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=z(this,(e=$.__proto__||Object.getPrototypeOf($)).call.apply(e,[this].concat(a)))).onPaste=function(e){e&&(0,D.pauseEvent)(e);var t=(e.clipboardData||window.clipboardData).getData("Text");n.props.addEmbedAuto({url:t})},n.onKeyDown=function(e){switch(e.keyCode){case 13:n.props.addEmbedAuto({url:e.target.value})}},n.onChange=function(e,t){n.props.changeVideoUrl({value:t})},n.onClose=function(){n.props.closeUploadVideo()},n.onOK=function(){var e,t=n.props.onOK;t&&t({entityKey:(e=n.props).entityKey,editorKey:e.editorKey,editorState:e.editorState,uploadIds:e.uploadIds,uploads:e.uploads,setEditorState:e.setEditorState}),n.onClose()},z(n,t)}t.default=H;var G=(0,I.decorator)({upload:(0,j.state)(b,(0,j.props)(w)),contentMap:(0,j.state)(S),deletePreviewEmbed:(0,j.signal)(E)})(a=(0,N.default)(L.default)(a=(0,F.default)(K.default)((W(Y,k.default),o(Y,[{key:"render",value:function(){var e=this.props,t=e.upload,n=e.contentMap;if(!t)return null;var r,a,o,s,i,l,u,c,d="",f="",p=0,g="";return(0,R.isSucceeded)(t.status)&&((o=(a=(r=n&&n[t.contentId])||{}).oembed)?(s=(a.thumbnail||{}).url,g=o.title,d=o.provider_name,f=s||(0,D.securedURL)(o.thumbnail_url),p=o.thumbnail_width):r&&"img"===r.type?(l=(i=r||{}).externalType,c=i.originalImage,g=(u=i.package)&&u.name,d=this.__(l),f=c&&c.url,p=c&&c.width):r&&"webgl"===r.type&&(g=t.url,f=q,p=400)),C.default.createElement("div",{className:this.ss("item")},C.default.createElement("div",{className:this.ss("item-thumbnail")},C.default.createElement(x.default,{src:f,sizes:p+"px"})),C.default.createElement("div",{className:this.ss("item-content")},C.default.createElement("div",{className:this.ss("item-info")},C.default.createElement("div",{className:this.ss("item-title")},g),C.default.createElement("div",{className:this.ss("item-provider")},d&&this.__("from_provider",{providerName:d}))),C.default.createElement("div",{className:this.ss("item-delete")},C.default.createElement("a",{className:this.ss("delete"),onClick:this.onDeleteEmbed},this.__("button_delete")))))}}]),Y.propTypes={uploadId:O.default.string.isRequired,upload:O.default.object,contentMap:O.default.object,deletePreviewEmbed:O.default.func},a=Y))||a)||a)||a;function Y(){var e,t,r;B(this,Y);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=r=z(this,(e=Y.__proto__||Object.getPrototypeOf(Y)).call.apply(e,[this].concat(a)))).onDeleteEmbed=function(){var e=r.props,t=e.uploadId,n=e.deletePreviewEmbed;n&&n({uploadId:t})},z(r,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.editorKey,n=e.renderOnly;if(!t)throw new Error("editorKey is empty");return{blockRendererFn:function(e){if("atomic"===e.getType())return{component:f.EditorBlock,editable:!1}},keyBindingFn:n?void 0:function(e,t){var n=t.getEditorState,r=t.setEditorState;if(!e.shiftKey){var a=n();if(37===e.keyCode&&((0,f.isAtomicBlockSelected)(a)||(0,f.isBlockBeforeAtomic)(a)&&(0,f.isSelectionAtBlockStart)(a))){var o=(0,f.moveToPrevBlock)(a);if(o)return r(o),""}if(39===e.keyCode&&((0,f.isAtomicBlockSelected)(a)||(0,f.isBlockAfterAtomic)(a)&&(0,f.isSelectionAtBlockEnd)(a))){var s=(0,f.moveToNextBlock)(a);if(s)return r(s),""}}},onDownArrow:n?void 0:function(e,t){var n,r,a=t.getEditorState,o=t.setEditorState;e.shiftKey||(n=a(),!((0,f.isAtomicBlockSelected)(n)||(0,f.isBlockAfterAtomic)(n)&&(0,f.isFocusAtLastLine)())||(r=(0,f.moveToNextBlock)(n))&&(o(r),e.preventDefault()))},onUpArrow:n?void 0:function(e,t){var n,r,a=t.getEditorState,o=t.setEditorState;e.shiftKey||(n=a(),!((0,f.isAtomicBlockSelected)(n)||(0,f.isBlockBeforeAtomic)(n)&&(0,f.isFocusAtFirstLine)())||(r=(0,f.moveToPrevBlock)(n))&&(o(r),e.preventDefault()))},handleKeyCommand:n?void 0:function(e,t,n){var r=n.setEditorState,a=void 0;switch(e){case"backspace":case"backspace-word":case"backspace-to-start-of-line":if((a=function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),r=t.getStartKey(),a=n.getBlockForKey(r);if("atomic"===a.getType()){var o=new f.ContentBlock({key:a.getKey()}),s=n.getBlockMap().set(a.getKey(),o),i=n.merge({blockMap:s,selectionAfter:t});return f.EditorState.push(e,i,"remove-range")}if(0!==t.getStartOffset())return null;var l=n.getBlockBefore(r);if(l&&"atomic"===l.getType()){var u=new f.SelectionState({anchorKey:l.getKey(),anchorOffset:0,focusKey:l.getKey(),focusOffset:0,hasFocus:!0});if(a.getLength())return f.EditorState.forceSelection(e,u);var c=n.getBlockMap().delete(a.getKey()),d=n.merge({blockMap:c,selectionAfter:u});return f.EditorState.push(e,d,"remove-range")}return null}(t))&&a!==t)return r(a),"handled";break;case"delete":case"delete-word":case"delete-to-end-of-block":if((a=function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),r=t.getStartKey(),a=n.getBlockForKey(r);if("atomic"===a.getType()){var o=new f.ContentBlock({key:a.getKey()}),s=n.getBlockMap().set(a.getKey(),o),i=n.merge({blockMap:s,selectionAfter:t});return f.EditorState.push(e,i,"remove-range")}if(t.getStartOffset()<a.getLength())return null;var l=n.getBlockAfter(r);if(l&&"atomic"===l.getType()){var u=new f.SelectionState({anchorKey:l.getKey(),anchorOffset:0,focusKey:l.getKey(),focusOffset:0,hasFocus:!0});if(a.getLength())return f.EditorState.forceSelection(e,u);var c=n.getBlockMap().delete(a.getKey()),d=n.merge({blockMap:c,selectionAfter:u});return f.EditorState.push(e,d,"remove-range")}return null}(t))&&a!==t)return r(a),"handled"}return"not-handled"},handleReturn:n?void 0:function(e,t,n){var r=n.setEditorState,a=t.getSelection();if(!a.isCollapsed())return"not-handled";var o=t.getCurrentContent(),s=a.getStartKey(),i=o.getBlockForKey(s);return"atomic"===i.getType()?(r((0,f.addEmptyBlockBefore)(t,i.getKey())),"handled"):"not-handled"},handleBeforeInput:n?void 0:function(e,t){var n=t.getSelection();if(!n.isCollapsed())return"not-handled";var r=t.getCurrentContent(),a=n.getStartKey();return"atomic"===r.getBlockForKey(a).getType()?"handled":"not-handled"},handlePastedText:n?void 0:function(e,t,n,r){var a=r.setEditorState,o=r.getProps,s="CONNECT_ATOMIC_ENTITY:";if(e.startsWith(s)){e=e.substring(s.length);try{var i,l=JSON.parse(e),u=o().controller,c=u.getState("project.uploads"),d=u.getState("project.contentMap");(l.data.uploadId&&c[l.data.uploadId]||l.data.contentId&&d[l.data.contentId])&&(i=n.getSelection().getStartKey(),a((0,f.addAtomicBlockBefore)(n,i,l.type,l.data)))}catch(e){console.warn("failed to parse entity: ",e)}return"handled"}return"not-handled"},decorator:(0,o.default)(e)}};var r,f=n(10),a=n(840),o=(r=a)&&r.__esModule?r:{default:r}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/connect-?\w*\.unity\.com/i;t.default=function(e,t){var n=t||window&&window.location&&window.location.hostname||"";return e=e||"",!0===r.test(n)&&0!==e.indexOf("/livehelp")?"/livehelp"+e:e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){for(var e=arguments.length,r=Array(1<e?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return Object.keys(n).reduce(function(e,t){return-1===r.indexOf(t)&&(e[t]=n[t]),e},{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=_(n(2)),p=_(n(1)),u=_(n(3)),c=_(n(72)),g=_(n(13)),d=_(n(14)),h=n(7),f=_(n(4)),m=_(n(754)),v=_(n(6)),y=_(n(755));function _(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=n(481),S=(0,f.default)(m.default)(r=(0,v.default)(y.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,u.default),s(E,[{key:"getDialogOptions",value:function(e){var t={confirm:{text:this.__("button_ok"),theme:"thirdly"},cancel:{text:this.__("button_cancel"),theme:""}},n=this.__("title");switch(e){case"tfa":case"delete":t={confirm:{text:this.__("button_yes"),theme:"red"},cancel:{text:this.__("button_no"),theme:""}}}return{button:t,title:n,description:""}}},{key:"renderIcon",value:function(){var e=this.props.theme;return"delete"===e?p.default.createElement("div",{className:this.ss("icon-wrapper")},p.default.createElement("div",{className:this.ss("icon-bg")},p.default.createElement("div",{className:this.ss("icon","ifont","ifont-icons-trash")}))):"tfa"===e?p.default.createElement("div",{className:this.ss("icon-wrapper")},p.default.createElement("div",{className:this.ss("tfa-icon")},p.default.createElement(d.default,{src:w,width:100,height:100,sizes:"200px"}))):null}},{key:"renderButtons",value:function(){var e,t,n,r,a=this.props,o=a.confirmText,s=a.negateText,i=a.confirmStatus,l=a.theme,u=a.hideCancel,c=a.hideConfirm,d=(0,h.isLoadingOrSucceeded)(i),f=[];return u||(e=this.getDialogOptions(l).button.cancel.text,f.push(p.default.createElement(g.default,{key:"cancel",disabled:d,className:this.ss("button-cancel"),label:s||e,onClick:this.onClose}))),c||(n=(t=this.getDialogOptions(l).button.confirm).text,r=t.theme,f.push(p.default.createElement(g.default,{key:"ok",loading:d,theme:r,className:this.ss("button-ok"),label:o||n,onClick:this.onConfirm}))),"delete"===l?f.reverse():f}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.title,r=e.description,a=e.theme,o=this.getDialogOptions(a),s=o.title,i=o.description;return p.default.createElement(c.default,{open:t,position:"center",width:640,title:n||s,onCloseModal:this.onClose},p.default.createElement("div",{className:this.ss("content-wrap",a)},this.renderIcon(),p.default.createElement("div",{className:this.ss("description")},r||i),p.default.createElement("div",{className:this.ss("button-wrap")},this.renderButtons())))}}]),o=a=E,a.propTypes={open:l.default.bool,title:l.default.string,description:l.default.string,theme:l.default.oneOf(["default","delete","tfa"]),confirmText:l.default.string,negateText:l.default.string,confirmStatus:l.default.string,hideConfirm:l.default.bool,hideCancel:l.default.bool,onConfirm:l.default.func,onClose:l.default.func},a.defaultProps={theme:"default"},r=o))||r)||r;function E(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=b(this,(e=E.__proto__||Object.getPrototypeOf(E)).call.apply(e,[this].concat(a)))).state={},n.onConfirm=function(){n.props.onConfirm&&n.props.onConfirm()},n.onClose=function(){n.props.onClose&&n.props.onClose()},b(n,t)}t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=c(n(2)),f=c(n(1)),i=c(n(3)),p=c(n(20)),l=c(n(4)),u=c(n(753));function c(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=(0,l.default)(u.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,i.default),a(m,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.error,r=e.children,a=e.width,o=e.onCloseModal,s=e.disableBgClick,i=e.titleClassName,l=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["title","error","children","width","onCloseModal","disableBgClick","titleClassName"]),u=f.default.createElement("span",{className:this.ss("error")},n),c=a?{width:a}:{};return f.default.createElement(p.default,d({},l,{onCloseModal:s?null:o}),f.default.createElement("div",{ref:"contents",className:this.ss("dialog-contents"),style:c},f.default.createElement("div",{className:this.ss("title-wrap")},f.default.createElement("div",{className:this.ss("title",i)},t||"",n&&u),f.default.createElement("button",{className:this.ss("button-close"),onClick:this.onClose},f.default.createElement("div",{className:this.ss("close","ifont","ifont-icon-close2")}))),r))}}]),m.propTypes={title:s.default.string,error:s.default.string,children:s.default.any,onCloseModal:s.default.func,width:s.default.number,disableBgClick:s.default.bool,titleClassName:s.default.string},r=m))||r;function m(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=g(this,(e=m.__proto__||Object.getPrototypeOf(m)).call.apply(e,[this].concat(a)))).state={},n.onClose=function(){n.props.onCloseModal&&n.props.onCloseModal()},g(n,t)}t.default=h},function(e,t){e.exports={"side-toolbar":"side-toolbar_1Uri1lW5",show:"show_2DNCvyJm","header-one":"header-one_j6HHgwHR","header-two":"header-two_11sfg1X_","unordered-list-item":"unordered-list-item_33lOfYHp","ordered-list-item":"ordered-list-item_3XgGUEcT",blockquote:"blockquote_21ocYYyo","code-block":"code-block_3IGHMlbW",plus:"plus_1W7As8Zv",open:"open_1Lh20wiP","menu-icons":"menu-icons_ofjg3Zls",button:"button_1SQc1Jkf",icon:"icon_3o877UiW",photo:"photo_VXGiZviJ",video:"video_3bVK-Jhh",upload:"upload_3HZpDKk6",hide:"hide_4hCka6ON","paragraph-icon-wrapper":"paragraph-icon-wrapper_3Bcba8Xg","paragraph-icon":"paragraph-icon_2_zkr3h5","block-toolbar-wrapper":"block-toolbar-wrapper_W9ne1VBU","block-toolbar":"block-toolbar_3WzQEBY_","toolbar-button-wrapper":"toolbar-button-wrapper_IeF2EboF","toolbar-button":"toolbar-button_3igueKtG",active:"active_1p26GcIp"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=g(n(2)),d=g(n(1)),u=g(n(3)),f=g(n(4)),p=g(n(801));function g(e){return e&&e.__esModule?e:{default:e}}var h=(0,f.default)(p.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,u.default),s(m,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.checked,r=e.disabled,a=e.checkedChildren,o=e.unCheckedChildren,s=e.onChange,i=e.size,l=e.color,u=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","checked","disabled","checkedChildren","unCheckedChildren","onChange","size","color"]);return d.default.createElement("div",c({},u,{className:this.ss("switch",t,i,l)}),d.default.createElement("span",{className:this.ss("switchContent",n&&"checked",r&&"disabled"),tabIndex:"0",onClick:!r&&s},d.default.createElement("span",{className:this.ss("inner")},n?a||"":o||"")))}}]),o=a=m,a.propTypes={size:l.default.oneOf(["small","medium"]),color:l.default.oneOf(["green","blue"]),className:l.default.string,disabled:l.default.bool,checked:l.default.bool,checkedChildren:l.default.any,unCheckedChildren:l.default.any,onChange:l.default.func},a.defaultProps={size:"medium",color:"green"},r=o))||r;function m(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}t.default=h},function(e,t,n){e.exports=n.p+"../styles/i/default-webgl.113f9bc6f0c4d4ce118450d77b3b180d.png"},,,function(e,u,c){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=l(["header.recaptchaCode"],["header.recaptchaCode"]),r=l(["value"],["value"]),a=c(9),o=c(0),s=c(15),i=(t=s)&&t.__esModule?t:{default:t};function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}u.default={name:e,depends:[],signals:{changeRecaptchaCode:[(0,a.set)((0,o.state)(n),(0,o.props)(r))]},getServices:function(){},getState:function(){return{recaptchaCode:i.default.RECAPTCHA_ENABLE?"":"****"}},getRequestHeaderOption:function(e){return{headers:{captcha:e.get("header.recaptchaCode")}}},recaptchaError:function(e,t){return"ReCaptchaError"===e&&(t.getSignal("header.showMessage")({message:"recaptcha_error",type:"error"}),!0)}}}).call(u,"views/modules/common/header/ReCaptchaStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(23)),r=a(n(152));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return{order:e.order,match:e.match,parse:function(e){return{type:"text",content:e[0]}}}}var i=a(n(41)).default.getDefaultRules(),l={link:s(i.link),autolink:s(i.autolink),url:s(i.url),inlineCode:s(i.inlineCode),codeBlock:s(i.codeBlock),mentionWithTitle:{match:function(e,t){return function(r,n,e){if(n[0]!==r)return null;var t=e.sortBy(function(e){return-e.textWithTitle.length}).filter(function(e){var t=e.textWithTitle;return 1===n.indexOf(t)}).map(function(e){var t=e.id,n=e.textWithTitle;return[r+n,t]}).value(),a=void 0;return t&&0!==t.length&&(a=[t[0][0]]),t.forEach(function(e){e[0]===a[0]&&(a=a.concat(e[1]))}),a}("@",e.toLowerCase(),t.users)},parse:function(n){var r="";return n.forEach(function(e,t){0!==t&&(r=r.concat("<@"+n[t]+">"),t!==n.length-1&&(r=r.concat(" ")))}),{type:"mention",content:r}}},mention:{match:function(e,t){return r="@",n=e.toLowerCase(),a=t.users,n[0]!==r?null:a.sortBy(function(e){return-e.text.length}).filter(function(e){var t=e.text;return 1===n.indexOf(t)}).map(function(e){var t=e.id,n=e.text;return[r+n,t]}).first();var r,n,a},parse:function(e){return{type:"mention",content:"<@"+e[1]+">"}}},text:o.default.clone(i.text)};Object.keys(l).forEach(function(e,t){l[e].order=t});var u=r.default.parserFor(l);t.default={parse:function(e,t){var n=t.users,n=(0,o.default)(n).map(function(e){return{id:e.id,text:e.fullname.toLowerCase(),textWithTitle:e.fullname.concat("#",e.title).toLowerCase()}}),r=u(e,{inline:!0,users:n}),a=[];return r.forEach(function(e){var t;"mention"===e.type&&(t=/<@([a-f0-9]+)>/g.exec(e.content),a=a.concat(t[1]))}),{content:function t(e){var n="";return e.forEach(function(e){e.content.constructor===String?n+=e.content:e.content.constructor===Array?n+=t(e.content):console.warn("Unknown message item type: ",e)}),n}(r),mentions:a}},unparse:function(e,t){var r=t.users;return e.replace(/<@([a-f0-9]+)>/g,function(e,t){var n=r[t];return n?"@"+n.fullname:e})}}},function(e,t){e.exports={predefined_invite_interview:"predefined_invite_interview_361K",predefined_make_offer:"predefined_make_offer_236S",predefined_accept_offer:"predefined_accept_offer_3anT",predefined_decline_offer:"predefined_decline_offer_LXqL",predefined_withdraw_offer:"predefined_withdraw_offer_3JTA",predefined_invite_interview_plaintext:"predefined_invite_interview_plaintext_H_jS",predefined_make_offer_plaintext:"predefined_make_offer_plaintext_2sgi",predefined_accept_offer_plaintext:"predefined_accept_offer_plaintext_2yoA",predefined_decline_offer_plaintext:"predefined_decline_offer_plaintext_3xB1",predefined_withdraw_offer_plaintext:"predefined_withdraw_offer_plaintext_lZO0",predefined_client_create_channel:"predefined_client_create_channel_1zvK",predefined_freelancer_create_channel:"predefined_freelancer_create_channel_1oui",predefined_client_create_channel_plaintext:"predefined_client_create_channel_plaintext_2FYf",predefined_freelancer_create_channel_plaintext:"predefined_freelancer_create_channel_plaintext_3eLG",predefined_accept_relationship:"predefined_accept_relationship_1JcD",predefined_request_relationship:"predefined_request_relationship_20JX",predefined_new_group_channel:"predefined_new_group_channel_2x-n",new_group_channel:"new_group_channel_kQpY",control_join:"control_join_1vIJ",control_left:"control_left_1oDR",control_invite:"control_invite_1SLD",control_kick:"control_kick_2OGd",control_edit_topic:"control_edit_topic_1FNi",control_edit_name:"control_edit_name_38VC",channel_name_comma:"channel_name_comma_3jHo",channel_name_and:"channel_name_and_2EBx",channel_name_people:"channel_name_people_wn4G",channel_name_empty:"channel_name_empty_2nqH",call_is_created:"call_is_created_2xFo",call_is_ended:"call_is_ended_-N2X",my_job:"my_job_1hNW",projects:"projects_1_Q6",lobbies:"lobbies_2wet",lobby_default_1:"lobby_default_1_3h2b",lobby_default_2:"lobby_default_2_WKIh",image_message:"image_message_1yCI",file_message:"file_message_16IW",workspace_connect:"workspace_connect_Nwdp",workspace_default_lobby:"workspace_default_lobby_2Clv"}},function(e,u,c){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t=i(["messages.connected"],["messages.connected"]),n=i(["messages.sessionId"],["messages.sessionId"]),r=i(["sessionId"],["sessionId"]),a=i(["messages.disconnected"],["messages.disconnected"]),o=c(9),s=c(0);function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=void 0;u.default={name:e,depends:[],signals:{connectionOpen:[(0,o.set)((0,s.state)(t),!0),(0,o.set)((0,s.state)(n),(0,s.props)(r)),(0,o.set)((0,s.state)(a),!1)],connectionClosed:[(0,o.set)((0,s.state)(t),!1),function(e){var n,t=e.props,r=e.state,a=t.retryInMilliSeconds;void 0===a?r.set("messages.disconnected",!0):"number"==typeof a&&(r.set("messages.disconnected",a),n=Date.now()+a,function e(){l&&(clearTimeout(l),l=null);var t=n-Date.now();t<1e3&&(t=1e3),"number"==typeof r.get("messages.disconnected")&&(r.set("messages.disconnected",t),l=setTimeout(e,500))}())}],connectionReconnecting:[(0,o.set)((0,s.state)(a),"reconnecting")],forceReload:[function(e){var t=e.props.delay;setTimeout(function(){window.location.reload()},t)}]},getServices:function(){},getState:function(){return{connected:!1,sessionId:"",disconnected:!1}},isConnected:function(e){return e.get("messages.connected")},getSessionId:function(e){return e.get("messages.sessionId")}}}).call(u,"views/v2/modules/messages/ConnectionStore.js")},function(e,y,_){"use strict";(function(e){Object.defineProperty(y,"__esModule",{value:!0});var t,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n=p(["messages.showSearchOrgs"],["messages.showSearchOrgs"]),r=p(["messages.createWorkspaceStatus.",""],["messages.createWorkspaceStatus.",""]),a=p(["organizationId"],["organizationId"]),o=p(["messages.joinWorkspaceStatus.",""],["messages.joinWorkspaceStatus.",""]),i=p(["messages.licenseExpireDisplay"],["messages.licenseExpireDisplay"]),l=p(["display"],["display"]),u=_(9),c=_(0),d=_(7),f=(t=d)&&t.__esModule?t:{default:t};function p(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=["messages","workspaces"],h=["messages","organizations"];function m(e){return{id:e.id,organizationId:e.organizationId,name:e.name,licenseActive:e.licenseActive,trialExpireTime:e.trialExpireTime,supportQuota:e.supportQuota,supportBalance:e.supportBalance,botId:e.botId,residentId:e.residentId}}function v(t){return function(e){e.state.set("messages.searchOrgStatus",t)}}y.default={name:e,depends:[],signals:{channelReady:[function(e){var t=e.props,n=e.state,r=t.workspace,a=n.get(g),o=a?s({},a):{};o[r.id]=m(r),n.set(g,o)}],connectionOpen:[function(e){var t=e.props,n=e.state,r=t.workspaces,a=n.get(g),o=a?s({},a):{};r.forEach(function(e){o[e.id]=m(e)}),n.set(g,o)}],searchOrganizations:[v(f.default.inProgress),(0,u.set)((0,c.state)(n),!0),[function(e){var t=e.http,n=e.path;return t.get("/api/organizations").then(n.success).catch(n.error)},{success:[v(f.default.succeeded),function(e){var t=e.props,n=e.state,r=t.status,a=t.result,o={};200===r&&a&&(a.forEach(function(e){o[e.id]=e}),n.set(h,o))}],error:[v(f.default.failed)]}]],createWorkspace:[(0,u.set)((0,c.state)(r,(0,c.props)(a)),f.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.organizationId;return n.post("/api/workspace",{organizationId:a}).then(r.success).catch(r.error)},{success:[(0,u.set)((0,c.state)(r,(0,c.props)(a)),f.default.succeeded),function(e){var t=e.props,n=e.controller,r=t.status,a=t.result;200===r&&a&&n.getSignal("messages.workspaceCreate")(s({},a,{open:!0}))}],error:[(0,u.set)((0,c.state)(r,(0,c.props)(a)),f.default.failed)]}]],joinWorkspace:[(0,u.set)((0,c.state)(o,(0,c.props)(a)),f.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.workspaceId;return n.post("/api/workspaces/"+a+"/join",{}).then(r.success).catch(r.error)},{success:[(0,u.set)((0,c.state)(o,(0,c.props)(a)),f.default.succeeded),function(e){var t=e.props,n=e.controller,r=t.status,a=t.result;200===r&&a&&n.getSignal("messages.workspaceCreate")(s({},a,{open:!0}))}],error:[(0,u.set)((0,c.state)(o,(0,c.props)(a)),f.default.failed)]}]],workspaceSelect:[v(f.default.initial),(0,u.set)((0,c.state)(n),!1)],channelSelect:[(0,u.set)((0,c.state)(n),!1)],openExplore:[(0,u.set)((0,c.state)(n),!1)],workspaceRouted:[(0,u.set)((0,c.state)(n),!1)],showSupportView:[(0,u.set)((0,c.state)(n),!1)],workspaceCreate:[function(e){var t=e.props,n=e.state,r=e.controller,a=t,o={};o[a.id]=m(a),n.merge(g,o),a&&a.open&&r.getSignal("messages.workspaceSelect")({workspaceId:a.id})}],workspaceDelete:[function(e){var t=e.props,n=e.state,r=t;n.get([].concat(g,[r.id]))&&n.unset([].concat(g,[r.id]))}],toggleLicenseExpire:[(0,u.set)((0,c.state)(i),(0,c.props)(l))]},getState:function(){return{workspaces:{},searchOrgStatus:f.default.initial,showSearchOrgs:!1,createWorkspaceStatus:{},joinWorkspaceStatus:{},licenseExpireDisplay:!1}},getWorkspace:function(e,t){return e.get([].concat(g,[t]))},getWorkspaces:function(e){return e.get(g)},getDefaultWorkspace:function(e){var t=e.get(g);return Object.values(t).find(function(e){return""===e.organizationId})}}}).call(y,"views/v2/modules/messages/WorkspaceStore.js")},function(e,t,n){e.exports=n(8)(409)},function(e,w,S){"use strict";(function(e){Object.defineProperty(w,"__esModule",{value:!0});var t,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n=Object.freeze(Object.defineProperties(["project.checkWindow"],{raw:{value:Object.freeze(["project.checkWindow"])}})),o=s(S(34)),p=s(S(15)),c=s(S(7)),r=S(9),a=S(0);function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=["project","uploads"],g={},h=(i(t={image:"/api/p/0/image",video:"/api/p/0/video",audio:"/api/p/0/audio",model3d:"/api/p/0/sketchfab",assetstore:"/api/p/0/asset",headerImage:"/api/p/0/headerImage"},"webgl","/api/webgl/upload"),i(t,"preview","/api/webgl/preview"),t),m=["video","model3d","audio","assetstore"];function d(e){var t=e.props,n=e.state,r=t.result;n.set([].concat(l,[t.upload.id,err]),r)}function f(e,t){var n=(t.get(["project","projectData"])||{}).id,r=(t.get("challenge")||{}).challengeContent,a=(t.get("event")||{}).eventContent;return{id:e.id||o.default.createNonce(),sort:e.sort||0,uploadType:e.uploadType||"",filename:e.file&&e.file.name||"",fileSize:e.file&&e.file.size||0,contentType:e.file&&e.file.type||"",width:e.width||0,height:e.height||0,dataUrl:e.dataUrl||"",url:e.url||"",title:e.title||"",file:e.file||{},loaded:0,speed:0,projectId:n||"",challengeId:e.challengeId||(r||{}).id||"",eventTicketId:(a||{}).id||"",status:e.status||c.default.inProgress}}function v(e,t){return t.get([].concat(l,[e]))}function y(e,t){t.set([].concat(l,[e.id]),e)}function _(e,t){var n=v(e.id,t);t.set([].concat(l,[e.id]),u({},n,e))}function b(e,t){t.get([].concat(l,[e]))&&(t.unset([].concat(l,[e])),delete g[e])}w.default={name:e,depends:[],signals:{uploadAttachment:[function(e){var t=e.props,n=e.state,r=e.project,a=f(t.upload,n),o=t.cb;n.set([].concat(l,[a.id]),a),r.httpUpload(a,o)}],retryUploadAttachment:[function(e){var t=e.props,n=e.state,r=e.project,a=v(t.id,n),o=u({},a);o.loaded=0,o.total=0,o.speed=0,o.status=c.default.inProgress,delete o.err,n.set([].concat(l,[a.id]),o),r.httpUpload(o)}],cancelUploadAttachment:[function(e){var t=e.props,n=e.state,r=t.id;g[r]&&g[r].abort(),b(r,n)}],uploadCreate:[function(e){y(e.props,e.state)}],uploadProgress:[function(e){var t,n,r=e.props,a=e.state,o=a.get([].concat(l,[r.id]));o&&(t=0,o.processTime&&((n=r.processTime-o.processTime)<=0&&(n=1),t=1e3*(r.loaded-o.loaded)/n),r.speed=t,a.set([].concat(l,[o.id]),u({},o,r)))}],uploadComplete:[function(e){var t,n=e.props,r=e.state,a=e.controller,o=n.id,s=n.type,i=n.result,l=i&&JSON.parse(i)||{};"webgl"===s?(t=l.key,a.getSignal("project.startCheckWebglProgressTimer")({key:t,id:o}),_({id:o,status:c.default.succeeded},r)):(a.getSignal("project.addContent")(u({},l),{immediate:!0}),_({id:o,contentId:l.id,status:c.default.succeeded},r))}],uploadFail:[function(e){var t=e.props,n=e.state;v(t.id,n)&&_({id:t.id,err:t.err,status:c.default.failed},n)},function(e){var t,n,r,a,o,s=e.props,i=e.state,l=e.controller,u=v(s.id,i);u&&(r=(t=u.err||{}).message,a=["project",t.errorCode],(n=t.target)?a.push(n.trim().replace(/(\s|-)+/g,"_")):r&&a.push(r.trim().replace(/(\s|-)+/g,"_")),o=a.join("_"),l.getSignal("header.showMessage")({message:o}))}],uploadAbort:[function(e){var t=e.props,n=e.state;b(t.id,n)}],uploadAttachmentMultipart:[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=f(t.upload,n);return n.set([].concat(l,[o.id]),o),r.post("/api/attachment/multipartupload/create",{fileName:o.filename,fileType:o.contentType,private:!0}).then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.state,r=e.project,a=t.result;a&&(a.key&&n.set([].concat(l,[t.upload.id,"key"]),a.key),a.uploadId&&n.set([].concat(l,[t.upload.id,"uploadId"]),a.uploadId)),r.httpUpload(v(t.upload.id,n))}],error:[d],dummy:[]}],continueUploadAttachmentMultipart:[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=v(t.id,n),s="/api/attachment/multipartupload/offset?key="+o.key+"&uploadId="+o.uploadId+"&private=true";return r.get(s).then(a.success).catch(a.error)},{success:[function(e){var t,n=e.props,r=e.state,a=e.project,o=n.result;o&&(delete(t=v(n.id,r)).err,t.speed=0,t.status=c.default.inProgress,o.key&&(t.key=o.key),o.uploadId&&(t.uploadId=o.uploadId),o.startBlock&&(t.startBlock=o.startBlock),o.offset&&(t.offset=o.offset),r.set([].concat(l,[t.id]),t),a.httpUpload(t))}],error:[d],dummy:[]}],checkPendingWebgl:[function(e){var t=e.state,n=e.controller,r=t.get("project.projectData.pendingWebgl"),a=r;y({id:a,status:c.default.succeeded},t),n.getSignal("project.startCheckWebglProgressTimer")({key:r,id:a})}],setCheckWindow:[(0,r.set)((0,a.state)(n),!0)]},getServices:function(f){return{httpUpload:function(n,e){var r=1<arguments.length&&void 0!==e?e:"",t=n.file,a=n.uploadType,o=new XMLHttpRequest;o.open("POST",""+p.default.REQUEST_BASE_URL+(a&&h[a]||"/api/p/0/attachments"),!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.timeout=0;var s,i,l=n.startBlock||1,u=n.offset||0,c=n.uploadId||"",d=n.key||"";o.upload.addEventListener("progress",function(e){return f.getSignal("project.uploadProgress")({id:n.id,loaded:e.loaded+u,total:e.total+u,processTime:Date.now()})}),o.addEventListener("timeout",function(){return f.getSignal("project.uploadFail")({id:n.id})}),o.addEventListener("error",function(){return f.getSignal("project.uploadFail")({id:n.id,err:"network_error"})}),o.addEventListener("abort",function(){return f.getSignal("project.uploadAbort")({id:n.id})}),o.addEventListener("readystatechange",function(){var e,t;o&&4===o.readyState&&(200<=o.status&&o.status<300?(e=o.response,r?(t=f.getSignal(r))&&t({result:e,uploadId:n.id}):f.getSignal("project.uploadComplete")({id:n.id,sort:n.sort,result:e,type:a})):0<o.status&&f.getSignal("project.uploadFail")({id:n.id,err:JSON.parse(o.responseText)}))}),-1!==m.indexOf(a)?(o.setRequestHeader("Content-Type","application/json"),s={url:n.url,title:n.title},n.projectId&&(s.projectId=n.projectId),n.challengeId&&""!==n.challengeId&&(s.challengeId=n.challengeId),n.eventTicketId&&""!==n.eventTicketId&&(s.eventTicketId=n.eventTicketId),o.send(JSON.stringify(s))):(i=new FormData,n.projectId&&i.append("projectId",n.projectId),n.challengeId&&""!==n.challengeId&&i.append("challengeId",n.challengeId),n.eventTicketId&&""!==n.eventTicketId&&i.append("eventTicketId",n.eventTicketId),i.append("offset",u),i.append("startBlock",l),i.append("uploadId",c),i.append("key",d),i.append("fileName",t.name),i.append("fileType",t.type),i.append("size",t.size),i.append("fromWeb",!0),0!==u?i.append("file",t.slice(u)):i.append("file",t),o.send(i)),g[n.id]=o}}},getState:function(){return{uploads:{},checkWindow:!1}},getUpload:v,updateUpload:_}}).call(w,"views/v2/modules/projectV2/UploadStore.js")},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=Object.freeze(Object.defineProperties(["header.tooltips"],{raw:{value:Object.freeze(["header.tooltips"])}})),l=v(n(2)),u=v(n(1)),c=v(n(12)),d=v(n(3)),f=n(5),p=n(0),g=v(n(23)),h=v(n(4)),m=v(n(752));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(0,h.default)(m.default)((b(S,d.default),o(S,[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"componentDidUpdate",value:function(e){this.props!==e&&this.updatePosition()}},{key:"updatePosition",value:function(){var e=this.props.tooltip,t=e.position,n=e.targetWidth,r=e.targetHeight,a=e.left,o=e.top,s=c.default.findDOMNode(this),i=a,l=o;switch(t){case"left":i+=-s.offsetWidth,l+=r/2-s.offsetHeight/2;break;case"right":i+=n,l+=r/2-s.offsetHeight/2;break;case"bottom":i+=n/2-s.offsetWidth/2,l+=r;break;case"bottom-left":i+=n-s.offsetWidth,l+=r;break;case"top":default:i+=n/2-s.offsetWidth/2,l+=-s.offsetHeight}this.setState({left:i,top:l})}},{key:"render",value:function(){var e=this.props.tooltip,t=e.text,n=e.type,r=e.position,a=this.state,o=a.left,s=a.top;return u.default.createElement("div",{className:this.ss("tooltip","tooltip-"+r,"tooltip-"+n),style:{left:o,top:s}},t)}}]),S.propTypes={tooltip:l.default.object.isRequired},r=S))||r;function S(){var e,t,n;y(this,S);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=_(this,(e=S.__proto__||Object.getPrototypeOf(S)).call.apply(e,[this].concat(a)))).state={left:0,top:0},_(n,t)}var E=(0,f.decorator)({tooltips:(0,p.state)(i)})(a=(0,h.default)(m.default)((b(O,d.default),o(O,[{key:"render",value:function(){var e=this.props.tooltips,t=g.default.map(e,function(e){return e.text&&u.default.createElement(w,{key:e.id,tooltip:e})});return u.default.createElement("div",{className:this.ss("tooltips")},t)}}]),O.propTypes={tooltips:l.default.object.isRequired},a=O))||a)||a;function O(){return y(this,O),_(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=S(["header.setting.scrollTop"],["header.setting.scrollTop"]),i=S(["header.setting.currHeaderTop"],["header.setting.currHeaderTop"]),l=S(["header.popupMessages"],["header.popupMessages"]),u=S(["header.hideMessage"],["header.hideMessage"]),c=b(n(2)),g=b(n(1)),d=n(5),f=n(0),p=b(n(3)),h=n(24),m=b(n(4)),v=b(n(769)),y=b(n(6)),_=b(n(770));function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var E=h.presets.stiff,O=(0,d.decorator)({scrollTop:(0,f.state)(s),currHeaderTop:(0,f.state)(i),messages:(0,f.state)(l),hideMessage:(0,f.signal)(u)})(r=(0,m.default)(v.default)(r=(0,y.default)(_.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(C,p.default),a(C,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.messages||{},r=n.lastClicking,a=n.duration,o=void 0===a?0:a;r&&null===this.timerId&&this.isOpen(r,o)&&(this.timerId=setInterval(function(){return t.checkToClose(r,o)},1e3))}},{key:"isOpen",value:function(e,t){if(e){var n=Date.now()-e;return this.duration(n).asMilliseconds()<1e3*t}return!1}},{key:"checkToClose",value:function(e,t){this.isOpen(e,t)||this.handleClose()}},{key:"render",value:function(){var s=this,e=this.props,t=e.messages,i=e.className,l=e.theme,n=t||{},r=n.lastClicking,a=n.duration,o=void 0===a?0:a,u=n.message,c=n.type,d=n.params,f=void 0===d?{}:d,p=this.isOpen(r,o)?{modalScale:(0,h.spring)(1,E),modalOpacity:(0,h.spring)(1,E)}:{modalScale:(0,h.spring)(.75,E),modalOpacity:(0,h.spring)(0,E)};return g.default.createElement(h.Motion,{defaultStyle:{modalScale:.75,modalOpacity:0},style:p},function(e){var t=e.modalScale,n=e.modalOpacity;if(n<.1)return null;var r,a={transform:"scale3d("+t+", "+t+", 1)",opacity:n},o="";return o=u instanceof Array?(r=u.map(function(e){return s.__(e)}).join(", "),s.__("project_fields_required",{fields:r})):s.__(u,f),g.default.createElement("div",{className:s.ss("message-wrap",c,l)},g.default.createElement("div",{className:s.ss(i,"message",c||"error"),style:a},o))})}}]),C.propTypes={className:c.default.string,scrollTop:c.default.number,currHeaderTop:c.default.number,messages:c.default.object.isRequired,hideMessage:c.default.func,theme:c.default.string},r=C))||r)||r)||r;function C(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,C);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=w(this,(e=C.__proto__||Object.getPrototypeOf(C)).call.apply(e,[this].concat(a)))).timerId=null,n.handleClose=function(){clearInterval(n.timerId),n.timerId=null,n.props.hideMessage()},w(n,t)}t.default=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.editorKey,n=e.renderOnly;if(!t)throw new Error("editorKey is empty");return{onChange:n?void 0:function(e,t){var n=t.getEditorState,r=t.getProps,a=e.getCurrentContent().getFirstBlock().getLength();return s<a?(r().controller.getSignal("header.showMessage")({message:"project_title_maxLength_135"}),o.EditorState.forceSelection(n(),n().getSelection())):e}}};var o=n(10),s=135},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=j(["draft.editorStates.",""],["draft.editorStates.",""]),c=j(["parentEditorKey"],["parentEditorKey"]),d=j(["editorKey"],["editorKey"]),f=j(["draft.editorEditable.",""],["draft.editorEditable.",""]),p=j(["draft.editorDirty.",""],["draft.editorDirty.",""]),g=j(["project.contentMap"],["project.contentMap"]),h=j(["draft.setEditorState"],["draft.setEditorState"]),m=j(["draft.setEditorEditable"],["draft.setEditorEditable"]),v=j(["draft.setEditorDirty"],["draft.setEditorDirty"]),y=k(n(1)),_=k(n(2)),b=k(n(3)),w=n(5),S=n(0),E=n(10),O=k(n(4)),C=k(n(790));function k(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var M=(0,w.decorator)({parentEditorState:(0,S.state)(l,(0,S.props)(c)),editorState:(0,S.state)(l,(0,S.props)(d)),editable:(0,S.state)(f,(0,S.props)(d)),dirty:(0,S.state)(p,(0,S.props)(d)),contentMap:(0,S.state)(g),setEditorState:(0,S.signal)(h),setEditorEditable:(0,S.signal)(m),setEditorDirty:(0,S.signal)(v)})(r=(0,O.default)(C.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(T,b.default),s(T,[{key:"componentWillMount",value:function(){var e=this.getEntityTitle();this.defaultEditorState=(0,E.createEditorStateWithText)(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.getEntityTitle(e);t!==this.getEntityTitle()&&(this.defaultEditorState=(0,E.createEditorStateWithText)(t));var n=e.editable;this.props.editable&&!n&&this.syncToEntity(e);var r,a,o,s=e.dirty,i=e.editorKey,l=e.setEditorDirty;s||(r=e.editorState,(a=this.props.editorState)&&r&&(o=r.getCurrentContent(),a.getCurrentContent()!==o&&l({editorKey:i})))}},{key:"getEntityData",value:function(e){var t=e||this.props,n=t.entityKey;return t.parentEditorState.getCurrentContent().getEntity(n).getData()}},{key:"getEntityTitle",value:function(e){var t,n,r,a=void 0;switch((e=e||this.props).type){case"single":a=this.getEntityData(e).title;break;case"gallery":"itemPos"in e&&(t=e.itemPos,a=(r=void 0===(n=this.getEntityData(e).contents)?[]:n)[t]&&r[t].title)}return a||""}},{key:"mergeEntityTitle",value:function(e,t,n){var r,a,o,s,i,l=void 0;switch(this.props.type){case"single":l=(0,E.mergeAtomicEntityData)(e,t,{title:n});break;case"gallery":"itemPos"in this.props&&(r=this.props.itemPos,s=(o=void 0===(a=this.getEntityData().contents)?[]:a)[r]||{},(i=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o))).splice(r,1,u({},s,{title:n})),l=(0,E.mergeAtomicEntityData)(e,t,{contents:i}))}return l||e}},{key:"syncToEntity",value:function(e){var t=e||this.props,n=t.dirty,r=t.parentEditorKey,a=t.parentEditorState,o=t.entityKey,s=t.editorKey,i=t.editorState,l=t.setEditorDirty,u=t.setEditorState;if(n){var c=i.getCurrentContent().getPlainText(),d=a.getCurrentContent(),d=this.mergeEntityTitle(d,o,c),f=E.EditorState.push(a,d,"apply-entity");return u({editorKey:r,editorState:f}),l({editorKey:s,dirty:!1}),f}return null}},{key:"syncToEditor",value:function(e){var t=0<arguments.length&&void 0!==e&&e,n=this.getEntityTitle(),r=this.props,a=r.dirty,o=r.editorState,s=r.editorKey,i=r.setEditorState,l=r.setEditorDirty;a&&!t||((o&&o.getCurrentContent().getPlainText()||"")!==n&&i({editorKey:s,editorState:(0,E.createEditorStateWithText)(n)}),a&&l({editorKey:s,dirty:!1}))}},{key:"moveToNextBlock",value:function(e){var t,n=this.props,r=n.parentEditorKey,a=n.parentEditorState,o=n.parentOffsetKey,s=n.setEditorEditable,i=n.setEditorState,l=(e=e||a).getCurrentContent(),u=E.DraftOffsetKey.decode(o).blockKey,c=l.getKeyAfter(u);c&&(s({editorKey:r}),t=new E.SelectionState({anchorKey:c,anchorOffset:0,focusKey:c,focusOffset:0}),i({editorKey:r,editorState:E.EditorState.forceSelection(E.EditorState.set(e,{currentContent:l.merge({selectionAfter:t})}),t)}))}},{key:"moveToPrevBlock",value:function(){var e,t=this.props,n=t.parentEditorKey,r=t.parentEditorState,a=t.parentOffsetKey,o=t.setEditorEditable,s=t.setEditorState,i=r.getCurrentContent(),l=E.DraftOffsetKey.decode(a).blockKey,u=i.getBlockBefore(l);u&&(o({editorKey:n}),e=new E.SelectionState({anchorKey:u.getKey(),anchorOffset:"atomic"===u.getType()?0:u.getLength(),focusKey:u.getKey(),focusOffset:"atomic"===u.getType()?0:u.getLength()}),s({editorKey:n,editorState:E.EditorState.forceSelection(E.EditorState.set(r,{currentContent:i.merge({selectionAfter:e})}),e)}))}},{key:"handlePastedText",value:function(e){return e.startsWith("CONNECT_ATOMIC_ENTITY:")?"handled":"not-handled"}},{key:"render",value:function(){var e=this.props,t=e.parentIsFocused,n=e.parentOffsetKey,r=e.editorKey,a=e.editorState,o=e.editable,s=e.dirty,i=e.placeholder,l=e.renderOnly,u=!(s&&a.getCurrentContent().getPlainText()||this.getEntityTitle()||t||o);return y.default.createElement("div",{className:this.ss("caption",u&&"hide")},y.default.createElement(E.Editor,{offsetKey:n,editorKey:r,defaultEditorState:this.defaultEditorState,renderOnly:l,textAlignment:"center",placeholder:i,keyBindingFn:l?void 0:this.keyBindingFn,onDownArrow:l?void 0:this.onDownArrow,onUpArrow:l?void 0:this.onUpArrow,handleReturn:l?void 0:this.handleReturn,onEscape:l?void 0:this.onEscape,onBlur:l?void 0:this.onBlur,handlePastedText:l?void 0:this.handlePastedText}))}}]),o=a=T,a.propTypes={parentEditorKey:_.default.string.isRequired,parentEditorState:_.default.object,parentIsFocused:_.default.bool,parentOffsetKey:_.default.string.isRequired,editorKey:_.default.string.isRequired,editorState:_.default.object,editable:_.default.bool,dirty:_.default.bool,entityKey:_.default.string,renderOnly:_.default.bool,placeholder:_.default.any,setEditorState:_.default.func,setEditorEditable:_.default.func,setEditorDirty:_.default.func,itemPos:_.default.number,type:_.default.oneOf(["single","gallery"])},a.defaultProps={type:"single"},r=o))||r)||r;function T(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=r=I(this,(e=T.__proto__||Object.getPrototypeOf(T)).call.apply(e,[this].concat(a)))).onEscape=function(){r.syncToEditor(!0)},r.onBlur=function(){r.syncToEntity()},r.onDownArrow=function(e){e.shiftKey||(0,E.isFocusAtLastLine)()&&(r.moveToNextBlock(),e.preventDefault())},r.onUpArrow=function(e){e.shiftKey||(0,E.isFocusAtFirstLine)()&&(r.moveToPrevBlock(),e.preventDefault())},r.keyBindingFn=function(e){if(!e.shiftKey){if(37===e.keyCode){var t=r.props.editorState;if((0,E.isSelectionAtBlockStart)(t))return r.moveToPrevBlock(),""}if(39===e.keyCode){var n=r.props.editorState;if((0,E.isSelectionAtBlockEnd)(n))return r.moveToNextBlock(),""}}},r.handleReturn=function(){var e=r.syncToEntity();return r.moveToNextBlock(e),"handled"},I(r,t)}t.default=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFiles=d,t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.editorKey,n=e.renderOnly;if(!t)throw new Error("editorKey is empty");var r=o.default;e.decorator&&(r=e.decorator(r));return r=(0,a.default)(r,{editorKey:t,renderOnly:n}),{handleDroppedFiles:n?void 0:function(e,t,n){var r=n.getEditorState,a=n.setEditorState,o=(0,n.getProps)().controller,s=o.getState("project.dragOverBlockKey");if(!s)return"not-handled";var i=d(t),l=0!==i.length,u=r();i.forEach(function(e){u=(0,c.addAtomicBlockBefore)(u,s,"ATTACHMENT",{uploadId:e.id}),o.getSignal("project.uploadAttachment")({upload:e})}),l&&a(u);return l?"handled":"not-handled"},handlePastedFiles:n?void 0:function(e,t){var n=t.getEditorState,r=t.setEditorState,a=(0,t.getProps)().controller,o=n(),s=o.getSelection().getStartKey(),i=d(e),l=0!==i.length;i.forEach(function(e){o=(0,c.addAtomicBlockBefore)(o,s,"ATTACHMENT",{uploadId:e.id}),a.getSignal("project.uploadAttachment")({upload:e})}),l&&r(o);return l?"handled":"not-handled"},decorators:[{strategy:s,component:r}]}};var a=r(n(36)),o=r(n(795)),c=n(10);function r(e){return e&&e.__esModule?e:{default:e}}function d(e){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)).filter(function(e){return 0!==e.type.indexOf("image/")}).map(function(e){return{id:Date.now()+"_"+Math.random().toString().slice(2,6),file:e,uploadType:"attachment",type:e.type}})}function s(e,t,n){"atomic"===e.getType()&&e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&"ATTACHMENT"===n.getEntity(t).getType()},t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=v(n(1)),u=v(n(2)),c=v(n(3)),d=n(10),f=v(n(4)),p=v(n(844)),g=v(n(29)),h=v(n(30)),m=v(n(88));function v(e){return e&&e.__esModule?e:{default:e}}var y=(0,f.default)(p.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_,c.default),s(_,[{key:"render",value:function(){var e=this.props,t=e.editorKey,n=e.placeholder,r=e.defaultEditorState,a=e.renderOnly,o=e.theme,s=e.warning;return l.default.createElement("div",{className:this.ss("title-wrap",o,s&&"warning")},l.default.createElement(d.Editor,{editorKey:t,placeholder:n,defaultEditorState:r,renderOnly:a,plugins:this.draftPlugins}))}}]),o=a=_,a.propTypes={editorKey:u.default.string.isRequired,nextEditorKey:u.default.string,placeholder:u.default.string,defaultEditorState:u.default.object,renderOnly:u.default.bool,theme:u.default.string,warning:u.default.bool},a.defaultProps={renderOnly:!1},r=o))||r;function _(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,e,t)),r={editorKey:e.editorKey,renderOnly:e.renderOnly,nextEditorKey:e.nextEditorKey,returnToNextEditor:!0};return n.titleNormalizePlugin=(0,m.default)(r),n.navigationPlugin=(0,g.default)(r),n.autoSavePlugin=(0,h.default)(r),n.draftPlugins=[n.titleNormalizePlugin,n.navigationPlugin,n.autoSavePlugin],n}t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=v(n(1)),u=v(n(2)),c=v(n(3)),d=n(10),f=v(n(4)),p=v(n(845)),g=v(n(29)),h=v(n(30)),m=v(n(846));function v(e){return e&&e.__esModule?e:{default:e}}var y=(0,f.default)(p.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_,c.default),s(_,[{key:"render",value:function(){var e=this.props,t=e.editorKey,n=e.placeholder,r=e.defaultEditorState,a=e.renderOnly,o=e.theme;return l.default.createElement("div",{className:this.ss("desc-wrap",o)},l.default.createElement(d.Editor,{editorKey:t,placeholder:n,defaultEditorState:r,renderOnly:a,plugins:this.draftPlugins}))}}]),o=a=_,a.propTypes={editorType:u.default.string,editorKey:u.default.string.isRequired,prevEditorKey:u.default.string,nextEditorKey:u.default.string,placeholder:u.default.string,defaultEditorState:u.default.object,renderOnly:u.default.bool,theme:u.default.string},a.defaultProps={renderOnly:!1},r=o))||r;function _(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,e,t)),r={editorType:e.editorType,editorKey:e.editorKey,renderOnly:e.renderOnly,prevEditorKey:e.prevEditorKey,nextEditorKey:e.nextEditorKey,returnToNextEditor:!0};return n.descriptionNormalizePlugin=(0,m.default)(r),n.navigationPlugin=(0,g.default)(r),n.autoSavePlugin=(0,h.default)(r),n.draftPlugins=[n.descriptionNormalizePlugin,n.navigationPlugin,n.autoSavePlugin],n}t.default=y},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=k(["project.projectData.id"],["project.projectData.id"]),i=k(["project.uploadAttachment"],["project.uploadAttachment"]),l=k(["project.openUploadVideo"],["project.openUploadVideo"]),u=k(["header.showMessage"],["header.showMessage"]),c=O(n(2)),d=O(n(1)),f=O(n(3)),p=n(5),g=n(0),h=O(n(14)),m=O(n(13)),v=n(132),y=n(847),_=n(11),b=O(n(4)),w=O(n(848)),S=O(n(6)),E=O(n(849));function O(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var I={uri:"text/uri-list",files:"Files"},j=n(850),M=n(851),T=(0,p.decorator)({projectId:(0,g.state)(s),uploadAttachment:(0,g.signal)(i),openUploadVideo:(0,g.signal)(l),showMessage:(0,g.signal)(u)})(r=(0,b.default)(w.default)(r=(0,S.default)(E.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(P,f.default),a(P,[{key:"getEntity",value:function(){var e=this.props,t=e.entityKey;return e.editorState.getCurrentContent().getEntity(t)}},{key:"getEntityData",value:function(){return this.getEntity().getData()}},{key:"getEntityType",value:function(){return this.getEntity().getType()}},{key:"isWebgl",value:function(){return"WEBGLGALLERY"===this.getEntityType()}},{key:"addCounter",value:function(e){var t=this.state.counter;this.setState({counter:t+e})}},{key:"uploadImages",value:function(e){var n=this,t=this.props,r=t.showMessage,a=t.uploadAttachment;9<e.length?r({message:"fileMaxLength_9"}):(0,v.readImages)(Array.from(e)).then(function(e){var t=[];e.forEach(function(e){t.push(e.id),a({upload:e})}),n.addUpload(t)})}},{key:"uploadZipFile",value:function(e){var n=this,t=this.props,r=t.projectId,a=t.uploadAttachment,o=t.showMessage;209715200<e.size?o({message:"fileMaxSize_200"}):(0,y.readZipFile)(e).then(function(e){var t=[e.id];e.projectId=r,a({upload:e}),n.addUpload(t)})}},{key:"addUpload",value:function(e){var t=this.getEntityData().contents,n=void 0===t?[]:t,r=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n));(e||[]).forEach(function(t){-1===n.findIndex(function(e){return e.uploadId===t})&&r.push({uploadId:t})}),this.props.syncToEntity&&this.props.syncToEntity(r)}},{key:"renderButtons",value:function(){return this.isWebgl()?d.default.createElement("div",{className:this.ss("add-new-buttons")},d.default.createElement("div",{className:this.ss("button")},d.default.createElement(m.default,{theme:"primary-blue",size:"medium",widthType:"full",label:this.__("button_upload_webgl"),onClick:this.onClickUploadWebgl}))):d.default.createElement("div",{className:this.ss("add-new-buttons")},d.default.createElement("div",{className:this.ss("button")},d.default.createElement(m.default,{theme:"blue",size:"medium",widthType:"full",label:this.__("button_upload_photo"),onClick:this.onClickUploadPhoto})),d.default.createElement("div",{className:this.ss("button")},d.default.createElement(m.default,{theme:"white",size:"medium",widthType:"full",label:this.__("button_upload_embed"),onClick:this.onClickUploadVideo})))}},{key:"renderFileInput",value:function(){return this.isWebgl()?d.default.createElement("input",{type:"file",ref:"zipSelect",multiple:!1,accept:"application/zip",className:this.ss("hide"),onChange:this.onZipFilesChange}):d.default.createElement("input",{type:"file",ref:"imageSelect",multiple:!0,accept:"image/*",className:this.ss("hide"),onChange:this.onFilesChange})}},{key:"renderBox",value:function(){var e=this.isWebgl();return d.default.createElement("div",{className:this.ss("add-new",0<this.state.counter&&"drag-over",e&&"black-background"),onClick:this.onClickBox,onDragOver:this.onDragOver,onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},d.default.createElement("div",{className:this.ss("add-new-icon",e&&"webgl")},e?d.default.createElement(h.default,{src:M,sizes:"40px"}):d.default.createElement(h.default,{src:j,width:140,height:132,sizes:"200px"})),d.default.createElement("div",{className:this.ss("add-new-title",e&&"hide")},e?this.__("add_new_title_webgl"):this.__("add_new_title")),d.default.createElement("div",{className:this.ss("add-new-description",e&&"webgl-description")},e?this.__("add_new_description_webgl"):this.__("add_new_description")),this.renderButtons(),this.renderFileInput())}},{key:"render",value:function(){var e=this.props.ratio;if(e){var t={paddingBottom:100*e+"%"};return d.default.createElement("div",{className:this.ss("upload-box")},d.default.createElement("div",{style:t}),d.default.createElement("div",{className:this.ss("add-new-wrap")},this.renderBox()))}return this.renderBox()}}]),P.propTypes={projectId:c.default.string,editorKey:c.default.string,entityKey:c.default.string,editorState:c.default.object,isFocused:c.default.bool,ratio:c.default.number,focus:c.default.func,showMessage:c.default.func,uploadAttachment:c.default.func,openUploadVideo:c.default.func,syncToEntity:c.default.func},r=P))||r)||r)||r;function P(){var e,t,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=c=C(this,(e=P.__proto__||Object.getPrototypeOf(P)).call.apply(e,[this].concat(r)))).state={counter:0},c.onClickUploadPhoto=function(){c.refs.imageSelect.click()},c.onClickUploadWebgl=function(){c.refs.zipSelect.click()},c.onClickUploadVideo=function(e){var t=e.url,n=void 0===t?"":t,r=c.props,a=r.editorKey,o=r.entityKey,s=r.openUploadVideo,i={editorKey:a,entityKey:o};n&&(i.url=n),s(i)},c.onClickBox=function(e){c.props.focus&&c.props.focus(e)},c.onFilesChange=function(e){var t,n;e&&e.target&&(n=void 0===(t=(e.target||{}).files)?[]:t,c.uploadImages(n),c.refs.imageSelect.value=null)},c.onZipFilesChange=function(e){var t,n;e&&e.target&&(0<(n=void 0===(t=(e.target||{}).files)?[]:t).length&&c.uploadZipFile(n[0]),c.refs.zipSelect.value=null)},c.onDragOver=function(e){e&&(0,_.pauseEvent)(e)},c.onDragEnter=function(e){e&&(0,_.pauseEvent)(e),c.addCounter(1)},c.onDragLeave=function(e){e&&(0,_.pauseEvent)(e),c.addCounter(-1)},c.onDrop=function(e){e&&(0,_.pauseEvent)(e),c.setState({counter:0}),c.onHandleDrop(e)},c.onHandleDrop=function(e){var t,n,r,a,o,s,i,l,u;e&&e.dataTransfer&&(a=void 0===(r=(n=(t=e.dataTransfer)||{}).files)?[]:r,i=(s=void 0===(o=n.types)?[]:o).contains,l=s.indexOf,(i&&s.contains(I.uri)||l&&-1!==s.indexOf(I.uri))&&(u=t.getData("URL"),c.onClickUploadVideo({url:u})),(i&&s.contains(I.files)||l&&-1!==s.indexOf(I.files))&&(c.isWebgl()&&0<a.length?c.uploadZipFile(a[0]):c.uploadImages(a)))},C(c,t)}t.default=T},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=f(n(2)),u=f(n(1)),c=f(n(12)),d=f(n(3));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-transform","width","padding-left","padding-right","border-width","box-sizing"],h=void 0,m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(v,d.default),s(v,[{key:"componentDidMount",value:function(){this.recalculateSize(),this.props.autoFocus&&this.focus()}},{key:"componentDidUpdate",value:function(e,t){var n=t.height,r=this.state.height;r!==n&&this.props.onResize&&this.props.onResize(r)}},{key:"onChange",value:function(e){this.recalculateSize(),this.props.onChange&&this.props.onChange(e)}},{key:"clear",value:function(){c.default.findDOMNode(this).value="",this.recalculateSize()}},{key:"focus",value:function(){this.refs.input.focus()}},{key:"recalculateSize",value:function(){var e,t,n,r,a,o,s=c.default.findDOMNode(this),i=s.value,l=this.props.fontWidthEstimate;null!==l&&-1===i.indexOf("\n")&&i.length*l<.8*s.offsetWidth?this.setState({height:"auto",overflow:"hidden"}):(h||(h=document.createElement("textarea"),document.body.appendChild(h)),t=(e=this.calculateNodeStyling(s)).paddingSize,n=e.borderSize,r=e.boxSizing,a=e.sizingStyle,h.setAttribute("style",a+";\n    height:0;\n    visibility:hidden;\n    overflow:hidden;\n    position:absolute;\n    z-index:-1000;\n    top:0;\n    right:0;\n"),h.value=i,o=h.scrollHeight,"border-box"===r?o+=n:"content-box"===r&&(o-=t),this.setState({height:o,overflow:"hidden"}))}},{key:"calculateNodeStyling",value:function(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),r=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),a=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{sizingStyle:g.map(function(e){return e+":"+t.getPropertyValue(e)}).join(";"),paddingSize:r,borderSize:a,boxSizing:n}}},{key:"render",value:function(){var t=this,e=this.props,n=(e.fontWidthEstimate,e.onResize,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fontWidthEstimate","onResize"]));return u.default.createElement("textarea",o({ref:"input"},n,{style:this.state,onChange:function(e){return t.onChange(e)}}))}}]),a=r=v,r.propTypes={fontWidthEstimate:l.default.number,autoFocus:l.default.bool,onResize:l.default.func,onChange:l.default.func},r.defaultProps={fontWidthEstimate:null},a);function v(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=p(this,(e=v.__proto__||Object.getPrototypeOf(v)).call.apply(e,[this].concat(a)))).state={height:"auto"},p(n,t)}t.default=m},,,,,,,,,,,function(e,t,n){"use strict";e.exports={isAdmin:function(e){var t=(e||{}).roles;return!(!t||0===t.length)&&0<=t.findIndex(function(e){return"owner"===e||"manager"===e})},isOwner:function(e){var t=(e||{}).roles;return!(!t||0===t.length)&&0<=t.findIndex(function(e){return"owner"===e})},isManager:function(e){var t=(e||{}).roles;return!(!t||0===t.length)&&0<=t.findIndex(function(e){return"manager"===e})}}},,,,,,,,,function(e,t,n){"use strict";function s(){var e=window.Notification;return!!e&&"granted"===e.permission}Object.defineProperty(t,"__esModule",{value:!0}),t.default={hasPermission:s,permissionDenied:function(){var e=window.Notification;return!e||"denied"===e.permission},requestPermission:function(){var e=window.Notification;return e?e.requestPermission():new Promise(function(e){e("denied")})},showNotification:function(e,t,n,r){if(!s())return null;var a=r&&r.tag||null,o=new Notification(t,{body:n,icon:e,tag:a});return setTimeout(function(){return o.close()},1e4),o.onclick=function(){r.onClick&&r.onClick(),o.close()},o}}},function(e,t){e.exports={join_request_received_team_text:"join_request_received_team_text_2Hbl",join_request_accepted_team_text:"join_request_accepted_team_text_2fO-",join_request_accepted_user_text:"join_request_accepted_user_text_1p_t",join_request_declined_user_text:"join_request_declined_user_text_HbOy",team_invitation_received_user_text:"team_invitation_received_user_text_2Sl9",team_invitation_received_user_admin_text:"team_invitation_received_user_admin_text_1tXf",team_invitation_accepted_user_text:"team_invitation_accepted_user_text_23q_",team_invitation_accepted_user_admin_text:"team_invitation_accepted_user_admin_text_gt2S",team_invitation_accepted_team_text:"team_invitation_accepted_team_text_1CjA",team_invitation_accepted_team_admin_text:"team_invitation_accepted_team_admin_text_3zad",team_invitation_declined_team_text:"team_invitation_declined_team_text_2Ry9",team_invitation_declined_team_admin_text:"team_invitation_declined_team_admin_text_3A6U",team_followed_team_text:"team_followed_team_text_2Re7",member_removed_team_text:"member_removed_team_text_16on",member_removed_team_admin_text:"member_removed_team_admin_text_1x-z",member_removed_user_text:"member_removed_user_text_1SIQ",member_removed_user_admin_text:"member_removed_user_admin_text_mX3i",member_leaves_team_text:"member_leaves_team_text_1805",member_leaves_team_admin_text:"member_leaves_team_admin_text_MRiR",client_receive_proposal_team_text:"client_receive_proposal_team_text_2rPN",proposal_approved_team_text:"proposal_approved_team_text_3eOU",proposal_approved_user_text:"proposal_approved_user_text_2Hj5",proposal_declined_user_text:"proposal_declined_user_text_26ST",client_invite_developer_user_text:"client_invite_developer_user_text_3Rkl",invitation_accepted_team_text:"invitation_accepted_team_text_1z5z",contributor_invitation_received_user_text:"contributor_invitation_received_user_text_haQj",contributor_invitation_accepted_user_text:"contributor_invitation_accepted_user_text_1UWT",contributor_invitation_declined_user_text:"contributor_invitation_declined_user_text_1Wxt",project_commented_user_text:"project_commented_user_text_373y",project_comment_mentioned_user_text:"project_comment_mentioned_user_text_2ANs",project_liked_user_text:"project_liked_user_text_3KVM",project_mentioned_user_text:"project_mentioned_user_text_1My2",project_message_commented_user_text:"project_message_commented_user_text_3lq6",project_participate_comment_user_text:"project_participate_comment_user_text_1nTV",post_liked_user_text:"post_liked_user_text_1Gc2",post_mentioned_user_text:"post_mentioned_user_text_IkAm",followed_user_text:"followed_user_text_ISgn",project_suspended_user_text:"project_suspended_user_text_ke6w",task_suspended_user_text:"task_suspended_user_text_1BvR",job_suspended_team_text:"job_suspended_team_text_cit9",job_share_user_text:"job_share_user_text_1koe",job_approved_user_text:"job_approved_user_text_3Nc-",task_approved_user_text:"task_approved_user_text_2lOO",showcase_approved_user_text:"showcase_approved_user_text_GeqR",game_approved_user_text:"game_approved_user_text_TZq5",article_approved_user_text:"article_approved_user_text_3byJ",company_suspended_team_text:"company_suspended_team_text_1owJ",school_admin_granted_user_text:"school_admin_granted_user_text_8Dag",school_admin_removed_user_text:"school_admin_removed_user_text_1gNE",school_request_accepted_user_text:"school_request_accepted_user_text_2ssw",school_request_declined_user_text:"school_request_declined_user_text_ByOS",school_member_removed_user_text:"school_member_removed_user_text_2ofF",school_application_received_school_text:"school_application_received_school_text_1lkL",school_deleted_school_text:"school_deleted_school_text_2HCO",reference_invitation_created_user_text:"reference_invitation_created_user_text_3yEP",reference_invitation_remind_user_text:"reference_invitation_remind_user_text_3F6Q",reference_invitation_changed_user_text:"reference_invitation_changed_user_text_1sBS",reference_received_user_text:"reference_received_user_text_2-e4",relationship_requested_user_text:"relationship_requested_user_text_2RN0",relationship_created_user_text:"relationship_created_user_text_1chn",relationship_accepted_user_text:"relationship_accepted_user_text_1MAC",event_coupon_code_user_text:"event_coupon_code_user_text_1ZIv",group_invitation_received_user_text:"group_invitation_received_user_text_2tde",group_invitation_accepted_group_text:"group_invitation_accepted_group_text_1Bh5",group_invitation_declined_group_text:"group_invitation_declined_group_text_24fb",group_member_removed_group_text:"group_member_removed_group_text_1fTq",group_member_removed_group_admin_text:"group_member_removed_group_admin_text_10mb",group_member_leaves_group_text:"group_member_leaves_group_text_3whg",group_member_leaves_group_admin_text:"group_member_leaves_group_admin_text_2qzq",group_member_removed_user_text:"group_member_removed_user_text_29U6",project_pinned_user_text:"project_pinned_user_text_Lcn2",project_featured_user_text:"project_featured_user_text_Qe_d",project_message_liked_user_text:"project_message_liked_user_text_3SyP",project_message_participate_liked_user_text:"project_message_participate_liked_user_text_3_lw",post_commented_user_text:"post_commented_user_text_Nvzm",post_participate_comment_user_text:"post_participate_comment_user_text_3VPn",post_pinned_user_text:"post_pinned_user_text_1iCI",post_featured_user_text:"post_featured_user_text_lpoP",job_pinned_user_text:"job_pinned_user_text_HmjH",job_featured_user_text:"job_featured_user_text_3AeD",realtime:"realtime_1Xlt",schedule:"schedule_yIsP",ticket_updated_user_text:"ticket_updated_user_text_1n_z",project_article_publish_user_text:"project_article_publish_user_text_ehFS",project_article_publish_team_text:"project_article_publish_team_text_3-XB",challenge_completed_win_user_text:"challenge_completed_win_user_text_1q5k",challenge_completed_win_team_text:"challenge_completed_win_team_text_1MgW",challenge_completed_honor_user_text:"challenge_completed_honor_user_text_2UzB",challenge_completed_honor_team_text:"challenge_completed_honor_team_text_312F",challenge_completed_user_text:"challenge_completed_user_text_O3Gr",challenge_completed_team_text:"challenge_completed_team_text_3t2B"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=s[e+"_"+t+"_href"],a=new RegExp("\\{(.*?)\\}","ig"),o=a.exec(r);for(;o;)r=r.replace("{"+o[1]+"}",n[o[1]]),o=a.exec(r);return r};var s={join_request_received_team_href:"/t/{teamId}/?type=members",join_request_accepted_team_href:"/t/{teamId}/?type=members",join_request_accepted_user_href:"/t/{teamId}/?type=members",join_request_declined_user_href:"/t/{teamId}",team_invitation_received_user_href:"/t/{teamId}",team_invitation_accepted_user_href:"/t/{teamId}/?type=members",team_invitation_accepted_team_href:"/t/{teamId}/?type=members",team_invitation_declined_team_href:"/t/{teamId}/?type=members",team_followed_team_href:"/u/{userId}",member_removed_team_href:"/t/{teamId}/?type=members",member_removed_user_href:"/t/{teamId}",member_leaves_team_href:"/t/{teamId}/?type=members",client_receive_proposal_team_href:"/jobs/{jobId}/manage?t=applications",proposal_approved_team_href:"/jobs/{jobId}/manage?t=matches",proposal_approved_user_href:"/jobs?t=matches",proposal_declined_user_href:"/jobs/{jobId}",client_invite_developer_user_href:"/jobs?t=interested_in_you",invitation_accepted_team_href:"/jobs/{jobId}/manage?t=matches",contributor_invitation_received_user_href:"/p/{projectId}",contributor_invitation_accepted_user_href:"/p/{projectId}",contributor_invitation_declined_user_href:"/p/{projectId}",project_commented_user_href:"/p/{projectId}",project_comment_mentioned_user_href:"/p/{projectId}",project_liked_user_href:"/p/{projectId}",project_pinned_user_href:"/p/{projectId}",project_featured_user_href:"/p/{projectId}",project_mentioned_user_href:"/p/{projectId}",project_message_commented_user_href:"/p/{projectId}",project_participate_comment_user_href:"/p/{projectId}",project_message_liked_user_href:"/p/{projectId}",project_message_participate_liked_user_href:"/p/{projectId}",project_article_publish_user_href:"/p/{projectId}",project_article_publish_team_href:"/p/{projectId}",post_liked_user_href:"/post/{postId}",post_commented_user_href:"/post/{postId}",post_participate_comment_user_href:"/post/{postId}",post_pinned_user_href:"/post/{postId}",post_featured_user_href:"/post/{postId}",post_mentioned_user_href:"/post/{postId}",followed_user_href:"/u/{userId}",project_suspended_user_href:"",task_suspended_user_href:"",job_suspended_team_href:"",job_share_user_href:"/jobs/{jobId}",job_pinned_user_href:"/jobs/{jobId}",job_featured_user_href:"/jobs/{jobId}",company_suspended_team_href:"",school_admin_granted_user_href:"/s/{schoolId}",school_admin_removed_user_href:"/s/{schoolId}",school_request_accepted_user_href:"/s/{schoolId}",school_request_declined_user_href:"/s/{schoolId}",school_member_removed_user_href:"/s/{schoolId}",school_application_received_school_href:"/s/{schoolId}/?type=tab_requested",school_deleted_school_href:"",reference_invitation_created_user_href:"/ref?tab=given",reference_invitation_remind_user_href:"/ref?tab=given",reference_invitation_changed_user_href:"/ref?tab=given",reference_received_user_href:"/ref?tab=received",relationship_requested_user_href:"/connections",relationship_created_user_href:"/messages/c/{channelId}",relationship_accepted_user_href:"/messages/c/{channelId}",group_invitation_received_user_href:"/g/{groupId}",group_invitation_accepted_group_href:"/g/{groupId}/?tab=members",group_invitation_declined_group_href:"/g/{groupId}/?tab=members",group_member_removed_group_href:"/g/{groupId}/?tab=members",group_member_removed_user_href:"/g/{groupId}",group_member_leaves_group_href:"/g/{groupId}/?tab=members",challenge_completed_win_user_href:"/showcases/{challengeId}?tab=winner&&topProjectId={projectId}",challenge_completed_win_team_href:"/showcases/{challengeId}?tab=winner&&topProjectId={projectId}",challenge_completed_honor_user_href:"/showcases/{challengeId}?tab=winner&&topProjectId={projectId}",challenge_completed_honor_team_href:"/showcases/{challengeId}?tab=winner&&topProjectId={projectId}",challenge_completed_user_href:"/u/{userId}",challenge_completed_team_href:"/t/{teamId}"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=r(n(1)),a=n(152),i=r(a);function r(e){return e&&e.__esModule?e:{default:e}}var l,u,c,d=(l={newline:a.defaultRules.newline,paragraph:o({},a.defaultRules.paragraph,{react:function(e,t,n){return s.default.createElement("p",{key:n.key},t(e.content,n))}}),url:o({},a.defaultRules.url,{parse:function(e,t,n){var r=a.defaultRules.url.parse(e,t,n);return r.context=n.context,r}}),link:o({},a.defaultRules.link,{parse:function(e,t,n){var r=a.defaultRules.link.parse(e,t,n);return r.context=n.context,r},react:function(t,e,n){var r={};if(t.context&&t.context.unclickable){return r.href="#",r.style={textDecoration:"none",pointerEvents:"none",cursor:"default",color:"inherit"},s.default.createElement("a",o({key:n.key},r),e(t.content,n))}var a=t.context&&(t.context[t.target]||t.context.onClick);return a?r.onClick=function(e){return a(e,t.target)}:(r.href=i.default.sanitizeUrl(t.target),r.target="_blank"),r.title=t.title,s.default.createElement("a",o({key:n.key},r),e(t.content,n))}}),strong:o({},a.defaultRules.strong,{react:function(e,t,n){return s.default.createElement("strong",{key:n.key},t(e.content,n))}}),u:a.defaultRules.u,noparse:{order:a.defaultRules.text.order,match:i.default.inlineRegex(/^!!(.+?)!!/),parse:function(e){return{type:"text",content:e[1]}},react:function(e){return e.content}},text:a.defaultRules.text,ifont:{order:a.defaultRules.text.order,match:function(e){return/^:ifont-([^\s:]+?):/.exec(e)},parse:function(e){return{ifont:e[1]}},react:function(e,t,n){return s.default.createElement("span",{key:n.key,className:"ifont ifont-"+e.ifont})}},list:a.defaultRules.list},u=i.default.parserFor(l),c=i.default.outputFor(i.default.ruleOutput(l,"react")),function(e,t){var n=-1===e.indexOf("\n\n");return n||(e+="\n\n"),c(u(e,{inline:n,context:t}))});t.default=d},function(e,t,n){"use strict";function r(e){return null!=e}function a(e){return""===e}function o(e,t){return!r(e)||a(e)||t.test(e)}var s={isValue:function(e){return!(void 0===e||""===e||null===e||!1===e||Array.isArray(e)&&!e.length)},isExisty:r,matchRegexp:function(e,t,n){return o(e,n)},isUndefined:function(e){return void 0===e},isEmptyString:a,isEmail:function(e){return o(e,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(e,t){return s.matchRegexp(e,t,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(e){return!0===e},isFalse:function(e){return!1===e},isNumeric:function(e){return"number"==typeof e||o(e,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(e){return o(e,/^[A-Z]+$/i)},isAlphanumeric:function(e){return o(e,/^[0-9A-Z]+$/i)},isInt:function(e){return o(e,/^(?:[-+]?(?:0|[1-9]\d*))$/)},minInt:function(e,t,n){return!!(s.isInt(e)&&n<=e)},isPhone:function(e){return o(e,/^1\d{10}$/)},isFloat:function(e){return o(e,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(e){return o(e,/^[A-Z\s]+$/i)},isSpecialWords:function(e){return o(e,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(e,t,n){return!r(e)||a(e)||e.length===n},equals:function(e,t,n){return!r(e)||a(e)||e===n},equalsField:function(e,t,n){return e===t[n].value},maxLength:function(e,t,n){return!r(e)||e.length<=n},minLength:function(e,t,n){return!r(e)||a(e)||e.length>=n}};e.exports=s},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var c=["messages","dimensions"];t.default={name:e,depends:[],signals:{updateDimensions:[function(e){var t=e.props,n=e.state,r=t.channelId,a=t.isScroll,o=t.scrollTop,s=t.scrollHeight,i=t.offsetHeight,l=[].concat(c,[r]),u=n.get(l);u&&u.isScroll===a&&u.scrollTop===o&&u.scrollHeight===s&&u.offsetHeight===i||n.set(l,{channelId:r,isScroll:a,scrollTop:o,scrollHeight:s,offsetHeight:i})}]},getState:function(){return{dimensions:{}}},isAtTop:function(e,t){var n=[].concat(c,[t]),r=e.get(n);if(!r)return!1;var a=r.scrollTop,o=r.scrollHeight,s=r.offsetHeight;return 0===a&&a<o-1-s},scrolledToTop:function(e,t){var n=[].concat(c,[t]),r=e.get(n);if(!r)return!1;var a=r.scrollTop,o=r.isScroll,s=r.scrollHeight,i=r.offsetHeight;return 0===a&&o&&a<s-1-i},isAtBottom:function(e,t){var n=[].concat(c,[t]),r=e.get(n);if(!r)return!1;var a=r.scrollTop;return r.scrollHeight-1-r.offsetHeight<=a},scrolledToBottom:function(e,t){var n=[].concat(c,[t]),r=e.get(n);if(!r)return!1;var a=r.scrollTop,o=r.scrollHeight,s=r.offsetHeight,i=r.isScroll;return o-1-s<=a&&i},getDimensions:function(e,t){var n=[].concat(c,[t]);return e.get(n)}}}).call(t,"views/v2/modules/messages/DimensionStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=["messages","channelJobs"];function l(e){var t=e.channelJobInfo;return t?{id:t.id,title:t.title,channelId:e.id,freelancerId:t.freelancerId}:null}t.default={name:e,depends:[],signals:{channelReady:[function(e){var t,n,r=e.props,a=e.state,o=r.normalChannels,s=o&&o.find(function(e){return"private"===e.type&&!!e.proposalId});!s||(t=l(s))&&((n={})[s.id]=t,a.set(i,n))}],connectionOpen:[function(e){var t=e.props,n=e.state,r=t.privateChannels,a={};r.forEach(function(e){var t;!e.proposalId||(t=l(e))&&(a[e.id]=t)}),n.set(i,a)}],channelCreate:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&t.channelJobInfo&&n.set([].concat(i,[t.id]),l(t))}],channelDelete:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&n.unset([].concat(i,[t.id]))}]},getState:function(){return{channelJobs:{}}},getChannelJob:function(e,t){return e.get([].concat(i,[t]))}}}).call(t,"views/v2/modules/messages/ChannelJobStore.js")},function(e,t,n){"use strict";var r=o(n(25)),a=o(n(34));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)({image:null,attachment:null}),i=/<iframe.*(\/>|<\/iframe>)/i,l=/\bwidth="(\s|\d)*"/i,u=/\bheight="(\s|\d)*"/i;e.exports={uploadTypes:s,blockTypes:{ATOMIC:"atomic"},entityTypes:{VIDEO:"video",ATTACHMENT:"attachment"},normalizeHtml:function(e){var t=(e||{}).html;return i.test(t)?i.exec(t)[0].replace(l,'width="100%"').replace(u,'height="100%"'):t},createUpload:function(e){return{id:e.id||a.default.createNonce(),uploadType:e.uploadType||"",filename:e.file&&e.file.name||"",fileSize:e.file&&e.file.size||0,contentType:e.file&&e.file.type||"",width:e.width||0,height:e.height||0,dataUrl:e.dataUrl||"",url:e.url||"",title:e.title||"",file:e.file||{},loaded:0,speed:0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(178),h=(r=a)&&r.__esModule?r:{default:r},m=n(10);t.default=function(e){var t=void 0,n=void 0,r=void 0,a=void 0,o=[],s=h.default.getEditorState(e,"editorTitle");s&&(t=s.getCurrentContent().getPlainText());var i=h.default.getEditorState(e,"editorSubTitle");i&&(n=i.getCurrentContent().getPlainText());var l=h.default.getEditorState(e,"editorDescription");l&&(r=l.getCurrentContent().getPlainText());var u,c,d=h.default.getEditorState(e,"editorBody"),f=!0;d&&(u=(0,m.normalizeValidAtomicBlocks)(d.getCurrentContent()),(c=d.getCurrentContent().getFirstBlock())&&0<c.getText().length&&(f=!1),a=JSON.stringify((0,m.convertToRaw)(u)),u.getBlocksAsArray().filter(function(e){return"atomic"===e.getType()}).forEach(function(e){var t=e.getEntityAt(0),n=u.getEntity(t),r=n.getType(),a=n.getData();-1!==["IMAGE","VIDEO"].indexOf(r)&&a.contentId&&o.push(a.contentId);-1!==["GAMEGALLERY","WEBGLGALLERY","SHOWCASEGALLERY"].indexOf(r)&&a.contents&&0<a.contents.length&&a.contents.forEach(function(e){var t=e.contentId;t&&o.push(t)})}));var p=(e.get(["project","projectData","headerImage"])||{}).id,g=e.get(["project","projectData","thumbnail"])||{};return{title:t,subTitle:n,description:r,body:a,bodyIsEmpty:f,contentIds:o,headerImageId:p,thumbnailId:g.id}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Object.freeze(Object.defineProperties(["header.changeRecaptchaCode"],{raw:{value:Object.freeze(["header.changeRecaptchaCode"])}})),i=g(n(3)),l=g(n(1)),u=g(n(2)),c=g(n(15)),d=g(n(745)),f=n(5),p=n(0);function g(e){return e&&e.__esModule?e:{default:e}}var h=(0,f.decorator)({onChange:(0,p.signal)(s)})((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,i.default),a(m,[{key:"onChange",value:function(e){var t=this.props,n=t.onChange,r=t.onVerify;n({value:e}),r&&r(e)}},{key:"render",value:function(){var t=this,e=c.default.CAPTCHA_CLIENT_KEY;return c.default.RECAPTCHA_ENABLE?l.default.createElement(d.default,{sitekey:e,onChange:function(e){return t.onChange(e)}}):null}}]),m.propTypes={onChange:u.default.func,onVerify:u.default.func},r=m))||r;function m(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={windows:!0,xbox:!0,winphone:!0,tizen:!0,steam:!0,playstation:!0,oculus:!0,gog:!0,gear_vr:!0,facebook:!0,google_play:!0,humble:!0,nintendo:!0,kongregate:!0,itch:!0,indie_game:!0,itune:!0,amazon:!0};t.default={getStoreImage:function(e){return r[e]?n(482)("./"+e+".png"):""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r(e)||a};var r=n(776),a="\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){if(!t)return null;var n=window.getComputedStyle(t).getPropertyValue("position");if("static"!==n)return t;return e(t.parentElement)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readImage=s,t.readImages=u,t.default=function(e){var t=e.editorKey,n=e.renderOnly;if(!t)throw new Error("editorKey is empty");var r=o.default;e.decorator&&(r=e.decorator(r));return r=(0,a.default)(r,{editorKey:t,renderOnly:n}),{handleDroppedFiles:n?void 0:function(e,t,n){var r=n.getEditorState,a=n.setEditorState,o=(0,n.getProps)().controller,s=o.getState("project.dragOverBlockKey");if(!s)return"not-handled";var i=t.some(function(e){return 0===e.type.indexOf("image/")});return u(t).then(function(e){var t=r();e.forEach(function(e){t=(0,l.addAtomicBlockBefore)(t,s,"IMAGE",{uploadId:e.id}),o.getSignal("project.uploadAttachment")({upload:e})}),a(t)}),i?"handled":"not-handled"},handlePastedFiles:n?void 0:function(e,t){var n=t.getEditorState,r=t.setEditorState,a=(0,t.getProps)().controller,o=n().getSelection().getStartKey(),s=e.some(function(e){return 0===e.type.indexOf("image/")});return u(e).then(function(e){var t=n();e.forEach(function(e){t=(0,l.addAtomicBlockBefore)(t,o,"IMAGE",{uploadId:e.id}),a.getSignal("project.uploadAttachment")({upload:e})}),r(t)}),s?"handled":"not-handled"},decorators:[{strategy:i,component:r}]}};var a=r(n(36)),l=n(10),o=r(n(789));function r(e){return e&&e.__esModule?e:{default:e}}function s(o){if(0!==o.type.indexOf("image/"))throw new Error("file is not an image");return new Promise(function(n){var r=window.URL.createObjectURL(o),a=new window.Image;a.onload=function(){var e=a.width,t=a.height;n({id:Date.now()+"_"+Math.random().toString().slice(2,6),file:o,uploadType:"image",dataUrl:r,width:e,height:t})},a.src=r})}function u(e){return e=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)).filter(function(e){return 0===e.type.indexOf("image/")}),Promise.all(e.map(s))}function i(e,t,n){"atomic"===e.getType()&&e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&"IMAGE"===n.getEntity(t).getType()},t)}},function(e,t){e.exports={"inline-toolbar":"inline-toolbar_pa9-Ok_S",show:"show_4i0k-TQy","toolbar-button-wrapper":"toolbar-button-wrapper_22Qg6WAE","toolbar-button":"toolbar-button_1C_p4WbU",active:"active_1p7lPYSq","link-input-wrapper":"link-input-wrapper__YibMYi3","link-input":"link-input_24rZRTjs","close-button":"close-button_36BRxznG"}},function(e,t){e.exports={"alignment-toolbar":"alignment-toolbar_NcQb_w7w",show:"show_2rZMaQQq","toolbar-button-wrapper":"toolbar-button-wrapper_2VX7uUvf","toolbar-button":"toolbar-button_1NgMIpEX",active:"active_1l7ROdoV","alignment-default":"alignment-default_2OpMM0ei","alignment-left":"alignment-left_Ap4THry4","alignment-right":"alignment-right_1Ip8PtrL","alignment-center":"alignment-center_3Vf1CsIu","alignment-fullscreen":"alignment-fullscreen_2jE21a1o",popup:"popup_1ov2xWqS",openSettings:"openSettings_5JedAno-","link-input-wrapper":"link-input-wrapper_1VT5dpAY","link-input":"link-input_kcc99L50","close-button":"close-button_2N8ZqnLh"}},,function(e,t,n){"use strict";var r,a=n(15),i=(r=a)&&r.__esModule?r:{default:r};function s(e,t,n,r,a){if(!e)return"";var o=e.split("webgl");if(2!==o.length)return"";var s=i.default.WEBGL_PLAYER_BASE_URL+o[1]+"?screenshot="+n;return t&&(s+="&userID="+t),r&&(s+="&loadingMobile=1"),a&&(s+="&disablePlay=1"),s}e.exports={getDetailHtml:function(e,t,n,r,a){return e?'<iframe id=\'webgl_iframe\' frameborder="0" allow="autoplay; fullscreen; vr" allowfullscreen="" allowvr=""\n    mozallowfullscreen="true"\n    src="'+s(e.url,t,!0,n,r)+"&embedType="+a+'"\n    width="100%" height="580" onmousewheel="" webkitallowfullscreen="true" ></iframe>':""},getPreviewHtml:function(e,t){if(!e)return"";var n=e.url,r=e.oembed.height+130;return'<iframe frameborder="0" allow="autoplay; fullscreen; vr" allowfullscreen="" allowvr=""\n    mozallowfullscreen="true" src="'+s(n,t,!0,!1,!0)+'"  width="100%"\n    height="'+r+'" onmousewheel="" webkitallowfullscreen="true"></iframe>'},getEmbededHtml:function(e,t){if(!e)return"";var n=e.url,r=e.oembed,a=r.width,o=r.height+134;return'<iframe id=\'webgl_iframe\' frameborder="0" allow="autoplay; fullscreen; vr" allowfullscreen="" allowvr=""\n    mozallowfullscreen="true" src="'+s(n,t,!1)+'&embedType=embed"  width="'+a+'"\n    height="'+o+'" onmousewheel="" webkitallowfullscreen="true"></iframe>'}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=b(n(2)),d=b(n(1)),u=b(n(3)),f=b(n(12)),p=b(n(7)),g=b(n(99)),h=n(480),m=b(n(4)),v=b(n(877)),y=b(n(6)),_=b(n(878));function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=(0,m.default)(v.default)(r=(0,y.default)(_.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,u.default),s(E,[{key:"componentDidMount",value:function(){this.setFocus(this.props.autoFocus)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=(e.notice||{}).type,r=(this.props.notice||{}).type;n!==p.default.succeeded&&this.setState({hide:!1}),n===p.default.succeeded&&r===p.default.inProgress&&(this.clearSuccess=setTimeout(function(){return t.setState({hide:!0})},1e3)),n!==p.default.inProgress&&this.setState({inputValue:e.inputValue||""})}},{key:"componentWillUnmount",value:function(){this.clearSuccess&&clearTimeout(this.clearSuccess)}},{key:"onAutoSave",value:function(){var e=this;this.timerId=setInterval(function(){return e.onSave()},1e3)}},{key:"onSave",value:function(e){var t,n,r,a,o,s,i=this.getNotice().type;i!==p.default.inProgress&&(n=(t=this.state).lastTyping,r=t.isSaved,a=Date.now()-n,i===p.default.failed||r||!(e||1e3<this.duration(a).asMilliseconds())||(o=f.default.findDOMNode(this.refs.textarea))&&(s=o.value,this.props.onSave&&(this.props.onSave(s),this.setState({isSaved:!0}))))}},{key:"onClear",value:function(){this.setState({inputValue:""}),this.props.onClear&&this.props.onClear()}},{key:"onChange",value:function(e){this.setState({inputValue:e.target.value,lastTyping:Date.now(),isSaved:!1}),this.props.onChange&&this.props.onChange(e.target.value)}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case 13:this.onSave();break;case 27:this.onClear()}}},{key:"onBlur",value:function(){this.timerId&&clearInterval(this.timerId),this.onSave(!0),this.setState({active:!1});try{(0,h.weiXinScrollIntoView)()}catch(e){console.error(e)}}},{key:"onFocus",value:function(){this.props.autoSave&&this.onAutoSave(),this.setState({active:!0})}},{key:"setFocus",value:function(e){var t=f.default.findDOMNode(this.refs.textarea);e&&t&&setTimeout(function(){return t.focus()},100)}},{key:"getNotice",value:function(){var e=this.props.errorText;return(e?{text:e,type:p.default.failed}:null)||this.props.notice||{}}},{key:"renderNoticeText",value:function(){var e=this.getNotice(),t=e.text,n=e.type,r=this.props,a=r.noticePosition,o=r.noticeClass;return n?d.default.createElement("div",{className:this.ss("notice",o,a,this.state.hide&&"hide",n)},t||this.__(n)):null}},{key:"render",value:function(){var t=this,e=this.props,n=e.className,r=(e.inputValue,e.notice,e.errorText,e.onSave,e.onClear,e.noticeClass,e.autoSave,e.noticePosition,e.theme),a=e.activeTheme,o=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","inputValue","notice","errorText","onSave","onClear","noticeClass","autoSave","noticePosition","theme","activeTheme"]),s=this.state,i=s.inputValue,l=s.active,u=this.getNotice().type;return d.default.createElement("div",{className:this.ss("text-area",n,"theme-"+r,u===p.default.failed&&"failed",l&&u!==p.default.failed&&"active-"+a)},d.default.createElement(g.default,c({},o,{ref:"textarea",value:i,onChange:function(e){return t.onChange(e)},onKeyDown:function(e){return t.onKeyDown(e)},onFocus:function(){return t.onFocus()},onBlur:function(e){return t.onBlur(e)}})),this.renderNoticeText())}}]),o=a=E,a.propTypes={className:l.default.string,autoSave:l.default.bool,hide:l.default.bool,inputValue:l.default.string,autoFocus:l.default.bool,errorText:l.default.any,onSave:l.default.func,onClear:l.default.func,notice:l.default.shape({text:l.default.string,type:l.default.oneOf(["",p.default.initial,p.default.inProgress,p.default.succeeded,p.default.failed])}),onChange:l.default.func,noticeClass:l.default.string,noticePosition:l.default.oneOf(["right","bottom"]),disabled:l.default.string,theme:l.default.oneOf(["dark","light"]),activeTheme:l.default.oneOf(["blue-green","primary-blue"])},a.defaultProps={autoSave:!1,autoFocus:!1,noticePosition:"right",theme:"dark",activeTheme:"blue-green"},r=o))||r)||r;function E(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=w(this,(e=E.__proto__||Object.getPrototypeOf(E)).call.apply(e,[this].concat(a)))).state={inputValue:n.props.inputValue||"",hide:!1,lastTyping:Date.now(),isSaved:!1},w(n,t)}t.default=S},,,,,,,function(e,t,n){"use strict";e.exports={CDPConnectTypes:{CDPTypeWebglScreenshots:"webgl_screenshots",CDPTypeWebglRecord:"webgl_record",CDPTypeAssetUnlocked:"asset_unlocked"},EventTypeConnect:"connect",CDPRecordType:{CDPRecordTypeStart:"startRecord",CDPRecordTypeEnd:"endRecord",CDPRecordTypeAccept:"acceptRecord"}}},function(e,t,n){"use strict";n.p=window.webpack_public_path,n(520),n(521),n(522)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t,n,c=e.modules,r=e.component,d=e.routes,a=(n=t=function(){function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,t)),r=n.props,a=r.data,o=r.contextData,s=r.options.isServer,i=f({},a,o),l=null;return s?l=E(c,e):(l=function(e,t,n){var o=S(e,n),s={};t&&(s.router=(0,v.default)(t));e.forEach(function(e){Object.keys(e).forEach(function(r){var a=e[r];s[r]=function(e){var t=e.controller,n=e.path;if(n!==r)throw new Error("path("+n+") !== moduleName("+r+")");return{state:o[r],signals:(0,w.composeSignals)(a),provider:(0,h.ContextProvider)(function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},r,(0,w.composeServices)(a,t)))}}})});var r=null;{y.default.DEVTOOLS}var a={state:o,modules:s,providers:[(0,_.default)(),(0,h.ContextProvider)({http:p.default})]};r&&(a.devtools=r);var i=(0,g.Controller)(a);0<=i.contextProviders.indexOf(b.default)&&i.contextProviders.splice(i.contextProviders.indexOf(b.default),1);return i}(c,d,i),window.__controller__=l),n.state={controller:l},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,l.default.Component),s(u,[{key:"getChildContext",value:function(){return this.props.contextData}},{key:"componentDidMount",value:function(){document.body.style.display=""}},{key:"render",value:function(){var e=this.state.controller;return l.default.createElement(m.Container,{controller:e},l.default.createElement(r,null))}}]),u}(),t.propTypes={data:i.default.any.isRequired,contextData:i.default.any.isRequired,options:i.default.any.isRequired},t.childContextTypes={locale:i.default.string,i18nOverrides:i.default.object,i18nKeyOnly:i.default.string,utcOffset:i.default.string,platform:i.default.object,supportMobile:i.default.bool,publicPath:i.default.string,cookies:i.default.object,appVersion:i.default.string,weixinConfig:i.default.object,commitId:i.default.string},n);return a.ReactDOMrender=function(e,t){var n;"undefined"!=typeof window&&(n=o(546)).applyPolyfills().then(function(){n.defineCustomElements(window)}),u.default.hydrate(l.default.createElement(a,e),t)},a.runInitialData=function(e,t){var n=E(c,e,t);return n.runInitialData().then(function(){return f({},e,{data:n.getState([])})})},a};var i=a(o(2)),l=a(o(1)),u=a(o(12)),n=a(o(524)),c=o(147),p=a(c),g=o(446),h=o(527),m=o(5),v=a(o(528)),y=a(o(15)),_=a(o(529)),d=a(o(530)),b=a(o(447)),w=o(542);function a(e){return e&&e.__esModule?e:{default:e}}function S(e,r){var a={};return e&&e.forEach(function(n){Object.keys(n).forEach(function(e){if(void 0!==a[e])throw new Error("conflict module name: "+e);var t=n[e];a[e]=(0,w.composeState)(t,r)})}),(0,n.default)({},a,r)}function E(e,t,n){var r=t.data,a=t.contextData,o=S(e,f({},r,a)),s={};e&&e.forEach(function(r){Object.keys(r).forEach(function(e){var t=r[e],n=(0,w.composeInitialDataSignal)(t);n.length&&(s[e]=(0,g.parallel)(n))})});var i={};e&&e.forEach(function(e){Object.keys(e).forEach(function(n){var r=e[n];i[n]=function(e){var t=e.path;if(t!==n)throw new Error("path("+t+") !== moduleName("+n+")");return{state:o[n],signals:(0,w.composeSignals)(r)}}})});var l=null;y.default.DEVTOOLS;var u={state:o,modules:i,initialDataSignals:s,providers:[(0,h.ContextProvider)({http:(0,c.AxiosProviderFactory)({baseURL:y.default.REQUEST_BASE_URL_INTERNAL,headers:n})()})]};return l&&(u.devtools=l),new d.default(u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AxiosProviderFactory=function(e){var t=s;r.default.PROXY_HOST&&(t.proxy={host:r.default.PROXY_HOST,port:r.default.PROXY_PORT});e&&(t=(0,l.merge)(t,e));var n=null;return function(){return n=n||o(t)}};var i=a(n(525)),l=n(526),r=a(n(15));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var a=0<arguments.length&&void 0!==e?e:{};function o(e){return{result:e.data,status:e.status,headers:e.headers}}function s(e){if(e.response){var t=e.response,n=t.data,r=t.status,a=t.headers;return Promise.reject({message:e.message,code:e.code,result:n,status:r,headers:a})}return Promise.reject({message:e.message,code:e.code})}return{get:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:{};return r.params=t,i.default.get(e,(0,l.merge)(a,r)).then(o,s)},put:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:{};return i.default.put(e,t,(0,l.merge)(a,r)).then(o,s)},post:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:{};return i.default.post(e,t,(0,l.merge)(a,r)).then(o,s)},delete:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:{};return r.params=t,i.default.delete(e,(0,l.merge)(a,r)).then(o,s)}}}var s={baseURL:r.default.REQUEST_BASE_URL,timeout:r.default.REQUEST_TIMEOUT,headers:{"X-Requested-With":"XMLHttpRequest"}},u=o(s);t.default=u},function(e,t,n){e.exports=n(8)(65)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=k(n(550)),a=k(n(551)),o=k(n(552)),s=k(n(555)),i=k(n(31)),l=k(n(51)),u=k(n(556)),c=k(n(557)),d=k(n(558)),f=k(n(559)),p=k(n(560)),g=k(n(561)),h=k(n(562)),m=k(n(52)),v=k(n(563)),y=k(n(564)),_=k(n(565)),b=k(n(566)),w=k(n(586)),S=k(n(587)),E=k(n(588)),O=k(n(589)),C=k(n(78));function k(e){return e&&e.__esModule?e:{default:e}}var I=[r.default,a.default,o.default,s.default,i.default,l.default,u.default,c.default,d.default,f.default,p.default,g.default,h.default,m.default,v.default,y.default,_.default,b.default,w.default,S.default,E.default,O.default,C.default];t.default={header:I}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(23),o=(r=a)&&r.__esModule?r:{default:r};var s={},i=0;function l(){if("undefined"==typeof window)throw new Error("can only be used in browser")}t.default={get:function(e){return l(),s[e]},getId:function(n){l();var r="";return o.default.forEach(s,function(e,t){return e!==n||(r=t,!1)}),r},set:function(e,t){l(),s[e]=t},add:function(e){l();var t=(i++).toString();return s[t]=e,t},remove:function(e){l(),delete s[e]}}},,function(e,t,n){e.exports=n(8)(1122)},function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var r=[{site:"google",pattern:new RegExp("^(https?://)?plus.google.com/.+$","i")},{site:"twitter",pattern:new RegExp("^(https?://)?(www.)?twitter.com/.+$","i")},{site:"facebook",pattern:new RegExp("^(https?://)?(www.)?([a-zA-Z-.]*)?facebook.com/.+$","i")},{site:"linkedin",pattern:new RegExp("^(https?://)?(www.)?linkedin.com/.+$","i")},{site:"instagram",pattern:new RegExp("^(https?://)?(www.)?instagram.com/.+$","i")},{site:"github",pattern:new RegExp("^(https?://)?(www.)?github.com/.+$","i")},{site:"flickr",pattern:new RegExp("^(https?://)?(www.)?flickr.com/.+$","i")},{site:"indiedb",pattern:new RegExp("^(https?://)?(www.)?indiedb.com/.+$","i")},{site:"pinterest",pattern:new RegExp("^(https?://)?(www.)?pinterest.com/.+$","i")},{site:"reddit",pattern:new RegExp("^(https?://)?(www.)?reddit.com/.+$","i")},{site:"steam",pattern:new RegExp("^(https?://)?(www.)?store.steampowered.com/.+$","i")},{site:"tumblr",pattern:new RegExp("^(https?://)?.*tumblr.com(/.*)?$","i")},{site:"twitch",pattern:new RegExp("^(https?://)?(www.)?twitch.tv/.+$","i")},{site:"vimeo",pattern:new RegExp("^(https?://)?(www.)?vimeo.com/.+$","i")},{site:"vk",pattern:new RegExp("^(https?://)?(www.)?vk.com/.+$","i")},{site:"weibo",pattern:new RegExp("^(https?://)?(www.)?weibo.com/.+$","i")},{site:"qq",pattern:new RegExp("^(https?://)?(www.)?qzone.qq.com/.+$","i")},{site:"youtube",pattern:new RegExp("^(https?://)?(www.)?youtube.com/.+$","i")},{site:"medium",pattern:new RegExp("^(https?://)?(www.)?medium.com/.+$","i")},{site:"behance",pattern:new RegExp("^(https?://)?(www.)?behance.net/.+$","i")},{site:"artstation",pattern:new RegExp("^(https?://)?(www.)?artstation.com/.+$","i")},{site:"sketchfab",pattern:new RegExp("^(https?://)?(www.)?sketchfab.com/.+$","i")},{site:"dribbble",pattern:new RegExp("^(https?://)?(www.)?dribbble.com/.+$","i")},{site:"personal",pattern:new RegExp("^(https?://)?(www.)?[-a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}([-a-zA-Z0-9@:%_+.~#?&//=]*)","i")}];e.exports={getSocialUrlSite:function(t){if(!t)return"";var e=r.findIndex(function(e){return e.pattern.test(t)});return 0<=e?r[e].site:""},testSocialUrl:function(e){var t=r.reduce(function(e,t){return o({},e,(n={},r=t.site,a=t.pattern,r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n));var n,r,a},{})[e];return function(e){return t&&t.test(e)}}}},function(e,t,n){"use strict";var c=n(450),d=n(155);e.exports=function(e,t){if(!("value"in t))return t;var n=t.isValue||["isValue"],r=t.isRequired||!1,a=t.value,o=t.defaultValue||a,s=t.validations||null,i=t.errorMessages||[],l=c(e,a,n),u=d(e,a,s);return t.value=a,t.defaultValue=o,t.validations=s,t.isValid=!r&&!l||u.isValid,t.errorMessages=i,t.errorMessage=u.isValid?null:i[u.failedRule],t.isValue=n,t.isRequired=r,t.hasValue=l,t.isTouched=l,t}},function(e,t,n){"use strict";var s=n(123);e.exports=function(a,o,e){var t={isValid:!0,failedRuleIndex:null};return e?Array.isArray(e)?e.reduce(function(e,n,t){if(!e.isValid)return e;if("string"==typeof n){var r=n.split(/:(.+)?/);if(n={},r[1])try{n[r[0]]=JSON.parse(r[1])}catch(e){n[r[0]]=r[1]}else n[r[0]]=void 0}return{isValid:Object.keys(n).reduce(function(e,t){return!!e&&(s[t]||function(){console.warn("Rule "+t+" is not found")})(o,a,n[t])},!0),failedRuleIndex:t}},t):void 0:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(591)),a=o(n(592));function o(e){return e&&e.__esModule?e:{default:e}}var s=[r.default,a.default];t.default={footer:s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Ee(n(593)),a=Ee(n(594)),o=Ee(n(621)),s=Ee(n(462)),i=Ee(n(42)),l=Ee(n(622)),u=Ee(n(623)),c=Ee(n(465)),d=Ee(n(82)),f=Ee(n(32)),p=Ee(n(81)),g=Ee(n(124)),h=Ee(n(466)),m=Ee(n(632)),v=Ee(n(33)),y=Ee(n(467)),_=Ee(n(55)),b=Ee(n(35)),w=Ee(n(635)),S=Ee(n(636)),E=Ee(n(27)),O=Ee(n(161)),C=Ee(n(637)),k=Ee(n(638)),I=Ee(n(468)),j=Ee(n(469)),M=Ee(n(639)),T=Ee(n(640)),P=Ee(n(641)),x=Ee(n(164)),A=Ee(n(642)),D=Ee(n(165)),R=Ee(n(166)),N=Ee(n(643)),L=Ee(n(125)),F=Ee(n(644)),K=Ee(n(645)),U=Ee(n(646)),B=Ee(n(647)),z=Ee(n(463)),W=Ee(n(470)),V=Ee(n(657)),q=Ee(n(663)),H=Ee(n(473)),$=Ee(n(664)),G=Ee(n(665)),Y=Ee(n(167)),J=Ee(n(666)),Q=Ee(n(667)),Z=Ee(n(668)),X=Ee(n(669)),ee=Ee(n(670)),te=Ee(n(671)),ne=Ee(n(672)),re=Ee(n(673)),ae=Ee(n(674)),oe=Ee(n(675)),se=Ee(n(676)),ie=Ee(n(677)),le=Ee(n(678)),ue=Ee(n(679)),ce=Ee(n(461)),de=Ee(n(680)),fe=Ee(n(681)),pe=Ee(n(682)),ge=Ee(n(686)),he=Ee(n(687)),me=Ee(n(688)),ve=Ee(n(689)),ye=Ee(n(690)),_e=Ee(n(691)),be=Ee(n(692)),we=Ee(n(693)),Se=Ee(n(694));function Ee(e){return e&&e.__esModule?e:{default:e}}var Oe=[ye.default,r.default,a.default,s.default,i.default,d.default,ie.default,f.default,p.default,g.default,h.default,m.default,v.default,y.default,q.default,_.default,b.default,w.default,S.default,E.default,O.default,C.default,l.default,u.default,k.default,I.default,j.default,M.default,N.default,L.default,F.default,K.default,T.default,P.default,x.default,A.default,D.default,R.default,J.default,U.default,B.default,z.default,c.default,o.default,W.default,V.default,H.default,$.default,G.default,Y.default,Q.default,Z.default,X.default,ee.default,te.default,ne.default,re.default,ae.default,oe.default,se.default,le.default,ue.default,ce.default,de.default,fe.default,pe.default,ge.default,he.default,me.default,ve.default,_e.default,be.default,we.default,Se.default];t.default={messages:Oe}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playSound=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=a[e];n||(n=function(e){var t=document.createElement("audio");return t.src=r(624)("./"+e+".mp3"),t.preload=!0,t}(e),a[e]=n);n.volume=t,n.load(),n.play()};var a={}},function(e,t,n){e.exports=n.p+"../styles/sound/Incoming_Ring.6be5e580c0409785b22980dc0ed31c25.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/Outgoing_Ring.f7a6a9fe9b12dcbb9b61d761b6cc6ee2.mp3"},function(e,a,s){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var t,n=s(633),r=(t=n)&&t.__esModule?t:{default:t};var o=["messages","window"];a.default={name:e,depends:[],signals:{windowIsMaster:[function(e){var t=e.props,n=e.state,r=t.isMaster;n.get([].concat(o,["isMaster"]))!==r&&n.set([].concat(o,["isMaster"]),r)}],windowVisible:[function(e){var t=e.props,n=e.state,r=t.visible;n.get([].concat(o,["visible"]))!==r&&n.set([].concat(o,["visible"]),r)}],windowFocused:[function(e){var t=e.props,n=e.state,r=t.focused;n.get([].concat(o,["focused"]))!==r&&n.set([].concat(o,["focused"]),r)}],windowResized:[function(e){var t=e.props,n=e.state,r=t,a=n.get([].concat(o,["size"]));a.width===r.width&&a.height===r.height||n.set([].concat(o,["size"]),r)}],connectionOpen:[function(e){var t=e.state,n={width:window.innerWidth,height:window.innerHeight};t.set([].concat(o,["size"]),n)}]},getServices:function(n){n.on("initialized",function(){window.addEventListener("resize",function(){n.getSignal("messages.windowResized")({width:window.innerWidth,height:window.innerHeight})});var e=s(634);e.change(function(){n.getSignal("messages.windowVisible")({visible:!e.hidden()})}),window.addEventListener("focus",function(){n.getSignal("messages.windowFocused")({focused:!0})}),window.addEventListener("blur",function(){n.getSignal("messages.windowFocused")({focused:!1})}),(new r.default).on("change",function(e){var t=e.isMaster;n.getSignal("messages.windowIsMaster")({isMaster:t})})})},getState:function(){return{window:{isMaster:!1,visible:!0,focused:!0,size:{width:0,height:0}}}},isVisible:function(e){return e.get([].concat(o,["visible"]))},isFocused:function(e){return e.get([].concat(o,["focused"]))},getSize:function(e){return e.get([].concat(o,["size"]))}}}).call(a,"views/v2/modules/messages/WindowStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={escape:function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}}},function(e,t,n){e.exports=n(8)(1e3)},function(e,m,v){"use strict";(function(e){Object.defineProperty(m,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=f(["messages.mentionInfo.firstLoad"],["messages.mentionInfo.firstLoad"]),n=f(["firstLoad"],["firstLoad"]),r=f(["messages.fetchInfoStatus.mention"],["messages.fetchInfoStatus.mention"]),a=f(["messages.showInfoType"],["messages.showInfoType"]),o=v(9),s=v(0),d=u(v(33)),i=u(v(27)),l=u(v(7));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var g=[].concat(["messages"],["mentionInfo"]);function h(e){var t=e.props,n=e.state,r=d.default.transformMessage(n,t);r.mentioned&&r.nonce?n.set([].concat(p(g),["items",r.id]),r):n.unset([].concat(p(g),["items",r.id]))}m.default={name:e,depends:[i.default],signals:{fetchMentionInfo:[(0,o.set)((0,s.state)(t),(0,s.props)(n)),(0,o.set)((0,s.state)(r),l.default.inProgress),(0,o.set)((0,s.state)(a),"mention"),[function(e){var t=e.props,n=e.path,r=e.state,a=e.http,o=t.channelId,s=Object.values(r.get([].concat(p(g),["items"]))).sort(function(e,t){return e.id<t.id?1:e.id>t.id?-1:0}),i=0;return 0!==s.length&&(i=s[s.length-1].id),a.get("/api/channels/"+o+"/mentions",{before:i}).then(n.success).catch(n.error)},{success:[function(e){var t,n,r,a,o=e.props,s=e.controller,i=e.state,l=o.status,u=o.result;200===l&&u&&(t=u.items,n=u.hasMore,r=i.get([].concat(p(g),["items"])),a=c({},r),t.forEach(function(e){a[e.id]=d.default.transformMessage(i,e)}),s.getSignal("messages.syncFetchedMentionInfo")({messages:t}),i.set([].concat(p(g),["items"]),a),i.set([].concat(p(g),["hasMore"]),n))},(0,o.set)((0,s.state)(r),l.default.succeeded)],error:[(0,o.set)((0,s.state)(r),l.default.failed)]}]],clearShowInfo:[function(e){e.state.set(g,{items:{},hasMore:!1,firstLoad:!1})}],messageCreate:[h],messageUpdate:[h]},getState:function(){return{mentionInfo:{items:{},hasMore:!1,firstLoad:!1}}},getMentionMessage:function(e,t){return e.get([].concat(p(g),["items",t]))}}}).call(m,"views/v2/modules/messages/MentionInfoStore.js")},function(e,b,w){"use strict";(function(e){Object.defineProperty(b,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=m(["messages.starInfo.firstLoad"],["messages.starInfo.firstLoad"]),n=m(["firstLoad"],["firstLoad"]),r=m(["messages.fetchInfoStatus.star"],["messages.fetchInfoStatus.star"]),a=m(["messages.showInfoType"],["messages.showInfoType"]),o=w(9),s=w(0),d=h(w(33)),i=h(w(27)),l=h(w(164)),u=h(w(165)),f=h(w(166)),p=h(w(167)),g=h(w(7));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var y=[].concat(["messages"],["starInfo"]);function _(a){return function(e){var t=e.props,n=e.state,r=t.messageId;n.set("messages.starStatus.status",a),a===g.default.inProgress?n.set("messages.starStatus.messageId",r):n.set("messages.starStatus.messageId","")}}b.default={name:e,depends:[i.default],signals:{toggleStar:[_(g.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.state,a=e.path,o=t.messageId,s=t.channelId;return!0===(d.default.getMessage(r,s,o)||l.default.getMentionMessage(r,o)||u.default.getStarMessage(r,o)||f.default.getReplyMessage(r,o)||p.default.getSearchedMessage(r,o)).starred?n.post("/api/messages/"+o+"/unstar").then(a.success).catch(a.error):n.post("/api/messages/"+o+"/star").then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.messageUpdate")(r)},_(g.default.succeeded)],error:[_(g.default.failed)]}]],fetchStarInfo:[(0,o.set)((0,s.state)(t),(0,s.props)(n)),(0,o.set)((0,s.state)(r),g.default.inProgress),(0,o.set)((0,s.state)(a),"star"),[function(e){var t=e.props,n=e.path,r=e.http,a=e.state,o=t.channelId,s=Object.values(a.get([].concat(v(y),["items"]))).sort(function(e,t){return e.id<t.id?1:e.id>t.id?-1:0}),i=0;return 0!==s.length&&(i=s[s.length-1].id),r.get("/api/channels/"+o+"/starredMessages",{before:i}).then(n.success).catch(n.error)},{success:[function(e){var t,n,r,a,o=e.props,s=e.controller,i=e.state,l=o.status,u=o.result;200===l&&u&&(t=u.items,n=u.hasMore,r=i.get([].concat(v(y),["items"])),a=c({},r),t.forEach(function(e){a[e.id]=d.default.transformMessage(i,e)}),s.getSignal("messages.syncFetchedStarInfo")({messages:t}),i.set([].concat(v(y),["items"]),a),i.set([].concat(v(y),["hasMore"]),n))},(0,o.set)((0,s.state)(r),g.default.succeeded)],error:[(0,o.set)((0,s.state)(r),g.default.failed)]}]],clearShowInfo:[function(e){e.state.set(y,{items:{},hasMore:!1,firstLoad:!1})}],messageUpdate:[function(e){var t=e.props,n=e.state,r=d.default.transformMessage(n,t);r.starred?n.set([].concat(v(y),["items",r.id]),r):n.unset([].concat(v(y),["items",r.id]))}]},getState:function(){return{starInfo:{items:{},firstLoad:!1,hasMore:!1},starStatus:{}}},getStarMessage:function(e,t){return e.get([].concat(v(y),["items",t]))}}}).call(b,"views/v2/modules/messages/StarInfoStore.js")},function(e,_,b){"use strict";(function(e){Object.defineProperty(_,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=c(["messages.replyInfo.firstLoad"],["messages.replyInfo.firstLoad"]),n=c(["firstLoad"],["firstLoad"]),r=c(["messages.fetchInfoStatus.reply"],["messages.fetchInfoStatus.reply"]),a=c(["messages.showInfoType"],["messages.showInfoType"]),o=b(9),s=b(0),i=u(b(27)),p=u(b(33)),l=u(b(7));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var g=["messages","replyInfo"],h=[].concat(g,["replyMessages"]),m=[].concat(g,["parentMessage"]),v=[].concat(g,["hasMore"]),y=[].concat(g,["total"]);_.default={name:e,depends:[i.default],signals:{fetchReplyInfo:[(0,o.set)((0,s.state)(t),(0,s.props)(n)),(0,o.set)((0,s.state)(r),l.default.inProgress),(0,o.set)((0,s.state)(a),"reply"),[function(e){var t=e.props,n=e.path,r=e.state,a=e.http,o=t.messageId,s=r.get(h),i=Object.values(s).sort(function(e,t){return e.id<t.id?1:e.id>t.id?-1:0}),l=0;return 0!==i.length&&(l=i[i.length-1].id),a.get("/api/messages/"+o+"/reply",{before:l}).then(n.success).catch(n.error)},{success:[function(e){var t,n,r,a,o,s,i,l=e.controller,u=e.props,c=e.state,d=u.result;200===u.status&&d&&(t=d.items,n=d.parentMessage,r=d.hasMore,a=d.total,o=c.get(h),s=f({},o),t.forEach(function(e){s[e.id]=p.default.transformMessage(c,e)}),l.getSignal("messages.syncFetchedReplyInfo")({messages:t,parentMessage:n}),i=p.default.transformMessage(c,n),c.set(m,i),c.set(h,s),c.set(v,r),c.set(y,a))},(0,o.set)((0,s.state)(r),l.default.succeeded)],error:[(0,o.set)((0,s.state)(r),l.default.failed)]}]],messageCreate:[function(e){var t,n=e.props,r=e.state,a=n.parentMessage,o=p.default.transformMessage(r,n),s=r.get(m);o.nonce&&r.get([].concat(d(h),[o.nonce]))?(r.unset([].concat(d(h),[o.nonce])),r.set([].concat(d(h),[o.id]),o),t=r.get(y),r.set(y,t+1)):s&&s.id===o.parentMessageId&&r.set([].concat(d(h),[o.id]),o),a&&s&&s.id===a.id&&r.set(m,p.default.transformMessage(r,a))}],clearShowInfo:[function(e){e.state.set(g,{replyMessages:{},parentMessage:null,hasMore:!1,firstLoad:!1,total:0})}],messageUpdate:[function(e){var t=e.props,n=e.state,r=p.default.transformMessage(n,t);n.get([].concat(d(h),[r.id]))&&n.set([].concat(d(h),[r.id]),r)}]},getState:function(){return{replyInfo:{replyMessages:{},parentMessage:null,hasMore:!1,firstLoad:!1,total:0}}},getReplyMessage:function(e,t){return e.get([].concat(d(h),[t]))}}}).call(_,"views/v2/modules/messages/ReplyInfoStore.js")},function(e,y,_){"use strict";(function(e){Object.defineProperty(y,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=l(["messages.searchInfo.firstLoad"],["messages.searchInfo.firstLoad"]),n=l(["firstLoad"],["firstLoad"]),r=l(["messages.fetchInfoStatus.search"],["messages.fetchInfoStatus.search"]),a=_(9),o=_(0),h=i(_(33)),s=i(_(7));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=["messages","searchInfo"],m=[].concat(c,["searchResult"]),d=[].concat(c,["searchKeyword"]),f=[].concat(c,["pendingSearchKeyword"]),p=[].concat(c,["firstLoad"]);function v(){return{items:{},currentPage:0,pages:[],total:0}}y.default={name:e,depends:[],signals:{searchMessage:[(0,a.set)((0,o.state)(t),(0,o.props)(n)),(0,a.set)((0,o.state)(r),s.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=e.state,o=t.channelId,s=void 0,i=void 0;if(t.firstLoad?(s=a.get(f),a.set(d,s),a.set(m,v())):(s=a.get(d),i=a.get(m).currentPage+1),""===s)return r.success();var l={keyword:s};return i&&(l.page=i),n.get("/api/channels/"+o+"/search",l).then(r.success).catch(r.error)},{success:[function(e){var t,n,r,a,o,s,i,l,u,c=e.props,d=e.controller,f=e.state,p=c.result;200===c.status&&p&&(t=f.get(m),n=p.items,r=p.currentPage,a=p.pages,o=p.total,s=t.items||{},i=g({},s),n.forEach(function(e){i[e.id]=h.default.transformMessage(f,e)}),d.getSignal("messages.syncSearchMessageResult")({messages:n}),l={items:i,currentPage:r,pages:a,total:o},t&&n&&0<r?f.set(m,{items:i,currentPage:r,pages:a,total:t.total}):(u=v(),f.set(m,g({},u,l))))},(0,a.set)((0,o.state)(r),s.default.succeeded)],error:[(0,a.set)((0,o.state)(r),s.default.failed)]}]],messageUpdate:[function(e){var t=e.props,n=e.state,r=h.default.transformMessage(n,t);n.get([].concat(u(m),["items",r.id]))&&n.set([].concat(u(m),["items",r.id]),r)}],onSearchKeywordChanged:[function(e){var t=e.props,n=e.state,r=t.value;n.set(f,r)}],clearShowInfo:[function(e){var t=e.state;t.set(m,v()),t.set(d,""),t.set(f,""),t.set(p,!1)}]},getState:function(){return{searchInfo:{searchResult:{items:{},currentPage:0,pages:[],total:0},searchKeyword:"",pendingSearchKeyword:"",firstLoad:!1}}},getSearchedMessage:function(e,t){return e.get([].concat(u(m),["items",t]))}}}).call(y,"views/v2/modules/messages/SearchMessageStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(695)),a=s(n(474)),o=s(n(696));function s(e){return e&&e.__esModule?e:{default:e}}var i=[r.default,a.default,o.default];t.default={team:i}},function(e,t,n){e.exports=n(8)(1001)},function(e,t,n){e.exports=n(8)(1006)},function(e,t,n){e.exports=n(8)(1007)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(697);var o=[((r=a)&&r.__esModule?r:{default:r}).default];t.default={notification:o}},,function(e,a,o){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(o(19)),t=n(o(31));function n(e){return e&&e.__esModule?e:{default:e}}var r=["project","contentMap"];a.default={name:e,depends:[],signals:{addContent:[function(e){var t=e.props;e.state.set([].concat(r,[t.id]),t)}],downloadContent:t.default.LoginRequired(function(e){var t=e.props,n=e.state,r=t.id,a=n.get("project"),o=n.get("challenge"),s=n.get("event"),i="";a&&a.projectData&&a.projectData.id?i="/api/p/"+a.projectData.id+"/attachments/"+r:o&&o.challengeContent&&o.challengeContent.id?i="/api/showcases/"+o.challengeContent.id+"/attachments/"+r:s&&s.eventContent&&s.eventContent.id&&(i="/api/events/"+s.eventContent.id+"/attachments/"+r),r&&""!==i&&(0,u.default)(i)}),downloadDraftContent:t.default.LoginRequired(function(e){var t,n=e.props,r=e.state,a=n.id,o=r.get("project"),s=r.get("challenge"),i=r.get("event"),l="";o&&o.projectData&&o.projectData.id?l="/api/p/"+o.projectData.id+"/attachments/"+a+"/draft":s&&s.challengeContent&&s.challengeContent.id?(t=r.get("challenge").lang,l="/api/showcases/"+s.challengeContent.id+"/attachments/"+a+"/draft?lang="+t):i&&i.eventContent&&i.eventContent.id&&(l="/api/events/"+i.eventContent.id+"/attachments/"+a),a&&""!==l&&(0,u.default)(l)}),switchContentVisibility:[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.id,s=n.get("project.projectData.id"),i=n.get("project").contentMap[o];return r.post("/api/p/"+s+"/contents/"+o+"/visibility",{isPrivate:!i.isPrivate}).then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.state,r=t.id,a=n.get("project").contentMap,o=s({},a);o[r].isPrivate=!o[r].isPrivate,n.set("project.contentMap",o)}],error:[],dummy:[]}]},getState:function(){return{contentMap:{}}},getContent:function(e,t){return e.get([].concat(r,[t]))}}}).call(a,"views/v2/modules/projectV2/ContentStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=["project","gallery"];function r(e,t,n){var r=[].concat(a,[t]);e!==n.get(r)&&n.set(r,e)}t.default={name:e,depends:[],signals:{setItemPos:[function(e){var t=e.props,n=e.state;r(t.itemPos,"itemPos",n)}],setThumbPos:[function(e){var t=e.props,n=e.state;r(t.thumbPos,"thumbPos",n)}]},getState:function(){return{gallery:{itemPos:0,thumbPos:0}}}}}).call(t,"views/v2/modules/projectV2/GalleryStore.js")},function(e,b,w){"use strict";(function(e){Object.defineProperty(b,"__esModule",{value:!0});var t=f(["project.contributorStatus.add"],["project.contributorStatus.add"]),n=f(["project.contributorStatus.accept"],["project.contributorStatus.accept"]),r=f(["project.contributorStatus.decline"],["project.contributorStatus.decline"]),a=f(["project.contributorDeleteConfirm"],["project.contributorDeleteConfirm"]),o=f(["project.inviteViaEmail.inviteStatus"],["project.inviteViaEmail.inviteStatus"]),s=w(9),i=w(0),p=d(w(34)),l=d(w(7)),u=w(11),c=w(21);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=["project","contributors"],h={open:!1,id:"",userId:"",projectId:""};function m(a){return function(e){var t=e.props,n=e.state,r=t.userId;n.set("project.contributorStatus."+r,a)}}var v=[m(l.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.id,o=t.projectId;return o?n.post("/api/p/"+o+"/contributors/undo",{id:a}).then(r.success).catch(r.error):r.success()},{success:[m(l.default.succeeded)],error:[m(l.default.failed)]}],function(e){var t,n,r,a,o=e.props,s=e.state,i=e.controller,l=e.project,u=o.id,c=o.projectId,d=s.get(_)||[],f=d.findIndex(function(e){return e.id===u});0<=f&&(n=(t=d[f]).userId,r=t.email,s.splice(_,f,1),r||s.unset(["project","userMap",n]),n===(s.get("loginUser")||{}).id&&(a="/p/"+c,l.locationHref(a),i.getSignal("project.closeConfirmDialog")()))}];b.default={name:e,depends:[],signals:{addContributor:[(0,s.set)((0,i.state)(t),l.default.inProgress),[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=e.controller,s=t.userId,i=t.projectId,l=t.title,u=t.description,c=t.email,d=t.name,f=n.get("loginUser").id;return n.get(["project","projectData"]).teamId||s!==f?i?r.post("/api/p/"+i+"/contributors",{projectId:i,userId:s,title:l,description:u,email:c,name:d}).then(a.success).catch(a.error):a.success({id:p.default.createNonce()}):(o.getSignal("header.showMessage")({message:"project_ContributorAlreadyExist"}),a.dummy())},{success:[(0,s.set)((0,i.state)(t),l.default.succeeded)],error:[(0,s.set)((0,i.state)(t),l.default.failed)],dummy:[(0,s.set)((0,i.state)(t),l.default.failed)]}],function(e){var t,n,r,a=e.props,o=e.state,s=e.controller,i=a.projectId,l=a.id,u=a.userId,c=a.fullName,d=a.avatar,f=a.email,p=a.name,g=a.title,h=a.result,m=a.status,v={id:l,userId:u,title:g||"",email:f,name:p};400<=m?(t="project_"+h.errorCode,s.getSignal("header.showMessage")({message:t})):(i&&200===m&&h&&(v=h),v.id&&(n=o.get(_)||[],r=-1,f?r=n.findIndex(function(e){return e.email===f}):(r=n.findIndex(function(e){return e.userId===u}),o.merge(["project","userMap"],y({},u,{userId:u,fullName:c,avatar:d}))),r<0&&o.unshift(_,v)))}],removeContributorInternal:[].concat(v),removeContributor:[function(e){var t=e.props,n=e.state,r=e.controller,a=e.path,o=t.id,s=t.userId,i=t.projectId,l=n.get("loginUser")||{};return i&&s===l.id?(r.getSignal("project.openConfirmDialog")({id:o,userId:s,projectId:i}),a.no()):a.yes()},{yes:[].concat(v),no:[]}],accept:[(0,s.set)((0,i.state)(n),l.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.id,o=t.projectId;return o?n.post("/api/p/"+o+"/contributors/accept",{id:a,accept:!0}).then(r.success).catch(r.error):r.dummy()},{success:[(0,s.set)((0,i.state)(n),l.default.succeeded)],error:[(0,s.set)((0,i.state)(n),l.default.failed)],dummy:[]}],function(e){var t,n,r,a,o,s=e.props,i=e.state,l=s.projectId,u=s.id,c=s.result,d=s.status;l&&200===d&&c&&(t=c.id,n=c.status,o={id:r=c.userId,type:"person",username:(a=i.get("loginUser")||{}).username,fullName:a.name,avatar:a.avatar,title:a.title,jobRoleIds:a.jobRoleIds},t===u&&"invited"!==n&&(i.unset(["project","invitedId"]),i.set(["project","edit"],!0),i.push(_,c),i.merge(["project","userMap"],y({},r,o))))}],decline:[(0,s.set)((0,i.state)(r),l.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.id,o=t.projectId;return o?n.post("/api/p/"+o+"/contributors/undo",{id:a}).then(r.success).catch(r.error):r.dummy()},{success:[(0,s.set)((0,i.state)(r),l.default.succeeded)],error:[(0,s.set)((0,i.state)(r),l.default.failed)],dummy:[]}],function(e){200===e.props.status&&window.location.reload()}],updateContributor:[].concat(g(c.chains.formValidated),[m(l.default.inProgress),[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.id,s=t.description,i=n.get(["project","projectData"]).id,l=n.get(["project","contributorsDialog","form"]);return(0,c.isValidForm)(l)&&i&&0<=n.get(_).findIndex(function(e){return e.id===o})?r.post("/api/p/"+i+"/contributors/update",{id:o,title:l[o]&&l[o].value,description:s}).then(a.success).catch(a.error):a.error()},{success:[m(l.default.succeeded)],error:[m(l.default.failed)]}],function(e){var t,n,r,a,o=e.props,s=e.state,i=e.controller,l=o.result;200===o.status&&l&&(t=l.id,0<=(r=(n=s.get(_)).findIndex(function(e){return e.id===t}))&&((a=[].concat(g(n))).splice(r,1,l),s.set(_,a)),i.getSignal("project.onCancelEditPraise")({id:t}))}]),openConfirmDialog:[function(e){var t=e.props,n=e.state,r=t.id,a=t.userId,o=t.projectId;n.set(["project","contributorDeleteConfirm"],{open:!0,id:r,userId:a,projectId:o})}],submitConfirmDialog:[function(e){var t=e.state,n=e.controller,r=t.get(["project","contributorDeleteConfirm"]),a=r.open,o=r.id,s=r.userId,i=r.projectId;a&&n.getSignal("project.removeContributorInternal")({id:o,userId:s,projectId:i})}],closeConfirmDialog:[(0,s.set)((0,i.state)(a),h)],invite:[(0,s.set)((0,i.state)(o),l.default.initial),function(e){var t=e.props,n=e.path,r=e.controller,a=t.email;return(0,u.validateEmail)(a)?n.yes():(r.getSignal("header.showMessage")({message:"not_valid_email"}),n.no())},{yes:[function(e){var t=e.state,n=e.props,r=e.controller,a=t.get(["project","projectData"]).id,o=n.email,s={email:o,name:o.split("@")[0],title:"",projectId:a};r.getSignal("project.addContributor")(s)},(0,s.set)((0,i.state)(o),l.default.succeeded)],no:[(0,s.set)((0,i.state)(o),l.default.failed)]}]},getState:function(){return{contributors:[],contributorStatus:{},contributorDeleteConfirm:h,userMap:{}}}}}).call(b,"views/v2/modules/projectV2/ContributorStore.js")},,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=["draft","editorStates"],i=["draft","editorStatesPending"],l=["draft","editorEditable"],u=["draft","editorDirty"];t.default={name:e,signals:{unsetPendingEditorState:[function(e){var t=e.props,n=e.state,r=t.editorKey,a=t.editorState,o=[].concat(i,[r]);n.get(o)===a&&n.unset(o)}],setEditorStateCommit:[function(e){var t=e.props,n=e.state,r=t.editorKey,a=t.editorState;n.set([].concat(s,[r]),a)}],setEditorState:[function(e){var t=e.props,n=e.state,r=t.editorKey,a=t.editorState;n.set([].concat(i,[r]),a)}],setEditorEditable:[function(e){var t=e.props,a=e.state,o=t.editorKey,n=a.get(s);Object.keys(n).forEach(function(e){var t,n,r;e===o?(t=[].concat(l,[e]),a.get(t)||a.set(t,!0)):(n=[].concat(l,[e]),!(r=a.get(n))&&void 0!==r||a.set(n,!1))})}],setEditorDirty:[function(e){var t=e.props,n=e.state,r=t.editorKey,a=t.dirty,o=void 0===a||a,s=[].concat(u,[r]);(n.get(s)||!1)!==o&&n.set(s,o)}]},getState:function(){return{editorStates:{},editorStatesPending:{},editorEditable:{}}},getEditorState:function(e,t){return e.get([].concat(s,[t]))},getEditorEditable:function(e,t){return e.get([].concat(l,[t]))},getEditorDirty:function(e,t){return e.get([].concat(u,[t]))},getEditorKeys:function(e){return Object.keys(e.get(s))}}}).call(t,"views/utils/draft/EditorStateStore.js")},function(e,t,n){e.exports=n(8)(46)},,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default={name:e,depends:[],signals:{fetchUserCard:[function(e){var t=e.props,n=e.state,r=e.http,a=e.controller,o=t.id,s=n.get(["project","userCards",o]),i=n.get(["project","userCardsInProgress"]);if(!s&&!i)return n.set(["project","userCardsInProgress"],!0),r.get("/api/cardFull/u/"+o).then(function(e){var t=e.result;n.set(["project","userCardsInProgress"],!1),a.getSignal("project.addUserCard")(t)},function(){n.set(["project","userCardsInProgress"],!1)})}],addUserCard:[function(e){var t=e.props,n=e.state,r=t.user,a=t.projects,o=s({},r,{projects:a});n.set(["project","userCards",r.id],o)}]},getState:function(){return{userCards:{},userCardsInProgress:!1}}}}).call(t,"views/v2/modules/projectV2/UserStore.js")},function(e,ne,re){"use strict";(function(e){Object.defineProperty(ne,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=$(["project.",""],["project.",""]),n=$(["key"],["key"]),r=$(["value"],["value"]),a=$(["project.mute"],["project.mute"]),o=$(["project.uploadingPreview"],["project.uploadingPreview"]),s=$(["project.hideRecord"],["project.hideRecord"]),i=$(["project.removeWebgl"],["project.removeWebgl"]),l=$(["project.showStopRecord"],["project.showStopRecord"]),u=$(["project.uploadId"],["project.uploadId"]),d=$(["project.time"],["project.time"]),f=$(["project.showWebglToolBar"],["project.showWebglToolBar"]),p=$(["project.enableMobile"],["project.enableMobile"]),g=$(["project.screenshotDialog.updateStatus"],["project.screenshotDialog.updateStatus"]),h=$(["project.screenshotDialog.show"],["project.screenshotDialog.show"]),m=$(["project.screenshotDialog.comment"],["project.screenshotDialog.comment"]),v=$(["project.screenshotDialog.image"],["project.screenshotDialog.image"]),y=$(["project.screenshotDialog.projectId"],["project.screenshotDialog.projectId"]),_=$(["projectId"],["projectId"]),b=$(["project.projectData.changed"],["project.projectData.changed"]),w=$(["changed"],["changed"]),S=$(["project.projectData.description"],["project.projectData.description"]),E=$(["project.projectData.rows"],["project.projectData.rows"]),O=$(["rows"],["rows"]),C=$(["project.projectData.hideReadmore"],["project.projectData.hideReadmore"]),k=$(["project.projectData.readmore"],["project.projectData.readmore"]),I=$(["project.editing"],["project.editing"]),j=$(["project.embed.show"],["project.embed.show"]),M=$(["project.cover.show"],["project.cover.show"]),T=$(["project.share.show"],["project.share.show"]),P=$(["project.getLink.show"],["project.getLink.show"]),x=$(["project.screenshotDialog.preText"],["project.screenshotDialog.preText"]),A=$(["project.screenshotDialog.showEmoji"],["project.screenshotDialog.showEmoji"]),D=$(["project.screenshotDialog.emoji"],["project.screenshotDialog.emoji"]),R=$(["project.comment.showEmoji"],["project.comment.showEmoji"]),N=$(["project.comment.emoji"],["project.comment.emoji"]),L=$(["project.showChallenge"],["project.showChallenge"]),F=$(["project.projectDeleteDialog.updateStatus"],["project.projectDeleteDialog.updateStatus"]),K=$(["project.projectDeleteDialog.open"],["project.projectDeleteDialog.open"]),U=$(["project.downloadTermDialog.show"],["project.downloadTermDialog.show"]),B=$(["project.downloadTermDialog.source"],["project.downloadTermDialog.source"]),z=re(9),W=re(0),V=H(re(7)),q=H(re(84));function H(e){return e&&e.__esModule?e:{default:e}}function $(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var G=["project","webglProcess"],Y=void 0,J="webgl-screenshot-comment",Q="comment";function Z(){Y&&clearInterval(Y)}function X(e){var t=e.get(["project","projectData"])||{};return J+"_"+t.id}function ee(e){var t=e.get(["project","projectData"])||{};return J+"_"+t.id+"_"+Q}function te(){window.location.href="/admin"}ne.default={name:e,depends:[],signals:{initWebglData:[function(e){var t=e.http,n=e.path;return t.get("/api/getRecommendMiniGames").then(n.success).catch(n.error)},{success:[function(e){var t=e.state,n=e.props.result;t.set("project.recommend",n)}],error:[],dummy:[]},function(e){var t=e.state,n=e.http,r=e.path,a=t.get("project.projectData.id");return n.get("/api/webgl/preview?projectId="+a).then(r.success).catch(r.error)},{success:[function(e){var t=e.state,n=(e.props.result||{}).previewAttachmentId;n&&t.set("project.webglPKG.webgl.previewAttachmentId",n)}],error:[],dummy:[]}],toggleHottestProject:[function(e){var t=e.props,n=e.http,r=e.path,a=t.itemId,o=t.language,s=t.isAdd,i=void 0===s||s?"/api/hottest/addHottestProject":"/api/hottest/removeHottestProject";return n.post(i,{itemId:a,language:o}).then(r.success).catch(r.error)},{success:[function(e){var t=e.state,n=e.props.isAdd,r=void 0===n||n;t.set(["project","isHottest"],r)}],error:[te]}],getWebglProgess:[function(e){var t=e.props,n=e.http,r=e.path,a=t.key;return n.get("/api/webgl/progress",{key:a}).then(r.success).catch(r.error)},{success:[function(e){var t=e.state,n=e.props,r=e.controller,a=n.id,o=n.result,s=o.progress,i=o.error,l=o.projectContent,u=t.get("challenge.mgSubmission.challengeId");t.set(G,{progress:s,error:i}),100!==s&&!i||(Z(),i?(q.default.getUpload(a,t)&&q.default.updateUpload({id:a,err:i,status:V.default.failed},t),r.getSignal("header.showMessage")({message:i}),u&&r.getSignal("challenge.openMgSubmissionDialog")({challengeId:u})):(u&&t.set("challenge.mgSubmission.contentIds",[l.id]),r.getSignal("project.addContent")(c({},l),{immediate:!0}),r.getSignal("project.getWebglPKG")(),q.default.updateUpload({id:a,contentId:l.id,status:V.default.succeeded},t)))}],error:[]}],startCheckWebglProgressTimer:[function(e){var t=e.props,n=e.controller;Y=setInterval(function(){return n.getSignal("project.getWebglProgess")(c({},t))},1500)}],endCheckWebglProgressTimer:[Z],onLogPlaySuccess:[function(e){var t,n=e.state;(n.get("project")||{}).projectData&&(t=n.get("project.projectData.playCount"),n.set("project.projectData.playCount",t+1))}],setProjectState:[(0,z.set)((0,W.state)(t,(0,W.props)(n)),(0,W.props)(r))],setMute:[(0,z.set)((0,W.state)(a),(0,W.props)(r))],setUploadingPreview:[(0,z.set)((0,W.state)(o),(0,W.props)(r))],setHideRecord:[(0,z.set)((0,W.state)(s),(0,W.props)(r))],setRemoveWebgl:[(0,z.set)((0,W.state)(i),(0,W.props)(r))],setShowStopRecord:[(0,z.set)((0,W.state)(l),(0,W.props)(r))],setUploadId:[(0,z.set)((0,W.state)(u),(0,W.props)(r))],setTime:[(0,z.set)((0,W.state)(d),(0,W.props)(r))],setShowWebglToolBar:[(0,z.set)((0,W.state)(f),(0,W.props)(r))],setEnableMobile:[(0,z.set)((0,W.state)(p),(0,W.props)(r))],openScreenshotDialog:[(0,z.set)((0,W.state)(g),""),(0,z.set)((0,W.state)(h),!0),(0,z.set)((0,W.state)(m),""),(0,z.set)((0,W.state)(v),(0,W.props)(r)),(0,z.set)((0,W.state)(y),(0,W.props)(_))],closeScreenshotDialog:[(0,z.set)((0,W.state)(h),!1)],changeScreenshotComment:[(0,z.set)((0,W.state)(m),(0,W.props)(r))],submitDescription:[function(e){var t=e.http,n=e.state.get("project.projectData"),r=n.id,a={description:n.description};t.post("/api/p/"+r+"/description",a)}],confirmUnlockedAssets:[function(e){return e.http.post("/api/unlock-asset/confirm")}],setChanged:[(0,z.set)((0,W.state)(b),(0,W.props)(w))],changeDescription:[(0,z.set)((0,W.state)(S),(0,W.props)(r)),(0,z.set)((0,W.state)(E),(0,W.props)(O))],setHideReadmore:[(0,z.set)((0,W.state)(C),(0,W.props)(r))],setReadmore:[(0,z.set)((0,W.state)(k),(0,W.props)(r))],setEditing:[(0,z.set)((0,W.state)(I),(0,W.props)(r))],setEmbed:[(0,z.set)((0,W.state)(j),(0,W.props)(r))],hideCover:[(0,z.set)((0,W.state)(M),!0)],openShare:[(0,z.set)((0,W.state)(T),!0)],closeShare:[(0,z.set)((0,W.state)(T),!1)],openGetLink:[(0,z.set)((0,W.state)(P),!0)],closeGetLink:[(0,z.set)((0,W.state)(P),!1)],setPreText:[(0,z.set)((0,W.state)(x),(0,W.props)(r))],openEmoji:[(0,z.set)((0,W.state)(A),!0)],closeEmoji:[(0,z.set)((0,W.state)(A),!1)],changeEmoji:[(0,z.set)((0,W.state)(D),(0,W.props)(r))],openCommentEmoji:[(0,z.set)((0,W.state)(R),!0)],closeCommentEmoji:[(0,z.set)((0,W.state)(R),!1)],changeCommentEmoji:[(0,z.set)((0,W.state)(N),(0,W.props)(r))],hideChallenge:[(0,z.set)((0,W.state)(L),!1)],storeComment:[function(e){var t,n=e.state,r=n.get(["project"]).inputValues;n.get("currentUserId")||(t=ee(n),localStorage.setItem(t,JSON.stringify({inputValues:r})))}],postScreenshot:[function(e){var t,n,r,a=e.state,o=e.controller,s=a.get("project.screenshotDialog"),i=s.comment,l=s.emoji,u=s.image,c=s.projectId,d=a.get("project.channelId"),f=a.get("currentUserId");f||(t=X(a),localStorage.setItem(t,JSON.stringify({content:i,emoji:l,attachementContent:u},c))),f&&(n=a.get(["project","projectData"]).reactionCount,r=a.get(["project","projectData"]).reactionsUsed,a.set(["project","projectData","reactionCount"],(n||0)+1),(r=r||[])[l]=(r[l]||0)+1,a.set(["project","projectData","reactionsUsed"],r)),c&&""!==c?o.getSignal("project.createCommentInMultiProject")({content:i,projectId:c,attachementContent:u,cb:"project.closeScreenshotDialog"}):o.getSignal("project.createComment")({content:i,emojiReaction:l,channelId:d,attachementContent:u,cb:"project.closeScreenshotDialog"})}],initWebgl:[function(e){var t,n,r,a,o,s,i,l,u,c=e.state;c.get("currentUserId")&&(t=X(c),(n=localStorage.getItem(t))&&(a=(r=JSON.parse(n)).content,o=r.emoji,s=r.attachementContent,a&&s&&c.set(["project","screenshotDialog"],{show:!0,emoji:o,comment:a,image:s}),localStorage.removeItem(t)),i=ee(c),(l=localStorage.getItem(i))&&((u=JSON.parse(l).inputValues)&&c.merge(["project","inputValues"],u||{}),localStorage.removeItem(i)))}],openProjectDeleteDialog:[(0,z.set)((0,W.state)(F),V.default.initial),(0,z.set)((0,W.state)(K),!0)],downloadPreview:[function(e){var t=e.state,n=e.http,r=e.path,a=t.get("project.projectData.id");return n.get("/api/admin/webgl/preview?projectId="+a).then(r.success).catch(r.error)},{success:[function(e){var t=e.props.result.url,n=document.getElementById("admin-download");fetch(t).then(function(e){return e.blob()}).then(function(e){var t=window.URL.createObjectURL(e);n.href=t,n.click()})}],error:[te]}],closeProjectDeleteDialog:[(0,z.set)((0,W.state)(K),!1)],deleteProject:[(0,z.set)((0,W.state)(F),V.default.inProgress),[function(e){var t=e.state,n=e.http,r=e.path,a=t.get("project.projectData.id");if(a){return n.post("/api/p/"+a+"/delete",{reason:"Self Delete"}).then(r.success).catch(r.error)}return r.success()},{success:[(0,z.set)((0,W.state)(F),V.default.succeeded),function(){window.location.href="/discover"}],error:[(0,z.set)((0,W.state)(F),V.default.failed)]}],(0,z.set)((0,W.state)(K),!1)],showDownloadTermDialog:[(0,z.set)((0,W.state)(U),!0)],hideDownloadTermDialog:[(0,z.set)((0,W.state)(U),!1)],downloadTermDialogFromBanner:[(0,z.set)((0,W.state)(B),"banner")],downloadTermDialogFromGetStarted:[(0,z.set)((0,W.state)(B),"get-started")]},getState:function(){return{share:{show:!1},getLink:{show:!1},cover:{show:!1},embed:{show:!1},editing:!1,webglProcess:{progress:0,error:""},comment:{emoji:null,showEmoji:!1},changed:!1,showChallenge:!0,showWebglToolBar:!1,time:30,screenshotDialog:{preText:-1,show:!1,showEmoji:!1,image:"",comment:"",emoji:"grinning",updateStatus:"",projectId:""},uploadId:""}}}}).call(ne,"views/v2/modules/projectV2/WebglStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(474);var o=[((r=a)&&r.__esModule?r:{default:r}).default];t.default={suggest:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(178);var o=[((r=a)&&r.__esModule?r:{default:r}).default];t.default={draft:o}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t,n=-1!==(e=e.toLowerCase()).indexOf("micromessenger");return n&&(n=(t=e.match(/micromessenger\/([0-9]+\.[0-9]+)/))&&t[1]||""),n}},function(e,t,n){e.exports=n.p+"../styles/i/support-avatar2.a2faf89829d9187c5181885ca00f75b9.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=z(["team.basicForm"],["team.basicForm"]),i=z(["team.showBasicForm"],["team.showBasicForm"]),l=z(["team.updateStatus"],["team.updateStatus"]),u=z(["categoryOptions"],["categoryOptions"]),c=z(["teamData"],["teamData"]),d=z(["placeMap"],["placeMap"]),f=z(["team.duplicateError"],["team.duplicateError"]),p=z(["team.redirectInProgress"],["team.redirectInProgress"]),g=z(["header.recaptchaCode"],["header.recaptchaCode"]),h=z(["team.changeWebsiteUrl"],["team.changeWebsiteUrl"]),m=z(["team.changeNameAndClear"],["team.changeNameAndClear"]),v=z(["team.validName"],["team.validName"]),y=z(["team.changeLocation"],["team.changeLocation"]),_=z(["team.changeType"],["team.changeType"]),b=z(["team.changeCategoryId"],["team.changeCategoryId"]),w=z(["team.changeTeamScale"],["team.changeTeamScale"]),S=z(["team.create"],["team.create"]),E=z(["team.closeBasicForm"],["team.closeBasicForm"]),O=B(n(2)),C=B(n(1)),k=B(n(3)),I=n(5),j=n(0),M=B(n(17)),T=B(n(28)),P=B(n(37)),x=B(n(45)),A=B(n(44)),D=B(n(57)),R=n(7),N=B(n(128)),L=B(n(4)),F=B(n(748)),K=B(n(6)),U=B(n(749));function B(e){return e&&e.__esModule?e:{default:e}}function z(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var W=[{from:0,to:1},{from:2,to:5},{from:6,to:10},{from:11,to:20},{from:21,to:50},{from:51,to:100},{from:101,to:500},{from:501,to:1e3},{from:1001,to:5e3},{from:5001,to:null}],V=(0,I.decorator)({form:(0,j.state)(s),showForm:(0,j.state)(i),updateStatus:(0,j.state)(l),categoryOptions:(0,j.state)(u),teamData:(0,j.state)(c),placeMap:(0,j.state)(d),duplicateError:(0,j.state)(f),redirectInProgress:(0,j.state)(p),recaptchaCode:(0,j.state)(g),changeWebsiteUrl:(0,j.signal)(h),changeNameAndClear:(0,j.signal)(m),validName:(0,j.signal)(v),changeLocation:(0,j.signal)(y),changeType:(0,j.signal)(_),changeCategoryId:(0,j.signal)(b),changeTeamScale:(0,j.signal)(w),create:(0,j.signal)(S),closeForm:(0,j.signal)(E)})(r=(0,L.default)(F.default)(r=(0,K.default)(U.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(q,k.default),a(q,[{key:"onSave",value:function(){var e=this.props,t=e.create,n=e.duplicateError,r=e.callback;n||t({formPath:["team","basicForm"],callback:void 0===r?"":r})}},{key:"renderError",value:function(e){return e?C.default.createElement("span",{className:this.ss("error")},e):null}},{key:"renderCreateOnlyFields",value:function(){var a=this,e=this.props,t=e.form,n=e.categoryOptions,r=e.changeCategoryId,o=e.changeTeamScale,s=W.map(function(e,t){return{value:t,text:e.to?e.from+"-"+e.to:e.from+"+"}}),i=W.findIndex(function(e){return e.from===t.scale.value.from&&e.to===t.scale.value.to}),l=n.map(function(e){var t=e.id,n=e.name,r=e.refId;return{value:t,text:a.__(r)||n}});return C.default.createElement("div",{className:this.ss("section")},C.default.createElement("div",{className:this.ss("col")},C.default.createElement("div",{className:this.ss("fieldName")},this.__("category"),this.renderError(t.categoryId.isTouched&&this.__(t.categoryId.errorMessage))),C.default.createElement(A.default,{selects:l,hintText:this.__("category_hint"),onChange:function(e,t,n){return r({value:n})},value:t.categoryId.value})),C.default.createElement("div",{className:this.ss("col")},C.default.createElement("div",{className:this.ss("fieldName")},this.__("scale"),this.renderError(t.scale.isTouched&&this.__(t.scale.errorMessage))),C.default.createElement(A.default,{selects:s,hintText:this.__("scale_hint"),onChange:function(e,t,n){return o({value:W[n]})},value:i})))}},{key:"render",value:function(){var n=this,e=this.props,t=e.teamData,r=void 0===t?{}:t,a=e.placeMap,o=e.changeWebsiteUrl,s=e.form,i=e.changeNameAndClear,l=e.duplicateError,u=e.changeLocation,c=e.changeType,d=e.updateStatus,f=e.showForm,p=e.closeForm,g=e.redirectInProgress,h=e.recaptchaCode,m=(0,R.isLoading)(d)||g;if(!f)return null;var v=!s.id.value,y=s.websiteUrl.isTouched&&this.__(s.websiteUrl.errorMessage),_=v?s.name.value:r.name,b=["hire","forHire","both"].map(function(e,t){return C.default.createElement("div",{key:"hire_"+(t+1),className:n.ss("option")},C.default.createElement(x.default,{isChecked:s.type.value===e,value:e,theme:"blue",label:n.__(e),hintLabel:n.__("hint_"+e),onCheck:function(e,t){return c({value:t})}}))});return C.default.createElement(T.default,{open:f,title:v?this.__("createCompany"):this.__("editBasic"),onClose:function(){return p()},onSubmit:function(){return n.onSave()},submitDisable:!h,submitInProgress:m,submitStyle:"ok/cancel"},C.default.createElement(M.default,null,C.default.createElement("div",{className:this.ss("form")},C.default.createElement("div",{className:this.ss("section")},C.default.createElement("div",{className:this.ss("col")},C.default.createElement("div",{className:this.ss("fieldName")},this.__("companyName"),this.renderError(s.name.isTouched&&this.__(s.name.errorMessage)||l&&this.__("error_duplicate"))),C.default.createElement(P.default,{placeholder:this.__("companyName_hint"),value:_,disabled:!v,onChange:function(e,t){return i({value:t})}}))),v&&this.renderCreateOnlyFields(),C.default.createElement("div",{className:this.ss("section")},C.default.createElement("div",{className:this.ss("col")},C.default.createElement("div",{className:this.ss("fieldName")},this.__("location"),this.renderError(s.location.isTouched&&this.__(s.location.errorMessage))),C.default.createElement(D.default,{inputType:"single",st:"place",hintText:this.__("location_hint"),iconName:"icon-location2",onSelected:function(e){var t=e.value;return u({value:t})},onRemove:function(){return u({value:""})},selectedIds:[s.location.value],idToCandidateMap:a,notice:s.location.isTouched&&this.__(s.location.errorMessage)?{type:"failed"}:null})),C.default.createElement("div",{className:this.ss("col")},C.default.createElement("div",{className:this.ss("fieldName")},this.__("link"),this.renderError(s.websiteUrl.isTouched&&this.__(s.websiteUrl.errorMessage))),C.default.createElement(P.default,{value:s&&s.websiteUrl.value,onChange:function(e,t){return o({value:t})},placeholder:this.__("link_hint"),iconName:"icon-link",notice:y?{type:"failed"}:null}))),C.default.createElement("div",{className:this.ss("section","company-type")},C.default.createElement("div",{className:this.ss("col")},C.default.createElement("div",{className:this.ss("fieldName")},this.__("companyType"),this.renderError(s.type.isTouched&&this.__(s.type.errorMessage))),C.default.createElement("div",{className:this.ss("options")},b))),C.default.createElement("div",{className:this.ss("section")},C.default.createElement(N.default,null)))))}}]),q.propTypes={open:O.default.bool,form:O.default.object,showForm:O.default.bool,updateStatus:O.default.string,categoryOptions:O.default.array,teamData:O.default.object,placeMap:O.default.object,duplicateError:O.default.bool,redirectInProgress:O.default.bool,callback:O.default.string,recaptchaCode:O.default.string,changeWebsiteUrl:O.default.func,changeNameAndClear:O.default.func,validName:O.default.func,changeLocation:O.default.func,changeType:O.default.func,changeCategoryId:O.default.func,changeTeamScale:O.default.func,create:O.default.func,closeForm:O.default.func},r=q))||r)||r)||r;function q(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,q),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(q.__proto__||Object.getPrototypeOf(q)).apply(this,arguments))}t.default=V},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=_(n(2)),u=_(n(1)),c=_(n(3)),d=_(n(72)),f=_(n(13)),p=_(n(14)),g=n(7),h=_(n(4)),m=_(n(756)),v=_(n(6)),y=_(n(757));function _(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=n(481),S=(0,h.default)(m.default)(r=(0,v.default)(y.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,c.default),s(E,[{key:"getDialogOptions",value:function(e){var t={confirm:{text:this.__("button_ok"),theme:"thirdly"},cancel:{text:this.__("button_cancel"),theme:""}},n=this.__("title");switch(e){case"tfa":t={confirm:{text:this.__("button_ok"),theme:"red"},cancel:{text:"",theme:""}}}return{button:t,title:n,description:""}}},{key:"renderIcon",value:function(){return"tfa"===this.props.theme?u.default.createElement("div",{className:this.ss("icon-wrapper")},u.default.createElement("div",{className:this.ss("tfa-icon")},u.default.createElement(p.default,{src:w,width:100,height:100,sizes:"200px"}))):null}},{key:"renderButtons",value:function(){var e=this.props,t=e.notifyText,n=e.notifyStatus,r=e.theme,a=(0,g.isLoadingOrSucceeded)(n),o=[],s=this.getDialogOptions(r).button,i=s.confirm,l=s.cancel;return l&&0<l.text.length&&o.push(u.default.createElement(f.default,{key:"cancel",disabled:a,className:this.ss("button-cancel"),label:l.text,onClick:this.onNO})),o.push(u.default.createElement(f.default,{key:"ok",loading:a,theme:i.theme,className:this.ss("button-ok"),label:t||i.text,onClick:this.onOK})),o}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.title,r=e.description,a=e.theme,o=this.getDialogOptions(a),s=o.title,i=o.description;return u.default.createElement(d.default,{open:t,position:"center",width:640,title:n||s,onCloseModal:this.onClose},u.default.createElement("div",{className:this.ss("content-wrap",a)},this.renderIcon(),u.default.createElement("div",{className:this.ss("description")},r||i),u.default.createElement("div",{className:this.ss("button-wrap")},this.renderButtons())))}}]),o=a=E,a.propTypes={open:l.default.bool,title:l.default.string,description:l.default.string,theme:l.default.oneOf(["default","tfa"]),notifyText:l.default.string,notifyStatus:l.default.string,onOK:l.default.func,onNO:l.default.func,onClose:l.default.func},a.defaultProps={theme:"default"},r=o))||r)||r;function E(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=b(this,(e=E.__proto__||Object.getPrototypeOf(E)).call.apply(e,[this].concat(a)))).state={},n.onOK=function(){n.props.onOK&&n.props.onOK()},n.onNO=function(){n.props.onNO&&n.props.onNO()},n.onClose=function(){n.props.onClose&&n.props.onClose()},b(n,t)}t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteProjectBySelfConfirm=t.DeleteSubmissionByAdminConfirm=t.DeleteSubmissionBySelfConfirm=t.default=void 0;var r,a,o,s,i=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=N(["project.closeDeleteChallengeConfirm"],["project.closeDeleteChallengeConfirm"]),c=N(["project.deleteChallengeConfirmOpen"],["project.deleteChallengeConfirmOpen"]),d=N(["project.deleteChallengeConfirmUpdateStatus"],["project.deleteChallengeConfirmUpdateStatus"]),f=N(["project.deleteFromChallenge"],["project.deleteFromChallenge"]),p=N(["project.projectData.challengeId"],["project.projectData.challengeId"]),g=N(["project.projectData.id"],["project.projectData.id"]),h=N(["challenge.deleteChallengeConfirmUpdateStatus"],["challenge.deleteChallengeConfirmUpdateStatus"]),m=N(["challenge.deleteSubmission"],["challenge.deleteSubmission"]),v=N(["challenge.deleteChallengeConfirmOpen"],["challenge.deleteChallengeConfirmOpen"]),y=N(["challenge.closeDeleteChallengeConfirm"],["challenge.closeDeleteChallengeConfirm"]),_=N(["challenge.deleteProjectFromChallenge"],["challenge.deleteProjectFromChallenge"]),b=N(["project.projectDeleteDialog.open"],["project.projectDeleteDialog.open"]),w=N(["project.projectDeleteDialog.updateStatus"],["project.projectDeleteDialog.updateStatus"]),S=N(["project.closeProjectDeleteDialog"],["project.closeProjectDeleteDialog"]),E=N(["project.deleteProject"],["project.deleteProject"]),O=R(n(2)),C=R(n(1)),k=R(n(3)),I=n(5),j=n(0),M=R(n(13)),T=n(7),P=R(n(4)),x=R(n(758)),A=R(n(6)),D=R(n(759));function R(e){return e&&e.__esModule?e:{default:e}}function N(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U=(0,P.default)(x.default)(r=(0,A.default)(D.default)((K(B,k.default),i(B,[{key:"renderButtons",value:function(){var e=[],t=this.props,n=t.confirmStatus,r=t.yesLabel,a=t.noLabel,o="button_cancel",s="button_ok";r&&0<r.length&&(s=r),a&&0<a.length&&(o=a);var i=(0,T.isLoadingOrSucceeded)(n);return e.push(C.default.createElement(M.default,{key:"cancel",disabled:i,className:this.ss("button-cancel"),label:this.__(o),onClick:this.onClose})),e.push(C.default.createElement(M.default,{key:"ok",theme:"thirdly",className:this.ss("button-ok"),label:this.__(s),loading:i,onClick:this.onConfirm})),e}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.description,r=e.subDes,a=C.default.createElement("div",{className:this.ss("subDes")},r);return C.default.createElement("div",{className:this.ss("backdrop",!t&&"hide")},C.default.createElement("div",{className:this.ss("popup")},C.default.createElement("div",{className:this.ss("description")},n),r&&a,C.default.createElement("div",{className:this.ss("button-wrap")},this.renderButtons())))}}]),B.propTypes={open:O.default.bool,description:O.default.string,subDes:O.default.string,yesLabel:O.default.string,noLabel:O.default.string,onConfirm:O.default.func,onClose:O.default.func,confirmStatus:O.default.string},r=B))||r)||r;function B(){var e,t,n;L(this,B);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=F(this,(e=B.__proto__||Object.getPrototypeOf(B)).call.apply(e,[this].concat(a)))).onConfirm=function(){n.props.onConfirm&&n.props.onConfirm()},n.onClose=function(){n.props.onClose&&n.props.onClose()},F(n,t)}t.default=U;t.DeleteSubmissionBySelfConfirm=(0,I.decorator)({closeDeleteChallengeConfirm:(0,j.signal)(u),deleteChallengeConfirmOpen:(0,j.state)(c),deleteChallengeConfirmUpdateStatus:(0,j.state)(d),deleteFromChallenge:(0,j.signal)(f),challengeId:(0,j.state)(p),projectId:(0,j.state)(g)})(a=(0,P.default)(x.default)(a=(0,A.default)(D.default)((K(z,k.default),i(z,[{key:"render",value:function(){var e=this.props,t=e.deleteChallengeConfirmOpen,n=e.deleteChallengeConfirmUpdateStatus,r=e.closeDeleteChallengeConfirm,a=e.projectId,o=e.challengeId,s=e.deleteFromChallenge;return C.default.createElement(U,{open:t,description:this.__("delete_submission_by_self_title"),subDes:this.__("delete_submission_by_self_text"),onConfirm:function(){return s({projectId:a,challengeId:o})},confirmStatus:n,onClose:function(){return r()}})}}]),z.propTypes={deleteFromChallenge:O.default.func,closeDeleteChallengeConfirm:O.default.func,deleteChallengeConfirmOpen:O.default.bool,deleteChallengeConfirmUpdateStatus:O.default.string,challengeId:O.default.string,projectId:O.default.string},a=z))||a)||a)||a;function z(){return L(this,z),F(this,(z.__proto__||Object.getPrototypeOf(z)).apply(this,arguments))}t.DeleteSubmissionByAdminConfirm=(0,I.decorator)({deleteChallengeConfirmUpdateStatus:(0,j.state)(h),submission:(0,j.state)(m),deleteChallengeConfirmOpen:(0,j.state)(v),closeDeleteChallengeConfirm:(0,j.signal)(y),deleteProjectFromChallenge:(0,j.signal)(_)})(o=(0,P.default)(x.default)(o=(0,A.default)(D.default)((K(W,k.default),i(W,[{key:"render",value:function(){var e=this.props,t=e.deleteProjectFromChallenge,n=e.closeDeleteChallengeConfirm,r=e.deleteChallengeConfirmOpen,a=e.submission,o=e.deleteChallengeConfirmUpdateStatus;return C.default.createElement(U,{open:r,description:this.__("delete_submission_by_admin_title"),onConfirm:function(){return t({submission:a})},confirmStatus:o,onClose:function(){return n()}})}}]),W.propTypes={deleteChallengeConfirmOpen:O.default.bool,closeDeleteChallengeConfirm:O.default.func,deleteProjectFromChallenge:O.default.func,deleteChallengeConfirmUpdateStatus:O.default.string,submission:O.default.object},o=W))||o)||o)||o;function W(){return L(this,W),F(this,(W.__proto__||Object.getPrototypeOf(W)).apply(this,arguments))}t.DeleteProjectBySelfConfirm=(0,I.decorator)({deleteProjectConfirmOpen:(0,j.state)(b),deleteProjectConfirmUpdateStatus:(0,j.state)(w),closeDeleteProjectConfirm:(0,j.signal)(S),deleteFromProject:(0,j.signal)(E)})(s=(0,P.default)(x.default)(s=(0,A.default)(D.default)((K(V,k.default),i(V,[{key:"render",value:function(){var e=this.props,t=e.deleteProjectConfirmOpen,n=e.deleteProjectConfirmUpdateStatus,r=e.closeDeleteProjectConfirm,a=e.deleteFromProject;return C.default.createElement(U,{open:t,description:this.__("delete_project_by_self_title"),subDes:this.__("delete_project_by_self_text"),yesLabel:"button_yes",noLabel:"button_no",onConfirm:function(){return a()},confirmStatus:n,onClose:function(){return r()}})}}]),V.propTypes={deleteProjectConfirmOpen:O.default.bool,deleteProjectConfirmUpdateStatus:O.default.string,challengeId:O.default.string,closeDeleteProjectConfirm:O.default.func,deleteFromProject:O.default.func},s=V))||s)||s)||s;function V(){return L(this,V),F(this,(V.__proto__||Object.getPrototypeOf(V)).apply(this,arguments))}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports={image_tooltip:"image_tooltip_37hw",video_tooltip:"video_tooltip_1plx",attachment_tooltip:"attachment_tooltip_1xss"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=g(n(1)),l=g(n(3)),T=g(n(796)),u=g(n(2)),P=g(n(799)),x=g(n(74)),A=g(n(802)),c=g(n(4)),d=g(n(804)),f=g(n(6)),p=g(n(805));function g(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=100,v=5e3,y=(0,c.default)(d.default)(r=(0,f.default)(p.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_,l.default),s(_,[{key:"componentWillUnmount",value:function(){this.clearIdleTimeout()}},{key:"onReload",value:function(){var e=this.props.onReload;e&&e()}},{key:"onVolumeBarClicked",value:function(e){var t=e.pageX;this.refs.video.volume=(t-e.target.getBoundingClientRect().left)/m}},{key:"fullScreen",value:function(){var e=this,t=this.refs.player;function n(){document.fullScreen||document.webkitIsFullScreen||(e.setState({isFullScreen:!1}),t.removeEventListener("fullscreenchange",n),t.removeEventListener("webkitfullscreenchange",n),t.removeEventListener("mozfullscreenchange",n),t.removeEventListener("MSfullscreenchange",n))}(t.requestFullscreen||t.requestFullScreen||t.webkitRequestFullscreen||t.mozRequestFullScreen).call(t),this.setState({isFullScreen:!0}),t.addEventListener("fullscreenchange",n),t.addEventListener("webkitfullscreenchange",n),t.addEventListener("mozfullscreenchange",n),t.addEventListener("MSfullscreenchange",n)}},{key:"cancelFullScreen",value:function(){var e;(document.fullScreen||document.webkitIsFullScreen)&&(e=document.cancelFullScreen||document.cancelFullscreen||document.webkitCancelFullScreen||document.webkitCancalFullscreen||document.mozCancelFullScreen||document.mozCancelFullscreen,e.call(document))}},{key:"renderVolumeTier",value:function(){var t=this,e=this.state,n=e.volume,r=e.muted,a={width:n*m},o={top:-5,left:m*n-5};return M.default.createElement("div",{className:this.ss("volume-tier")},!r&&M.default.createElement("div",{className:this.ss("ifont","ifont-icons_sound","sound-btn"),onClick:function(){return t.refs.video.mute()}}),r&&M.default.createElement("div",{className:this.ss("ifont","ifont-icons_mute","mute-btn"),onClick:function(){return t.refs.video.unmute()}}),!r&&M.default.createElement("div",{className:this.ss("volume-bar-wrap"),ref:"volumeBar",onClick:function(e){return t.onVolumeBarClicked(e)}},M.default.createElement("div",{className:this.ss("volume-bar")},M.default.createElement("div",{className:this.ss("volume-bar-value"),style:a}),M.default.createElement("div",{className:this.ss("volume-knob"),style:o,onClick:function(e){return e.stopPropagation()},onMouseDown:this.adjustVolumeEntry}))))}},{key:"render",value:function(){var t=this,e=this.props,n=e.src,r=e.size,a=e.width,o=e.height,s=e.directPlay,i=e.barrage,l=e.progress,u=this.state,c=u.isFullScreen,d=u.playing,f=u.loading,p=u.idle,g=u.hover,h=u.videoInitialized,m=u.mseSupported,v=u.m3u8Supported,y=u.barrageEnabled,_=u.played,b=u.duration,w=u.loaded,S=u.showLoading,E=!h||h&&(m||v),O={};"auto"===r&&0!==a&&0!==o&&(O={paddingBottom:100*o/a+"%"});var C={};E&&m||(C.controls="controls");var k=void 0,I=void 0;return i&&(y&&(k=M.default.createElement(P.default,{requestUniqueKey:function(){return i.onRequestUniqueKey()},renderBarrage:i.onRenderBarrage})),I=M.default.createElement("div",{className:this.ss("barrage-ctrl")},M.default.createElement(x.default,{checked:y,onChange:function(){return t.setState({barrageEnabled:!y})},size:"small"}),M.default.createElement("div",{className:this.ss("barrage-ctrl-text")},this.__("barrage")))),l&&(C.onDurationChange=function(e){return t.setState({duration:e})},C.onTimeUpdate=function(e){return t.setState({played:e})},C.onProgress=function(e){return t.setState({loaded:e})}),M.default.createElement("div",{className:this.ss("player",r,c&&"full-screen",g&&"hover",p&&"idle"),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,style:O,ref:"player"},k,S&&f&&m&&M.default.createElement("div",{className:this.ss("loading")},M.default.createElement("div",{className:this.ss("loading-circle")},M.default.createElement("div",{className:this.ss("loading-circle-inner")}))),E&&M.default.createElement("div",{className:this.ss("video-wrap",c&&"video-wrap-full-screen")},M.default.createElement(T.default,j({src:n,className:this.ss("video-"+r,c&&"video-full-screen",p&&"video-idle"),directPlay:s,ref:"video",onHardReloadNeeded:function(){return t.onReload()},onInitialized:this.onInitialized,onPlay:function(){return t.setState({playing:!0})},onPause:function(){return t.setState({playing:!1})},onMutedChange:function(e){return t.setState({muted:e})},onVolumeChange:function(){return t.setState({volume:t.refs.video.volume})},onLoadingChange:function(e){return t.setState({loading:e})}},C))),!E&&M.default.createElement("div",{className:this.ss("unsupported")},this.__("player_unsupported")),E&&m&&M.default.createElement("div",{className:this.ss("controls"),ref:"controls"},l&&M.default.createElement(A.default,{played:_,duration:b,loaded:w,seekable:this.refs.video.seekable,onChange:function(e){return t.refs.video.seekTo(e)}}),M.default.createElement("div",{className:this.ss("controls-left")},!d&&M.default.createElement("div",{className:this.ss("ifont","ifont-icons_play","play-btn"),onClick:function(){return t.refs.video.play()}}),d&&M.default.createElement("div",{className:this.ss("ifont","ifont-icons_pause","pause-btn"),onClick:function(){return t.refs.video.pause()}}),!s&&M.default.createElement("div",{className:this.ss("ifont","ifont-icons_refresh","refresh-btn"),onClick:function(){return t.onReload()}}),this.renderVolumeTier()),M.default.createElement("div",{className:this.ss("controls-right")},I,!c&&M.default.createElement("div",{className:this.ss("ifont","ifont-icons_expand","fullscreen-btn"),onClick:function(){return t.fullScreen()}}),c&&M.default.createElement("div",{className:this.ss("ifont","ifont-icons_contract","cancel-fullscreen-btn"),onClick:function(){return t.cancelFullScreen()}}))))}}]),o=a=_,a.propTypes={src:u.default.string,width:u.default.number,height:u.default.number,size:u.default.oneOf(["auto","small"]),directPlay:u.default.bool.isRequired,progress:u.default.bool,showLoading:u.default.bool,onReload:u.default.func,barrage:u.default.shape({onRenderBarrage:u.default.func,onRequestUniqueKey:u.default.func})},a.defaultProps={size:"auto",showLoading:!0},r=o))||r)||r;function _(){var e,t,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=o=h(this,(e=_.__proto__||Object.getPrototypeOf(_)).call.apply(e,[this].concat(r)))).state={volume:0,isFullScreen:!1,playing:!1,muted:!1,loading:!0,hover:!1,idle:!1,videoInitialized:!1,mseSupported:!1,m3u8Supported:!1,barrageEnabled:!0,duration:0,played:0,loaded:[]},o.onInitialized=function(e){var t=e.volume,n=e.loading,r=e.mseSupported,a=e.m3u8Supported;o.setState({videoInitialized:!0,volume:t,loading:n,mseSupported:r,m3u8Supported:a})},o.onMouseEnter=function(){o.setState({hover:!0,idle:!1})},o.onMouseLeave=function(){o.setState({hover:!1})},o.onMouseMove=function(e){o.clearIdleTimeout();for(var t=e.target,n=!1;t!==o.refs.player;){if(t===o.refs.controls){n=!0;break}t=t.parentNode}n||null!==o.virtualVolume||(o.idleTimeout=setTimeout(function(){o.idleTimeout=null,o.setState({hover:!0,idle:!0})},v)),o.setState({hover:!0,idle:!1})},o.clearIdleTimeout=function(){o.idleTimeout&&(clearTimeout(o.idleTimeout),o.idleTimeout=null)},o.idleTimeout=null,o.virtualVolume=null,o.adjustVolumeEntry=function(){o.virtualVolume=o.state.volume;function t(e){var t=e.movementX;o.virtualVolume=o.virtualVolume+t/m,o.refs.video.volume=o.virtualVolume}window.addEventListener("mouseup",function e(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e),o.virtualVolume=null}),window.addEventListener("mousemove",t)},h(o,t)}t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=x(["currentUrl"],["currentUrl"]),i=x(["loginUser"],["loginUser"]),l=x(["countryByIp"],["countryByIp"]),u=x(["header.setting.windowWidth"],["header.setting.windowWidth"]),c=x(["project.contentMap"],["project.contentMap"]),d=x(["draft.editorStates.",""],["draft.editorStates.",""]),f=x(["editorKey"],["editorKey"]),p=x(["project.showVideoVisibilityEditor"],["project.showVideoVisibilityEditor"]),g=x(["header.loginTo"],["header.loginTo"]),h=T(n(1)),m=T(n(2)),v=T(n(3)),y=n(5),_=n(0),b=T(n(89)),w=T(n(14)),S=T(n(218)),E=n(126),O=n(11),C=T(n(43)),k=T(n(4)),I=T(n(808)),j=T(n(6)),M=T(n(809));function T(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var A=(0,y.decorator)({currentUrl:(0,_.state)(s),loginUser:(0,_.state)(i),countryByIp:(0,_.state)(l),windowWidth:(0,_.state)(u),contentMap:(0,_.state)(c),editorState:(0,_.state)(d,(0,_.props)(f)),showVideoVisibilityEditor:(0,_.signal)(p),loginTo:(0,_.signal)(g)})(r=(0,k.default)(I.default)(r=(0,j.default)(M.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(D,v.default),a(D,[{key:"onThumbClick",value:function(e){(0,C.default)(e)}},{key:"componentDidMount",value:function(){window.addEventListener("message",this.receiveMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.receiveMessage)}},{key:"renderCaption",value:function(){var e=this.props,t=e.isFocused,n=e.offsetKey,r=e.editorKey,a=e.entityKey,o=e.renderOnly;return h.default.createElement(b.default,{parentEditorKey:r,parentIsFocused:t,parentOffsetKey:n,editorKey:r+":"+n,entityKey:a,renderOnly:o,placeholder:this.__("video_caption_placeholder")})}},{key:"renderEmbed",value:function(e,t){var n=this.props,r=n.isFocused,a=n.focus,o=n.onDragStart,s=n.renderOnly;return h.default.createElement("div",{className:this.ss("video-wrap",r&&"focus")},h.default.createElement("div",{style:{paddingBottom:e+"%"}}),!s&&h.default.createElement("div",{className:this.ss("mark-wrap"),onClick:a,draggable:!!o,onDragStart:o}),h.default.createElement("div",{className:this.ss("iframe-wrap"),dangerouslySetInnerHTML:{__html:t}}))}},{key:"renderAssetStore",value:function(e){if(!e)return null;var t=this.props,n=t.isFocused,r=t.focus,a=t.onDragStart,o=t.renderOnly,s=t.windowWidth,i=e.originalImage,l=i.url,u=i.width,c=i.height,d=i.gif,f=u<(s?Math.min(s,1e3):1e3)?{width:u,height:c,margin:"0 auto",display:"block"}:{};return h.default.createElement("div",{className:this.ss("image-wrap")},h.default.createElement("div",{className:this.ss("image",n&&"focus"),style:f,onClick:r,draggable:!!a,onDragStart:a},h.default.createElement(w.default,{src:l,sizes:"1000px",width:u,height:c,gif:!!d}),h.default.createElement(S.default,{contentId:e.id,renderOnly:o})))}},{key:"renderEmbedThumbnail",value:function(e){var t=this;if(!e)return null;var n=this.props,r=n.isFocused,a=n.focus,o=n.onDragStart,s=n.renderOnly,i=n.windowWidth,l=e.thumbnail,u=l.url,c=l.width,d=l.height,f=c<(i?Math.min(i,1e3):1e3)?{width:c,height:d,margin:"0 auto",display:"block"}:{};return h.default.createElement("div",{className:this.ss("image-wrap","content")},h.default.createElement("div",{className:this.ss("image",r&&"focus"),style:f,onClick:s?function(){return t.onThumbClick(e.url)}:a,draggable:!!o,onDragStart:o},h.default.createElement(w.default,{src:u,sizes:"1000px",width:c,height:d}),h.default.createElement("div",{className:this.ss("video-icon-wrap")},h.default.createElement("div",{className:this.ss("icon","ifont","ifont-play")}))))}},{key:"renderEditVisibilityIcon",value:function(){var e=this.props,t=e.loginUser,n=e.isFocused,r=e.showVideoVisibilityEditor,a=e.contentMap,o=e.editorState,s=e.entityKey;if(n&&t&&t.email&&t.email.endsWith("@unity3d.com")){var i=a[o.getCurrentContent().getEntity(s).getData().contentId].attachmentId;if(i)return h.default.createElement("div",{className:this.ss("visibility-setting"),onClick:function(){return r({attachmentId:i})}},h.default.createElement("div",{className:this.ss("ifont","ifont-settings","setting-icon")}),h.default.createElement("div",{className:this.ss("visibility-setting-text")},this.__("visibility_setting")))}return null}},{key:"render",value:function(){var e,t,n,r,a,o,s=this.props,i=s.countryByIp,l=s.editorState,u=s.entityKey,c=s.contentMap,d=s.renderOnly,f=c[l.getCurrentContent().getEntity(u).getData().contentId],p=void 0;return f.oembed?p="CN"!==i||!f.oembed||"YouTube"!==f.oembed.provider_name&&"Vimeo"!==f.oembed.provider_name?(t=(e=f.oembed).html,n=e.height,a=(r=e.width)?Math.round(100*n/r):1,this.renderEmbed(a,(0,E.normalizeHtml)({html:t}))):this.renderEmbedThumbnail(f):f&&"webgl"===f.type?(o='<iframe width="100%" height="100%" src="'+(0,O.securedURL)(f.url)+'" scrolling="yes" frameborder="0" allowfullscreen="allowfullscreen"></iframe>',p=this.renderEmbed(66,o)):f&&"img"===f.type&&(p=this.renderAssetStore(f)),h.default.createElement("div",{className:this.ss("video-container",d&&"render-only")},p,h.default.createElement("div",{className:this.ss("edit-row")},this.renderCaption(f),this.renderEditVisibilityIcon()))}}]),D.propTypes={currentUrl:m.default.string,loginUser:m.default.object,windowWidth:m.default.number,isFocused:m.default.bool,entityKey:m.default.string,renderOnly:m.default.bool,offsetKey:m.default.string,contentMap:m.default.object,editorKey:m.default.string.isRequired,editorState:m.default.object,countryByIp:m.default.string,focus:m.default.func,onDragStart:m.default.func,showVideoVisibilityEditor:m.default.func,loginTo:m.default.func},r=D))||r)||r)||r;function D(){var e,t,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,D);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=c=P(this,(e=D.__proto__||Object.getPrototypeOf(D)).call.apply(e,[this].concat(r)))).receiveMessage=function(e){var t,n,r,a,o,s,i,l,u=e.data;u&&(t=u.source,n=u.type,r=u.id,"video-player"===t&&(o=(a=c.props).editorState,s=a.entityKey,r===a.contentMap[o.getCurrentContent().getEntity(s).getData().contentId].attachmentId&&"login"===n&&(l=(i=c.props).currentUrl,(0,i.loginTo)({url:l||"/"}))))},P(c,t)}t.default=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=E(["project.contentMap"],["project.contentMap"]),u=E(["project.locale"],["project.locale"]),h=w(n(1)),c=w(n(2)),d=w(n(3)),f=n(5),p=n(0),m=w(n(13)),v=n(11),g=w(n(4)),y=w(n(806)),_=w(n(6)),b=w(n(807));function w(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function O(e){return e&&e.endsWith(".00")?e.slice(0,e.length-3):e}var C=(0,f.decorator)({contentMap:(0,p.state)(l),locale:(0,p.state)(u)})(r=(0,g.default)(y.default)(r=(0,_.default)(b.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(k,d.default),s(k,[{key:"renderPriceNode",value:function(e){var t=[],n=e&&e.package||{},r=n.originalPrice,a=n.finalPrice,o=n.isOnSale;return n.isFree?t.push(h.default.createElement("div",{key:"final",className:this.ss("asset-price-final")},this.__("asset_free"))):(r!==a&&t.push(h.default.createElement("div",{key:"origin",className:this.ss("asset-price-origin")},r&&this.__("asset_price",{price:O(r)}))),t.push(h.default.createElement("div",{key:"final",className:this.ss("asset-price-final")},a&&this.__("asset_price",{price:O(a)})))),o&&t.push(h.default.createElement("div",{key:"onsale",className:this.ss("asset-sale")},h.default.createElement("div",{className:this.ss("asset-sale-icon","ifont","ifont-icons-on-sale")}),h.default.createElement("div",{className:this.ss("asset-sale-text")},this.__("tag_sale")))),t}},{key:"render",value:function(){var e=this.props,t=e.contentId,n=e.contentMap,r=e.locale,a=e.theme,o=e.renderOnly,s=t&&n&&n[t],i=s||{},l=i.externalRef,u=i.url;if(!l||"asset_store"!==i.externalType)return null;var c=s&&s.package||{},d=c.name,f=c.publisherName,p=this.renderPriceNode(s),g=u||(0,v.buildAssetStorePackageUrl)(l,r);return h.default.createElement("div",{className:this.ss("asset-wrap",a),onClick:o?function(e){return e.stopPropagation()}:void 0},h.default.createElement("div",{className:this.ss("asset-info")},h.default.createElement("div",{className:this.ss("asset-publisher")},f),h.default.createElement("div",{className:this.ss("asset-name")},d),h.default.createElement("div",{className:this.ss("asset-price-wrap")},p)),h.default.createElement("div",{className:this.ss("asset-button"),onClick:o?void 0:function(e){return e.stopPropagation()}},h.default.createElement(m.default,{theme:"pink",size:"medium",href:g,target:"_blank",label:this.__("button_buy")})))}}]),o=a=k,a.propTypes={renderOnly:c.default.bool,contentId:c.default.string,contentMap:c.default.object,locale:c.default.string,theme:c.default.oneOf(["normal","gallery"])},a.defaultProps={theme:"normal"},r=o))||r)||r)||r;function k(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=S(this,(e=k.__proto__||Object.getPrototypeOf(k)).call.apply(e,[this].concat(a)))).state={},S(n,t)}t.default=C},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e};function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=N(["draft.editorStates.",""],["draft.editorStates.",""]),d=N(["editorKey"],["editorKey"]),f=N(["draft.setEditorState"],["draft.setEditorState"]),p=R(n(1)),g=R(n(2)),h=R(n(3)),m=R(n(12)),v=n(5),y=n(0),_=n(10),b=R(n(4)),w=R(n(858)),S=R(n(58)),E=R(n(59)),O=R(n(30)),C=R(n(60)),k=R(n(61)),I=R(n(62)),j=R(n(63)),M=R(n(46)),T=R(n(64)),P=R(n(66)),x=R(n(491)),A=R(n(865)),D=R(n(29));function R(e){return e&&e.__esModule?e:{default:e}}function N(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var L=(0,v.decorator)({editorState:(0,y.state)(c,(0,y.props)(d)),setEditorState:(0,y.signal)(f)})(r=(0,b.default)(w.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(F,h.default),l(F,[{key:"render",value:function(){var e=this.props,t=e.editorKey,n=e.defaultEditorState,r=e.defaultEditable,a=e.renderOnly,o=this.dragDropPlugin,s=this.webglGalleryPlugin;return p.default.createElement("div",{className:this.ss("body-wrap",a&&"render-only"),onClick:a?void 0:this.focus},p.default.createElement(o.EditorWrapper,null,p.default.createElement(_.Editor,{editorKey:t,defaultEditorState:n,defaultEditable:r,renderOnly:a,plugins:this.draftPlugins}),p.default.createElement(s.UploadVideoDialog,null)))}}]),o=a=F,a.propTypes={editorKey:g.default.string.isRequired,prevEditorKey:g.default.string,placeholder:g.default.string,defaultEditorState:g.default.object,defaultEditable:g.default.bool,renderOnly:g.default.bool,theme:g.default.oneOf(["normal","popup"]),editorState:g.default.object,setEditorState:g.default.func},a.defaultProps={renderOnly:!1,defaultEditable:!0,theme:"normal"},s=function(){var o=this;this.focus=function(e){var t=o.props,n=t.editorKey,r=t.editorState,a=t.setEditorState;m.default.findDOMNode(o)===e.target&&a({editorKey:n,editorState:(0,_.moveToLastBlock)(r)})}},r=o))||r)||r;function F(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,F);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,e,t));s.call(n);var r={editorKey:e.editorKey,renderOnly:e.renderOnly,placeholder:e.placeholder,prevEditorKey:e.prevEditorKey,allowImage:!1,allowVideo:!1,allowAttachment:!1,theme:e.theme};n.codeBlockPlugin=(0,S.default)(r),n.blockBreakoutPlugin=(0,C.default)(r),n.richTextPlugin=(0,E.default)(r),n.navigationPlugin=(0,D.default)(r),n.sideToolbarPlugin=(0,k.default)(r),n.inlineToolbarPlugin=(0,I.default)(r),n.mentionToolbarPlugin=(0,M.default)(r),n.alignmentToolbarPlugin=(0,j.default)(r),n.dragDropPlugin=(0,T.default)(r),n.atomicPlugin=(0,P.default)(r);var a=(0,_.composeDecorators)(n.alignmentToolbarPlugin.decorator,n.dragDropPlugin.decorator,n.atomicPlugin.decorator),o=i({},r,{decorator:a});return n.webglGalleryPlugin=(0,x.default)(o),n.normalizePlugin=(0,A.default)(r),n.autoSavePlugin=(0,O.default)(r),n.draftPlugins=[n.webglGalleryPlugin,n.atomicPlugin,n.dragDropPlugin,n.normalizePlugin,n.autoSavePlugin],n}t.default=L},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(48),h=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e||{},n=t.startTime,r=t.textNow,a=t.textMin,o=t.textMins,s=t.textHour,i=t.textHours,l=t.textYesterday,u=new Date-new Date(n),u=Math.abs(u),c=Math.floor(u/864e5);if(0<c)return 1===c?l:(0,h.default)(n).format("ll");var d=u%864e5,f=Math.floor(d/36e5);if(0<f)return 1===f?""+f+s:""+f+i;var p=d%36e5,g=Math.floor(p/6e4);return 0<g?1===g?""+g+a:""+g+o:r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(8)(152)},function(e,t,n){e.exports=n(8)(1095)},function(e,t,n){"use strict";e.exports=[n(449)]},function(e,t,n){"use strict";var i=n(154),l=n(39);e.exports=function(e){var t=e.props,n=e.state,r=l(t.fieldPath).slice(),a=r.pop(),o=n.get(r),s=Object.keys(o).reduce(function(e,t){return e[t]=o[t],e},{});s[a]=i(s,t.fieldDetails),n.set(r,s)}},function(e,t,n){"use strict";var o=n(123);e.exports=function(r,a,e){return e.reduce(function(e,t){if(!e)return!1;var n=function(e){if("string"!=typeof e)return{key:e};var t=e.split(/:(.+)?/);return t[1]?{key:t[0],params:JSON.parse(t[1])}:{key:e}}(t);return o[n.key](a,r,n.params)},!0)}},function(e,t,n){"use strict";e.exports=[n(568)]},function(e,t,n){"use strict";e.exports=[n(569),n(570),n(571),n(572),n(573),{yes:[n(454)],no:[]}]},function(e,t,n){"use strict";e.exports=function(e){return e.isRequired&&!e.hasValue}},function(e,t,n){"use strict";var c=n(155),d=n(574),f=n(39);e.exports=function(e){function a(e,t,n){var r=t[n],a=c(t,r.value,r.validations);s.merge(e.concat(n),{isValid:a.isValid,errorMessage:a.isValid?null:r.errorMessages[a.failedRuleIndex]})}var o=e.props,s=e.state,i=f(o.field),l=(n=i.slice()).pop(),t=(r=s.get(n))[l];if(a(n,r,l),Array.isArray(t.dependents)&&t.dependents.length&&(console.warn("DEPRECATED: Use new field.dependsOn API instead"),t.dependents.forEach(function(e){var t,n,r;Array.isArray(e)&&e.length?(n=(t=d(i,e)).pop(),r=s.get(t),a(t,r,n)):console.warn("cerebral-module-forms: dependent path expected to be Array. Check out dependents provided for "+o.field+".")})),Array.isArray(t.dependsOn))t.dependsOn.forEach(function(e){var t=e.split("."),n=t.pop(),r=s.get(t);if(!r)throw new Error('The path "'+t.join(".")+'" used with "dependsOn" on field "'+l+'" is not correct, please check it');a(t,r,n)});else if(t.dependsOn){var n,r,u=(n=t.dependsOn.split(".")).pop();if(!(r=s.get(n)))throw new Error('The path "'+n.join(".")+'" used with "dependsOn" on field "'+l+'" is not correct, please check it');a(n,r,u)}}},function(e,t,n){"use strict";var r=n(154);e.exports=function(n){return Object.keys(n).reduce(function(e,t){return e[t]=r(n,n[t]),e},{})}},function(e,t,n){"use strict";e.exports=[n(579)]},function(e,t,n){"use strict";e.exports=[n(580)]},function(e,t,n){"use strict";function a(n,r){return Object.keys(n).reduce(function(e,t){return!!e&&(Array.isArray(n[t])?o(n[t],r):"value"in n[t]?r(n[t]):a(n[t],r))},!0)}var o=function(e,n){return e.reduce(function(e,t){return!!e&&a(t,n)},!0)};e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(595),o=(r=a)&&r.__esModule?r:{default:r};o.default.registerLanguage("javascript",n(596)),o.default.registerLanguage("java",n(597)),o.default.registerLanguage("python",n(598)),o.default.registerLanguage("css",n(599)),o.default.registerLanguage("php",n(600)),o.default.registerLanguage("ruby",n(601)),o.default.registerLanguage("cpp",n(602)),o.default.registerLanguage("sql",n(603)),o.default.registerLanguage("json",n(604)),o.default.registerLanguage("xml",n(605)),o.default.registerLanguage("bash",n(606)),o.default.registerLanguage("cs",n(607)),o.default.registerLanguage("go",n(608)),o.default.registerLanguage("objectivec",n(609)),o.default.registerLanguage("swift",n(610)),t.default=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.getPipe=function(e){return r[e]||{}},t.registerPipe=function(e,t){r[e]||(r[e]={});for(var n=1;r[e][n];)n++;return r[e][n]=t,n},t.withdrawPipe=function(e,t){delete r[e][t]}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=["messages","pendingQuoteMessages"];t.default={name:e,depends:[],signals:{setPendingQuote:[function(e){var t=e.props,n=e.state,r=t.message,a=t.liveChannelId;n.set([].concat(o,[a]),r)}],unsetPendingQuote:[function(e){var t=e.props,n=e.state,r=t.liveChannelId;n.unset([].concat(o,[r]))}]},getState:function(){return{pendingQuoteMessages:{}}},getPendingQuoteMessage:function(e,t){return e.get([].concat(o,[t]))}}}).call(t,"views/v2/modules/messages/PendingQuoteStore.js")},function(e,d,f){"use strict";(function(e){Object.defineProperty(d,"__esModule",{value:!0});var t,n=l(["messages.fetchWorkspaceMemberStatus.",""],["messages.fetchWorkspaceMemberStatus.",""]),r=l(["workspaceId"],["workspaceId"]),a=f(0),o=f(9),s=f(7),i=(t=s)&&t.__esModule?t:{default:t};function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=["messages","workspaceMembers"];function c(e){return{id:e.id,userId:e.user.id,role:e.role}}d.default={name:e,depends:[],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,r={};t.userWorkspaceMembers.forEach(function(e){var t={};t[e.user.id]=c(e),r[e.workspaceId]=t}),n.set(u,r)}],workspaceMemberAdd:[function(e){var t=e.props,n=e.state,r=[].concat(u,[t.workspaceId,t.user.id]);n.set(r,c(t))}],workspaceMemberRemove:[function(e){var t=e.props,n=e.state,r=[].concat(u,[t.workspaceId,t.user.id]);n.unset(r)}],syncWorkspaceMembers:[function(e){var t,n=e.props,r=e.state,a=n.result,o=n.status,s=n.workspaceId;200===o&&a&&(t={},a.forEach(function(e){t[e.user.id]=c(e)}),r.set([].concat(u,[s]),t))}],fetchWorkspaceMember:[(0,o.set)((0,a.state)(n,(0,a.props)(r)),i.default.inProgress),function(e){var t=e.props,n=e.path,r=e.http,a=t.workspaceId;return r.get("/api/workspaces/"+a+"/members").then(n.success).catch(n.error)},{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncWorkspaceMembers")(n)},(0,o.set)((0,a.state)(n,(0,a.props)(r)),i.default.succeeded)],error:[(0,o.set)((0,a.state)(n,(0,a.props)(r)),i.default.failed)]}],workspaceSelect:[function(e){var t=e.props,n=e.controller,r=t.workspaceId;n.getSignal("messages.fetchWorkspaceMember")({workspaceId:r})}]},getState:function(){return{workspaceMembers:{}}},getMembers:function(e,t){return e.get([].concat(u,[t]))},getMember:function(e,t,n){return e.get([].concat(u,[t,n]))}}}).call(d,"views/v2/modules/messages/WorkspaceMemberStore.js")},function(e,a,o){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var t,n=o(40),i=(t=n)&&t.__esModule?t:{default:t},l=o(158);var u=["messages","audioInput"],c=null;var r=!1;a.default={name:e,depends:[],signals:{onAudioInputEnabled:[function(e){var t=e.props,n=e.messages,r=e.controller;e.state.merge(u,{enabled:!0,mute:!1}),i.default.set("audioInput",{enabled:!0,mute:!1});var a=n.voiceConn.currentConn;a&&r.getSignal("messages.updateCall")({channelId:a.channelId,selfMute:!1}),a&&c.stream&&a.setStream(c.stream),c.onSpeaking=function(e){var t=n.voiceConn.currentConn;t&&r.getSignal("messages.updateCall")({channelId:t.channelId,isSpeaking:e})},t.explict&&(0,l.playSound)("Unmute",.4)}],enableAudioInput:[function(e){var n=e.controller;n.getSignal("messages.showDeviceTip")(),c.enable(function(e){var t;n.getSignal("messages.hideDeviceTip")(),e?"PermissionDeniedError"===(t=e.name)||"NotAllowedError"===t?n.getSignal("messages.showDeniedTip")():console.log("failed to enable audioInput: ",e):n.getSignal("messages.onAudioInputEnabled")({explict:!0})})}],toggleSelfMute:[function(e){var t,n,r=e.messages,a=e.state,o=e.controller,s=a.get(u);s.enabled?(c.mute=!s.mute,a.merge(u,{mute:c.mute}),(t=i.default.get("audioInput"))&&(t.mute=c.mute,i.default.set("audioInput",t)),(n=r.voiceConn.currentConn)&&o.getSignal("messages.updateCall")({channelId:n.channelId,selfMute:c.mute}),c.mute?(0,l.playSound)("Mute",.4):(0,l.playSound)("Unmute",.4)):o.getSignal("messages.enableAudioInput")()}],showDeviceTip:[function(e){e.state.set(["messages","audioInput","deviceTip"],!0)}],hideDeviceTip:[function(e){e.state.set(["messages","audioInput","deviceTip"],!1)}],showDeniedTip:[function(e){e.state.set(["messages","audioInput","deniedTip"],!0)}],hideDeniedTip:[function(e){e.state.set(["messages","audioInput","deniedTip"],!1)}],createCall:[function(e){var t,n=e.controller;r||(r=!0,(t=i.default.get("audioInput")||{enabled:!1,mute:!0}).enabled&&!t.mute&&c.enable(function(e){e?i.default.remove("audioInput"):n.getSignal("messages.onAudioInputEnabled")()}))}]},getServices:function(){var e;return c||(e=o(464).default,c=new e),{audioInput:{currentInput:c}}},getState:function(){return{audioInput:{enabled:!1,mute:!0,deviceTip:!1,deniedTip:!1}}},selfMute:function(e){return e.get([].concat(u,["mute"]))}}}).call(a,"views/v2/modules/messages/AudioInputStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=i(n(631)),s=i(n(54));function i(e){return e&&e.__esModule?e:{default:e}}window.AudioContext=window.AudioContext||window.webkitAudioContext||navigator.mozAudioContext,void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(n){var r=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return r?new Promise(function(e,t){r.call(navigator,n,e,t)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});var l=(r(u,[{key:"enable",value:function(t,e){var n=this,r=!(1<arguments.length&&void 0!==e)||e;this.disable(),navigator.mediaDevices.getUserMedia({audio:{optional:[{googEchoCancellation:!0},{googEchoCancellation2:!0},{googNoiseSuppression:!0},{googNoiseSuppression2:!0},{googAutoGainControl:!0},{googAutoGainControl2:!0},{googHighpassFilter:!0},{googTypingNoiseDetection:!0}]}}).then(function(e){if(n.disable(),n.stream=e,n._updateAudioTracks(),r){if(!n.context)try{n.context=new AudioContext}catch(e){console.warn("failed to create AudioContext",e)}n.context&&(n.voiceActivityDector=new o.default(n.context,n.stream),n.voiceActivityDector.onProcess=function(e,t){n._mute||n._setSpeaking(e),n.onVoiceActivity&&n.onVoiceActivity(t)})}t&&t(null,e)}).catch(function(e){t&&t(e)})}},{key:"disable",value:function(){if(this.voiceActivityDector&&(this.voiceActivityDector.stop(),this.voiceActivityDector=null),this.context&&this.context.close&&(this.context.close(),this.context=null),this.stream){for(var e=this.stream.getAudioTracks(),t=0,n=e.length;t<n;t++)e[t].stop();this.stream=null}this._setSpeaking(!1)}},{key:"_setSpeaking",value:function(e){this.speaking!==e&&(this.speaking=e,this.onSpeaking&&this.onSpeaking(e))}},{key:"_updateAudioTracks",value:function(){if(this.stream)for(var e=this.stream.getAudioTracks(),t=0,n=e.length;t<n;t++)e[t].enabled=!this._mute}},{key:"mute",get:function(){return this._mute},set:function(e){this._mute=e,this._updateAudioTracks(),this._setSpeaking(!1)}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.logger=s.default.create("AudioInput"),this.context=null,this.voiceActivityDector=null,this._mute=!1,this.stream=null,this.speaking=!1,this.onSpeaking=null,this.onVoiceActivity=null}t.default=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=["messages","teamMembers"];function s(e){var t=e.channelJobInfo,n={},r=t.teamMembers;return r&&r.forEach(function(e){n[e.id]={id:e.id,username:e.username,fullname:e.fullname,avatar:e.avatar,title:e.title,presenceStatus:e.presenceStatus}}),n}t.default={name:e,depends:[],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,r=t.privateChannels,a={};r.forEach(function(e){var t;e.proposalId&&(t=s(e),a[e.channelJobInfo.id]=t)}),n.set(o,a)}],channelCreate:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&t.channelJobInfo&&n.set([].concat(o,[t.channelJobInfo.id]),s(t))}]},getState:function(){return{teamMembers:{}}},getJobTeamMembers:function(e,t){return e.get([].concat(o,[t]))}}}).call(t,"views/v2/modules/messages/TeamMemberStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.default={name:e,depends:[],signals:{idle:[function(e){var t=e.props,n=e.state,r=e.messages,a=t.idle,o=t.idleSince;n.merge("messages",{idle:a,idleSince:o}),void 0!==r&&r.socket&&r.socket.statusUpdate&&r.socket.statusUpdate(o)}]},getServices:function(e){var t=Date.now(),n=!1;function r(){6e5<Date.now()-t?n||(n=!0,e.getSignal("messages.idle")({idle:!0,idleSince:t})):n&&(n=!1,e.getSignal("messages.idle")({idle:!1,idleSince:null}))}setInterval(r,15e4),["mousemove","keydown","mousedown","touchstart"].forEach(function(e){window.addEventListener(e,function(){t=Date.now(),r()})})},getState:function(){return{idle:!1,idleSince:null}},isIdle:function(e){return e.get("messages.idle")}}}).call(t,"views/v2/modules/messages/IdleStore.js")},function(e,b,w){"use strict";(function(e){Object.defineProperty(b,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=g(w(161)),o=g(w(124)),s=g(w(32)),l=g(w(42)),u=g(w(27)),c=g(w(35)),d=g(w(33)),f=g(w(466)),n=g(w(147)),p=g(w(23));function g(e){return e&&e.__esModule?e:{default:e}}var h=["messages","readState"];function m(e,t){var n,r,a={channelId:t,lastMessageId:t,ackMessageId:t,lastMentionId:t,oldestUnreadMessageId:"",oldestUnreadMessageIdStale:!1,estimated:!1,mentionCount:0,unreadCount:0},o=s.default.getChannel(e,t);return o&&(a.lastMessageId=o.lastMessageId,a.workspaceId=o.workspaceId,"direct"!==o.type&&(n=u.default.getCurrentUserId(e),(r=l.default.getMember(e,t,n))&&(a.ackMessageId=r.id,a.lastMentionId=r.id))),a}var v=(t(y,null,[{key:"get",value:function(e,t){var n=[].concat(h,[t]);return e.get(n)||e.set(n,m(e,t)),new y(e,t)}},{key:"clear",value:function(e,t){var n=[].concat(h,[t]);e.unset(n)}}]),t(y,[{key:"mergeChannel",value:function(e){var t=this.state.get(this.key);t.lastMessageId<e.lastMessageId&&((t=p.default.clone(t)).lastMessageId=e.lastMessageId,this.state.set(this.key,t))}},{key:"handleIncomingMessage",value:function(t){var n=this.state.get(this.key);(n=p.default.clone(n)).lastMessageId<t.id&&(n.lastMessageId=t.id);var e,r,a,o,s=u.default.getCurrentUserId(this.state),i=this.state.get("messages.channels."+t.channelId);if(i&&"ticket"===i.type&&(e=this.state.get("messages.selectedWorkspaceId"),r=this.state.get("messages.workspaces."+e),a=this.state.get("loginUser.id"),o=this.state.get("support.tickets.entities."+i.ticketId+".data.assignee"),r.residentId!==a&&o!==a||(s=r.botId)),t.author.id===s)return n.lastMentionId<t.id&&(n.lastMentionId=t.id),this.state.set(this.key,n),void this.localAck({lastMessageId:t.id,mentionCount:0});t.author.id!==s&&t.id>n.ackMessageId&&(n.unreadCount++,t.mentions&&0!==t.mentions.length?t.mentions.forEach(function(e){e.id===s&&(n.mentionCount++,t.id>n.lastMentionId&&(n.lastMentionId=t.id))}):t.mentionEveryone&&(n.mentionCount++,t.id>n.lastMentionId&&(n.lastMentionId=t.id)));var l=d.default.getMessages(this.state,this.channelId);l&&(l.messagesList.includes(n.oldestUnreadMessageId)||(n.oldestUnreadMessageId="",n.oldestUnreadMessageIdStale=!1)),n.oldestUnreadMessageId&&!n.oldestUnreadMessageIdStale||(n.oldestUnreadMessageId=t.id,n.oldestUnreadMessageIdStale=!1),this.state.set(this.key,n)}},{key:"handleUnfocus",value:function(){var e=this.state.get(this.key);e.oldestUnreadMessageId&&!e.oldestUnreadMessageIdStale&&(e.ackMessageId<e.lastMessageId||((e=p.default.clone(e)).oldestUnreadMessageIdStale=!0,this.state.set(this.key,e)))}},{key:"tryToAck",value:function(){var e=d.default.getMessages(this.state,this.channelId);e&&e.ready&&!e.hasMoreNew&&this.ack()}},{key:"ack",value:function(){var e=this.state.get(this.key);e.ackMessageId<e.lastMessageId&&((e=p.default.clone(e)).ackMessageId=e.lastMessageId,e.mentionCount=0,e.estimated=!1,e.unreadCount=0,this.state.set(this.key,e),n.default.post("/api/messages/"+e.ackMessageId+"/ack"))}},{key:"localAck",value:function(e){var t=this.state.get(this.key);(t.ackMessageId<e.lastMessageId||t.ackMessageId===e.lastMessageId&&t.mentionCount!==e.mentionCount)&&((t=p.default.clone(t)).ackMessageId=e.lastMessageId,t.mentionCount=e.mentionCount,this._rebuild(t),this.state.set(this.key,t))}},{key:"_rebuild",value:function(t,e){var n=(1<arguments.length&&void 0!==e?e:{}).resetOldestUnreadMessageId;void 0!==n&&n&&(t.oldestUnreadMessageId="",t.oldestUnreadMessageIdStale=!1),t.estimated=!1,t.unreadCount=0;var r,a=u.default.getCurrentUserId(this.state),o=d.default.getMessages(this.state,this.channelId);o&&((r=o.messagesList.filter(function(e){return o.messages[e].authorId!==a})).includes(t.oldestUnreadMessageId)||(t.oldestUnreadMessageId="",t.oldestUnreadMessageIdStale=!1),r.forEach(function(e){e>t.lastMessageId&&(t.lastMessageId=e),e>t.ackMessageId&&(t.unreadCount++,(!t.oldestUnreadMessageId||e<t.oldestUnreadMessageId)&&(t.oldestUnreadMessageId=e,t.oldestUnreadMessageIdStale=!1))}),0<t.unreadCount&&(t.estimated=o.hasMore&&r.length===t.unreadCount||o.hasMoreNew))}},{key:"rebuild",value:function(e){var t=(0<arguments.length&&void 0!==e?e:{}).resetOldestUnreadMessageId,n=void 0!==t&&t,r=this.state.get(this.key),r=p.default.clone(r);this._rebuild(r,{resetOldestUnreadMessageId:n}),this.state.set(this.key,r)}}]),y);function y(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),this.state=e,this.channelId=t,this.key=[].concat(h,[t])}function _(e){var t=e.state,n=c.default.getChannelId(t);n&&o.default.isAtBottom(t,n)&&a.default.isFocused(t)&&!f.default.isIdle(t)&&v.get(t,n).tryToAck()}b.default={name:e,depends:[a.default,o.default,f.default,s.default,l.default,u.default,c.default,d.default],signals:{channelReady:[function(e){var t=e.props,a=e.state,n=t.readStates,o=t.messagesItems,r=a.get(h),s=r?i({},r):{};n.forEach(function(t){var e=m(a,t.channelId),n=o.find(function(e){return e.channelId===t.channelId}),r=(n&&n.items||[]).reduce(function(e,t){return e.id>t.id?e:t},{});e.lastMessageId=r?r.id:"",e.lastMentionId=t.lastMentionId,e.ackMessageId=t.lastMessageId,e.mentionCount=t.mentionCount,s[e.channelId]=e}),a.set(h,s)}],connectionOpen:[function(e){var t=e.props,r=e.state,n=r.get(h),a=n?i({},n):{},o=t.lastMessages;t.readState.forEach(function(t){var e=m(r,t.channelId),n=o.find(function(e){return e.channelId===t.channelId});e.lastMessageId=n?n.id:"",e.lastMentionId=t.lastMentionId,e.ackMessageId=t.lastMessageId,e.mentionCount=t.mentionCount,a[e.channelId]=e}),r.set(h,a)}],fetchMessagesSuccess:[function(e){var t=e.props,n=e.state,r=t.channelId;v.get(n,r).rebuild()}],messageCreate:[function(e){var t=e.props,n=e.state,r=t.channelId;v.get(n,r).handleIncomingMessage(t)}],messageAck:[function(e){var t=e.props,n=e.state,r=t.channelId;v.get(n,r).localAck(t)}],channelSelect:[function(e){var t=e.props,n=e.state,r=t.channelId,a=t.selectedChannelId,o=s.default.getChannel(n,r);r!==a&&a&&o&&v.get(n,a).rebuild({resetOldestUnreadMessageId:!0})}],channelAck:[function(e){var t=e.props,n=e.state,r=t.channelId;v.get(n,r).ack()}],channelCreate:[function(e){var t=e.props,n=e.state,r=t.id;v.get(n,r).mergeChannel(t)}],channelDelete:[function(e){var t=e.props,n=e.state,r=t.id;v.clear(n,r)}],updateDimensions:[function(e){var t=e.props,n=e.state,r=t.channelId;o.default.scrolledToBottom(n,r)&&a.default.isFocused(n)&&!f.default.isIdle(n)&&v.get(n,r).tryToAck()}],windowFocused:[_,function(e){var t=e.state,n=c.default.getChannelId(t);n&&!a.default.isFocused(t)&&v.get(t,n).handleUnfocus()}],idle:[_]},getState:function(){return{readState:{}}},getReadState:function(e){return e.get(h)}}}).call(b,"views/v2/modules/messages/ReadStateStore.js")},function(e,c,d){"use strict";(function(e){Object.defineProperty(c,"__esModule",{value:!0});var t=r(d(469)),i=r(d(32)),n=r(d(7));function r(e){return e&&e.__esModule?e:{default:e}}var a=["messages","relationships"];function o(e){return{otherUserId:e.otherUser?e.otherUser.id:e.otherUserId,status:e.status,actionUserId:e.actionUserId,channelId:e.channelId}}function s(e){var t=e.props,n=e.state,r=o(t);r&&n.set([].concat(a,[r.otherUserId]),r)}function l(a){return function(e){var t=e.props,n=e.state,r=t.userId;n.set("messages.relationshipAcceptStatus."+r,a)}}function u(a){return function(e){var t=e.props,n=e.state,r=t.userId;n.set("messages.relationshipIgnoreStatus."+r,a)}}c.default={name:e,depends:[t.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,r={};t.relationships.forEach(function(e){r[e.otherUserId]=o(e)}),n.set(a,r)}],relationshipRequest:[l(n.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.userId,o=t.content;return n.post("/api/relationships/"+a+"/request",{content:o}).then(r.success).catch(r.error)},{success:[function(e){var t=e.props,n=e.controller,r=e.state,a=t.openChannel,o=t.result,s=i.default.getChannel(r,o.channelId);a&&n.getSignal("messages.channelSelect")({channelId:s.id,workspaceId:s.workspaceId})},l(n.default.succeeded)],error:[l(n.default.failed)]}]],relationshipAccept:[l(n.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.userId,o=t.content;return n.post("/api/relationships/"+a+"/accept",{content:o}).then(r.success).catch(r.error)},{success:[function(e){var t=e.controller,n=e.props,r=e.state,a=n.openChannel,o=n.result,s=i.default.getChannel(r,o.channelId);a&&t.getSignal("messages.channelSelect")({channelId:s.id,workspaceId:s.workspaceId})},l(n.default.succeeded)],error:[l(n.default.failed)]}]],relationshipIgnore:[u(n.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.userId;return n.post("/api/relationships/"+a+"/ignore").then(r.success).catch(r.error)},{success:[function(e){var t=e.state,n=o(e.props.result);n&&t.set([].concat(a,[n.otherUserId]),n)},u(n.default.succeeded)],error:[u(n.default.failed)]}]],relationshipAdd:[s],relationshipRemove:[s]},getState:function(){return{relationships:{},relationshipIgnoreStatus:{},relationshipAcceptStatus:{}}},getRelationships:function(e){return e.get(a)},getRelationship:function(e,t){return e.get([].concat(a,[t]))}}}).call(c,"views/v2/modules/messages/RelationshipStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=["messages","relationshipType"];t.default={name:e,depends:[],signals:{switchRelationshipFilter:[function(e){var t=e.props,n=e.state,r=t.value;n.set(a,r)}]},getState:function(){return{relationshipType:"online"}},getFilter:function(e){return e.get(a)}}}).call(t,"views/v2/modules/messages/RelationshipFilterStore.js")},function(e,o,s){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=a(s(42)),n=a(s(33)),r=a(s(27));function a(e){return e&&e.__esModule?e:{default:e}}var l=["messages","lastMessages"];function u(e,t){return e?n.default.transformMessage(t,e):null}o.default={name:e,depends:[t.default,r.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,r=t.lastMessages,a=t.users,o={};r.forEach(function(t){var e={id:t.id,type:t.type,data:t.data||null,channelId:t.channelId,author:a.find(function(e){return e.id===t.author.id}),content:t.content||"",attachments:t.attachments||[],nonce:t.nonce||"",mentionEveryone:t.mentionEveryone||!1,mentions:(t.mentions||[]).map(function(t){return a.find(function(e){return e.id===t.id})}),deletedTime:t.deletedTime||"",call:t.call||null};o[t.channelId]=u(e,n)}),n.set(l,o)}],channelCreate:[function(e){var t=e.props,n=e.state;n.set([].concat(l,[t.id]),u(t.lastMessage,n))}],channelUpdate:[function(e){var t=e.props,n=e.state,r=n.get([].concat(l,[t.id]));t.lastMessage&&(!r||t.lastMessage.id>r.id)&&n.set([].concat(l,[t.id]),u(t.lastMessage,n))}],channelDelete:[function(e){var t=e.props;e.state.unset([].concat(l,[t.id]))}],fetchMessagesSuccess:[function(e){var t=e.props,n=e.state,r=t.channelId,a=t.messages,o=[].concat(l,[r]),s=n.get(o),i=!1;a.forEach(function(e){(!s||s.id<e.id)&&(i=i||!0,s=e)}),i&&n.set(o,u(s,n))}],messageCreate:[function(e){var t=e.props,n=e.state,r=[].concat(l,[t.channelId]),a=n.get(r);(!a||a.id<t.id&&"SENDING"!==t.state)&&n.set(r,u(t,n))}]},getState:function(){return{lastMessages:{}}},getLastMessages:function(e){return e.get(l)},getLastMessage:function(e,t){return e.get([].concat(l,[t]))}}}).call(o,"views/v2/modules/messages/LastMessageStore.js")},function(e,t,n){e.exports=n(8)(1124)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeSdp=t.parseSdp=void 0,t.fromJitsiSdp=function(e){var n=[],r=[],a=[];e.audio["payload-types"].forEach(function(t){n.push(t.id),r.push({payload:t.id,codec:t.name,rate:t.clockrate,encoding:t.channels}),t.parameters&&a.push({payload:t.id,config:Object.keys(t.parameters).map(function(e){return e+"="+t.parameters[e]}).join(";")})}),n=n.join(" ");var t={};e.audio.ssrcInfos&&e.audio.ssrcInfos.forEach(function(e){t[e.ssrc]=e.parameters});var o=[];return e.transport.candidates.forEach(function(e){o.push({foundation:e.foundation,component:e.component,transport:e.protocol,priority:e.priority,ip:e.ip,port:e.port,type:e.type,raddr:e["rel-addr"],rport:e["rel-port"],generation:e.generation,tcptype:e.tcptype})}),{version:0,origin:{username:"-",sessionId:Math.floor(s+Math.random()*i),sessionVersion:1,netType:"IN",ipVer:4,address:"0.0.0.0"},name:"-",timing:{start:0,stop:0},groups:[{type:"BUNDLE",mids:["audio"]}],msidSemantic:{semantic:"WMS",token:"*"},media:[{rtp:r,fmtp:a,type:"audio",port:9,protocol:"UDP/TLS/RTP/SAVPF",payloads:n,connection:{version:4,ip:"0.0.0.0"},rtcp:{port:9,netType:"IN",ipVer:4,address:"0.0.0.0"},iceUfrag:e.transport.ufrag,icePwd:e.transport.pwd,fingerprint:{type:e.transport.fingerprints[0].hash,hash:e.transport.fingerprints[0].fingerprint},candidates:o,setup:e.transport.fingerprints[0].setup,mid:"audio",ext:e.audio["rtp-hdrexts"].map(function(e){return{value:e.id,uri:e.uri}}),direction:"sendrecv",rtcpMux:"rtcp-mux",sources:t}]}},t.toJitsiSdp=function(e){var t=null;if(e.media.forEach(function(e){"audio"===e.type&&(t=e)}),!t)throw new Error("audioMedia is null");var n=t.fingerprint||e.fingerprint;if(!n)throw new Error("fingerprint is null");var r=[];t.sources&&Object.keys(t.sources).forEach(function(e){r.push({ssrc:Number(e),parameters:t.sources[e]})});var a=[];t.ext.forEach(function(e){a.push({id:e.value,uri:e.uri})});var o={};return t.rtp.forEach(function(e){o[e.payload]={id:e.payload,name:e.codec,clockrate:e.rate,channels:e.encoding}}),t.fmtp.forEach(function(e){var n=o[e.payload].parameters={};e.config.split(";").forEach(function(e){var t=(e=e.trim()).split("=");n[t[0]]=t[1]})}),{audio:{"payload-types":Object.values(o),"rtp-hdrexts":a,ssrcInfos:r},transport:{xmlns:"urn:xmpp:jingle:transports:ice-udp:1",fingerprints:[{fingerprint:n.hash,setup:t.setup,hash:n.type}],candidates:[],"rtcp-mux":!0,ufrag:t.iceUfrag,pwd:t.icePwd}}},t.diffSdp=function(e,t){var a=null;return t.media.forEach(function(t,n){var r=e.media[n];r||!t?t.sources&&Object.keys(t.sources).forEach(function(e){r.sources&&r.sources[e]||((a=a||[])[n]||(a[n]={index:n,mid:t.mid,sources:{}}),a[n].sources[e]=t.sources[e])}):(a=a||[])[n]={index:n,mid:t.mid,sources:t.sources||{}}}),a};var r=n(654);t.parseSdp=r.parse,t.writeSdp=r.write;var s=Math.pow(10,17),i=9*s},function(e,i,l){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t,n=l(32),r=(t=n)&&t.__esModule?t:{default:t};var a=["messages","menu"],o=[].concat(a,["showMenu"]),s=[].concat(a,["selectedMenuItem"]);i.default={name:e,depends:[r.default],signals:{toggleMenu:[function(e){var t=e.props,n=e.state,r=t.value;n.set(o,r)}],selectMenuItem:[function(e){var t=e.props,n=e.state,r=t.item;n.set(s,r),n.set(o,!1)}]},getState:function(){return{menu:{showMenu:!1,selectedMenuItem:"default"}}},getSelectedMenuItem:function(e){return e.get(s)}}}).call(i,"views/v2/modules/messages/MenuStore.js")},function(e,v,y){"use strict";(function(e){Object.defineProperty(v,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=o(["suggest.candidate.q"],["suggest.candidate.q"]),n=o(["suggest.candidate.st"],["suggest.candidate.st"]),r=y(9),a=y(0);function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={};function d(e){return{id:e,type:"q",name:e,value:e,text:e}}function l(e){var t=e.props,n=e.state,r=t.q,a=t.st,o=(t.result||{}).candidates,s=void 0===o?[]:o,i=n.get("suggest.candidate"),l=i.q,u=i.st;return r===l&&a===u?(s.push(d(r)),{candidates:s}):{candidates:null}}function f(e){var t=e.props,n=e.state,r=t.q,a=t.st,o=(t.result||{}).candidates,s=void 0===o?[]:o,i=n.get("suggest.candidate"),l=i.q,u=i.st;return r===l&&a===u?{candidates:s}:{candidates:null}}function p(e){var t=e.props,n=e.state,r=[],a=t.q,o=t.st,s=n.get("suggest.candidate"),i=s.q,l=s.st;return a===i&&o===l?(r.push(d(a)),{candidates:r}):{candidates:null}}function g(e,t,n,r){var i,a,l,o=void 0,s=void 0;return n&&(o=[n]),r&&(s=[r]),[function(e){var t=e.props,n=e.path,r=c[l]||{q:"",noResult:!1},a=r.q,o=r.noResult,s=t.q;return a&&s&&o&&s.startsWith(a)?n.no():n.yes()},{yes:[t,{success:o=[].concat(u(o),[m(e),h,(i=e,function(e){var t=e.props,n=t.q,r=t.addNew,a=t.candidates,o=(a||[]).length,s=0===o;1!==o||!r&&"q"!==a[0].type||(s=!0),c[i]={q:n,noResult:s}})]),error:s=[].concat(u(s),[m(e)])}],no:[(a=l=e,function(e){var t=e.state,n=e.props.q;0<(t.get(["suggest","candidate",a])||[]).length&&t.set(["suggest","candidate",a,0],d(n))})]}]}function h(e){var t=e.props,n=e.state,r=n.get("suggest.followMap")||{},a=(t.result||{}).followMap;n.set("suggest.followMap",i({},r,a))}function m(a){return function(e){var t=e.props,n=e.state,r=t.candidates;r&&(n.set(["suggest","candidate",a],r),n.set(["suggest","candidate","type"],a))}}v.default={name:e,depends:[],signals:{suggestSkill:g("skill",function(e){var t=e.props,n=e.http,r=e.path,a=t.q,o=t.skillType,s={q:a};return o&&(s.type=o),n.get("/api/skillSuggest",s).then(r.success).catch(r.error)},function(e){var t=e.props,n=e.state,r=t.q,a=t.st,o=t.addNew,s=(t.result||{}).candidates,i=void 0===s?[]:s,l=n.get("suggest.candidate"),u=l.q,c=l.st;return r===u&&a===c?(o&&i.push(d(r)),{candidates:i}):{candidates:null}},p),suggestPlace:g("place",function(e){var t=e.props,n=e.http,r=e.path,a={q:t.q};return t.allPlace&&(a.allType="all"),n.get("/api/placeSuggest",a).then(r.success).catch(r.error)},f,p),suggestTeam:g("team",function(e){var t=e.props,n=e.http,r=e.path,a=t.q;return n.get("/api/teamSuggest",{q:a}).then(r.success).catch(r.error)},function(e){var t=e.state,n=e.props,r=n.q,a=n.st,o=n.addNew,s=(n.result||{}).candidates,i=void 0===s?[]:s,l=t.get("suggest.candidate"),u=l.q,c=l.st;return r===u&&a===c?(o&&i.push(d(r)),{candidates:i}):{candidates:null}},p),suggestUser:g("user",function(e){var t=e.props,n=e.http,r=e.path,a=t.q;return n.get("/api/userSuggest",{q:a}).then(r.success).catch(r.error)},function(e){var t=e.props,n=e.state,r=t.q,a=t.st,o=t.addNew,s=(t.result||{}).candidates,i=void 0===s?[]:s,l=n.get("suggest.candidate"),u=l.q,c=l.st;return r===u&&a===c?(o&&i.push(d(r)),{candidates:i}):{candidates:null}},p),suggestSearch:g("search",function(e){var t=e.props,n=e.http,r=e.path,a=t.q,o=t.t,s=t.skillType,i={q:a,t:o};return s&&(i.type=s),n.get("/api/searchSuggest",i).then(r.success).catch(r.error)},l,p),suggestHeader:g("header",function(e){var t=e.props,n=e.http,r=e.path,a=t.q;return n.get("/api/headerSuggest",{q:a}).then(r.success).catch(r.error)},l,p),suggestSchool:g("school",function(e){var t=e.props,n=e.http,r=e.path,a=t.q;return n.get("/api/schoolSuggest",{q:a}).then(r.success).catch(r.error)},f,p),suggestSchoolV2:g("schoolV2",function(e){var t=e.props,n=e.http,r=e.path,a=t.q;return n.get("/api/schoolV2Suggest",{q:a}).then(r.success).catch(r.error)},f,p),suggestQuickSearch:g("quickSearch",function(e){var t=e.props,n=e.http,r=e.path,a={q:t.q,t:t.t};return n.get("/api/quickSearchSuggest",a).then(r.success).catch(r.error)},function(e){var t=e.props,n=e.state,r=t.q,a=t.st,o=t.addNew,s=(t.result||{}).candidates,i=void 0===s?[]:s,l=n.get("suggest.candidate"),u=l.q,c=l.st;return r===u&&a===c?(o&&i.push(d(r)),{candidates:i}):{candidates:null}},p),fetchCandidates:[function(e){var t=e.props,n=e.state,r=e.path,a=t.q,o=t.st,s=n.get("suggest.candidate")||{},i=s.q,l=s.st,u=n.get("suggest.candidate."+o);return!(u&&0<u.length)||a&&a!==i||o&&o!==l?r.yes():r.no()},{yes:[function(e){var t=e.props,n=e.state,r=e.controller,a=t.st,o=t.q,s=t.t,i=t.addNew,l=void 0!==i&&i,u=t.allPlace,c=void 0!==u&&u,d=t.skillType,f=n.get("suggest.candidate"),p=f.q,g=f.st;switch(n.set("suggest.candidate.q",o),n.set("suggest.candidate.st",a),a===g&&o&&o.startsWith(p)||n.set("suggest.candidate."+a,[]),a){case"skill":r.getSignal("suggest.suggestSkill")({q:o,st:a,addNew:l,skillType:d});break;case"team":r.getSignal("suggest.suggestTeam")({q:o,st:a,addNew:l});break;case"user":r.getSignal("suggest.suggestUser")({q:o,st:a,addNew:l});break;case"place":r.getSignal("suggest.suggestPlace")({q:o,st:a,allPlace:c});break;case"header":r.getSignal("suggest.suggestHeader")({q:o,st:a});break;case"search":r.getSignal("suggest.suggestSearch")({q:o,st:a,t:s,skillType:d});break;case"school":r.getSignal("suggest.suggestSchool")({q:o,st:a});break;case"schoolV2":r.getSignal("suggest.suggestSchoolV2")({q:o,st:a});break;case"quickSearch":r.getSignal("suggest.suggestQuickSearch")({q:o,st:a,t:s,addNew:l})}}],no:[]}],clearCandidates:[function(e){var t=e.props,n=e.state,r=t.st;n.set(["suggest","candidate",r],[])}],clearSuggestQuery:[(0,r.unset)((0,a.state)(t)),(0,r.unset)((0,a.state)(n))],clearSuggest:[function(e){var t=e.controller,n=e.props;t.getSignal("suggest.clearCandidates")(i({},n)),t.getSignal("suggest.clearSuggestQuery")()}],saveToMap:[function(e){var t,n=e.props,r=e.state,a=n.candidate,o=n.st;a&&"q"!==a.type&&(t="suggest.candidateMap."+o,r.get(t)?r.merge(t,s({},a.id,a)):r.set(t,s({},a.id,a)))}],removeFromMap:[function(e){var t,n,r=e.props,a=e.state,o=r.candidate,s=r.st;o&&"q"!==o.type&&(t="suggest.candidateMap."+s,(n=i({},a.get(t))||{})[o.id]&&delete n[o.id],a.set(t,n))}]},getState:function(){return{candidate:{skill:[],place:[],team:[],user:[],search:[],header:[],school:[],schoolV2:[]},candidateMap:{skill:{},place:{},team:{},user:{},search:{},header:{},school:{},schoolV2:{}},followMap:{}}}}}).call(v,"views/v2/modules/suggest/SuggestStore.js")},function(e,t,n){e.exports=n(8)(906)},function(e,t,n){"use strict";var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=n(56),O=n(179),u=a(n(477)),s=a(n(478)),l=n(714),r=n(446);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=O.ContentState.createFromText(e,t),n=O.ContentState.createFromBlockArray(n.getBlocksAsArray().map(function(e,t){return e.merge({key:"text_"+t})}));return O.EditorState.createWithContent(n)}function i(e){for(;e&&e!==document.documentElement;){if(e.getAttribute&&"true"===e.getAttribute("data-block"))return e;e=e.parentNode}return null}var h=["GAMEGALLERY","SHOWCASEGALLERY","WEBGLGALLERY"],m=["IMAGE","VIDEO","ATTACHMENT","VIDEOATTACHMENT"],v=[].concat(h,m);function c(e){var t=e.getCurrentContent(),n=e.getSelection(),r=n.getFocusKey(),a=n.getFocusOffset();return t.getBlockForKey(r).getEntityAt(a)}e.exports={createEditorStateWithText:o,findEditorKey:function(e){for(;e&&e!==document.documentElement;){var t=e.getAttribute&&e.getAttribute("data-editor");if(t)return t;e=e.parentNode}return null},getSelectionInlineStyle:function(e){var s=e.getSelection();if(s.isCollapsed())return e.getCurrentInlineStyle();var n=s.getStartKey(),r=s.getEndKey(),t=e.getCurrentContent(),a=t.getBlockForKey(n),o=t.getBlockForKey(r),i=t.getBlockMap().skipUntil(function(e,t){return t===n}).takeUntil(function(e,t){return t===r}).concat([[r,o]]),l=s.getStartOffset(),u=a.getInlineStyleAt(l);return i.reduce(function(e,t){var n=t.getKey(),r=0,a=t.getLength()-1;n===s.getStartKey()&&(r=s.getStartOffset()),n===s.getEndKey()&&(a=s.getEndOffset());for(var o=r;o<a;o++)e=e.intersect(t.getInlineStyleAt(o));return e},u)},toggleBlockType:function(e,t){var n,r=e.getSelection(),a=r.getStartKey(),o=r.getStartOffset(),s=r.getEndKey(),i=r.getEndOffset(),l=e.getCurrentContent();a!==s&&0===r.getEndOffset()&&(n=l.getBlockBefore(s),s=n.getKey(),i=n.getLength(),r=r.merge({anchorKey:a,anchorOffset:o,focusKey:s,focusOffset:i,isBackward:!1}));var u=l.getBlockForKey(a),c=l.getBlockForKey(s),d=l.getBlockMap().skipUntil(function(e,t){return t===a}).takeUntil(function(e,t){return t===s}).concat([[s,c]]);if(d.some(function(e){return"atomic"===e.getType()}))return e;var f=u.getType()===t?"unstyled":t;if("code-block"!==f){var p=d.map(function(e){return e.merge({type:f,depth:0})}),g=l.merge({blockMap:l.getBlockMap().merge(p),selectionAfter:r});return O.EditorState.push(e,g,"change-block-type")}var h="",m=(0,E.List)(),v=0;d.forEach(function(e){v++&&(h+="\n",m=m.push(O.CharacterMetadata.create())),h+=e.text,m=m.concat(e.characterList)});var y=u.merge({type:f,depth:0,text:h,characterList:m}),_=l.getBlockMap().toSeq().takeUntil(function(e){return e===u}),b=l.getBlockMap().toSeq().skipUntil(function(e){return e===c}).rest(),w=_.concat([[y.getKey(),y]],b).toOrderedMap(),S=l.merge({blockMap:w,selectionAfter:r.merge({anchorKey:a,anchorOffset:0,focusKey:a,focusOffset:h.length,isBackward:!1})});return O.EditorState.push(e,S,"change-block-type")},moveAtomicBlockBefore:function(e,t,n){var r=new O.SelectionState({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0}),a=(a=e.getCurrentContent()).merge({selectionAfter:r});return e=O.EditorState.set(e,{currentContent:a}),O.AtomicBlockUtils.moveAtomicBlock(e,a.getBlockForKey(n),r,"before")},addEmptyBlockBefore:function(e,t){var n=(0,O.genKey)(),r=new O.ContentBlock({key:n}),a=new O.SelectionState({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0}),o=(o=e.getCurrentContent()).merge({selectionAfter:a});return e=O.EditorState.set(e,{currentContent:o}),O.AtomicBlockUtils.moveAtomicBlock(e,r,a,"before")},addAtomicBlockBefore:function(e,t,n,r){var a=new O.SelectionState({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0}),o=e.getCurrentContent(),s=(o=(o=o.merge({selectionAfter:a})).createEntity(n,"IMMUTABLE",r)).getLastCreatedEntityKey();e=O.EditorState.set(e,{currentContent:o});var i=O.CharacterMetadata.create({entity:s}),l=new O.ContentBlock({key:(0,O.genKey)(),type:"atomic",text:" ",characterList:(0,E.List)((0,E.Repeat)(i,1))});return O.AtomicBlockUtils.moveAtomicBlock(e,l,a,"before")},isAtomicBlockSelected:function(e){var t=e.getCurrentContent(),n=e.getSelection(),r=n.getStartKey(),a=n.getEndKey();return r===a&&"atomic"===t.getBlockForKey(a).getType()},moveToPrevBlock:function(e){var t=e.getCurrentContent(),n=e.getSelection().getStartKey(),r=t.getBlockBefore(n);if(r){var a=new O.SelectionState({anchorKey:r.getKey(),anchorOffset:"atomic"===r.getType()?0:r.getLength(),focusKey:r.getKey(),focusOffset:"atomic"===r.getType()?0:r.getLength()});return O.EditorState.forceSelection(O.EditorState.set(e,{currentContent:t.merge({selectionAfter:a})}),a)}return null},moveToNextBlock:function(e){var t=e.getCurrentContent(),n=e.getSelection().getEndKey(),r=t.getBlockAfter(n);if(r){var a=new O.SelectionState({anchorKey:r.getKey(),anchorOffset:0,focusKey:r.getKey(),focusOffset:0});return O.EditorState.forceSelection(O.EditorState.set(e,{currentContent:t.merge({selectionAfter:a})}),a)}return null},moveToLastBlock:function(e){var t=e.getCurrentContent(),n=t.getLastBlock();if(n){var r=new O.SelectionState({anchorKey:n.getKey(),anchorOffset:"atomic"===n.getType()?0:n.getLength(),focusKey:n.getKey(),focusOffset:"atomic"===n.getType()?0:n.getLength()});return O.EditorState.forceSelection(O.EditorState.set(e,{currentContent:t.merge({selectionAfter:r})}),r)}return null},isBlockBeforeAtomic:function(e){var t=e.getCurrentContent(),n=e.getSelection().getStartKey(),r=t.getBlockBefore(n);return r&&"atomic"===r.getType()},isBlockAfterAtomic:function(e){var t=e.getCurrentContent(),n=e.getSelection().getEndKey(),r=t.getBlockAfter(n);return r&&"atomic"===r.getType()},isFocusAtLastLine:function(){var e=window.getSelection(),t=i(e.focusNode),n=t&&t.querySelectorAll('[data-text="true"]');if(n&&n.length){var r=n[n.length-1];r.firstChild&&(r=r.firstChild);var a=document.createRange();a.selectNodeContents(r),a.collapse(),a=(0,s.default)(a);var o=e.getRangeAt(0);if(o.endContainer===a.startContainer&&o.endOffset===a.startOffset)return!0;if((o=o.cloneRange()).collapse(),(o=(0,s.default)(o)).startContainer===a.startContainer&&o.startOffset===a.startOffset)return!0}return!1},isFocusAtFirstLine:function(){var e=window.getSelection(),t=i(e.focusNode),n=t&&t.querySelectorAll('[data-text="true"]');if(n&&n.length){var r=n[0];r.firstChild&&(r=r.firstChild);var a=document.createRange();a.selectNodeContents(r),a.collapse(!0),a=(0,s.default)(a);var o=e.getRangeAt(0);if(o.startContainer===a.startContainer&&o.startOffset===a.startOffset)return!0;if((o=o.cloneRange()).collapse(!0),(o=(0,s.default)(o)).startContainer===a.startContainer&&o.startOffset===a.startOffset)return!0}return!1},isSelectionAtBlockStart:function(e){return 0===e.getSelection().getFocusOffset()},isSelectionAtBlockEnd:function(e){var t=e.getCurrentContent(),n=e.getSelection(),r=t.getBlockForKey(n.getFocusKey());return n.getFocusOffset()===("atomic"===r.getType()?0:r.getLength())},isSelectionAtFirstBlock:function(e){var t=e.getSelection(),n=e.getCurrentContent().getFirstBlock();return t.getFocusKey()===(n&&n.getKey())},isSelectionAtLastBlock:function(e){var t=e.getSelection(),n=e.getCurrentContent().getLastBlock();return t.getFocusKey()===(n&&n.getKey())},getLeafOffsetKeyAndOffset:function(e,o,s){var i="",l=0;return e.getBlockTree(o).some(function(e,a){var t=e.get("start"),n=e.get("end");return s<t||s<=n&&(e.get("leaves").some(function(e,t){var n=e.get("start"),r=e.get("end");return s<n||s<=r&&(i=u.default.encode(o,a,t),l=s-n,!0)}),!0)}),{offsetKey:i,offset:l}},getLeafBoundingClientRect:function(e,t,n){var r='[data-editor="'+e+'"][data-block="true"] span[data-offset-key="'+t+'"] > [data-text="true"]',a=document.querySelector(r),o=document.createRange();return o.setStart(a.firstChild,n),o.getBoundingClientRect()},getSelectedEntity:c,getSelectedEntityData:function(e){var t=c(e);return t&&e.getCurrentContent().getEntity(t).getData()||{}},addUserMention:function(e,t,n){var r=(s=e.getCurrentContent().createEntity("MENTION","SEGMENTED",{userId:n.id})).getLastCreatedEntityKey(),a=e.getSelection(),o=a.merge({anchorOffset:a.getFocusOffset()-t.length-1}),s=O.Modifier.replaceText(s,o,"@"+n.name,null,r);return O.EditorState.push(e,s,"apply-entity")},addLearnMention:function(e,t,n){var r=(0,l.GetItemIdByType)({id:n.id,type:n.type}),a=(i=e.getCurrentContent().createEntity("MENTIONLEARN","SEGMENTED",{learnItemId:r})).getLastCreatedEntityKey(),o=e.getSelection(),s=o.merge({anchorOffset:o.getFocusOffset()-t.length-1}),i=O.Modifier.replaceText(i,s,n.title,null,a);return O.EditorState.push(e,i,"apply-entity")},mergeAtomicEntityData:function(e,t,n){var r=e.getEntity(t),a=r.getType(),o=r.getMutability(),s=r.getData(),i=(e=e.createEntity(a,o,g({},s,n))).getLastCreatedEntityKey(),l=e.getBlockMap();return l.forEach(function(r,e){r.findEntityRanges(function(e){return e.getEntity()===t},function(e,t){for(var n=r.getCharacterList();e<t;)n=n.set(e,O.CharacterMetadata.applyEntity(n.get(e),i)),e++;r=r.set("characterList",n)}),l=l.set(e,r)}),e.merge({blockMap:l,selectionAfter:e.getSelectionAfter().merge({hasFocus:!0})})},normalizeValidAtomicBlocks:function(f){for((p=f.getBlockMap()).forEach(function(c,d){"atomic"===c.getType()&&c.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&-1!==v.indexOf(f.getEntity(t).getType())},function(e,t){var n=c.getEntityAt(e),r=f.getEntity(n),a=r.getType(),o=r.getData();if(-1!==m.indexOf(a)&&((o||{}).contentId||(p=p.delete(d))),-1!==h.indexOf(a)){for(var s=r.getMutability(),i=(o.contents||[]).filter(function(e){return e.contentId}),l=(f=f.createEntity(a,s,g({},o,{contents:i}))).getLastCreatedEntityKey(),u=c.getCharacterList();e<t;)u=u.set(e,O.CharacterMetadata.applyEntity(u.get(e),l)),e++;c=c.set("characterList",u),p=p.set(d,c)}})});p.last()&&"unstyled"===p.last().getType()&&0===p.last().getLength();)p=p.delete(p.last().getKey());var e=(0,O.genKey)(),t=new O.ContentBlock({key:e,text:"",type:"unstyled",characterList:(0,E.List)(),depth:0}),p=p.concat([[e,t]]).toOrderedMap();return f.merge({blockMap:p})},removeAllBlocks:function(e){for(var t=e.getCurrentContent(),n=t.getBlockMap();n.last();)n=n.delete(n.last().getKey());var r=(0,O.genKey)(),a=new O.ContentBlock({key:r,text:"",type:"unstyled",characterList:(0,E.List)(),depth:0}),o=new O.SelectionState({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:0,hasFocus:!0}),n=n.concat([[r,a]]).toOrderedMap();return O.EditorState.forceSelection(O.EditorState.set(e,{currentContent:t.merge({blockMap:n})}),o)},isEmptyContent:function(e){return!e.getCurrentContent().getPlainText()},normalizeRepostMentions:function(i){return i.getBlockMap().forEach(function(o,s){"unstyled"===o.getType()&&o.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&"MENTION"===i.getEntity(t).getType()},function(e,t){var n=o.getEntityAt(e),r=(i.getEntity(n).getData()||{}).userId,a=new O.SelectionState({anchorKey:s,anchorOffset:e,focusKey:s,focusOffset:t,hasFocus:!0});i=O.Modifier.replaceText(i,a,"<@"+r+">",null,n)})}),i},normalizeEmbedLinks:function(u,c){return u.getBlockMap().forEach(function(e,t){if("unstyled"===e.getType())for(var n=e.getText(),r=0;r<c.length;r++){var a,o,s,i,l=c&&c[r];l&&(-1!==(a=n.indexOf(l))&&(o=a+l.length,s=new O.SelectionState({anchorKey:t,anchorOffset:a,focusKey:t,focusOffset:o}),i=(u=u.createEntity("LINK","MUTABLE",{url:l})).getLastCreatedEntityKey(),u=O.Modifier.applyEntity(u,s,i)))}}),u},markTextOverLength:function(e,t,n){for(var r=0,a=void 0,o=void 0,s=e.getBlocksAsArray(),i=0;i<s.length;i++,r++){var l=s[i],u=l.getLength();if(t<(r+=u)){a=l.getKey(),o=u-(r-t);break}}if(a&&o){var c=e.getLastBlock(),d=c.getKey(),f=c.getLength(),p=new O.SelectionState({anchorKey:a,anchorOffset:o,focusKey:d,focusOffset:f});return O.Modifier.applyInlineStyle(e,p,n)}return e},$editorStateFromText:function(e){return(0,r.compute)(e,function(e){return o(e||"")})},$editorStateFromJSON:function(e){return(0,r.compute)(e,function(e){return e?O.EditorState.createWithContent((0,O.convertFromRaw)(JSON.parse(e))):O.EditorState.createEmpty()})}}},function(e,t,n){e.exports=n(8)(112)},function(e,t,n){"use strict";var u=n(712),c=n(713),d=n(479);function f(e,t){for(var n=1/0,r=1/0,a=-1/0,o=-1/0,s=0;s<e.length;s++)var i=e[s],n=Math.min(n,i.top),r=Math.min(r,i.bottom),a=Math.max(a,i.top),o=Math.max(o,i.bottom);return a<=r&&a-n<t&&o-r<t}e.exports=function(e){e.collapsed||d(!1);var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var n=function(e){var t=getComputedStyle(e),n=document.createElement("div");n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.lineHeight=t.lineHeight,n.style.position="absolute",n.textContent="M";var r=document.body;r||d(!1),r.appendChild(n);var a=n.getBoundingClientRect();return r.removeChild(n),a.height}(t),r=e.endContainer,a=e.endOffset;for(e.setStart(e.startContainer,0);f(c(e),n)&&(r=e.startContainer,a=e.startOffset,r.parentNode||d(!1),e.setStartBefore(r),1!==r.nodeType||"inline"===getComputedStyle(r).display););for(var o=r,s=a-1;;){for(var i=o.nodeValue,l=s;0<=l;l--)if(!(null!=i&&0<l&&u.isSurrogatePair(i,l-1))){if(e.setStart(o,l),!f(c(e),n))break;r=o,a=l}if(-1===l||0===o.childNodes.length)break;s=function(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}(o=o.childNodes[l])}return e.setStart(r,a),e}},function(e,t,n){"use strict";var d=function(){};e.exports=function(e,t,n,r,a,o,s,i){var l,u,c;if(d(t),!e)throw void 0===t?c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(l=[n,r,a,o,s,i],u=0,(c=new Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"),c.framesToPop=1,c}},function(e,t,n){"use strict";function r(){var e=window.navigator.userAgent.toLowerCase();return!!/MicroMessenger/i.test(e)}function a(){var e=window.navigator.userAgent.toLowerCase();return!!/iP(hone|od|ad)/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isWeiXin=r,t.isKeyboardIOS=a,t.weiXinScrollIntoView=function(){var e;r()&&a()&&((e=document.getElementById("pageBody"))?setTimeout(function(){e.scrollIntoView(!1),e.parentNode.scrollBy(0,1),console.log("fix wechat browser end")},300):console.log("pageBody div not found"))}},function(e,t,n){e.exports=n.p+"../styles/i/two-factor-auth.07af3d696c7c0e9f5541ee18daa55e87.png"},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e).indent||s};var r,a=n(485),o=(r=a)&&r.__esModule?r:{default:r};var s="  "},function(e,t,n){e.exports=n(8)(997)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t=t||(0,s.default)(e),(0,a.List)(e.split(t))};var r,a=n(56),o=n(130),s=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=n||(0,s.default)(e);var r=0,a=0,o=0;for(;0<=a&&a<t;)r++,o=a,a=e.indexOf(n,a+n.length);return new i({line:r-1,offset:t-o})};var r,a=n(56),o=n(130),s=(r=o)&&r.__esModule?r:{default:r};var i=(0,a.Record)({line:Number(0),offset:Number(0)});i.prototype.getLine=function(){return this.get("line")},i.prototype.getOffset=function(){return this.get("offset")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(817)),a=o(n(818));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)();s.tlds(a.default),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=f(n(1)),i=f(n(2)),l=f(n(3)),u=f(n(22)),c=f(n(4)),d=f(n(133));function f(e){return e&&e.__esModule?e:{default:e}}function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}var g={strategy:function(e,t,n){e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()},t)},component:(0,c.default)(d.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,l.default),a(p,[{key:"render",value:function(){var e=this.props,t=e.entityKey,n=e.contentState,r=e.children,a=n.getEntity(t).getData().url;return s.default.createElement(u.default,{text:a,position:"bottom",isSpan:!0,clickToHide:!1},s.default.createElement("a",{href:a,target:"_blank",rel:"nofollow"},r))}}]),p.propTypes={entityKey:i.default.string.isRequired,contentState:i.default.object.isRequired,children:i.default.any.isRequired},r=p))||r};t.default=g},function(e,t){e.exports={"mention-toolbar":"mention-toolbar_WvyL0eHF",show:"show_1L2eh6Ga",candidates:"candidates_101mU2jd",candidate:"candidate_KmLdA8G8",active:"active_3o5lVs5R",avatar:"avatar_2AVzspj7",name:"name_1sjtSRKu","mention-wrapper":"mention-wrapper_k3aRpA5r"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findGalleryEntities=i,t.isGalleryBlockSelected=g,t.default=function(e){var t=e.editorKey,d=e.renderOnly;if(!t)throw new Error("editorKey is empty");var n=s.default;e.decorator&&(n=e.decorator(n));n=(0,a.default)(n,{editorKey:t,renderOnly:d});var r=l;return{handleKeyCommand:d?void 0:function(e,t,n){var r=n.getProps,a=n.setEditorState;switch(e){case"backspace":case"backspace-word":case"backspace-to-start-of-line":case"delete":case"delete-word":case"delete-to-end-of-block":if(g(t)){var o=r().controller,s=o.getState("project.gallery.itemPos");a(function(e,t){var n=e.getCurrentContent(),r=(0,f.getSelectedEntity)(e),a=n.getEntity(r).getData().contents,o=void 0===a?[]:a,s=[].concat(p(o));if(-1!==t&&t<o.length)return s.splice(t,1),n=(0,f.mergeAtomicEntityData)(n,r,{contents:s}),f.EditorState.push(e,n,"apply-entity");return e}(t,s));var i=Math.max(0,s-1);return o.getSignal("project.setItemPos")({itemPos:i}),"handled"}}return"not-handled"},handleReturn:d?void 0:function(e,t,n){var r=n.setEditorState;return g(t)?(r((0,f.moveToNextBlock)(t)),"handled"):"not-handled"},keyBindingFn:d?void 0:function(e,t){var n=t.getEditorState,r=t.getProps;if(!e.shiftKey){var a=n();if(g(a)){var o=r().controller,s=o.getState("project.gallery.itemPos"),i=o.getSignal("project.setItemPos");if(37===e.keyCode)return i({itemPos:Math.max(0,s-1)}),"";if(39===e.keyCode){var l=(0,f.getSelectedEntityData)(a).contents,u=void 0===l?[]:l,c=!0===d?Math.max(0,u.length-1):u.length;return i({itemPos:Math.min(c,s+1)}),""}}}},decorators:[{strategy:i,component:n}],UploadVideoDialog:d?function(){return null}:(0,a.default)(o.default,{editorKey:t,onOK:r})}};var a=r(n(36)),f=n(10),o=r(n(65)),s=r(n(859));function r(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){"atomic"===e.getType()&&e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&"WEBGLGALLERY"===n.getEntity(t).getType()},t)}function g(e){var t=e.getCurrentContent(),n=e.getSelection(),r=n.getStartKey(),a=n.getEndKey();if(r!==a)return!1;var o=t.getBlockForKey(a),s=!1;return i(o,function(){s=!0},t),s}function l(e){var t,n=e.uploadIds,r=e.uploads,a=e.entityKey,o=e.editorKey,s=e.editorState,i=e.setEditorState,l=s.getCurrentContent(),u=l.getEntity(a).getData().contents,c=[].concat(p(void 0===u?[]:u));0<n.length&&(n.forEach(function(e){var t=e&&r[e];c.push({uploadId:t.id,contentId:t.contentId})}),t=(0,f.mergeAtomicEntityData)(l,a,{contents:c}),i({editorKey:o,editorState:f.EditorState.push(s,t,"apply-entity")}))}},function(e,t,n){"use strict";e.exports={comparatorByName:function(e,t){var n=(e||{}).name,r=(t||{}).name;if(!n)return-1;if(!r)return 1;var a=n.toLowerCase(),o=r.toLowerCase();return a<o?-1:o<a?1:0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(o,[{key:"clear",value:function(){var t=this,e=this._parse(document.cookie);Object.keys(e).forEach(function(e){return t.removeItem(e)})}},{key:"getItem",value:function(e){return this._parse(document.cookie)[e]}},{key:"key",value:function(e){var t=this._parse(document.cookie);return Object.keys(t).sort()[e]}},{key:"removeItem",value:function(e){var t=this._clone(this._defaultOptions);t.expires=new Date(0);var n=this._format(e,"",t);document.cookie=n}},{key:"setItem",value:function(e,t,n){n=n||{},n=this._extends(this._clone(this._defaultOptions),n);var r=this._format(e,t,n);document.cookie=r}},{key:"_clone",value:function(t){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}},{key:"_extends",value:function(t,n){return Object.keys(n).forEach(function(e){t[e]=n[e]}),t}},{key:"_format",value:function(e,t,n){return[encodeURIComponent(e),"=",encodeURIComponent(t),this._formatOptions(n)].join("")}},{key:"_formatOptions",value:function(e){return[this._isDefined(e.path)?";path="+e.path:"",this._isDefined(e.domain)?";domain="+e.domain:"",this._isDefined(e.expires)?";expires="+e.expires.toUTCString():"",this._isDefined(e.secure)&&e.secure?";secure":""].join("")}},{key:"_isDefined",value:function(e){return null!=e}},{key:"_parse",value:function(e){if(!this._isDefined(e)||0===e.length)return{};var i={},t=new RegExp("\\s*;\\s*");return e.split(t).forEach(function(e){var t=e.split("="),n=l(t,2),r=n[0],a=n[1],o=decodeURIComponent(r),s=decodeURIComponent(a);i[o]=s}),i}}]),o);function o(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},this._defaultOptions=this._extends({path:null,domain:null,expires:null,secure:!1},e),Object.defineProperty(this,"length",{get:function(){var e=t._parse(document.cookie);return Object.keys(e).length}})}t.default=a},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={article:120,game:420};t.default={getSocialButtonsStyle:function(e,t,n){return"fixed"===t?{position:"fixed",right:"auto",top:120,marginLeft:-60}:{top:r[0<arguments.length&&void 0!==e?e:"article"]+((2<arguments.length&&void 0!==n?n:0)||0)}}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){{var e,n;r.ff||r.opera?((e=document.createElement("link")).setAttribute("rel","icon"),e.setAttribute("href",t),a.appendChild(e),(n=o[o.length-1]).parentNode&&n.parentNode.removeChild(n),o=[e]):o.forEach(function(e){return e.setAttribute("href",t)})}};var r={};r.ff="undefined"!=typeof InstallTrigger,r.opera=!!window.opera||0<=navigator.userAgent.indexOf("Opera");for(var a=document.getElementsByTagName("head")[0],o=[],s=a.getElementsByTagName("link"),i=0;i<s.length;i++)/(^|\s)icon(\s|$)/i.test(s[i].getAttribute("rel"))&&o.push(s[i]);o.length||(o.push(document.createElement("link")),o[0].setAttribute("rel","icon"),a.appendChild(o[0]))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWorkspaceChannels=t.getGroupChannelName=t.getChannelName=t.hasUnreadMessage=t.getDefaultChannelList=void 0;var r,S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(80),m=(r=a)&&r.__esModule?r:{default:r},v=n(6);function g(e,t,n,r,a){var o="",s=(0,v.i18n)(e,m.default,"channel_name_comma",{}),i=(0,v.i18n)(e,m.default,"channel_name_and",{});if("direct"===t.type)o=r[t.recipientId].fullname;else if("private"!==t.type||t.proposalId)o=t.name;else{var l=Object.values(n).sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),u=l.length;if(1===u)o=(0,v.i18n)(e,m.default,"channel_name_empty",{username:a.name});else if(2===u)o=o.concat(r[l[0].userId].fullname).concat(s).concat(r[l[1].userId].fullname);else if(u<=3)for(var c=0;c<l.length;c++){var d=l[c];o=c!==l.length-1?o.concat(r[d.userId].fullname).concat(s):o.concat(r[d.userId].fullname)}else{for(var f=0;f<3;f++){var p=l[f];o=2!==f?o.concat(r[p.userId].fullname).concat(s):o.concat(r[p.userId].fullname)}var g=u-3,h=(0,v.i18n)(e,m.default,"channel_name_people",{moreCount:g});o=o.concat(i).concat(h)}}return o}function E(e,t){if(e.isMute)return!1;var n=t[e.id];return!!n&&n.lastMessageId>n.ackMessageId}function O(e,t){return Object.values(e).filter(function(e){return e.workspaceId===t}).reduce(function(e,t){return e[t.id]=t,e},{})}t.getDefaultChannelList=function(e){var t,n,r,a=e.channels,o=e.readState,s=e.channelJobs,i=e.relationships,l=e.loginUser,u=e.workspaceId,c=void 0===u?"":u,d=[],f=[],p=[],g=void 0,g=c?O(a,c):a,h=Object.values(g).filter(function(e){if("direct"!==e.type)return"private"===e.type&&!e.proposalId||"lobby"===e.type;var t=i[e.recipientId];return!t||t.actionUserId!==l.id||"ignored"!==t.status}).map(function(e){return S({},e,{mentionCount:o[e.id].mentionCount,hasUnread:E(e,o)})}),m=Object.values(g).filter(function(e){return"public"===e.type});m&&0<m.length&&(t=0<m.filter(function(e){return E(e,o)}).length,n=m.map(function(e){return o[e.id].mentionCount}).reduce(function(e,t){return e+t},0),r=m.reduce(function(e,t){return e.lastMessageId>t.lastMessageId?e:t}),d.push({id:r.id,type:"public-list",name:"todo",hasUnread:t,mentionCount:n,stickTimestamp:""}));var v=Object.values(s).filter(function(e){return e.freelancerId!==l.id&&!!g[e.channelId]}).reduce(function(e,t){return t.id in e?e[t.id].channelIds.push(t.channelId):e[t.id]={id:t.id,title:t.title,channelIds:[t.channelId]},e},{});Object.values(v).forEach(function(t){var e,n,r,a=Object.values(g).filter(function(e){return-1!==t.channelIds.indexOf(e.id)});a&&0<a.length&&(e=0<a.filter(function(e){return E(e,o)}).length,n=a.map(function(e){return o[e.id].mentionCount}).reduce(function(e,t){return e+t},0),r=a.reduce(function(e,t){return e.lastMessageId>t.lastMessageId?e:t}),f.push({id:r.id,type:"recruit-list",name:t.title,jobId:t.id,hasUnread:e,mentionCount:n,candidateCount:t.channelIds.length,stickTimestamp:""}))});var y,_,b,w=Object.values(s).filter(function(e){return e.freelancerId===l.id&&!!g[e.channelId]}).map(function(e){return g[e.channelId]});return w&&0<w.length&&(y=0<w.filter(function(e){return E(e,o)}).length,_=w.map(function(e){return o[e.id].mentionCount}).reduce(function(e,t){return e+t},0),b=w.reduce(function(e,t){return e.lastMessageId>t.lastMessageId?e:t}),p.push({id:b.id,type:"applied-list",hasUnread:y,mentionCount:_,stickTimestamp:""})),[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(h),d,f,p)||[]},t.hasUnreadMessage=E,t.getChannelName=function(e){var t=e.context,n=e.users,r=e.channelMembers,a=e.channelJobs,o=e.loginUser,s=e.channel,i="";if(s){var l,u,c,d=s.type,f=s.recipientId,p=s.name;switch(d){case"direct":i=n[f].fullname;break;case"private":i=s.proposalId?(u=(l=a[s.id]).freelancerId,o.id===u?l.title:n[u].fullname):(c=r[s.id],p||g(t,s,c,n,o));break;case"public":i=p;break;case"public-list":i=(0,v.i18n)(t,m.default,"projects",{});break;case"recruit-list":i=p;break;case"applied-list":i=(0,v.i18n)(t,m.default,"my_job",{});break;case"lobby":i=0===s.name.indexOf("lobby_default")||"workspace_default_lobby"===s.name?(0,v.i18n)(t,m.default,s.name,{}):s.name;break;case"ticket":i=p;break;default:return null}}return i},t.getGroupChannelName=g,t.getWorkspaceChannels=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!e&&(-1<e.indexOf("FBAN")||-1<e.indexOf("FBAV"))}},,function(e,t,n){var r=n(148),a=n(962),o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;var t;if(r(e)&&(t="function"==typeof e.valueOf?e.valueOf():e,e=r(t)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=i.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):s.test(e)?NaN:+e}},,,,,,,,function(e,t,n){"use strict";e.exports={getOS:function(){var e="Unknown OS";return-1!==navigator.userAgent.indexOf("Win")&&(e="Windows"),-1!==navigator.userAgent.indexOf("Mac")&&(e="Macintosh"),-1!==navigator.userAgent.indexOf("Linux")&&(e="Linux"),-1!==navigator.userAgent.indexOf("Android")&&(e="Android"),-1!==navigator.userAgent.indexOf("like Mac")&&(e="iOS"),e},getBrowser:function(){for(var e,t=navigator.userAgent,n=navigator.appName,r=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10),o=void 0,s=void 0,i=[["Opera",6],["MSIE",5],["Chrome",7],["Safari",7],["Firefox",8]],l=0;l<i.length;l++){var u=i[l][0],c=i[l][1];if(-1!==(o=t.indexOf(u))){n=u,r=t.substring(o+c),-1!==(o=t.indexOf("Version"))&&(r=t.substring(o+8));break}}0===n.length&&(e=t.lastIndexOf(" ")+1)<(o=t.lastIndexOf("/"))&&(n=t.substring(e,o),r=t.substring(o+1),n.toLowerCase()===n.toUpperCase()&&(n=navigator.appName)),-1!==(s=r.indexOf(";"))&&(r=r.substring(0,s)),-1!==(s=r.indexOf(" "))&&(r=r.substring(0,s)),a=parseInt(""+r,10),isNaN(a)&&(r=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10));var d={browser_name:n,full_version:r,major_version:a,navigator:{appName:navigator.appName,navigator_userAgent:navigator.userAgent}};return JSON.stringify(d)}}},function(e,t,n){var r=n(1030);e.exports=function(e){return r(2,e)}},function(e,t,b){"use strict";b.d(t,"a",function(){return G}),b.d(t,"b",function(){return ge}),b.d(t,"c",function(){return he}),b.d(t,"d",function(){return me}),b.d(t,"e",function(){return Q}),b.d(t,"f",function(){return F});function p(e){return L.get(e)}function w(e){return console.error(e)}function n(t,n){return function(e){t.push(e),M||(M=!0,n&&4&A.$flags$?q(V):A.raf(V))}}function r(e,t){for(var n=0,r=0;n<e.length&&(r=performance.now())<t;)try{e[n++](r)}catch(e){w(e)}n===e.length?e.length=0:0!==n&&e.splice(0,n)}function g(e){return"object"===(e=typeof e)||"function"===e}function S(e,t){return void 0===t&&(t=""),function(){}}function c(e,t,n){var r,a,o,s,i,l,u,c,d=S(0,t.$tagName$),f=(r=D&&e.shadowRoot?e.shadowRoot:e.getRootNode(),o=e,u=J((a=t).$tagName$),c=U.get(u),r=11===r.nodeType?r:x,c&&("string"==typeof c?(r=r.head||r,i=void 0,(s=Y.get(r))||Y.set(r,s=new Set),s.has(u)||(A.$cssShim$?(l=(i=A.$cssShim$.createHostStyle(o,u,c,!!(10&a.$flags$)))["s-sc"])&&(u=l,s=null):(i=x.createElement("style")).innerHTML=c,r.insertBefore(i,r.querySelector("link")),s&&s.add(u))):r.adoptedStyleSheets.includes(c)||(r.adoptedStyleSheets=I(r.adoptedStyleSheets,[c]))),u);10&t.$flags$&&(e["s-sc"]=f,e.classList.add(f+"-h")),d()}function i(e,t,n,r,a,o){if(n!==r){var s=t in e,i=t.toLowerCase();if("class"===t){var l=e.classList,u=te(n),c=te(r);l.remove.apply(l,u.filter(function(e){return e&&!c.includes(e)})),l.add.apply(l,c.filter(function(e){return e&&!u.includes(e)}))}else if("style"===t){for(var d in n)r&&null!=r[d]||(d.includes("-")?e.style.removeProperty(d):e.style[d]="");for(var d in r)n&&r[d]===n[d]||(d.includes("-")?e.style.setProperty(d,r[d]):e.style[d]=r[d])}else if("key"!==t)if("ref"===t)r&&r(e);else if(s||"o"!==t[0]||"n"!==t[1]){var f,p=g(r);if((s||p&&null!==r)&&!a)try{e.tagName.includes("-")?e[t]=r:(f=null==r?"":r,"list"===t?s=!1:null!=n&&e[t]==f||(e[t]=f))}catch(e){}null==r||!1===r?e.removeAttribute(t):(!s||4&o||a)&&!p&&(r=!0===r?"":r,e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):i in P?i.slice(2):i[2]+t.slice(3),n&&A.rel(e,t,n,!1),r&&A.ael(e,t,r,!1)}}function l(e,t,n,r){var a=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||$,s=t.$attrs$||$;for(r in o)r in s||i(a,r,o[r],void 0,n,t.$flags$);for(r in s)i(a,r,o[r],s[r],n,t.$flags$)}function m(e,t,n,r,a,o){var s,i=e;for(i.shadowRoot&&i.tagName===_&&(i=i.shadowRoot);a<=o;++a)r[a]&&(s=ne(null,n,a))&&(r[a].$elm$=s,i.insertBefore(s,t))}function v(e,t,n,r,a){for(;t<=n;++t)(r=e[t])&&(a=r.$elm$,oe(r),a.remove())}function d(e,t,n,r){_=e.tagName;var a,o=t.$vnode$||Z(null,null),s=(a=r)&&a.$tag$===X?r:Q(null,null,r);s.$tag$=null,s.$flags$|=4,(t.$vnode$=s).$elm$=o.$elm$=e.shadowRoot||e,y=e["s-sc"],ae(o,s)}function u(t,e){e&&!t.$onRenderResolve$&&e["s-p"].push(new Promise(function(e){return t.$onRenderResolve$=e}))}function E(e,t,n,r){if(t.$flags$|=16,!(4&t.$flags$)){var a,o=S(0,n.$tagName$),s=t.$ancestorComponent$,i=t.$lazyInstance$,l=function(){return se(e,t,n,i,r)};return u(t,s),a=r?(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.forEach(function(e){var t=e[0],n=e[1];return ue(i,t,n)}),t.$queuedListeners$=null),ue(i,"componentWillLoad")):ue(i,"componentWillUpdate"),o(),ce(a,function(){return H(l)})}t.$flags$|=512}function f(e,t,n,r){var a,o,s,i=p(e),l=i.$hostElement$,u=i.$instanceValues$.get(t),c=i.$flags$,d=i.$lazyInstance$;a=n,o=r.$members$[t][0],(n=null==a||g(a)?a:4&o?"false"!==a&&(""===a||!!a):1&o?String(a):a)===u||8&c&&void 0!==u||(i.$instanceValues$.set(t,n),d&&(r.$watchers$&&128&c&&((s=r.$watchers$[t])&&s.forEach(function(e){try{d[e](n,u,t)}catch(e){w(e)}})),2==(18&c)&&E(l,i,r,!1)))}function O(e,r,a){var t,o,s;return r.$members$&&(e.watchers&&(r.$watchers$=e.watchers),t=Object.entries(r.$members$),o=e.prototype,t.forEach(function(e){var t=e[0],n=e[1][0];(31&n||2&a&&32&n)&&Object.defineProperty(o,t,{get:function(){return e=t,p(this).$instanceValues$.get(e);var e},set:function(e){f(this,t,e,r)},configurable:!0,enumerable:!0})}),1&a&&(s=new Map,o.attributeChangedCallback=function(t,e,n){var r=this;A.jmp(function(){var e=s.get(t);r[e]=(null!==n||"boolean"!=typeof r[e])&&n})},e.observedAttributes=t.filter(function(e){e[0];return 15&e[1][0]}).map(function(e){var t=e[0],n=e[1][1]||t;return s.set(n,t),n}))),e}function o(m,v,y,e,_){return s(void 0,void 0,void 0,function(){var u,c,d,f,p,g,h;return k(this,function(e){switch(e.label){case 0:return 0!=(32&v.$flags$)?[3,5]:(v.$flags$|=32,s=(o=y).$tagName$.replace(/-/g,"_"),i=o.$lazyBundleIds$,l=K.get(i),(_=l?l[s]:b(549)("./"+i+".entry.js").then(function(e){return K.set(i,e),e[s]},w)).then?(u=function(){},[4,_]):[3,2]);case 1:_=e.sent(),u(),e.label=2;case 2:_.isProxied||(y.$watchers$=_.watchers,O(_,y,2),_.isProxied=!0),c=S(0,y.$tagName$),v.$flags$|=8;try{new _(v)}catch(e){w(e)}return(v.$flags$&=-9,v.$flags$|=128,c(),d=J(y.$tagName$),U.has(d)||!_.style)?[3,5]:(f=S(0,y.$tagName$),p=_.style,8&y.$flags$?[4,b.e(2).then(b.bind(null,1044)).then(function(e){return e.scopeCss(p,d,!1)})]:[3,4]);case 3:p=e.sent(),e.label=4;case 4:t=d,n=p,r=!!(1&y.$flags$),a=U.get(t),N&&r?(a=a||new CSSStyleSheet).replace(n):a=n,U.set(t,a),f(),e.label=5;case 5:return g=v.$ancestorComponent$,h=function(){return E(m,v,y,!0)},g&&g["s-rc"]?g["s-rc"].push(h):h(),[2]}var t,n,r,a,o,s,i,l})})}function h(r,e){if(0==(1&A.$flags$)){var t=S(0,e.$tagName$),n=p(r);if(e.$listeners$&&(n.$rmListeners$=function(i,l,e){l.$queuedListeners$=l.$queuedListeners$||[];var t=e.map(function(e){var t=e[0],n=e[1],r=e[2],a=fe(i,t),o=de(l,r),s=pe(t);return A.ael(a,n,o,s),function(){return A.rel(a,n,o,s)}});return function(){return t.forEach(function(e){return e()})}}(r,n,e.$listeners$)),!(1&n.$flags$)){n.$flags$|=1;for(var a=r;a=a.parentNode||a.host;)if(a["s-p"]){u(n,n.$ancestorComponent$=a);break}e.$members$&&Object.entries(e.$members$).forEach(function(e){var t,n=e[0];31&e[1][0]&&r.hasOwnProperty(n)&&(t=r[n],delete r[n],r[n]=t)}),q(function(){return o(r,n,e)})}t()}}var a,y,_,C=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__awaiter||function(e,s,i,l){return new(i=i||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(r,a)}o((l=l.apply(e,s||[])).next())})},k=this&&this.__generator||function(n,r){var a,o,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,o=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(s=0<(s=i.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){i.label=t[1];break}if(6===t[0]&&i.label<s[1]){i.label=s[1],s=t;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(t);break}s[2]&&i.ops.pop(),i.trys.pop();continue}t=r.call(n,i)}catch(e){t=[6,e],o=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},I=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var o=arguments[t],s=0,i=o.length;s<i;s++,a++)r[a]=o[s];return r},j=0,M=!1,T=!1,P=window,x=document,A={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,r){return e.addEventListener(t,n,r)},rel:function(e,t,n,r){return e.removeEventListener(t,n,r)}},D=function(){return!!x.documentElement.attachShadow}(),R=function(){var e=!1;try{x.addEventListener("e",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}(),N=function(){try{return new CSSStyleSheet,!0}catch(e){}return!1}(),L=new WeakMap,F=function(e,t){return L.set(t.$lazyInstance$=e,t)},K=new Map,U=new Map,B=[],z=[],W=[],V=function(){j++,function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){w(e)}e.length=0}(B);var e=2==(6&A.$flags$)?performance.now()+10*Math.ceil(j*(1/22)):1/0;r(z,e),r(W,e),0<z.length&&(W.push.apply(W,z),z.length=0),(M=0<B.length+z.length+W.length)?A.raf(V):j=0},q=function(e){return Promise.resolve().then(e)},H=n(z,!0),$={},G=function(){return P.CSS&&P.CSS.supports&&P.CSS.supports("color","var(--c)")?Promise.resolve():b.e(5).then(b.bind(null,1042)).then(function(){if(A.$cssShim$=P.__stencil_cssshim,A.$cssShim$)return A.$cssShim$.initShim()})},Y=new WeakMap,J=function(e,t){return"sc-"+e},Q=function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var a,o,s=null,i=null,l=!1,u=[],c=function(e){for(var t=0;t<e.length;t++)s=e[t],Array.isArray(s)?c(s):null!=s&&"boolean"!=typeof s&&((a="function"!=typeof n&&!g(s))&&(s=String(s)),a&&l?u[u.length-1].$text$+=s:u.push(a?Z(null,s):s),l=a)};c(t),e&&(e.key&&(i=e.key),(o=e.className||e.class)&&(e.class="object"!=typeof o?o:Object.keys(o).filter(function(e){return o[e]}).join(" ")));var d=Z(n,null);return d.$attrs$=e,0<u.length&&(d.$children$=u),d.$key$=i,d},Z=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null};return n},X={},ee=/\s/,te=function(e){return e?e.split(ee):[]},ne=function(e,t,n,r){var a,o,s=t.$children$[n],i=0;if(null!==s.$text$)a=s.$elm$=x.createTextNode(s.$text$);else{if(T=T||"svg"===s.$tag$,a=s.$elm$=x.createElementNS(T?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s.$tag$),T&&"foreignObject"===s.$tag$&&(T=!1),l(null,s,T),null!=y&&a["s-si"]!==y&&a.classList.add(a["s-si"]=y),s.$children$)for(i=0;i<s.$children$.length;++i)(o=ne(e,s,i))&&a.appendChild(o);"svg"===s.$tag$?T=!1:"foreignObject"===a.tagName&&(T=!0)}return a},re=function(e,t){return e.$tag$===t.$tag$&&e.$key$===t.$key$},ae=function(e,t){var n=t.$elm$=e.$elm$,r=e.$children$,a=t.$children$;T=n&&n.parentNode&&void 0!==n.ownerSVGElement,T="svg"===t.$tag$||"foreignObject"!==t.$tag$&&T,null===t.$text$?(l(e,t,T),null!==r&&null!==a?function(e,t,n,r){for(var a,o,s=0,i=0,l=0,u=0,c=t.length-1,d=t[0],f=t[c],p=r.length-1,g=r[0],h=r[p];s<=c&&i<=p;)if(null==d)d=t[++s];else if(null==f)f=t[--c];else if(null==g)g=r[++i];else if(null==h)h=r[--p];else if(re(d,g))ae(d,g),d=t[++s],g=r[++i];else if(re(f,h))ae(f,h),f=t[--c],h=r[--p];else if(re(d,h))ae(d,h),e.insertBefore(d.$elm$,f.$elm$.nextSibling),d=t[++s],h=r[--p];else if(re(f,g))ae(f,g),e.insertBefore(f.$elm$,d.$elm$),f=t[--c],g=r[++i];else{for(l=-1,u=s;u<=c;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===g.$key$){l=u;break}g=(a=0<=l?(o=t[l]).$tag$!==g.$tag$?ne(t&&t[i],n,l):(ae(o,g),t[l]=void 0,o.$elm$):ne(t&&t[i],n,i),r[++i]),a&&d.$elm$.parentNode.insertBefore(a,d.$elm$)}c<s?m(e,null==r[p+1]?null:r[p+1].$elm$,n,r,i,p):p<i&&v(t,s,c)}(n,r,t,a):null!==a?(null!==e.$text$&&(n.textContent=""),m(n,null,t,a,0,a.length-1)):null!==r&&v(r,0,r.length-1)):e.$text$!==t.$text$&&(n.data=t.$text$),T&&"svg"===t.$tag$&&(T=!1)},oe=function(e){e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.forEach(oe)},se=function(e,t,n,r,a){var o=S(0,n.$tagName$),s=e["s-rc"];a&&c(e,n,t.$modeName$);var i=S(0,n.$tagName$);try{d(e,t,0,r.render())}catch(e){w(e)}A.$cssShim$&&A.$cssShim$.updateHost(e),t.$flags$&=-17,t.$flags$|=2,s&&(s.forEach(function(e){return e()}),e["s-rc"]=void 0),i(),o();function l(){return ie(e,t,n)}var u=e["s-p"];0===u.length?l():(Promise.all(u).then(l),t.$flags$|=4,u.length=0)},ie=function(e,t,n){var r=S(0,n.$tagName$),a=t.$ancestorComponent$;64&t.$flags$?r():(t.$flags$|=64,e.classList.add("hydrated"),r(),t.$onReadyResolve$(e),a||le()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&q(function(){return E(e,t,n,!1)}),t.$flags$&=-517},le=function(e){x.documentElement.classList.add("hydrated"),A.$flags$|=2},ue=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(e){w(e)}},ce=function(e,t){return e&&e.then?e.then(t):t()},de=function(t,n){return function(e){256&t.$flags$?t.$lazyInstance$[n](e):t.$queuedListeners$.push([n,e])}},fe=function(e,t){return 8&t?P:e},pe=function(e){return R?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e)},ge=function(e,t){void 0===t&&(t={});var i,n=S(),l=[],u=t.exclude||[],r=x.head,c=P.customElements,a=r.querySelector("meta[charset]"),o=x.createElement("style"),d=[],f=!0;Object.assign(A,t),A.$resourcesUrl$=new URL(t.resourcesUrl||"./",x.baseURI).href,t.syncQueue&&(A.$flags$|=4),e.forEach(function(s){return s[1].forEach(function(e){var a={$flags$:e[0],$tagName$:e[1],$members$:e[2],$listeners$:e[3]};a.$members$=e[2],a.$listeners$=e[3],a.$watchers$={},!D&&1&a.$flags$&&(a.$flags$|=8);var o,t=a.$tagName$,n=(o=HTMLElement,C(r,o),r.prototype.connectedCallback=function(){var e=this;i&&(clearTimeout(i),i=null),f?d.push(this):A.jmp(function(){return h(e,a)})},r.prototype.disconnectedCallback=function(){var n=this;A.jmp(function(){return e=n,void(0==(1&A.$flags$)&&((t=p(e)).$rmListeners$&&(t.$rmListeners$(),t.$rmListeners$=void 0),A.$cssShim$&&A.$cssShim$.removeHost(e)));var e,t})},r.prototype["s-hmr"]=function(e){},r.prototype.forceUpdate=function(){var e,t,n;t=a,2==(18&(n=p(e=this)).$flags$)&&E(e,n,t,!1)},r.prototype.componentOnReady=function(){return p(this).$onReadyPromise$},r);function r(e){var t,n,r=o.call(this,e)||this;return(n={$flags$:0,$hostElement$:t=e=r,$instanceValues$:new Map}).$onReadyPromise$=new Promise(function(e){return n.$onReadyResolve$=e}),t["s-p"]=[],t["s-rc"]=[],L.set(t,n),1&a.$flags$&&(D?e.attachShadow({mode:"open"}):"shadowRoot"in e||(e.shadowRoot=e)),r}a.$lazyBundleIds$=s[0],u.includes(t)||c.get(t)||(l.push(t),c.define(t,O(n,a,1)))})}),o.innerHTML=l+"{visibility:hidden}.hydrated{visibility:inherit}",o.setAttribute("data-styles",""),r.insertBefore(o,a?a.nextSibling:r.firstChild),f=!1,0<d.length?d.forEach(function(e){return e.connectedCallback()}):A.jmp(function(){return i=setTimeout(le,30,"timeout")}),n()},he=function(e,t,n){var r=me(e);return{emit:function(e){return r.dispatchEvent(new CustomEvent(t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e}))}}},me=function(e){return p(e).$hostElement$}},,,,,,function(e,t,n){e.exports=n(8)(704)},function(e,t,n){e.exports=n(8)(610)},function(e,t,n){e.exports=n(8)(1101)},,function(e,t,n){e.exports=n(8)(1024)},function(e,t,n){e.exports=n(8)(588)},function(e,t,n){e.exports=n(8)(22)},function(e,t,n){e.exports=n(8)(1011)},function(e,t,n){e.exports=n(8)(1706)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(e){var t=e.controller;return e.controller=new Proxy(t,{get:function(e,t){if("getSignal"!==t)return e[t];var n=e[t];return function(e){var t=n.apply(this,[e]);return function(e){setTimeout(function(){t(e)},0)}}}}),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,s=n(531);var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,((o=s)&&o.__esModule?o:{default:o}).default),r(l,[{key:"runInitialData",value:function(){var n=this,r=[];return Object.keys(this.initialDataSignals).forEach(function(e){var t=n.initialDataSignals[e];r.push(n.run(e+"__INITIAL_DATA",t))}),Promise.all(r)}}]),l);function l(e){var t=e.initialDataSignals,n=void 0===t?{}:t,r=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["initialDataSignals"]);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,r));return a.initialDataSignals=n,a}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,s=n(532),i=(o=s)&&o.__esModule?o:{default:o},l=n(47);var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,i.default),r(c,[{key:"trackChanges",value:function(e){this.changes=this.changes.concat(e)}},{key:"getChanges",value:function(){var n=this;return this.changes.reduce(function(e,t){return e[t.path.join(".")]=n.getState(t.path),e},{})}},{key:"getScript",value:function(){var e=JSON.stringify(this.getChanges());return this.hasRun=!0,"<script>window.CEREBRAL_STATE = "+e+"<\/script>"}},{key:"runSequence",value:function(e,t){var n,r,a,o,s=void 0;return Array.isArray(e)?s=this.run("UniversalController.run",e,t):"string"==typeof e?(r=(n=(0,l.ensurePath)(e)).pop(),o=(a=(0,l.getModule)(n,this.module))&&a.signals[r],s=this.run(e,o.signal,t)):(0,l.throwError)("Sequence must be a signal-path or an array of action."),s}},{key:"setState",value:function(e,t){this.model.set((0,l.ensurePath)(e),t),this.flush(!0)}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.changes=[],t.model.state=JSON.parse(JSON.stringify(t.model.state)),t.trackChanges=t.trackChanges.bind(t),t.on("flush",t.trackChanges),t.hasRun=!1,t}t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=l(n(533)),s=l(n(534)),i=l(n(539));function l(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s.default),r(c,[{key:"flush",value:function(e){var t=this.model.flush();(e||Object.keys(t).length)&&(this.updateComponents(t,e),this.emit("flush",t,Boolean(e)))}},{key:"updateComponents",value:function(t,n){var r=this,e=[],e=n?this.componentDependencyStore.getAllUniqueEntities():this.componentDependencyStore.getUniqueEntities(t),a=Date.now();e.forEach(function(e){r.devtools&&r.devtools.updateComponentsMap(e),e.onUpdate(t,n)});var o=Date.now();this.devtools&&e.length&&this.devtools.sendComponentsMap(e,t,a,o)}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,Object.assign({Model:i.default},e)));return r.componentDependencyStore=new o.default,r.flush=r.flush.bind(r),r.on("asyncFunction",function(e,t){t.isParallel||r.flush()}),r.on("parallelStart",function(){return r.flush()}),r.on("parallelProgress",function(e,t,n){1===n&&r.flush()}),r.on("end",function(){return r.flush()}),r}t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(47);var s=(r(i,[{key:"addEntity",value:function(a,e){var t=this;for(var n in e)!function(e){var r=e.split(".");r.reduce(function(e,t,n){return e[t]||(e[t]={}),n<r.length-1?(e[t].children=e[t].children||{},e[t].children):(e[t].entities=e[t].entities?e[t].entities.concat(a):[a],e)},t.map)}(n)}},{key:"removeEntity",value:function(a,e){var t=this;for(var n in e)!function(e){var r=e.split(".");r.reduce(function(e,t,n){return n===r.length-1&&(e[t].entities.splice(e[t].entities.indexOf(a),1),e[t].entities.length||delete e[t].entities),e[t].children},t.map)}(n)}},{key:"updateEntity",value:function(e,n,r){var t=Object.keys(n).reduce(function(e,t){return r[t]||(e[t]=!0),e},{}),a=Object.keys(r).reduce(function(e,t){return n[t]||(e[t]=!0),e},{});this.removeEntity(e,t),this.addEntity(e,a)}},{key:"getAllUniqueEntities",value:function(){var a=[];return function e(t){for(var n in t){if(t[n].entities)for(var r=0;r<t[n].entities.length;r++)-1===a.indexOf(t[n].entities[r])&&a.push(t[n].entities[r]);t[n].children&&e(t[n].children)}}(this.map),a}},{key:"getUniqueEntities",value:function(e){return(0,o.dependencyMatch)(e,this.map).reduce(function(e,t){return(t.entities||[]).reduce(function(e,t){return-1===e.indexOf(t)?e.concat(t):e},e)},[])}}]),i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.map={}}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=s(n(535)),y=s(n(536)),_=n(47),b=s(n(447)),w=s(n(537)),S=s(n(538));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,o.default),r(E,[{key:"getModel",value:function(){return this.model}},{key:"getState",value:function(e){return this.model.get((0,_.ensurePath)((0,_.cleanPath)(e)))}},{key:"runSignal",value:function(n,e,t){var d=this,r=2<arguments.length&&void 0!==t?t:{};!this.devtools||(0,_.isObject)(r)&&(0,_.isSerializable)(r)||(console.warn('You passed an invalid payload to signal "'+n+'". Only serializable payloads can be passed to a signal. The payload has been ignored. This is the object:',r),r={}),this.devtools&&(r=Object.keys(r).reduce(function(e,t){return(0,_.isSerializable)(r[t],d.devtools.allowedTypes)?e[t]=(0,_.forceSerializable)(r[t]):console.warn('You passed an invalid payload to signal "'+n+'", on key "'+t+'". Only serializable values like Object, Array, String, Number and Boolean can be passed in. Also these special value types:',d.devtools.allowedTypes),e},{})),this.run(n,e,r,function(e){if(e){var r=(0,_.ensurePath)(e.execution.name),t=r.reduce(function(e,t,n){return n===r.length-1&&e.signals[t]?e.signals[t].catch:e?e.modules[t]:null},d.module);if(!t){if(!(d.catch instanceof Map))throw e;t=d.catch}if(t instanceof Map){var n=!0,a=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var l=f(s.value,2),u=l[0],c=l[1];if(e instanceof u)return void d.runSignal("catch",c,e.payload)}}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}}throw e}})}},{key:"getSignal",value:function(e){var t=(0,_.ensurePath)(e),n=t.pop(),r=t.reduce(function(e,t){return e?e.modules[t]:void 0},this.module),a=r&&r.signals[n];return a&&a.run}},{key:"getSignals",value:function(e){var t=(0,_.ensurePath)(e).reduce(function(e,t){return e?e.modules[t]:void 0},this.module),n=t&&t.signals;if(n){var r={};for(var a in n){var o=n[a].run;r[a]=o}return r}}},{key:"addModule",value:function(e,t){var n=(0,_.ensurePath)(e),r=n.pop(),a=(0,_.getModule)(n,this.module),o=new y.default(this,(0,_.ensurePath)(e),t);(a.modules[r]=o).provider&&this.contextProviders.push(o.provider),this.emit("moduleAdded",e.split("."),o),this.flush()}},{key:"removeModule",value:function(e){if(!e)return console.warn("Controller.removeModule requires a Module Path"),null;var t=(0,_.ensurePath)(e),n=t.pop(),r=(0,_.getModule)(t,this.module),a=r.modules[n];a.provider&&this.contextProviders.splice(this.contextProviders.indexOf(a.provider),1),delete r.modules[n],this.emit("moduleRemoved",(0,_.ensurePath)(e),a),this.flush()}}]),E);function E(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(E.__proto__||Object.getPrototypeOf(E)).call(this)),n=e.state,r=void 0===n?{}:n,a=e.signals,o=void 0===a?{}:a,s=e.providers,i=void 0===s?[]:s,l=e.modules,u=void 0===l?{}:l,c=e.devtools,d=void 0===c?null:c,f=e.options,p=void 0===f?{}:f,g=e.stateChanges,h=void 0===g?"undefined"!=typeof window&&window.CEREBRAL_STATE:g,m=t.getSignal,v=t.getSignals;return t.getSignal=function(){(0,_.throwError)('You are grabbing a signal before controller has initialized, please wait for "initialized" event')},t.getSignals=function(){(0,_.throwError)('You are grabbing a signals before controller has initialized, please wait for "initialized" event')},t.options=p,t.catch=e.catch||null,t.devtools=d,t.module=new y.default(t,[],{state:r,signals:o,modules:u}),t.model=new e.Model(t),t.emit("initialized:model"),t.contextProviders=[(0,S.default)(t)].concat(t.devtools?[(0,w.default)()]:[]).concat((0,_.isDeveloping)()?[b.default]:[]).concat(t.model.StateProvider(t.devtools)).concat(i.concat((0,_.getProviders)(t.module))),h&&Object.keys(h).forEach(function(e){t.model.set((0,_.ensurePath)(e),h[e])}),t.devtools&&t.devtools.init(t),!t.devtools&&(0,_.isDeveloping)()&&"undefined"!=typeof navigator&&/Chrome/.test(navigator.userAgent)&&console.warn("You are not using the Cerebral devtools. It is highly recommended to use it in combination with the debugger: http://cerebraljs.com/docs/get_started/debugger.html"),t.getSignal=m,t.getSignals=v,t.emit("initialized"),t}t.default=i},function(e,t,n){e.exports=n(8)(84)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47);function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.default=function n(r,a,e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=a.join("."),o={controller:r,path:t,name:a.slice().pop()},s="function"==typeof e?e(o):e;return s.signals=Object.keys(s.signals||{}).reduce(function(e,t){var n=s.signals[t];return n||(0,i.throwError)('Signal with name "'+t+'" is undefined. Please check that the signal is set to either an array or a function.'),e[t]={signal:n.signal||n,catch:n.catch||r.catch?new Map([].concat(r.catch?[].concat(l(r.catch)):[]).concat(n.catch?[].concat(l(n.catch)):[])):null,run:function(e){r.runSignal(a.concat(t).join("."),n.signal||n,e)}},e},{}),s.modules=Object.keys(s.modules||{}).reduce(function(e,t){return e[t]=new n(r,a.concat(t),s.modules[t]),e},{}),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(i,t,n,r){var a=i.controller.devtools;return a.preventPropsReplacement&&Object.keys(n).forEach(function(e){if(r&&e in r&&r[e]!==n[e])throw new Error('Cerebral Devtools - You have activated the "preventPropsReplacement" option and in signal "'+i.execution.name+'", before the action "'+t.name+'", the key "'+e+'" was replaced')}),i.debugger={send:function(e){a.sendExecutionData(e,i,t,n)},wrapProvider:function(o){var s=i[o];i[o]=Object.keys(s).reduce(function(e,r){var a=s[r];return e[r]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.debugger.send({method:o+"."+r,args:t}),a.apply(s,t)},e[r].direct=a.bind(s),e},"function"==typeof s?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.debugger.send({method:""+o,args:t}),s.apply(s,t)}:{})}},i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){return function(e){return e.controller=t,e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,u=n(47),s=n(540);var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,((o=s)&&o.__esModule?o:{default:o}).default),r(c,[{key:"updateIn",value:function(a,o,e){var s=this,i=2<arguments.length&&void 0!==e&&e;a.length?a.reduce(function(e,t,n){var r;return n===a.length-1?(Array.isArray(e)||(0,u.isObject)(e)||(0,u.throwError)('The path "'+a.join(".")+'" is invalid. Path: "'+a.slice(0,a.length-1).join(".")+'" is type of "'+(null===e?"null":void 0===e?"undefined":l(e))+'"'),r=e[t],o(e[t],e,t),(e[t]!==r||(0,u.isComplexObject)(e[t])&&(0,u.isComplexObject)(r))&&s.changedPaths.push({path:a,forceChildPathUpdates:i})):e[t]||(e[t]={}),e[t]},this.state):o(this.state,this,"state")}},{key:"verifyValue",value:function(e,t){this.devtools&&!(0,u.isSerializable)(e,this.devtools.allowedTypes)&&(0,u.throwError)('You are passing a non serializable value into the state tree on path "'+t.join(".")+'"'),this.devtools&&(0,u.forceSerializable)(e),this.devtools&&this.devtools.warnStateProps&&(0,u.addCerebralStateKey)(e)}},{key:"verifyValues",value:function(e,t){var n=this;this.devtools&&e.forEach(function(e){n.verifyValue(e,t)})}},{key:"get",value:function(e){return(0<arguments.length&&void 0!==e?e:[]).reduce(function(e,t){return e?e[t]:void 0},this.state)}},{key:"set",value:function(e,r){this.verifyValue(r,e),this.updateIn(e,function(e,t,n){t[n]=r},!0)}},{key:"toggle",value:function(e){this.updateIn(e,function(e,t,n){t[n]=!e})}},{key:"push",value:function(e,t){this.verifyValue(t,e),this.updateIn(e,function(e){e.push(t)})}},{key:"merge",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=Object.assign.apply(Object,n);if(this.get(e))for(var o in a)this.set(e.concat(o),a[o]);else this.set(e,a)}},{key:"pop",value:function(e){this.updateIn(e,function(e){e.pop()})}},{key:"shift",value:function(e){this.updateIn(e,function(e){e.shift()})}},{key:"unshift",value:function(e,t){this.verifyValue(t,e),this.updateIn(e,function(e){e.unshift(t)})}},{key:"splice",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.verifyValues(n,e),this.updateIn(e,function(e){e.splice.apply(e,n)})}},{key:"unset",value:function(e){this.updateIn(e,function(e,t,n){delete t[n]},!0)}},{key:"concat",value:function(e,r){this.verifyValue(r,e),this.updateIn(e,function(e,t,n){t[n]=e.concat(r)})}},{key:"increment",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:1;if(!Number.isInteger(r))throw new Error("Cerebral state.increment: you must increment with integer values.");this.updateIn(e,function(e,t,n){if(!Number.isInteger(e))throw new Error("Cerebral state.increment: you must increment integer values.");t[n]=e+r})}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.devtools=e.devtools,t.state=t.devtools&&t.devtools.warnStateProps?(0,u.addCerebralStateKey)(t.initialState):t.initialState,e.on("initialized",function(){t.flush()}),t}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,s=n(47),i=n(541),l=(o=i)&&o.__esModule?o:{default:o};var u=(r(c,[{key:"onModuleAdded",value:function(e,t){this.set(e,t.state)}},{key:"onModuleRemoved",value:function(e){this.unset(e)}},{key:"flush",value:function(){var e=this.changedPaths.slice();return this.changedPaths=[],e}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.initialState=Object.assign(e.module.state,(0,s.extractModulesProp)(e.module.modules,"state")),this.StateProvider=l.default,this.changedPaths=[],e.on("moduleAdded",this.onModuleAdded.bind(this)),e.on("moduleRemoved",this.onModuleRemoved.bind(this))}t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(47);t.default=function(e){var t=["concat","get","increment","merge","pop","push","set","shift","splice","toggle","unset","unshift"],n=null;return function(l,u){var o,s,i;return l.state=n=n||(s=(o=l).controller.model,i=null,t.reduce(function(e,a){return e[a]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,c.ensurePath)((0,c.cleanPath)(t.shift()));return"get"===a?s.get(r):(clearTimeout(i),i=setTimeout(function(){return o.controller.flush()}),s[a].apply(s,[r].concat(t)))},e},{})),l.debugger&&(l.state=t.reduce(function(e,s){var i;return"get"===s||"compute"===s?e[s]=n[s]:(i=n[s],e[s]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.slice(),a=(0,c.ensurePath)(r.shift());l.debugger.send({datetime:Date.now(),type:"mutation",color:"#333",method:s,args:[a].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))});try{i.apply(l.controller.model,t)}catch(e){var o=l.execution.name;(0,c.throwError)('The Signal "'+o+'" with action "'+u.name+'" has an error: '+e.message)}}),e},{})),l}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.composeSignals=function(e){var t=[],n={};return e.forEach(function(e){!function t(e,n,r){if("inProgress"===r[e.name])throw new Error("cyclic dependencies found");if("done"===r[e.name])return;r[e.name]="inProgress";e.depends&&e.depends.length&&e.depends.forEach(function(e){t(e,n,r)});n.push(e);r[e.name]="done"}(e,t,n)}),t.reduce(function(e,t){var n=l(t)+"/",r=t.signals||{};return Object.keys(r).reduce(function(e,t){return e[t]=(e[t]||[]).concat(u(n,r[t]||[])),e},e)},{})},t.composeInitialDataSignal=function(e){var r=[];return e.forEach(function(e){var t=l(e)+"/",n=e.signals&&e.signals.INITIAL_DATA;n&&(u(t,n),r.push([n]))}),r},t.composeServices=function(e,r){return e.reduce(function(e,t){var n=t.getServices&&t.getServices(r)||{};return Object.keys(n).reduce(function(e,t){if(void 0!==e[t])throw new Error("conflict key: "+t+" in services");return e[t]=n[t],e},e)},{})},t.composeState=function(e,r){return e.reduce(function(e,t){var n=t.getState&&t.getState(r||{})||{};return Object.keys(n).reduce(function(e,t){if(void 0!==e[t])throw new Error("conflict key: "+t+" in state");return e[t]=n[t],e},e)},{})};var r=i(n(543)),a=i(n(544)),o=i(n(148)),s=i(n(545));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.name,n=t.lastIndexOf("/")+1,r=t.lastIndexOf(".");return r<0&&(r=t.length),t.substr(n,r-n)}function u(t,e){return e.forEach(function(e){if((0,r.default)(e))e.displayNamePrcessed||(e.displayNamePrcessed=!0,e.displayName=t+function(e){if(e.displayName)return e.displayName;var t=e.toString();return t=(t=t.substr("function ".length)).substr(0,t.indexOf("("))}(e));else if((0,a.default)(e))u(t,e);else{if(!(0,o.default)(e))throw Error("unknown action: "+e);u(t,(0,s.default)(e))}}),e}},function(e,t,n){e.exports=n(8)(160)},function(e,t,n){e.exports=n(8)(243)},function(e,t,n){e.exports=n(8)(1089)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(547);n.d(t,"applyPolyfills",function(){return r.a});var a,o=n(548);n.d(t,"defineCustomElements",function(){return o.a}),void 0!==window.Reflect&&void 0!==window.customElements&&(a=HTMLElement,window.HTMLElement=function(){return Reflect.construct(a,[],this.constructor)},HTMLElement.prototype=a.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,a))},function(e,t,n){"use strict";t.a=function(){var e=window,t=[];e.customElements&&(!e.Element||e.Element.prototype.closest&&e.Element.prototype.matches&&e.Element.prototype.remove)||t.push(n.e(1).then(n.bind(null,1039)));"function"==typeof Object.assign&&Object.entries&&Array.prototype.find&&Array.prototype.includes&&String.prototype.startsWith&&String.prototype.endsWith&&(!e.NodeList||e.NodeList.prototype.forEach)&&e.fetch&&function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(e){return}}()&&"undefined"!=typeof WeakMap||t.push(n.e(0).then(n.bind(null,1040)));return Promise.all(t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(514),a=function(e,t){return Object(r.a)().then(function(){Object(r.b)([["drop-down_4",[[1,"unity-account-switcher",{config:[1],_config:[32],_user:[32],_otherUsers:[32],_showDropdown:[32],_loginDialog:[32],_accountsLoading:[32],_height:[32],_windowHeight:[32]},[[8,"click","handleClick"]]],[1,"drop-down",{users:[16],menuItems:[16],loading:[4],logoutRedirectURL:[1,"logout-redirect-u-r-l"],currentUser:[16],userProfileURL:[1,"user-profile-u-r-l"],clientID:[1,"client-i-d"],switchAccountRidirectURL:[1,"switch-account-ridirect-u-r-l"],_editModeAccountID:[32],_showAllAccounts:[32]}],[1,"login-dialog",{loginRedirectURL:[1,"login-redirect-u-r-l"],dialogData:[16],clientID:[1,"client-i-d"],_loading:[32]}],[1,"user-avatar",{user:[16],size:[1]}]]]],t)})}},function(e,t,n){var r={"./drop-down_4.entry.js":[1041,3]};function a(e){var t=r[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}a.keys=function(){return Object.keys(r)},a.id=549,e.exports=a},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=["header","tooltips"];t.default={name:e,depends:[],signals:{tooltipShow:[function(e){var t=e.props;e.state.set([].concat(n,[t.id]),t)}],tooltipHide:[function(e){var t=e.props;e.state.unset([].concat(n,[t.id]))}]},getState:function(){return{tooltips:{}}}}}).call(t,"views/modules/common/header/TooltipStore.js")},function(e,n,r){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var s=t(r(23)),i=t(r(150));function t(e){return e&&e.__esModule?e:{default:e}}var l=["header","popouts"];function a(e){var t,n=e.props,r=e.state,a=r.get(l),o=a[n.id];o&&(t=!1,s.default.forEach(a,function(e){return e.dependsOn!==n.id||!(t=!0)}),t||(i.default.remove(o.popoutElementId),r.unset([].concat(l,[n.id]))))}n.default={name:e,depends:[],signals:{popoutOpen:[function(e){var t=e.props,n=e.state,r=n.get(l);s.default.forEach(r,function(e){t.dependsOn&&e.id!==t.id||a({input:e,state:n})}),n.set([].concat(l,[t.id]),t)}],popoutClose:[a],popoutUpdate:[function(e){e.state.set(["header","popoutsTicks"],Date.now())}]},getState:function(){return{popouts:{},popoutsTicks:0}}}}).call(n,"views/modules/common/header/PopoutStore.js")},function(e,r,_){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=t(_(119)),p=t(_(120)),g=t(_(121)),h=_(6);t(_(69));function t(e){return e&&e.__esModule?e:{default:e}}var m=["header","inPageNotification"],v=_(50),y=1;function n(o,s){return function(e){var t=e.props,n=e.state,r=t.id,a=n.get(m).map(function(e){return e.id===r?i({},e,{show:o,toRemove:s}):e});n.set(m,a)}}r.default={name:e,depends:[],signals:{inPageNotificationNotice:[function(e){var t,n,r,a,o,s,i,l,u=e.props,c=e.state,d=_(40).get("DesktopNotificationNotice.dismissed");f.default.hasPermission()&&!d||(t=c.get(m),n=c.get(),r=u.type,o=(a=u.data).role,s=(0,g.default)(r,o,a),i=(0,h.i18n)(n,p.default,r+"_"+o+"_text",a),l={tag:"notifications",onClick:function(){window.focus();var e=s;e+=(-1<e.indexOf("?")?"&":"?")+"_nid="+u.id,window.location.href=e}},t.length===y&&(t=t.slice(0,t.length-1)),c.set(m,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t),[{id:u.id,icon:v,title:"Unity Play",body:i,options:l,show:!1,toRemove:!1,type:r,data:a}])))}],requestInPageNotificationShow:[n(!0,!1)],requestInPageNotificationHide:[n(!1,!1)],requestInPageNotificationToRemove:[n(!1,!0)],requestInPageNotificationRemove:[function(e){var t=e.props,n=e.state,r=t.id,a=n.get(m);n.set(m,a.filter(function(e){return e.id!==r}))}]},getState:function(){return{inPageNotification:[]}}}}).call(r,"views/modules/common/header/InPageNotificationStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=t+":"+n,a=c[r];a=a||(c[r]=new i.default(t,null,function(o){return{number:function(e,t,n){return l.default.culture(f(t,"numbro")||"en-US"),(0,l.default)(e).format(n)},unNumber:function(e,t){return l.default.culture(f(t,"numbro")||"en-US"),(0,l.default)().unformat(e)},date:function(e,t,n){var r=(0,u.default)(e);o&&r.utcOffset(parseInt(o,10));var a=f(t);return a&&r.locale(a),r.format(n||"ll")},monthDay:function(e,t,n){var r=(0,u.default)(e);o&&r.utcOffset(parseInt(o,10));var a=f(t);return a&&r.locale(a),r.format(n||"MMM D")},time:function(e,t,n){var r=(0,u.default)(e);o&&r.utcOffset(parseInt(o,10));var a=f(t);return a&&r.locale(a),r.format(n||"LT")},datetime:function(e,t,n){var r=(0,u.default)(e);o&&r.utcOffset(parseInt(o,10));var a=f(t);return a&&r.locale(a),r.format(n||"lll")},fromNow:function(e,t,n){var r=(0,u.default)(e);o&&r.utcOffset(parseInt(o,10));var a=f(t);return a&&r.locale(a),r.fromNow(n&&!0)},fromNowShort:function(e,t){var n=(0,u.default)(e);o&&n.utcOffset(parseInt(o,10));var r=f(t);return r&&n.locale(r),n.fromNow(!0)},toNow:function(e,t,n){var r=(0,u.default)(e);o&&r.utcOffset(parseInt(o,10));var a=f(t);return a&&r.locale(a),r.toNow(n&&!0)},calendar:function(e,t){var n=(0,u.default)(e);o&&n.utcOffset(parseInt(o,10));var r=f(t);return r&&n.locale(r),n.calendar()},timeMonthYear:function(e,t,n){var r=(0,u.default)(e);if(5e3<=r.year())return"Present";o&&r.utcOffset(parseInt(o,10));var a=f(t);return a&&r.locale(a),"zh-cn"===a?r.format(n||"YYYY  MMM"):r.format(n||"MMM  YYYY")}}}(n)));var o=d[t];o=o||(d[t]={});var s=o[e];s=s||(o[e]=a.compile(e));return{format:s}};var i=r(n(554)),l=r(n(151)),u=r(n(48)),o=r(n(15));function r(e){return e&&e.__esModule?e:{default:e}}var c={},d={};function f(e,t){var n=1<arguments.length&&void 0!==t?t:"moment",r=void 0;if(Array.isArray(e))for(var a=0;a<e.length&&!(r="moment"===n?o.default.MOMENT_LOCALE[e[a]]:o.default.NUMBRO_LOCALE[e[a]]);a++);else r="moment"===n?o.default.MOMENT_LOCALE[e]:o.default.NUMBRO_LOCALE[e];return r}},function(e,t,n){e.exports=n(8)(1097)},function(e,s,l){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t=o(["loginUser.expandKey"],["loginUser.expandKey"]),n=o(["key"],["key"]),r=l(9),a=l(0);function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var i=["header","setting"];s.default={name:e,depends:[],signals:{nop:[function(){}],setHeaderPosition:[function(e){var t=e.props,n=e.state,r=t.headerTop,a=t.scrollTop;n.merge(i,{headerTop:r,scrollTop:a})}],setCurrHeaderTop:[function(e){var t=e.props,n=e.state,r=t.currHeaderTop;n.merge(i,{currHeaderTop:r})}],messagesOpen:[function(e){var t=e.state;t.get([].concat(i,["messagesOpen"]))||t.set([].concat(i,["messagesOpen"]),!0)}],messagesClose:[function(e){var t=e.state;t.get([].concat(i,["messagesOpen"]))&&t.set([].concat(i,["messagesOpen"]),!1)}],setWindowSize:[function(e){var t,n,r,a,o,s=e.state;(window||document)&&(t=window&&window.innerWidth||document&&(document.documentElement.clientWidth||document.body.clientWidth),n=window&&window.innerHeight||document&&(document.documentElement.clientHeight||document.body.clientHeight),a=(r=s.get(i)).windowWidth,o=r.windowHeight,t===a&&n===o||s.merge(i,{windowWidth:t,windowHeight:n}))}],sideMenuOpen:[function(e){var t=e.state;t.get([].concat(i,["sideMenuOpen"]))||t.set([].concat(i,["sideMenuOpen"]),!0)}],sideMenuClose:[function(e){var t=e.state;t.get([].concat(i,["sideMenuOpen"]))&&t.set([].concat(i,["sideMenuOpen"]),!1)}],appSwitcherOpen:[function(e){var t=e.state;t.get([].concat(i,["appSwitcherOpen"]))||t.set([].concat(i,["appSwitcherOpen"]),!0)}],appSwitcherClose:[function(e){var t=e.state;t.get([].concat(i,["appSwitcherOpen"]))&&t.set([].concat(i,["appSwitcherOpen"]),!1)}],setExpandKey:[(0,r.set)((0,a.state)(t),(0,a.props)(n))]},getServices:function(e){window.addEventListener("resize",function(){e.getSignal("header.setWindowSize")()})},getState:function(){return{setting:{headerHeight:72,headerTop:0,scrollTop:0,currHeaderTop:0,windowWidth:0,windowHeight:0,sideMenuOpen:!1,messagesOpen:!1,appSwitcherOpen:!1}}}}}).call(s,"views/modules/common/header/HeaderSettingStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=["header","popupMessages"];t.default={name:e,depends:[],signals:{showMessage:[function(e){var t=e.props,n=e.state,r=t||{},a=r.params,o=void 0===a?{}:a,s={message:r.message,type:r.type,duration:2,lastClicking:Date.now(),params:o};n.set(i,s)}],hideMessage:[function(e){e.state.set([].concat(i,["duration"]),0)}]},getServices:function(){return{}},getState:function(){return{popupMessages:{}}}}}).call(t,"views/modules/common/header/PopupMessageStore.js")},function(e,s,l){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t=a(l(51)),n=a(l(52)),r=a(l(31)),i=a(l(19));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t,n,r,a=e.props,o=e.state,s=e.controller;"/jobs/0/new"===o.get("currentPath")?s.getSignal("job.closeRecruit")():(r=(t=a.query)?"/jobs/0/new?"+t:"/jobs/0/new","home"===(n=a.source)?s.getSignal("header.sendCDPRequest")({type:"post",data:{postType:"job"},redirectUrl:r}):"header"===n?s.getSignal("header.sendCDPRequest")({type:"menu",data:{menuType:"jobs",subtype:"post_jobs"},redirectUrl:r}):(0,i.default)(r))}s.default={name:e,depends:[],signals:{postJob:r.default.LoginRequired(n.default.EmailRequired(t.default.TfaNotified(o,"header.postJobInternal"))),postJobInternal:[o]},getServices:function(){},getState:function(){return{}}}}).call(s,"views/modules/common/header/PostJobStore.js")},function(e,f,p){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t=u(["header.postProject.teamId"],["header.postProject.teamId"]),n=u(["header.postProject.challengeId"],["header.postProject.challengeId"]),r=p(9),a=p(0),y=l(p(43)),_=l(p(19)),o=l(p(51)),s=l(p(52)),i=l(p(31));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var b=["header","postProject"];function c(e){var t=e.props,n=e.state,r=t.teamId,a=t.challengeId;r&&n.set([].concat(b,["teamId"]),r),a&&n.set([].concat(b,["challengeId"]),a),n.set([].concat(b,["open"]),!0)}function d(e){var t,n,r=e.props,a=e.state,o=e.controller,s=r.type,i=r.skipPopup,l=void 0!==i&&i,u=r.groupId,c=void 0===u?"":u,d=r.source,f=a.get([].concat(b)),p=f.teamId,g=f.challengeId,h="/p/0/new?type="+s,m=r.teamId||p,v=r.challengeId||g;m&&(h+="&teamId="+m),v&&(h+="&challengeId="+v),c&&(h+="&groupId="+c),!0===l?"home"===d?(t={postType:s},o.getSignal("header.sendCDPRequest")({type:"post",data:t,redirectUrl:h})):(0,_.default)(h):("home"===d?(n={postType:s},o.getSignal("header.sendCDPRequest")({type:"post",data:n,redirectUrl:h})):(0,y.default)(h),a.merge(b,{noAnimation:!0,open:!1}))}f.default={name:e,depends:[],signals:{openCreateDialog:i.default.LoginRequired(s.default.EmailRequired(c)),openCreateDialogInternal:[c],closeCreateDialog:[function(e){e.state.set(b,{open:!1})},(0,r.set)((0,a.state)(t),""),(0,r.set)((0,a.state)(n),"")],createProjectByType:s.default.EmailRequired(o.default.TfaNotified(d,"header.createProjectByTypeInternal")),createProjectByTypeInternal:[d],toggleSelectGame:[function(e){var t=e.state,n=t.get("header.postProject.isSelectGameMode");t.set("header.postProject.isSelectGameMode",!n)}]},getState:function(){return{postProject:{open:!1,isSelectGameMode:!1,teamId:"",challengeId:""}}}}}).call(f,"views/modules/common/header/PostProjectStore.js")},function(e,i,l){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t=o(l(51)),n=o(l(52)),r=o(l(31)),a=o(l(19));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t,n,r=e.props;"/s/0/new"!==e.state.get("currentPath")&&(n=(t=r.query)?"/s/0/new?"+t:"/s/0/new",(0,a.default)(n))}i.default={name:e,depends:[],signals:{postSchool:r.default.LoginRequired(n.default.EmailRequired(t.default.TfaNotified(s,"header.postSchoolInternal"))),postSchoolInternal:[s]},getServices:function(){},getState:function(){return{}}}}).call(i,"views/modules/common/header/PostSchoolStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:e,depends:[],signals:{INITIAL_DATA:[function(e){var t=e.state,n=e.http,r=e.path;return t.get("currentUserId")?n.get("/api/user/current").then(r.success).catch(r.error):r.dummy()},{success:[function(e){var t=e.props,n=e.state,r=t.result;200===t.status&&r&&(n.set("loginUser",r),r.emailRequired&&n.set("header.setting.headerHeight",100))}],dummy:[]}]},getServices:function(){},getState:function(){return{}}}}).call(t,"views/modules/common/header/LoginUserStore.js")},function(e,a,o){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["header.browserConfirmDialog.open"],{raw:{value:Object.freeze(["header.browserConfirmDialog.open"])}})),n=o(9),r=o(0);a.default={name:e,depends:[],signals:{openBrowserConfirmDialog:[(0,n.set)((0,r.state)(t),!0)],closeBrowserConfirmDialog:[(0,n.set)((0,r.state)(t),!1)]},getState:function(){return{browserConfirmDialog:{open:!1}}}}}).call(a,"views/modules/common/header/BrowserCheckStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:e,depends:[],signals:{weixinConfig:[function(e){var t,n,r,a,o,s=e.state.get("weixinConfig");s&&wx&&(t=s.appId,n=s.timestamp,r=s.nonceStr,a=s.signature,o=s.debug,wx.config({appId:t,timestamp:n,nonceStr:r,signature:a,debug:o,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),wx.ready(function(){!function(e){{var t,n,r;e&&wx&&(t=e.title,n=e.link,r=e.imgUrl,wx.onMenuShareTimeline({title:t,link:n,imgUrl:r}))}}(s),function(e){{var t,n,r,a;e&&wx&&(t=e.title,n=e.desc,r=e.link,a=e.imgUrl,wx.onMenuShareAppMessage({title:t,desc:n,link:r,imgUrl:a}))}}(s),function(e){{var t,n,r,a;e&&wx&&(t=e.title,n=e.desc,r=e.link,a=e.imgUrl,wx.onMenuShareQQ({title:t,desc:n,link:r,imgUrl:a}))}}(s),function(e){{var t,n,r,a;e&&wx&&(t=e.title,n=e.desc,r=e.link,a=e.imgUrl,wx.onMenuShareWeibo({title:t,desc:n,link:r,imgUrl:a}))}}(s),function(e){{var t,n,r,a;e&&wx&&(t=e.title,n=e.desc,r=e.link,a=e.imgUrl,wx.onMenuShareQZone({title:t,desc:n,link:r,imgUrl:a}))}}(s)}),wx.error(function(e){return console.log(e)}))}]},getState:function(){return{}}}}).call(t,"views/modules/common/header/WeixinConfigStore.js")},function(e,r,t){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var i="header.deleteConfirmDialog";function n(n,r){return function(e){var t=e.props;e.state.set(i,{open:!0,signalPath:n,actionProps:t,type:r})}}function t(e){e.state.set(i,{open:!1,signalPath:"",actionProps:{},type:"default",loadingStatus:""})}r.default={name:e,depends:[],signals:{openDeleteConfirm:[n],closeDeleteConfirm:[t],doConfirmDelete:[function(e){var t=e.state,n=e.controller,r=t.get(i),a=r.signalPath,o=r.actionProps,s=n.getSignal(a);s&&s(o)},t]},getServices:function(){},getState:function(){return{deleteConfirmDialog:{open:!1,type:"default",signalPath:"",actionProps:{}}}},DeleteConfirmed:function(e,t){return[n(e,1<arguments.length&&void 0!==t?t:"default")]}}}).call(r,"views/modules/common/header/DeleteConfirmStore.js")},function(e,u,c){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=l(["header.getRecentSearchStatus"],["header.getRecentSearchStatus"]),r=l(["header.deleteSearchLogStatus"],["header.deleteSearchLogStatus"]),a=c(9),o=c(0),s=c(7),i=(t=s)&&t.__esModule?t:{default:t};function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}u.default={name:e,depends:[],signals:{getRecentSearch:[(0,a.set)((0,o.state)(n),i.default.inProgress),function(e){var t=e.http,n=e.path;return t.get("/api/search/recentSearch").then(n.success).catch(n.error)},{success:[(0,a.set)((0,o.state)(n),i.default.succeeded),function(e){var t=e.state,n=e.props.result;n&&t.set("header.recentSearch",n.keywords||[])}],error:[(0,a.set)((0,o.state)(n),i.default.failed)]}],deleteSearchLog:[(0,a.set)((0,o.state)(r),i.default.inProgress),function(e){var t,n=e.state,r=e.props,a=r.keyword,o=r.deleteAll;void 0!==o&&o?n.set("header.recentSearch",[]):0<=(t=n.get("header.recentSearch").findIndex(function(e){var t=e.keyword;return a===t}))&&n.splice("header.recentSearch",t,1)},[function(e){var t=e.props,n=e.http,r=e.path,a=t.keyword,o=t.deleteAll,s=void 0!==o&&o;return n.post("/api/search/deleteSearchLog",{keyword:a,deleteAll:s}).then(r.success).catch(r.error)},{success:[(0,a.set)((0,o.state)(r),i.default.succeeded)],error:[(0,a.set)((0,o.state)(r),i.default.failed)]}]],initSearchData:[function(e){var t=e.controller;t.getSignal("header.getRecentSearch")(),t.getSignal("header.getPopularSearch")()}]},getState:function(){return{recentSearch:[]}}}}).call(u,"views/modules/common/header/RecentSearchStore.js")},function(e,i,l){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t,n=Object.freeze(Object.defineProperties(["header.getPopularSearchStatus"],{raw:{value:Object.freeze(["header.getPopularSearchStatus"])}})),r=l(9),a=l(0),o=l(7),s=(t=o)&&t.__esModule?t:{default:t};i.default={name:e,depends:[],signals:{getPopularSearch:[(0,r.set)((0,a.state)(n),s.default.inProgress),function(e){var t=e.http,n=e.path;return t.get("/api/search/popularSearch").then(n.success).catch(n.error)},{success:[(0,r.set)((0,a.state)(n),s.default.succeeded),function(e){var t=e.state,n=e.props.result;n&&t.set("header.popularSearch",n)}],error:[(0,r.set)((0,a.state)(n),s.default.failed)]}]},getState:function(){return{popularSearch:[]}}}}).call(i,"views/modules/common/header/PopularSearchStore.js")},function(e,b,w){"use strict";(function(e){Object.defineProperty(b,"__esModule",{value:!0});var t=g(["header.groupBaseDataStatus"],["header.groupBaseDataStatus"]),n=g(["",".updateStatus"],["",".updateStatus"]),r=g(["",".show"],["",".show"]),a=w(9),o=w(0),f=w(21),s=w(7),i=d(s),l=w(11),p=d(w(19)),u=d(w(43)),c=d(w(78));function d(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var m=["header","createGroupDialog"],v=[].concat(m,["form"]);function y(n){return[function(e){var t=e.props;return{field:[].concat(h(v),[n]),value:t.value,touched:!0}}].concat(h(f.chains.fieldChanged))}function _(e){var t=e||{},n=t.id,r=t.avatar,a=t.name,o=t.categoryIds,s=t.description,i=t.privacy,l=t.preferredLanguages,u=t.tags,c=t.unityLicense,d=l&&0<l.length&&l[0]||"";return(0,f.Form)({id:{value:n},avatar:{value:r,validations:["isValue"],errorMessages:["error_isRequired"],isRequired:!0},name:{value:a,validations:["isValue","maxLength:60"],errorMessages:["error_isRequired","error_maxLength60"],isRequired:!0},category:{value:o&&0<o.length&&o[0]||"",validations:["isValue"],errorMessages:["error_isRequired"],isRequired:!0},description:{value:s,validations:["isValue","maxLength:1000"],errorMessages:["error_isRequired","error_maxLength1000"],isRequired:!0},privacy:{value:i,validations:["isValue"],errorMessages:["error_isRequired"],isRequired:!0},language:{value:d},tags:{value:u||[]},unityLicense:{value:c}})}b.default={name:e,depends:[],signals:{getGroupBaseData:[(0,a.set)((0,o.state)(t),i.default.inProgress),function(e){var t=e.http,n=e.path;return t.get("/api/group/0/getGroupOptions",{isCreate:!0}).then(n.success).catch(n.error)},{success:[function(e){var t=e.state,n=e.props.result,r=n.categoryOptions,a=n.languageOptions;t.set("header.groupCategory",r),t.set("header.languageOptions",a)},(0,a.set)((0,o.state)(t),i.default.succeeded)],error:[(0,a.set)((0,o.state)(t),i.default.failed)]}],changeGroupAvatar:y("avatar"),changeGroupName:y("name"),changeGroupCategory:y("category"),changeDescription:y("description"),changePrivacyField:y("privacy"),changeLanguage:y("language"),changeLicense:y("unityLicense"),changePrivacy:[function(e){var t=e.props,n=e.controller,r=t.value;n.getSignal("header.changePrivacyField")({value:r}),n.getSignal("header.changeLicense")({value:""})}],changeTags:y("tags"),addTag:[function(e){var t,n=e.props,r=e.state,a=e.controller,o=n.value,s=o.id,i=r.get([].concat(h(v),["tags"])).value;i.findIndex(function(e){return e===s})<0&&(10<=i.length?a.getSignal("header.showMessage")({message:"project_tags_limit"}):((t=[].concat(h(i))).unshift(s),a.getSignal("header.changeTags")({value:t}),r.set([].concat(m,["skillMap",s]),o)))}],deleteTag:[function(e){var t,n=e.props,r=e.state,a=e.controller,o=n.value,s=r.get([].concat(h(v),["tags"])).value,i=s.findIndex(function(e){return e===o});0<=i&&((t=[].concat(h(s))).splice(i,1),a.getSignal("header.changeTags")({value:t}))}],createGroup:[function(e){return e.props.formPath?{}:{formPath:[].concat(h(v))}}].concat(h(f.chains.formValidated),[function(e){var t=e.state,n=e.path,r=t.get(v);return(0,f.isValidForm)(r)?n.yes():n.no()},{yes:[(0,a.set)((0,o.state)(n,m.join(".")),i.default.inProgress),[function(e){var t=e.state,n=e.http,r=e.path,a=t.get(v);if((0,f.isValidForm)(a)){var o={id:a.id.value,avatar:a.avatar.value,name:a.name.value,category:a.category.value,description:a.description.value,privacy:a.privacy.value,language:a.language.value,tags:a.tags.value,unityLicense:a.unityLicense.value},s=c.default.getRequestHeaderOption(t);return n.post("/api/group/0/create",o,s).then(r.success).catch(r.error)}return r.dummy()},{success:[(0,a.set)((0,o.state)(n,m.join(".")),i.default.succeeded),function(e){var t,n,r=e.state,a=e.props,o=e.controller,s=a.isEdit,i=void 0!==s&&s,l=a.result,u=l.group,c=l.skillMap,d=l.languageMap;i?(r.set(["group","group"],u),r.merge(["group","skillMap"],c||{}),r.merge(["group","languageMap"],d||{}),o.getSignal("header.closeCreateGroupDialog")()):(t=u.id,n=u.slug,(0,p.default)("/g/"+(n||t)+"?setup=true"))}],error:[(0,a.set)((0,o.state)(n,m.join(".")),i.default.failed),function(e){var t=e.props,n=e.controller,r=(t.result||{}).errorCode;"DuplicateParameter"===r?n.getSignal("header.showMessage")({message:"group_name_duplicate"}):c.default.recaptchaError(r,n)||(0,l.onError)("group")({props:t,controller:n})}],dummy:[]}]],no:[]}]),openCreateGroupDialog:[function(e){var t=e.state,n=e.props,r=n.group,a=n.skillMap;r&&t.set([].concat(m,["isEdit"]),!0),a&&t.set([].concat(m,["skillMap"]),a),t.set(v,_(r))},function(e){var t=e.state,n=e.controller,r=t.get("header.groupCategory")||[],a=t.get("header.groupBaseDataStatus");0!==r.length||(0,s.isLoadingOrSucceeded)(a)||n.getSignal("header.getGroupBaseData")()},(0,a.set)((0,o.state)(r,m.join(".")),!0),(0,a.set)((0,o.state)(n,m.join(".")),i.default.initial)],closeCreateGroupDialog:[(0,a.set)((0,o.state)(r,m.join(".")),!1)],closePaymentResultDialog:[function(e){var t=e.state,n=e.props.refresh;t.set("header.paymentResultDialog.show",!1),n&&window.location.reload()}],buyLicense:[function(e){var t=e.state;(0,u.default)("https://store.unity.com/","_blank"),t.set("header.paymentResultDialog.show",!0)}]},getState:function(){return{createGroupDialog:{show:!1,isEdit:!1,form:_()},groupCategory:[],languageOptions:[],paymentResultDialog:{show:!1}}}}}).call(b,"views/modules/common/header/CreateGroupStore.js")},function(e,t,n){"use strict";var r=n(123);e.exports=function(t){return(t=t||{}).rules&&Object.keys(t.rules).forEach(function(e){r[e]=t.rules[e]}),function(e,t){e.alias("cerebral-module-forms"),e.addSignals({fieldAdded:n(448),fieldRemoved:n(451),fieldChanged:{chain:n(452),immediate:!0},formAdded:n(575),formRemoved:n(577),formValidated:n(456),reset:n(457)})}}},function(e,t,n){"use strict";var a=n(39);e.exports=function(e){var t=e.props,n=e.state,r=a(t.fieldPath);n.unset(r)}},function(e,t,n){"use strict";var o=n(39);e.exports=function(e){var t=e.props,n=e.state,r=o(t.field).concat("isTouched"),a=n.get(r);n.set(r,t.touched||a||!1)}},function(e,t,n){"use strict";var a=n(39);e.exports=function(e){var t=e.props,n=e.state,r=a(t.field);n.set(r.concat("value"),t.value)}},function(e,t,n){"use strict";var l=n(450),u=n(39);e.exports=function(e){var t=e.props,n=e.state,r=u(t.field),a=r.slice(),o=a.pop(),s=n.get(a),i=s[o];n.set(r.concat("hasValue"),l(s,i.value,i.isValue))}},function(e,t,n){"use strict";var o=n(453),s=n(39);e.exports=function(e){var t=e.props,n=e.state,r=s(t.field).slice(),a=n.get(r);n.merge(r,{isValid:t.preventValidation?a.isValid:!o(a),errorMessage:null})}},function(e,t,n){"use strict";function r(e){var t=e.state.get(e.props.field);return!e.props.preventValidation&&t.validations&&t.hasValue?e.path.yes():e.path.no()}r.outputs=["yes","no"],e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t){for(var n="."===t[0]||".."===t[0]?0:1,r=arguments[n].slice(),a=1+n;a<arguments.length;a++)r=arguments[a].reduce(function(e,t){return"."===t?e:".."===t?e.slice(0,-1):e.concat(t)},r);return r}},function(e,t,n){"use strict";e.exports=[n(576)]},function(e,t,n){"use strict";var o=n(455),s=n(39);e.exports=function(e){var t=e.props,n=e.state,r=s(t.formPath).slice(),a=n.get(r);Array.isArray(a)?n.push(r,o(t.formDetails)):n.set(r,o(t.formDetails))}},function(e,t,n){"use strict";e.exports=[n(578)]},function(e,t,n){"use strict";var s=n(39);e.exports=function(e){var t=e.props,n=e.state,r=s(t.formPath).slice(),a=n.get(r),o=r.pop();Array.isArray(a)?n.splice(r,o,1):n.unset(r.concat(o))}},function(e,t,n){"use strict";var l=n(453),u=n(155),c=n(39);e.exports=function(e){function r(t,n){Object.keys(n).forEach(function(e){Array.isArray(n[e])?o(t.concat(e),n[e]):"value"in n[e]?i(t.concat(e),n,e):r(t.concat(e),n[e])})}var t=e.props,s=e.state,n=c(t.formPath).slice(),a=s.get(n),o=function(n,e){e.forEach(function(e,t){r(n.concat(t),e)})},i=function(e,t,n){var r=t[n],a=u(t,r.value,r.validations),o=a.isValid&&!l(r);s.merge(e,{isValid:o,errorMessage:o?null:r.errorMessages[a.failedRuleIndex],isTouched:!0})};r(n,a)}},function(e,t,n){"use strict";var i=n(154),l=n(39);e.exports=function(e){function a(r){return Object.keys(r).reduce(function(e,n){var t;return Array.isArray(r[n])?e[n]=s(r[n]):"value"in r[n]?((t=Object.keys(r[n]).reduce(function(e,t){return e[t]=r[n][t],e},{})).value=t.defaultValue,e[n]=i(r,t)):e[n]=a(r[n]),e},{})}var t=e.props,n=e.state,r=l(t.formPath).slice(),o=n.get(r),s=function(e){return e.reduce(function(e,t,n){return e[n]=a(t),e},[])};n.set(r,a(o))}},function(e,t,n){"use strict";var r=n(458),a=n(582);e.exports=function(e){return r(e,a)}},function(e,t,n){"use strict";e.exports=function(e){return e.isValid&&(!e.isRequired||e.isRequired&&e.hasValue)}},function(e,t,n){"use strict";var r=n(458),a=n(584);e.exports=function(e){return r(e,a)}},function(e,t,n){"use strict";e.exports=function(e){return e.isValidating}},function(e,t,n){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.prototype.hasOwnProperty;e.exports=function(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":s(e))||null===e||"object"!==(void 0===t?"undefined":s(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=i.bind(t),o=0;o<n.length;o++)if(!a(n[o])||e[n[o]]!==t[n[o]])return!1;return!0}},function(e,f,g){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t=u(["header.matching.editRequestFormStatus"],["header.matching.editRequestFormStatus"]),n=u(["header.matching.widgetShow"],["header.matching.widgetShow"]),r=u(["header.matching.closeQuestionStatus"],["header.matching.closeQuestionStatus"]),a=g(9),o=g(0),p=l(g(48)),s=l(g(53)),i=l(g(7));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=void 0;function d(e){var t=e.state.get("header.matching.question").id;(0,s.default)("/client/question/?questionId="+t)}f.default={name:e,depends:[],signals:{INITIAL_DATA:[function(e){return e.path.dummy()},{success:[function(e){var t,n,r,a,o,s=e.state,i=e.props.result,l=i.question,u=i.users,c=i.acceptedUser,d=i.totalWithoutBudget,f=i.waitingFinished;l&&(t=l.matchingStartTime,n=l.status,r=l.type,a=parseInt((0,p.default)().diff((0,p.default)(t))/1e3,10),o=s.get("currentPath"),s.set("header.matching.question",l),s.set("header.matching.users",u||[]),s.set("header.matching.acceptedUser",c),s.set("header.matching.seconds",a),s.set("header.matching.totalWithoutBudget",d),s.set("header.matching.waitingFinished",f),-1!==o.indexOf("/matching")||-1!==o.indexOf("/workspace")||"realtime"!==r||"matching"!==n&&"matching_finished"!==n&&"accepted"!==n||s.set("header.matching.widgetShow",!0))}],dummy:[]}],matchingResultReceived:[function(e){var t=e.state,n=e.props,r=n.users,a=n.total;t.set("header.matching.users",r||[]),t.set("header.matching.question.requests",a)}],matchingFinishedResultReceived:[function(e){var t=e.state,n=e.props,r=n.users,a=n.total,o=n.totalWithoutBudget;t.set("header.matching.users",r||[]),t.set("header.matching.totalWithoutBudget",o),t.set("header.matching.question.status","matching_finished"),t.set("header.matching.question.requests",a)}],matchingWaitingFinishedResultReceived:[function(e){var t=e.state,n=e.props.totalWithoutBudget;t.set("header.matching.totalWithoutBudget",n),t.set("header.matching.waitingFinished",!0)}],requestAccepted:[function(e){var t,n=e.state,r=e.props.acceptedUser,a=(n.get("header.matching.question")||{}).id;a&&(t=n.get("currentPath"),n.merge("header.matching.question",{acceptedUserId:r.id,status:"accepted"}),n.set("header.matching.acceptedUser",r),-1!==t.indexOf("/matching")&&(0,s.default)("/workspace/"+a))}],requestDeclined:[function(e){var t=e.state,n=e.props,r=n.requests,a=n.declinedRequests,o=n.status;t.merge("header.matching.question",{requests:r,declinedRequests:a,status:o})}],startMatchingTimer:[function(e){var t=e.controller;c=setInterval(function(){return t.getSignal("header.increaseSeconds")()},1e3)}],increaseSeconds:[function(e){var t=e.state,n=t.get("header.matching.seconds");t.set("header.matching.seconds",n+1)}],endTimer:[function(){c&&clearInterval(c)}],onEditRequestForm:[(0,a.set)((0,o.state)(t),i.default.inProgress),function(e){var t=e.http,n=e.path;return t.post("/api/livehelp/editResponse",{source:"waiting_screen"}).then(n.success).catch(n.error)},{success:[d],error:[d]}],closeMatchingWidget:[(0,a.set)((0,o.state)(n),!1)],continueWaiting:[function(e){var t=e.state,n=e.http,r=e.path,a=t.get("header.matching.question").id;return n.post("/api/livehelp/client/continueWaiting",{questionId:a}).then(r.success).catch(r.error)},{success:[function(e){e.state.set("header.matching.waitingFinished",!1)}]}],closeQuestion:[(0,a.set)((0,o.state)(r),i.default.inProgress),[function(e){var t=e.state,n=e.http,r=e.path,a=(t.get("header.matching").question||{}).id;return n.post("/api/livehelp/client/closeQuestion",{id:a}).then(r.success).catch(r.error)},{success:[(0,a.set)((0,o.state)(r),i.default.succeeded),function(e){e.controller.getSignal("header.closeMatchingWidget")()}],error:[(0,a.set)((0,o.state)(r),i.default.failed)],dummy:[]}]]},getServices:function(){},getState:function(){return{matching:{users:[],totalWithoutBudget:0,seconds:0,widgetShow:!1}}}}}).call(f,"views/ods/modules/header/MatchingStore.js")},function(e,o,s){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["header.ongoingSession.show"],{raw:{value:Object.freeze(["header.ongoingSession.show"])}})),n=s(9),r=s(0);function a(e){var t=e.state,n=72;t.get("header.ongoingSession.show")&&(n+=46),t.get("header.unpaidSession.show")&&(n+=46),t.get("header.desktopNotification.show")&&(n+=46),t.set("header.setting.headerHeight",n)}o.default={name:e,depends:[],signals:{INITIAL_DATA:[function(e){return e.path.dummy()},{success:[function(e){var t=e.state,n=e.props.result,r=n.question,a=n.user;r&&(t.set("header.ongoingSession.question",r),t.set("header.ongoingSession.user",a),t.set("header.ongoingSession.show",!0))},a],dummy:[]}],closeOngoingSessionWidget:[(0,n.set)((0,r.state)(t),!1),a]},getServices:function(){},getState:function(){return{ongoingSession:{show:!1}}},updateHeaderHeight:a}}).call(o,"views/ods/modules/header/OngoingSessionStore.js")},function(e,r,a){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var i=t(a(19)),l=t(a(43));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.props,n=e.controller,r=t.redirectUrl,a=t.loginRequired,o=t.popup,s=void 0!==o&&o;r&&(a?n.getSignal("header.loginTo")({url:r}):(!0===s?(0,l.default):(0,i.default))(r))}r.default={name:e,depends:[],signals:{sendCDPRequest:[function(e){var t=e.props,n=e.http,r=e.path,a=t.type,o=t.eventType,s=t.data;return n.post("/api/cdp",{type:a,eventType:o,data:s}).then(r.success).catch(r.error)},{success:[n],error:[n]}]},getState:function(){}}}).call(r,"views/modules/common/header/CDPStore.js")},function(e,u,c){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=l(["header.clipboardTip.show"],["header.clipboardTip.show"]),r=l(["header.clipboardTip.copied"],["header.clipboardTip.copied"]),a=c(9),o=c(0),s=c(590),i=(t=s)&&t.__esModule?t:{default:t};function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}u.default={name:e,depends:[],signals:{copyLink:[(0,a.set)((0,o.state)(n),!0),(0,a.set)((0,o.state)(r),!0),function(e){var t=e.state,n=e.props.content;(0,i.default)(n),setTimeout(function(){t.set("header.clipboardTip.copied",!1),setTimeout(function(){t.set("header.clipboardTip.show",!1)},500)},2e3)}]},getServices:function(){},getState:function(){return{clipboardTip:{show:!1,copied:!1}}}}}).call(u,"views/ods/modules/header/ClipboardTipStore.js")},function(e,t,n){e.exports=n(8)(607)},function(e,s,i){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t=o(["footer.height"],["footer.height"]),n=o(["height"],["height"]),r=i(9),a=i(0);function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}s.default={name:e,depends:[],signals:{setHeight:[(0,r.set)((0,a.state)(t),(0,a.props)(n))]},getState:function(){return{height:0}}}}).call(s,"views/v2/modules/footer/FooterStore.js")},function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var i=/language=[a-zA-Z]{2,}/i;function t(){var e=window&&window.location&&window.location.href;i.test(e)?window.location.href=e.replace(i,""):window.location.reload()}n.default={name:e,depends:[],signals:{languageChange:[[function(e){var t=e.props,n=e.state,r=e.path,a=e.http,o=t.locale;if(o===n.get("locale")){var s=window&&window.location&&window.location.href;if(!i.test(s))return r.dummy()}return a.post("/api/changeLanguage",{locale:o}).then(r.success).catch(r.error)},{success:[t],error:[],dummy:[]}]],regionChange:[[function(e){var t=e.props,n=e.path,r=e.http,a=t.regionRefId;return r.post("/api/changePreferredRegion",{regionRefId:a}).then(n.success).catch(n.error)},{success:[t],error:[]}]],switchLangStatus:[function(e){var t=e.state,n=e.props;t.set("footer.langStatus",n.open)}],switchRegionStatus:[function(e){var t=e.state,n=e.props;t.set("footer.regionStatus",n.open)}]},getState:function(){return{langStatus:!1,regionStatus:!1}}}}).call(n,"views/v2/modules/footer/LanguageChooseStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=[].concat(["messages"],["currentTab"]);t.default={name:e,depends:[],signals:{switchTab:[function(e){var t=e.props,n=e.state,r=t.tab;n.set(a,r)}]},getState:function(){return{currentTab:"conversations"}}}}).call(t,"views/v2/modules/messages/TabStore.js")},function(e,f,p){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t=d(["messages.showContent"],["messages.showContent"]),n=d(["messages.displayMobileMore"],["messages.displayMobileMore"]),r=d(["value"],["value"]),a=d(["messages.showSideBar"],["messages.showSideBar"]),o=c(p(33)),s=c(p(81)),i=p(26),l=p(9),u=p(0);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}f.default={name:e,depends:[o.default],signals:{channelSelect:[function(e){var t=e.props,n=e.state,r=t.channelId;s.default.isConnected(n)&&r&&(0,i.isTouch)()&&n.set("messages.showContent",!0)}],hideContent:[(0,l.set)((0,u.state)(t),!1)],openExplore:[(0,l.set)((0,u.state)(t),!0)],toggleMobileMore:[(0,l.set)((0,u.state)(n),(0,u.props)(r))],stopExplore:[(0,l.set)((0,u.state)(t),!1)],toggleSideBar:[(0,l.set)((0,u.state)(a),(0,u.props)(r))],syncFromLocation:[(0,l.set)((0,u.state)(a),!0)]},getState:function(){return{contentType:"friends-list",displayAddMember:!1,isNewAddMember:!1,showContent:!1,displayMobileMore:!1,showSideBar:!0}},getContentType:function(e){return e.get(contentTypeKey)}}}).call(f,"views/v2/modules/messages/ContentStore.js")},function(e,t,n){e.exports=n(8)(991)},function(e,t,n){e.exports=n(8)(972)},function(e,t,n){e.exports=n(8)(971)},function(e,t,n){e.exports=n(8)(970)},function(e,t,n){e.exports=n(8)(969)},function(e,t,n){e.exports=n(8)(968)},function(e,t,n){e.exports=n(8)(967)},function(e,t,n){e.exports=n(8)(966)},function(e,t,n){e.exports=n(8)(965)},function(e,t,n){e.exports=n(8)(964)},function(e,t,n){e.exports=n(8)(963)},function(e,t,n){e.exports=n(8)(947)},function(e,t,n){e.exports=n(8)(946)},function(e,t,n){e.exports=n(8)(945)},function(e,t,n){e.exports=n(8)(944)},function(e,t,n){e.exports=n(8)(943)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=w(["loginUser"],["loginUser"]),i=w(["messages.users"],["messages.users"]),l=w(["messages.channels"],["messages.channels"]),u=w(["messages.channelMembers"],["messages.channelMembers"]),c=w(["project.mentionUsers"],["project.mentionUsers"]),d=w(["messages.showUserCard"],["messages.showUserCard"]),f=b(n(2)),m=b(n(1)),p=b(n(12)),g=b(n(3)),h=n(5),v=n(0),y=b(n(4)),_=b(n(613));function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var S=(0,h.decorator)({loginUser:(0,v.state)(s),users:(0,v.state)(i),channels:(0,v.state)(l),allChannelMembers:(0,v.state)(u),messageUsers:(0,v.state)(i),projectUsers:(0,v.state)(c),showUserCard:(0,v.signal)(d)})(r=(0,y.default)(_.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,g.default),a(E,[{key:"onMsgMentionClick",value:function(e){e.stopPropagation();var t=p.default.findDOMNode(this.refs.mention).getBoundingClientRect(),n=t.left,r=t.top,a=t.width,o=t.height,s=this.props;(0,s.showUserCard)({user:s.users[s.userId],src:"mention",pos:{left:n,top:r,height:o,width:a}})}},{key:"renderMessageMention",value:function(){var e,t=this,n=this.props,r=n.userId,a=n.channels,o=n.allChannelMembers,s=n.mentioned,i=n.children,l=n.messageUsers,u=n.channelId,c=n.loginUser,d=n.authorIsAdmin,f=c.id,p=l[r],g=o[u],h=a[u];return h&&"direct"!==h.type&&("@everyone"===r||p&&g)&&("@everyone"!==r||"lobby"!==h.type||d)?p&&p.id?(e=f===r,m.default.createElement("span",{ref:"mention",className:this.ss("highlight",s&&"mentioned",e&&"mentionSelf"),onClick:function(e){return t.onMsgMentionClick(e)}},p?"@"+p.fullname:i)):m.default.createElement("span",{className:this.ss("highlight",s&&"mentioned","mentionSelf")},p?"@"+p.fullname:i):m.default.createElement("span",null,i)}},{key:"renderProjectMention",value:function(){var e,t=this.props,n=t.projectUsers,r=t.mentioned,a=t.children,o=n[t.userId],s=void 0;return s=o&&o.id?(e="/u/"+o.id,m.default.createElement("a",{href:e,target:"_blank"},o?"@"+o.fullname:a)):m.default.createElement("a",null,o?"@"+o.fullname:a),m.default.createElement("span",{className:this.ss("highlight",r&&"mentioned")},s)}},{key:"renderFeedProjectMention",value:function(){var e,t=this.props,n=t.mentionUser,r=t.mentioned,a=t.children,o=void 0;return o=n&&n.id?(e="/u/"+n.id,m.default.createElement("a",{href:e,target:"_blank"},n?"@"+n.fullname:a)):m.default.createElement("a",null,n?"@"+n.fullname:a),m.default.createElement("span",{className:this.ss("highlight",r&&"mentioned")},o)}},{key:"render",value:function(){var e=this.props.mentionType;return"message"===e?this.renderMessageMention():"project"===e||"post"===e?this.renderProjectMention():this.renderFeedProjectMention()}}]),E.propTypes={userId:f.default.string.isRequired,channelId:f.default.string,messageId:f.default.string,authorIsAdmin:f.default.bool,users:f.default.object,channels:f.default.object,loginUser:f.default.object,allChannelMembers:f.default.object,messageUsers:f.default.object,projectUsers:f.default.object,mentioned:f.default.bool.isRequired,children:f.default.any,mentionType:f.default.string.isRequired,mentionUser:f.default.object,currentUserId:f.default.string,showUserCard:f.default.func},r=E))||r)||r;function E(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}t.default=S},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(23),l=(r=a)&&r.__esModule?r:{default:r};e.exports=function(s){return function(){for(var e=[],t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;a++){var o=n[a];o&&"string"==typeof o?e.push(o):o&&"object"===(void 0===o?"undefined":i(o))&&(e=e.concat(Object.keys(o).filter(function(t){return function(e){return t[e]}}(o))))}return l.default.map(e.join(" ").split(" "),function(e){return s[e]||e}).join(" ")||void 0}}},function(e,t){e.exports={highlight:"highlight_21JavRta",mentioned:"mentioned_2u67lrWI",mentionSelf:"mentionSelf_2WnojLFz"}},function(e,t){},function(e,t,n){e.exports=n(8)(1096)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=l(n(617)),s=l(n(54)),i=l(n(147));function l(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,o.default),r(c,[{key:"isFull",value:function(){return this.queue.length>=this.maxSize}},{key:"drain",value:function(e,t){var n=e.type,r=e.message;switch(n){case"send":this.handleSend(r,t);break;case"edit":this.handleEdit(r,t);break;case"delete":this.handleDelete(r,t);break;default:t()}}},{key:"handleResponse",value:function(t){return function(e){t(null,e)}}},{key:"handleSend",value:function(e,t){var n=e.channelId,r=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["channelId"]);i.default.post("/api/channels/"+n+"/messages",r).then(this.handleResponse(t)).catch(this.handleResponse(t))}},{key:"handleEdit",value:function(e,t){var n=e.messageId,r=e.content;i.default.post("/api/messages/"+n,{content:r}).then(this.handleResponse(t)).catch(this.handleResponse(t))}},{key:"handleDelete",value:function(e,t){var n=e.messageId;e.deleteAsAdmin?i.default.post("/api/messages/"+n+"/adminDelete",{}).then(this.handleResponse(t)).catch(this.handleResponse(t)):i.default.post("/api/messages/"+n+"/delete",{}).then(this.handleResponse(t)).catch(this.handleResponse(t))}}]),c);function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,{logger:s.default.create("MessageQueue")}));return t.maxSize=e,t}t.default=new u},function(e,a,c){"use strict";(function(s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=t(c(620));function t(e){return e&&e.__esModule?e:{default:e}}var l=t(c(54)).default.create("Queue"),n=(e(u,[{key:"enqueue",value:function(e,t,n,r){var a=2<arguments.length&&void 0!==n?n:null,o=3<arguments.length&&void 0!==r?r:null;this.queue.push({message:e,completed:t,progress:a,started:o}),this._drainIfNecessary()}},{key:"_drainIfNecessary",value:function(){var e,r,a,o=this;null===this.timeout&&0!==this.queue.length&&!0!==this.draining&&(this.draining=!0,e=this.queue.shift(),r=e.message,a=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["message"]),this.drain(r,function(e,t){if(o.draining=!1,e){var n=e.retryAfter||o.defaultRetryAfter;o.logger.info("Rate limited. Delaying draining of queue for "+n+" ms."),o.timeout=setTimeout(function(){o.queue.unshift(i({message:r},a)),o.timeout=null,o._drainIfNecessary()},n)}else{s(function(){return o._drainIfNecessary()});try{a.completed(t)}catch(e){console.error(e)}}},a.progress))}},{key:"drain",value:function(){throw Error("Not Implemented")}}]),u);function u(e){var t=e.defaultRetryAfter,n=void 0===t?100:t,r=e.logger,a=void 0===r?l:r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.queue=new o.default,this.timeout=null,this.draining=!1,this.defaultRetryAfter=n,this.logger=a}a.default=n}).call(a,c(618).setImmediate)},function(e,t,n){var r=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(619),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){e.exports=n(8)(662)},function(e,t,n){e.exports=n(8)(611)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=["messages","messagePop"];t.default={name:e,depends:[],signals:{changeMessagePopStatusToTrue:[function(e){e.state.set(n,!0)}],changeMessagePopStatusToFalse:[function(e){e.state.set(n,!1)}],popMessage:[function(e){var t=e.state;!1===t.get(n)&&t.set(n,!0)}]},getState:function(){return{messagePop:!1}},getMessagePopStatus:function(e){return e.get(n)}}}).call(t,"views/v2/modules/messages/MessagePopStore.js")},function(e,u,t){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t=["messages","filter"],n=[].concat(t,["conversations"]),r=[].concat(t,["projects"]),a=[].concat(t,["jobs"]),o=[].concat(t,["addMember"]),s=[].concat(t,["conversationsFilterFocus"]),i=[].concat(t,["mouseDownFlag"]);function l(r){return function(e){var t=e.state,n=e.props.value;t.set(r,n)}}u.default={name:e,depends:[],signals:{onConversationsFilterFocus:[function(e){e.state.set(s,!0)}],onConversationsFilterBlur:[function(e){var t=e.state;t.get(i)||t.set(s,!1)}],onConversationsFilterChanged:[l(n)],onProjectsFilterChanged:[l(r)],onJobsFilterChanged:[l(a)],onAddMemberFilterChanged:[l(o)],setMouseDownFlagToTrue:[function(e){e.state.set(i,!0)}],setMouseDownFlagToFalse:[function(e){e.state.set(i,!1)}]},getState:function(){return{filter:{conversationsFilterFocus:!1,mouseDownFlag:!1,conversations:"",projects:"",jobs:"",addMember:""}}}}}).call(u,"views/v2/modules/messages/MessagesFilterStore.js")},function(e,_,b){"use strict";(function(e){Object.defineProperty(_,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=n(b(25)),l=n(b(463)),u=b(158);function n(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var p=4,g=5,i=6,a=7,r=8,h=(0,t.default)({RINGING:null,IN_CALL:null}),o=["messages","call"],m=[].concat(o,["ringing"]),v=[].concat(o,["callInfo"]),y=[].concat(o,["voiceServerInfoAPI"]);function s(e){e.state.set(["messages","call","notSupportedTip"],!0)}_.default={name:e,depends:[l.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.controller,r=e.state,a=t.ringings,o=t.voiceServerInfoAPI;r.set(y,o),a.forEach(function(e){return n.getSignal("messages.onRingingStart")(e)})}],channelSelect:[function(e){var t,n=e.props,r=e.state,a=e.messages,o=n.channelId,s=a.socket,i=r.get(["messages","channels"])[o];i&&("direct"!==(t=i.type)&&"private"!==t||s.send(p,{channelId:o}))}],createCall:[function(e){var t=e.path,n=!0;return void 0===(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)&&(n=!1),void 0===(window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription)&&(n=!1),n?t.yes():t.no()},{yes:[function(e){var t=e.props,n=e.state,r=e.controller,a=e.http,o=e.path,s=t.channelId,i=n.get(y);return r.getSignal("messages.onVoiceStateStart")({sessionId:n.get("messages.sessionId"),userId:n.get("loginUser.id"),channelId:s,fakeSig:!0}),a.get(i).then(o.success).catch(o.error)},{success:[function(e){var t=e.props,n=e.messages,r=e.state,a=n.socket,o=t.result.serverId,s=t.channelId,i=l.default.selfMute(r);a.send(g,{channelId:s,selfMute:i,voiceServerId:o})}],error:[function(e){var t=e.props,n=e.state,r=e.controller,a=t.channelId;r.getSignal("messages.onVoiceStateEnd")({sessionId:n.get("messages.sessionId"),userId:n.get("loginUser.id"),channelId:a,fakeSig:!0})}]}],no:[s]}],showNotSupportedTip:[s],hideNotSupportedTip:[function(e){e.state.set(["messages","call","notSupportedTip"],!1)}],updateCall:[function(e){var t=e.props,n=e.messages,r=t.channelId,a=t.isSpeaking,o=t.selfMute;n.socket.send(g,{channelId:r,updateOnly:!0,isSpeaking:a,selfMute:o})}],quitCall:[function(e){var t=e.props,n=e.state,r=e.messages,a=e.controller,o=t.channelId,s=r.socket;a.getSignal("messages.onVoiceStateEnd")({sessionId:n.get("messages.sessionId"),userId:n.get("loginUser.id"),channelId:o,fakeSig:!0}),s.send(i,{channelId:o})}],declineCall:[function(e){var t=e.props,n=e.messages,r=t.channelId;n.socket.send(a,{channelId:r})}],onCallInfo:[function(e){var t=e.props,n=e.controller,r=t.ringings;t.voiceStates.forEach(function(e){return n.getSignal("messages.onVoiceStateStart")(e)}),r.forEach(function(e){return n.getSignal("messages.onRingingStart")(e)})}],onRingingStart:[function(e){var t,n=e.props,r=e.state,a=n.channelId,o=n.userId;r.get(["loginUser","id"])===o&&((t=r.get(m)).find(function(e){return e.channelId===a})||r.set(m,[].concat(f(t),[n])));var s=r.get([].concat(f(v),[a]))||{};s[o]||r.set([].concat(f(v),[a]),c({},s,d({},o,{status:h.RINGING})))}],onRingingStop:[function(e){var t,n,r,a=e.props,o=e.state,s=a.channelId,i=a.userId;o.get(["loginUser","id"])!==i||(n=(t=o.get(m)).find(function(e){return e.channelId===s}))&&((r=[].concat(f(t))).splice(r.indexOf(n),1),o.set(m,r));var l,u=o.get([].concat(f(v),[s]));u&&u[i]&&u[i].status===h.RINGING&&(delete(l=c({},u))[i],o.set([].concat(f(v),[s]),l))}],onVoiceStateStart:[function(e){var t=e.props,n=e.state,r=t.channelId,a=t.userId,o=t.updateOnly,s=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["channelId","userId","updateOnly"]),i=n.get([].concat(f(v),[r]));if(o){if(!i||!i[a]||i[a].status!==h.IN_CALL)return}else i&&i[a]&&i[a].status===h.IN_CALL||a!==n.get(["loginUser","id"])&&n.get("messages.window.isMaster")&&(0,u.playSound)("User_Join",.4);n.set([].concat(f(v),[r]),c({},i,d({},a,c({},i&&i[a],s,{status:h.IN_CALL}))))}],onVoiceStateEnd:[function(e){var t,n=e.props,r=e.state,a=n.channelId,o=n.userId,s=r.get([].concat(f(v),[a]));s&&s[o]&&(delete(t=c({},s))[o],r.set([].concat(f(v),[a]),t),o!==r.get(["loginUser","id"])&&r.get("messages.window.isMaster")&&(0,u.playSound)("User_Leave",.4))}],onVoiceConnState:[function(e){var t=e.props,n=e.messages.socket;"VOICE_DISCONNECTED"===t.state&&(0,u.playSound)("Voice_Disconnected",.4),"DISCONNECTED"===t.state&&t.payload&&t.payload.willReconnect&&n.send(r,{})}]},getState:function(){return{call:{ringing:[],callInfo:{},voiceServerInfoAPI:"",notSupportedTip:!1}}}}}).call(_,"views/v2/modules/messages/CallStore.js")},function(e,t,n){var r={"./Incoming_Ring.mp3":159,"./Message.mp3":625,"./Mute.mp3":626,"./Outgoing_Ring.mp3":160,"./Unmute.mp3":627,"./User_Join.mp3":628,"./User_Leave.mp3":629,"./Voice_Disconnected.mp3":630};function a(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}a.keys=function(){return Object.keys(r)},a.resolve=o,(e.exports=a).id=624},function(e,t,n){e.exports=n.p+"../styles/sound/Message.e85a9218a4cb32862969882888550546.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/Mute.e158dcdd686665a230616d98c0438583.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/Unmute.6b260aea3a1cd0ed9f0c79c7234b74d3.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/User_Join.05c7c9c4dce52b8a2dea07ed0290a4df.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/User_Leave.bf99d24febc0eae6d1d33ece76e775ad.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/Voice_Disconnected.811d5bc4f2caa4014a53e4aae6d468a1.mp3"},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(d,[{key:"_update",value:function(){this.currentVolume=function(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var r=4;r<t.length;r++)t[r]>n&&t[r]<0&&(n=t[r]);return n}(this.analyser,this.fftBins),this.speakingHistory[this.speakingHistoryIndex]&&this.speakingCounter--;var e=this.currentVolume>this.threshold;(this.speakingHistory[this.speakingHistoryIndex]=e)&&this.speakingCounter++,++this.speakingHistoryIndex===this.speakingHistory.length&&(this.speakingHistoryIndex=0),0<this.speakingCounter?this.silentFrames=0:this.silentFrames++}},{key:"stop",value:function(){this.source.disconnect(),this.processor.disconnect(),this.speakingCounter=0}},{key:"speaking",get:function(){return 0<this.speakingCounter||this.silentFrames<this.silenceThreshold}}]),d);function d(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-40,r=this,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.1,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:10;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var s=e.createAnalyser();s.fftSize=512,s.smoothingTimeConstant=a;var i=e.createMediaStreamSource(t);i.connect(s);for(var l=[],u=0;u<o;u++)l.push(!1);var c=e.createScriptProcessor(1024,0,1);c.onaudioprocess=function(){r._update(),r.onProcess&&r.onProcess(r.speaking,r.currentVolume)},c.connect(e.destination),this.threshold=n,this.analyser=s,this.processor=c,this.fftBins=new Float32Array(s.fftSize),this.source=i,this.currentVolume=0,this.speakingHistory=l,this.speakingHistoryIndex=0,this.speakingCounter=0,this.silenceThreshold=4*this.speakingHistory.length,this.silentFrames=this.silenceThreshold,this.onProcess=null}t.default=a},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=["messages","inProgressText"],i="InProgressText",l=n(40);t.default={name:e,depends:[],signals:{inProgressTextChange:[function(e){var t,n=e.props,r=e.state,a=n.channelId,o=n.textSoFar;r.set([].concat(s,[a]),o),t=r.get(s),l.set(i,t)}],connectionOpen:[function(e){var t=e.state,n=l.get(i)||{};t.set(s,n)}]},getState:function(){return{inProgressText:{}}}}}).call(t,"views/v2/modules/messages/InProgressTextStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n(83).EventEmitter),a(i,[{key:"destroy",value:function(){clearTimeout(this.pingTimeout),clearTimeout(this.checkTimeout),window.removeEventListener("storage",this,!1),window.removeEventListener("unload",this,!1),this.broadcast("bye")}},{key:"handleEvent",value:function(t){if("unload"===t.type)this.destroy();else if("__cross_tab_broadcast__"===t.key)try{var e=JSON.parse(t.newValue);e.id!==this.id&&this[e.type](e)}catch(e){console.error("error get __cross_tab_broadcast__",t,e)}}},{key:"sendPing",value:function(){this.broadcast("ping")}},{key:"hello",value:function(e){this.ping(e),e.id<this.id?this.check():this.sendPing()}},{key:"ping",value:function(e){this.others[e.id]=Date.now()}},{key:"bye",value:function(e){delete this.others[e.id],this.check()}},{key:"check",value:function(){var t=this,n=Date.now(),r=!0;Object.keys(this.others).forEach(function(e){t.others[e]+7e3<n?delete t.others[e]:e<t.id&&(r=!1)}),this.isMaster!==r&&(this.isMaster=r,this.emit("change",{isMaster:this.isMaster}))}},{key:"broadcast",value:function(e,t){var n=r({id:this.id,type:e},t);try{localStorage.setItem("__cross_tab_broadcast__",JSON.stringify(n))}catch(e){console.error("error set __cross_tab_broadcast__",n,e)}}}]),i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),e=window.location.pathname.startsWith("/messages")?"P0_":"P1_";t.id=e+Date.now()+"_"+Math.random().toString().slice(2),t.isMaster=!1,t.others={},window.addEventListener("storage",t,!1),window.addEventListener("unload",t,!1),t.broadcast("hello");t.checkTimeout=setTimeout(function e(){t.check(),t.checkTimeout=setTimeout(e,2e3)},500);return t.pingTimeout=setTimeout(function e(){t.sendPing(),t.pingTimeout=setTimeout(e,5e3)},5e3),t}t.default=s},function(e,t,n){e.exports=n(8)(1123)},function(e,o,s){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(s(23)),b=n(s(162)),p=n(s(163)),w=n(s(27)),t=n(s(35)),S=n(s(32)),E=n(s(42));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var O=["messages","textAreaAutocomplete"],a=["messages","mentionUserIds"],l=new RegExp("@|:|^/"),C=new RegExp("^/("+["jobs","freelancers","assets"].join("|")+")\\s(.+)","i"),k=/\t|\s/g,I=10;function g(e,t){return e.fullname<t.fullname?-1:e.fullname>t.fullname?1:0}function j(e,o,t,n){var s=3<arguments.length&&void 0!==n?n:I;o=o&&o.toLowerCase()||"";var i=new RegExp("^"+b.default.escape(o),"i"),l=[],u=[],c=w.default.getUsers(e),d=E.default.getMembers(e,t),f=S.default.getChannel(e,t);return(0,r.default)(d).values().takeWhile(function(e){var t=e.userId,n=c[t];if(!n)return!0;var r=d[n.id];if(!r)return!0;if("live"===f.type&&"owner"!==r.role&&"admin"!==r.role&&"moderator"!==r.role)return!0;var a=n.fullname.toLowerCase();return i.test(a)?l.push({fullname:a,user:n}):(0,p.default)(o,a)&&u.push({fullname:a,user:n}),l.length<s}).value(),l.sort(g),u.sort(g),l.concat(u.slice(0,Math.max(0,s-l.length))).map(function(e){return e.user})}o.default={name:e,depends:[w.default,t.default,E.default],signals:{maybeShowAutocomplete:[function(e){var t=e.props,u=e.state,c=e.controller,d=t.textAreaKey,f=t.textAreaType,p=t.value,n=t.selectionStart,g=t.selectionEnd,h=t.channelId,m=t.isDefaultWorkspace,v=[].concat(O,[d]),y=u.get(v),r=p.match(C);if(r){var a=r[1],o=r[2];if(y&&y.integration===a&&y.query===o)return;return u.set(v,{textAreaKey:d,textAreaType:f,type:"integration",integration:a,query:o,prefix:"",results:[],loading:!1,selectedIndex:0,selectionStart:0,selectionEnd:p.length}),void c.getSignal("messages.integrationSearch")({textAreaKey:d})}for(var _=n;0<=_;_--)if(l.test(p[_])){var s=function(){var e=p.slice(_,g);if(y&&y.prefix===e)return{v:void 0};function t(e){return n.test(e)}var n=new RegExp("^"+b.default.escape(e.slice(1)),"i"),r=void 0;if("@"===e[0]){0;var a=S.default.getChannel(u,h);if("lobby"===a.type&&m){var o=e.slice(1);if(y&&y.query===o)return{v:void 0};if(" "===o||1<(o.match(k)||[]).length)return"break";var s=j(u,e.slice(1),h),i=w.default.getCurrentUserId(u),l=E.default.getMember(u,a.id,i);return l&&("owner"===l.role||"admin"===l.role)&&t("everyone")&&s.push({content:"everyone"}),u.set(v,{textAreaKey:d,textAreaType:f,type:"mention",integration:"",query:o,prefix:e,results:s,loading:!1,selectedIndex:0,selectionStart:_,selectionEnd:g}),!a.groupId&&s.length<I&&c.getSignal("messages.mentionSearch")({textAreaKey:d,matchedActiveUsers:s}),{v:void 0}}if("direct"!==a.type)return r=j(u,e.slice(1),h),"live"!==a.type&&r.length<I&&t("everyone")&&r.push({content:"everyone"}),u.set(v,{textAreaKey:d,textAreaType:f,type:"mention",integration:"",query:"",prefix:e,results:r,loading:!1,selectedIndex:0,selectionStart:_,selectionEnd:g}),{v:void 0}}}();switch(s){case"break":break;default:if("object"===(void 0===s?"undefined":i(s)))return s.v}}y&&u.unset(v)}],textAreaAutocompleteUnset:[function(e){var t=e.props,n=e.state,r=t.textAreaKey,a=[].concat(O,[r]);n.get(a)&&n.unset(a)}],textAreaAutocompleteSelectPrev:[function(e){var t,n,r,a=e.props,o=e.state,s=a.textAreaKey,i=[].concat(O,[s]),l=o.get(i);l&&(t=l.results,n=l.loading,t&&t.length&&!n&&(r=l.selectedIndex,--r<0&&(r=t.length-1),o.set([].concat(d(i),["selectedIndex"]),r)))}],textAreaAutocompleteSelectNext:[function(e){var t,n,r,a=e.props,o=e.state,s=a.textAreaKey,i=[].concat(O,[s]),l=o.get(i);l&&(t=l.results,n=l.loading,t&&t.length&&!n&&(r=l.selectedIndex,++r>=t.length&&(r=0),o.set([].concat(d(i),["selectedIndex"]),r)))}],textAreaAutocompleteSelectIndex:[function(e){var t,n,r=e.props,a=e.state,o=r.textAreaKey,s=r.selectedIndex,i=[].concat(O,[o]),l=a.get(i);l&&(t=l.results,n=l.loading,t&&t.length&&!n&&0<=s&&s<t.length&&a.set([].concat(d(i),["selectedIndex"]),s))}],integrationSearch:[function(e){var t,n,r=e.props,a=e.state,o=e.services,s=r.textAreaKey,i=[].concat(O,[s]),l=a.get(i);l&&(t=l.integration,n=l.query,a.set([].concat(d(i),["loading"]),!0),o.http.post("/api/integrations/"+t+"/search",{q:n}).then(function(e){o.messages.getSignals().integrationSearchSuccess({textAreaKey:s,results:e.result})}).catch(function(){o.messages.getSignals().integrationSearchFailed({textAreaKey:s})}))}],integrationSearchSuccess:[function(e){var t=e.props,n=e.state,r=t.textAreaKey,a=t.results,o=[].concat(O,[r]);n.set([].concat(d(o),["loading"]),!1),n.set([].concat(d(o),["results"]),a)}],integrationSearchFailed:[function(e){var t=e.props,n=e.state,r=t.textAreaKey,a=[].concat(O,[r]);n.set([].concat(d(a),["loading"]),!1)}],addMentionUser:[function(e){var t=e.props,n=e.state,r=t.user;-1===n.get(a).indexOf(r.id)&&n.push(a,r.id)}],unsetMentionUserIds:[function(e){e.state.set(a,[])}],mentionSearch:[[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.textAreaKey,s=[].concat(O,[o]),i=n.get(s);if(!i)return a.dummy();var l=i.query,u=[];return u.push("q:"+l),r.get("/api/u",{k:JSON.stringify(u)}).then(function(e){return a.success(c({},t,e,{query:l}))}).catch(a.error)},{success:[function(e){var n,t,r=e.props,a=e.state,o=r.textAreaKey,s=r.matchedActiveUsers,i=r.query,l=r.result.items,u=[].concat(O,[o]);a.get([].concat(d(u),["query"]))===i&&(n=[].concat(d(s)),t=(l||[]).map(function(e){return{id:e.id,avatar:e.avatar,fullname:e.fullName,title:e.title}}),I>n.length&&t.slice(0,I-n.length).forEach(function(t){n.find(function(e){return e.id===t.id})||n.unshift(t)}),a.set([].concat(d(u),["results"]),n))}],error:[function(e){var t=e.props,n=e.state,r=t.textAreaKey,a=[].concat(O,[r]);n.set([].concat(d(a),["loading"]),!1)}],dummy:[]}]]},getState:function(){return{textAreaAutocomplete:{},mentionUserIds:[]}},getTextAreaAutocomplete:function(e,t){return e.get(O,t)}}}).call(o,"views/v2/modules/messages/TextAreaAutocompleteStore.js")},function(e,a,o){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var t,n=o(23),u=(t=n)&&t.__esModule?t:{default:t};var i=1e4,c=["messages","typingUsers"],l=["messages","typingTimestamps"];var r=void 0;function d(e){r=r||setTimeout(function(){r=void 0,e.getSignal("messages.typingCheckStop")()},.25*i)}a.default={name:e,depends:[],signals:{connectionOpen:[function(e){e.state.set(c,{})}],messageCreate:[function(e){var t=e.props,n=e.state,r=t.author.id,a=t.channelId,o=t.state,s=[].concat(c,[a]),i=n.get(s);i&&i.length!==(i=i.filter(function(e){return e.userId!==r})).length&&n.set(s,i),"SENDING"===o&&n.unset([].concat(l,[a]))}],typingStart:[function(e){var t=e.props,n=e.state,r=e.controller,a=t.userId,o=t.channelId,s=[].concat(c,[o]),i=(i=n.get(s)||[]).filter(function(e){return e.userId!==a}),l=u.default.sortedIndexBy(i,t,function(e){return e.timestamp});i.splice(l,0,t),n.set(s,i),d(r)}],typingCheckStop:[function(e){var t=e.state,n=e.controller,r=Date.now()-i,a=t.get(c),o=!1;Object.keys(a).forEach(function(e){var t=a[e];if(t.length){for(var n=u.default.sortedIndexBy(t,{timestamp:r},function(e){return e.timestamp});n<t.length&&t[n].timestamp<=r;)n++;n&&(o||(o=!0,a=u.default.clone(a)),a[e]=t.slice(n))}}),o&&t.set(c,a),Object.keys(a).forEach(function(e){a[e].length&&d(n)})}],typing:[function(e){var t=e.props,n=e.state,r=e.http,a=t.channelId,o=[].concat(l,[a]),s=n.get(o);(!s||Date.now()-s>=i/2)&&(n.set(o,Date.now()),r.post("/api/channels/"+a+"/typing"))}]},getState:function(){return{typingUsers:{},typingTimestamps:{}}}}}).call(a,"views/v2/modules/messages/TypingStore.js")},function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var t=["messages","jobFilter"],a=[].concat(t,["title"]),o=[].concat(t,["role"]);n.default={name:e,depends:[],signals:{changeJobsFilter:[function(e){var t=e.props,n=e.state,r=t.value;n.set(a,r)}],changeRole:[function(e){var t=e.props,n=e.state,r=t.role;n.set(o,r)}]},getState:function(){return{jobFilter:{role:"recruits",title:"all"}}}}}).call(n,"views/v2/modules/messages/JobFilterStore.js")},function(e,i,l){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=Object.freeze(Object.defineProperties(["messages.addMember.submitStatus"],{raw:{value:Object.freeze(["messages.addMember.submitStatus"])}})),O=a(l(35)),C=a(l(42)),k=a(l(462)),I=a(l(82)),j=a(l(55)),M=a(l(468)),T=a(l(32)),P=a(l(27)),x=a(l(125)),A=a(l(465)),n=l(9),r=l(0);function a(e){return e&&e.__esModule?e:{default:e}}var o=["messages","addMember"],D=[].concat(o,["displayAddMember"]),R=[].concat(o,["popoutPos"]),N=[].concat(o,["addUserList"]);function L(e,t,n){var r=1<arguments.length&&void 0!==t&&t,a=2<arguments.length&&void 0!==n&&n;return{id:e.id,fullname:e.fullname,avatar:e.avatar,presenceStatus:e.presenceStatus,isBot:e.isBot,selected:r,inChannel:a}}function s(e){var t=e.state;t.set(D,!1),t.set(N,{})}i.default={name:e,depends:[],signals:{showAddMember:[function(e){var t,n,r,a,o,s,i,l,u,c,d,f,p,g,h,m,v,y=e.props,_=e.state,b=y.isNew,w=y.pos,S=(t=b,n=_,f=O.default.getChannelId(n),p=j.default.getWorkspaceId(n),g=I.default.getWorkspace(n,p),h=!g||!g.organizationId,m={},v={},h?(r=M.default.getRelationships(n),Object.values(r).forEach(function(e){"accepted"===e.status&&(v[e.otherUserId]=L(P.default.getUser(n,e.otherUserId)))})):(a=k.default.getMembers(n,p),o=P.default.getCurrentUserId(n),Object.values(a).forEach(function(e){e.userId!==o&&(v[e.userId]=L(P.default.getUser(n,e.userId)))})),t?m=E({},v):f&&("direct"===(s=T.default.getChannel(n,f)).type?(m=E({},v),i=s.recipientId,m[i]=L(P.default.getUser(n,i),!0,!0)):"private"===s.type&&s.proposalId?(l=x.default.getChannelJob(n,s.id)).freelancerId!==P.default.getCurrentUserId(n)&&(u=A.default.getJobTeamMembers(n,l.id),c=C.default.getMembers(n,f),Object.values(u).forEach(function(e){m[e.id]=L(e,!1,!1)}),Object.values(c).forEach(function(e){m[e.userId]=L(P.default.getUser(n,e.userId),!0,!0)})):(m=E({},v),d=C.default.getMembers(n,f),Object.values(d).forEach(function(e){m[e.userId]=L(P.default.getUser(n,e.userId),!0,!0)}))),m);_.set(R,w),_.set(N,S),_.set(D,!0)}],hideAddMember:[s],addChannelPopoutSubmit:[(0,n.set)((0,r.state)(t),"inProgress"),[function(e){var t,n,r=e.state,a=e.controller,o=e.path,s=j.default.getWorkspaceId(r),i=r.get(N),l=Object.values(i).filter(function(e){return!0===e.selected&&!1===e.inChannel}).map(function(e){return e.id}),u=Object.values(i).filter(function(e){return!0===e.inChannel}).map(function(e){return e.id}),c=0===u.length,d=O.default.getChannelId(r),f=null,p=!1;return d&&(f=T.default.getChannel(r,d))&&"direct"===f.type&&(p=!0),0===l.length&&0===u.length?a.getSignal("messages.createGroupChannel")({selectedUserIds:l,workspaceId:s}):!c&&p&&-1===l.indexOf(f.recipientId)&&(l.push(f.recipientId),1===l.length)||(c&&1===l.length?(t=T.default.getWorkspaceChannels(r,s),(n=Object.values(t).find(function(e){return e.recipientId===l[0]}))?a.getSignal("messages.channelSelect")({channelId:n.id,workspaceId:n.workspaceId}):a.getSignal("messages.createDirectChannel")({recipientId:l[0],workspaceId:s})):(c||p)&&l?a.getSignal("messages.createGroupChannel")({selectedUserIds:l,workspaceId:s}):a.getSignal("messages.addChannelMembers")({selectedChannelId:d,userIds:l,role:"member"})),o.success()},{success:[s,(0,n.set)((0,r.state)(t),"succeeded")],error:[(0,n.set)((0,r.state)(t),"failed")]}]],toggleSelectUser:[function(e){var t,n,r,a,o,s=e.props,i=e.state,l=s.inChannel,u=s.userId;l||(t=i.get(N))&&t[u]&&((n=E({},t[u])).selected=!t[u].selected,i.merge(N,(r={},a=n.id,o=n,a in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,r)))}]},getState:function(){return{addMember:{addUserList:{},popoutPos:{},displayAddMember:!1}}}}}).call(i,"views/v2/modules/messages/AddUserListStore.js")},function(e,n,r){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var l=t(r(32)),u=t(r(35)),c=r(26);function t(e){return e&&e.__esModule?e:{default:e}}var d=[].concat(["messages"],["showInfoType"]);n.default={name:e,depends:[],signals:{channelReady:[function(e){var t=e.props,n=e.state,r=t.normalChannels;r&&r.find(function(e){return"live"===e.type})&&n.set(d,"liveChat")}],toggleInfo:[function(e){var t,n,r,a=e.props,o=e.state,s=e.controller,i=u.default.getChannelId(o);i?(t=l.default.getChannel(o,i),n=a.type,r=a.messageId,n&&("userInfo"===n?(0,c.isTouch)()?window.open("/u/"+t.recipientId,"_blank"):s.getSignal("messages.fetchUserInfo")({userId:t.recipientId}):"projectInfo"===n?(s.getSignal("messages.fetchProjectInfo")({projectId:t.projectId,channelId:t.id}),s.getSignal("messages.fetchChannelMember")({channelId:t.id})):"mention"===n?s.getSignal("messages.fetchMentionInfo")({channelId:t.id,firstLoad:!0}):"star"===n?s.getSignal("messages.fetchStarInfo")({channelId:t.id,firstLoad:!0}):"reply"===n?(s.getSignal("messages.clearShowInfo")(),s.getSignal("messages.fetchReplyInfo")({channelId:t.id,messageId:r,firstLoad:!0})):"report"===n?s.getSignal("messages.fetchReportInfo")({channelId:t.id,firstLoad:!0}):"search"===n||"liveChat"===n||"lobbyInfo"===n||"groupInfo"===n?o.set(d,n):"ticketInfo"===n&&s.getSignal("messages.fetchTicketInfo")({ticketId:t.ticketId}))):s.getSignal("messages.clearShowInfo")()}],clearShowInfo:[function(e){e.state.set(d,"")}],toggleMobileOps:[function(e){var t=e.props,n=e.state,r=t.value;n.set("messages.showMobileOps",r)}],channelSelect:[function(e){var t=e.props,n=e.controller,r=e.state,a=t.channelId,o=l.default.getChannel(r,a),s=r.get("isSupport");o&&"public"===o.type&&!(0,c.isTouch)()?n.getSignal("messages.toggleInfo")({type:"projectInfo"}):o&&o.liveChannelId&&!(0,c.isTouch)()?n.getSignal("messages.toggleInfo")({type:"liveChat"}):o&&"ticket"===o.type&&s?n.getSignal("messages.toggleInfo")({type:"ticketInfo"}):(r.set(d,""),n.getSignal("messages.clearShowInfo")())}],setCombinedOptionKey:[function(e){var t=e.props,n=e.state,r=t.messageId;n.set("messages.combinedOptionKey",r)}],setShowMoreOperationKey:[function(e){var t=e.props,n=e.state,r=t.channelId;n.set("messages.showMoreOperationKey",r)}],setShowCardOptionKey:[function(e){var t=e.props,n=e.state,r=t.channelId;n.set("messages.showCardOptionKey",r)}],setShowTermsKey:[function(e){var t=e.props,n=e.state,r=t.channelId;n.set("messages.showTermsKey",r)}]},getState:function(){return{showInfoType:"",showMobileOps:!1,fetchInfoStatus:{},combinedOptionKey:"",showMoreOperationKey:"",cardShowOptionKey:"",showTermsKey:""}},getInfoType:function(e){return e.get(d)}}}).call(n,"views/v2/modules/messages/InfoStore.js")},function(e,f,p){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t,n=c(["messages.fetchInfoStatus.projectInfo"],["messages.fetchInfoStatus.projectInfo"]),r=c(["messages.fetchMemberStatus.",""],["messages.fetchMemberStatus.",""]),a=c(["channelId"],["channelId"]),o=c(["messages.showInfoType"],["messages.showInfoType"]),s=p(9),i=p(0),l=p(7),u=(t=l)&&t.__esModule?t:{default:t};function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=[].concat(["messages"],["projectInfo"]);f.default={name:e,depends:[],signals:{fetchProjectInfo:[(0,s.set)((0,i.state)(n),u.default.inProgress),(0,s.set)((0,i.state)(r,(0,i.props)(a)),u.default.inProgress),(0,s.set)((0,i.state)(o),"projectInfo"),[function(e){var t=e.props,n=e.path,r=e.http,a=t.projectId;return r.get("/api/p/"+a).then(n.success).catch(n.error)},{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncProjectInfo")(n)},(0,s.set)((0,i.state)(n),u.default.succeeded)],error:[(0,s.set)((0,i.state)(n),u.default.failed)]}]],syncProjectInfo:[function(e){var t=e.props,n=e.state,r=t.result;200===t.status&&r&&r.project&&n.set(d,r.project)}]},getState:function(){return{projectInfo:{}}}}}).call(f,"views/v2/modules/messages/ProjectInfoStore.js")},function(e,u,d){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=l(["messages.fetchInfoStatus.ticketInfo"],["messages.fetchInfoStatus.ticketInfo"]),r=l(["messages.showInfoType"],["messages.showInfoType"]),a=d(9),o=d(0),s=d(7),i=(t=s)&&t.__esModule?t:{default:t};function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=[].concat(["messages"],["ticketInfo"]);u.default={name:e,depends:[],signals:{fetchTicketInfo:[(0,a.set)((0,o.state)(n),i.default.inProgress),(0,a.set)((0,o.state)(r),"ticketInfo"),[function(e){var t=e.props,n=e.path,r=e.http,a=t.ticketId;return r.get("/api/supportTickets/"+a).then(n.success).catch(n.error)},{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncTicketInfo")(n)},(0,a.set)((0,o.state)(n),i.default.succeeded)],error:[(0,a.set)((0,o.state)(n),i.default.failed)]}]],syncTicketInfo:[function(e){var t,n,r,a,o,s,i=e.props,l=e.state,u=i.result;200===i.status&&u&&(t=u.data,n=u.tags||{},r=u.unityVersions||{},a=t.tagIds,o=t.platformIds,s={title:t.title,description:t.description,area:"Crash",tags:a.map(function(e){return n[e].name}),platform:0<o.length?n[o[0]].name:"",unityVersion:(r[t.unityVersion]||{}).nameNormalized},u.data.assignee&&(s.assignee=u.data.assignee),l.set(c,s))}]},getState:function(){return{ticketInfo:{}}}}}).call(u,"views/v2/modules/messages/TicketInfoStore.js")},function(e,p,g){"use strict";(function(e){Object.defineProperty(p,"__esModule",{value:!0});var t,n=l(["messages.fetchInfoStatus.userInfo"],["messages.fetchInfoStatus.userInfo"]),r=l(["messages.showInfoType"],["messages.showInfoType"]),a=g(9),o=g(0),s=g(7),i=(t=s)&&t.__esModule?t:{default:t};function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=["messages"],c=[].concat(u,["userInfo","info"]),d=[].concat(u,["userInfo","tab"]);function f(e){var t=e.props,n=e.path,r=e.http,a=t.userId;return r.get("/api/profile/"+a).then(n.success).catch(n.error)}f.async=!0,p.default={name:e,depends:[],signals:{fetchUserInfo:[(0,a.set)((0,o.state)(n),i.default.inProgress),(0,a.set)((0,o.state)(r),"userInfo"),[f,{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncUserInfo")(n)},(0,a.set)((0,o.state)(n),i.default.succeeded)],error:[(0,a.set)((0,o.state)(n),i.default.failed)]}]],syncUserInfo:[function(e){var t=e.props,n=e.state,r=t.result;200===t.status&&r&&n.set(c,r)}],switchUserInfoTab:[function(e){var t=e.props,n=e.state,r=t.tab;n.set(d,r)}]},getState:function(){return{userInfo:{tab:"projects",info:{}}}}}}).call(p,"views/v2/modules/messages/UserInfoStore.js")},function(e,l,u){"use strict";(function(e){Object.defineProperty(l,"__esModule",{value:!0});var t,n=u(7),o=(t=n)&&t.__esModule?t:{default:t};function r(e){var t=e.props,n=e.http,r=e.path,a=t.type,o=t.followeeId;return n.post("/api/follow",{type:a,followeeId:o}).then(r.success).catch(r.error)}function a(e){var t=e.props,n=e.http,r=e.path,a=t.followeeId;return n.post("/api/unfollow",{followeeId:a}).then(r.success).catch(r.error)}function s(a){return function(e){var t=e.props,n=e.state,r=t.followeeId;n.get("messages.followUpdateStatus.follow"+r)===o.default.succeeded&&n.set("messages.userInfo.info.followMap."+r,a)}}function i(a){return function(e){var t=e.props,n=e.state,r=t.followeeId;n.set("messages.followUpdateStatus.follow"+r,a)}}a.async=r.async=!0,l.default={name:e,depends:[],signals:{follow:[i(o.default.inProgress),[r,{success:[i(o.default.succeeded)],error:[i(o.default.failed)]}],s(!0)],unFollow:[i(o.default.inProgress),[a,{success:[i(o.default.succeeded)],error:[i(o.default.failed)]}],s(!1)],mouseOver:[function(e){var t,n,r,a=e.props,o=e.state,s=a.followeeId;o.set("messages.followMouseOver",(r=!0,(n=s)in(t={})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))}],mouseOut:[function(e){var t=e.props,n=e.state,r=t.followeeId;n.set("messages.followMouseOver."+r,!1)}]},getState:function(){return{mouseOver:{},followUpdateStatus:{}}}}}).call(l,"views/v2/modules/messages/FollowStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=["messages","channelTeams"];function s(e){var t=e.channelTeam;return t?{id:t.id,name:t.name,avatar:t.avatar}:null}t.default={name:e,depends:[],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,r=t.privateChannels,a={};r.forEach(function(e){var t;!e.proposalId||(t=s(e))&&(a[e.id]=t)}),n.set(o,a)}],channelCreate:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&t.channelTeam&&n.set([].concat(o,[t.id]),s(t))}],channelDelete:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&n.unset([].concat(o,[t.id]))}]},getState:function(){return{channelTeams:{}}},getChannelTeam:function(e,t){return e.get([].concat(o,[t]))}}}).call(t,"views/v2/modules/messages/ChannelTeamStore.js")},function(e,m,v){"use strict";(function(e){Object.defineProperty(m,"__esModule",{value:!0});var s=o(v(23)),p=o(v(34)),g=o(v(27)),t=o(v(81)),n=o(v(124)),r=o(v(35)),a=o(v(42)),d=o(v(15));function o(e){return e&&e.__esModule?e:{default:e}}var i=["messages","uploads"],f={};function l(t,e){var n=e.get([].concat(i,["uploadToChannels",t]));return n?s.default.find(e.get([].concat(i,["channelUploads",n])),function(e){return e.id===t}):null}function h(e,t){t.set([].concat(i,["uploadToChannels",e.id]),e.channelId),t.get([].concat(i,["channelUploads",e.channelId]))||t.set([].concat(i,["channelUploads",e.channelId]),[]),t.push([].concat(i,["channelUploads",e.channelId]),e)}function u(t,e){var n,r,a=e.get([].concat(i,["uploadToChannels",t.id]));a&&((n=s.default.slice(e.get([].concat(i,["channelUploads",a]))))[r=s.default.findIndex(n,function(e){return e.id===t.id})]=s.default.assign({},n[r],t),e.set([].concat(i,["channelUploads",a]),n))}function c(t,e){var n,r=e.get([].concat(i,["uploadToChannels",t]));r&&(e.unset([].concat(i,["uploadToChannels",t])),(n=e.get([].concat(i,["channelUploads",r])))&&(n=s.default.slice(n),s.default.remove(n,function(e){return e.id===t}),e.set([].concat(i,["channelUploads",r]),n)),delete f[t])}m.default={name:e,depends:[t.default,g.default,n.default,a.default,r.default],signals:{uploadAttachment:[function(e){var t,n,r,a,o,s=e.props,i=e.state,l=e.messages,u=s.channelId,c=s.content,d=s.parentMessageId,f=(t=i,n=u,r=s.upload,a=c,o=d,{id:p.default.createNonce(),channelId:n,parentMessageId:o||null,author:g.default.getCurrentUser(t),filename:r.file.name,fileSize:r.file.size,contentType:r.file.type,width:r.width,height:r.height,dataUrl:r.dataUrl,file:r.file,voice:r.voice,duration:r.duration,content:a,loaded:0,speed:0});h(f,i),l.httpUpload(f)}],retryUploadAttachment:[function(e){var t=e.props,n=e.state,r=e.messages,a=l(t.id,n),o=s.default.clone(a);o.loaded=0,o.speed=0,o.id=p.default.createNonce(),delete o.err,h(o,n),c(t.id,n),r.httpUpload(o)}],cancelUploadAttachment:[function(e){var t=e.props,n=e.state,r=t.id;f[r]&&f[r].abort(),u({id:r,cancelled:!0},n)}],uploadStart:[function(e){u(e.props,e.state)}],uploadCreate:[function(e){h(e.props,e.state)}],uploadComplete:[function(e){var t=e.props,n=e.state;c(t.id,n)}],uploadProgress:[function(e){var t,n,r=e.props,a=e.state,o=l(r.id,a);o&&(t=0,o.progressTime&&((n=r.progressTime-o.progressTime.getTime())<=0&&(n=1),t=1e3*(r.loaded-o.loaded)/n),r.speed=t,u(r,a))}],uploadFail:[function(e){var t=e.props,n=e.state;l(t.id,n)&&u({id:t.id,err:t.err},n)}],uploadAbort:[function(e){var t=e.props,n=e.state;c(t.id,n)}],openAttachment:[function(e){var t=e.props;e.state.set([].concat(i,["activeAttachment"]),t.url)}],closeAttachment:[function(e){e.state.unset([].concat(i,["activeAttachment"]))}]},getServices:function(c){return{httpUpload:function(t){var e=t.channelId,n=t.file,r=t.content,a=t.id,o=t.parentMessageId,s=t.voice,i=new XMLHttpRequest,l=void 0,l=s?"voice":"attachments";i.open("POST",d.default.REQUEST_BASE_URL+"/api/channels/"+e+"/messages/"+l,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.timeout=0,i.upload.addEventListener("progress",function(e){return c.getSignal("messages.uploadProgress")({id:t.id,loaded:e.loaded,processTime:(new Date).getTime()})}),i.addEventListener("timeout",function(){return c.getSignal("messages.uploadFail")({id:t.id})}),i.addEventListener("error",function(){c.getSignal("messages.uploadFail")({id:t.id,err:"network_error"})}),i.addEventListener("abort",function(){return c.getSignal("messages.uploadAbort")({id:t.id})}),i.addEventListener("readystatechange",function(){i&&4===i.readyState&&(200<=i.status&&i.status<300?(c.getSignal("messages.uploadComplete")({id:t.id}),c.getSignal("messages.messageCreate")(JSON.parse(i.responseText))):0<i.status&&c.getSignal("messages.uploadFail")({id:t.id,err:JSON.parse(i.responseText)}))});var u=new FormData;u.append("channel",e),u.append("nonce",a),u.append("content",r),u.append("parentMessageId",o||""),u.append("size",n.size),u.append("file",n),(f[t.id]=i).send(u),c.getSignal("messages.uploadStart")({id:t.id})}}},getState:function(){return{uploads:{channelUploads:{},uploadToChannels:{},activeAttachment:""}}},getUploads:function(t,e){return s.default.map(t.get([].concat(i,["channelUploads",e])),function(e){return t.get([].concat(i,["uploadToChannels",e]))})}}}).call(m,"views/v2/modules/messages/UploadStore.js")},function(e,o,s){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var c=a(s(32)),t=a(s(125)),n=a(s(467)),r=a(s(470)),d=a(s(55)),f=a(s(82)),p=a(s(35));function a(e){return e&&e.__esModule?e:{default:e}}var i="last-visit-channel-id";o.default={name:e,depends:[c.default,r.default,t.default,n.default],signals:{workspaceRouted:[function(e){var t=e.props,n=e.controller,r=e.state,a=t.workspaceId,o=t.channelId;n.getSignal("messages.workspaceSelect")({workspaceId:a}),o?n.getSignal("messages.channelSelect")({workspaceId:a,channelId:o}):(r.get("isSupport")?n.getSignal("messages.openSupportTickets"):n.getSignal("messages.openExplore"))({workspaceId:a})}],connectionOpen:[function(e){var t=e.router;t&&t.goTo(t.getPath())}],channelRouted:[function(e){var t=e.props,n=e.controller,r=e.state,a=t.channelId,o=t.workspaceId,s=c.default.getChannel(r,a),i=p.default.getChannelId(r,o),l=f.default.getWorkspace(r,o),u=d.default.getWorkspaceId(r);s&&i!==a&&n.getSignal("messages.channelSelect")({channelId:a,workspaceId:o}),l&&u!==o&&n.getSignal("messages.workspaceSelect")({workspaceId:o})}],channelSelect:[function(e){var t=e.state,n=e.props.channelId,r=c.default.getChannel(t,n),a=localStorage.getItem(i);!r||a&&a===r.id||localStorage.setItem(i,r.id)}],exploreRouted:[function(e){e.controller.getSignal("messages.openExplore")()}],rootRouted:[function(e){var t=e.state,n=e.controller;if(!t.get("appVersion")){var r=localStorage.getItem(i);if(r){var a=c.default.getChannel(t,r);if(a)return void n.getSignal("messages.channelSelect")({channelId:a.id,workspaceId:a.workspaceId});localStorage.removeItem(i)}}var o=f.default.getWorkspaces(t),s=Object.values(o).find(function(e){return""===e.organizationId});s&&n.getSignal("messages.openExplore")({workspaceId:s.id})}]},getState:function(){return{}}}}).call(o,"views/v2/modules/messages/LocationStore.js")},function(e,r,c){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var t,n=c(81),i=(t=n)&&t.__esModule?t:{default:t};var l=["messages","voiceConn"],u=null;r.default={name:e,depends:[i.default],signals:{onVoiceStateStart:[function(e){var t,n=e.props,r=e.messages,a=e.controller,o=e.state,s=i.default.getSessionId(o);n.sessionId===s&&(n.fakeSig||(u&&(u.sessionId===n.sessionId&&u.channelId===n.channelId||(u.destroy(),r.voiceConn.currentConn=u=null)),u||(t=c(648).default,r.voiceConn.currentConn=u=new t({sessionId:n.sessionId,channelId:n.channelId}),u.on("state",function(e,t){a.getSignal("messages.onVoiceConnState")({channelId:u.channelId,state:e,payload:t})}),u.on("ping",function(){a.getSignal("messages.onVoiceConnPing")({pings:u.getPings(),averagePing:u.getAveragePing(),lastPing:u.getLastPing(),quality:u.getQuality()})})),o.merge(l,{disabled:!1,channelId:u.channelId,state:u.state})))}],onVoiceStateEnd:[function(e){var t=e.props,n=e.messages,r=e.state,a=i.default.getSessionId(r);t.sessionId===a&&u&&u.sessionId===t.sessionId&&u.channelId===t.channelId&&(u.destroy(),n.voiceConn.currentConn=u=null,t.isConflicting?(r.set([].concat(l,["disabled"]),!0),r.set([].concat(l,["lastChannelId"]),t.channelId),r.set([].concat(l,["state"]),"DISCONNECTED")):(r.set([].concat(l,["state"]),"DISCONNECTED"),r.unset([].concat(l,["channelId"]))),r.set([].concat(l,["quality"]),"UNKNOWN"))}],onVoiceServerUpdate:[function(e){var t,n=e.props,r=e.messages;u&&u.channelId===n.channelId&&(u.connect(n),(t=r.audioInput.currentInput).stream&&u.setStream(t.stream))}],onVoiceConnState:[function(e){var t=e.props,n=e.state,r=n.get(l);r.channelId===t.channelId&&r.state!==t.state&&n.merge(l,{state:t.state})}],onVoiceConnPing:[function(e){var t=e.props,n=e.state;u&&n.merge(l,t)}],connectionClosed:[function(e){var t=e.controller;u&&t.getSignal("messages.onVoiceStateEnd")({sessionId:u.sessionId,channelId:u.channelId})}],refreshConnDisabled:[function(e){var t=e.state;t.set([].concat(l,["disabled"]),!1),t.set([].concat(l,["lastChannelId"]),"")}]},getServices:function(){return{voiceConn:{currentConn:null}}},getState:function(){return{voiceConn:{disabled:!1,lastChannelId:"",state:"DISCONNECTED"}}}}}).call(r,"views/v2/modules/messages/VoiceConnectionStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(83),s=p(n(54)),i=p(n(649)),l=p(n(650)),u=n(652),c=p(n(653)),d=n(472),f=p(n(656));function p(e){return e&&e.__esModule?e:{default:e}}var g=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,o.EventEmitter),r(h,[{key:"_cleanupSocket",value:function(){this._socket&&(this._socket.removeAllListeners(),this._socket.close(),this._socket=null,this._handleDisconnect(!0,1e3,""))}},{key:"reconnect",value:function(){this._socket&&(this._socket.close(),this._socket.connect())}},{key:"destroy",value:function(){this._backoff.cancel(),this._cleanupSocket(),this.removeAllListeners(),this._stream=null,this._pings=[],this._destroyed=!0}},{key:"setState",value:function(e,t){var n,r=this,a=1<arguments.length&&void 0!==t?t:{};this.logger.info("State: "+e),this.state=e,this.emit("state",e,a),e===u.VoiceConnectionStates.VOICE_CONNECTED?(this._backoff.succeed(),this.pingInterval||(this.pingInterval=setInterval(function(){return r._socket.ping()},5e3)),this._socket.ping()):e===u.VoiceConnectionStates.VOICE_FAILED?(n=((n=this._backoff.fail(function(){return r.reconnect()}))/1e3).toFixed(2),this.logger.warn("Voice failed! Reconnecting in "+n+" seconds...")):(e===u.VoiceConnectionStates.VOICE_DISCONNECTED||u.VoiceConnectionStates.VOICE_CLOSED)&&this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}},{key:"setStream",value:function(e){this._stream=e,this._peerConn&&this._peerConn.setStream(e)}},{key:"connect",value:function(e){var r=this,t=e.endpoint,n=e.token;if(this._destroyed)throw new Error("VoiceConnection is already destroyed");this._backoff.cancel();var a,o=this.endpoint;this.endpoint=t,this.token=n,o!==this.endpoint&&this._cleanupSocket(),this._socket||((a=this._socket=new l.default(this.endpoint)).on("connecting",function(){r.logger.info("Connecting to voice server "+r.endpoint+"."),r.setState(u.VoiceConnectionStates.CONNECTING)}),a.on("connect",function(){r.logger.info("Connected to voice server."),r.setState(u.VoiceConnectionStates.AUTHENTICATING),r._socket.identify({sessionId:r.sessionId,channelId:r.channelId,token:r.token})}),a.on("disconnect",function(e,t,n){return r._handleDisconnect(e,t,n)}),a.on("sdpOffer",function(e){r.logger.info("Received sdpOffer from voice server."),r.setState(u.VoiceConnectionStates.CONNECTED),r._createPeerConn(e)}),a.on("ssrcsUpdate",function(e){r.logger.info("Received ssrcsUpdate from voice server."),r._ssrcsUpdate(e)}),a.on("ping",function(e){for(r._pings.push(e);20<=r._pings.length;)r._pings.shift();r.emit("ping")}),a.on("token",function(e){r.logger.info("voice server token updated."),r.token=e.token})),this._socket.connect()}},{key:"_handleDisconnect",value:function(e,t,n){var r=this;this.logger.info("Disconnected from voice server.",{wasClean:e,code:t,reason:n}),this._closePeerConn();var a,o=1e3!==t;this.setState(u.VoiceConnectionStates.DISCONNECTED,{willReconnect:o}),o&&(this._backoff.cancel(),a=((a=this._backoff.fail(function(){return r._socket.connect()}))/1e3).toFixed(2),this.logger.warn("Disconnect was not clean! Reconnecting in "+a+" seconds..."))}},{key:"_ssrcsUpdate",value:function(n){if(!this._peerConn)throw new Error("this._peerConn not created yet");var r={};n.audioSsrcs&&Object.keys(n.audioSsrcs).forEach(function(e){var t=n.audioSsrcs[e];t.ssrc?r[e]=t.parameters:r[e]=null}),this._peerConn.ssrcsUpdate({audioSsrcs:r})}},{key:"_createPeerConn",value:function(e){var a=this;if(this._peerConn)throw new Error("this._peerConn already exists");var t=this._peerConn=new c.default;t.on("connected",function(){return a.setState(u.VoiceConnectionStates.VOICE_CONNECTED)}),t.on("checking",function(){return a.setState(u.VoiceConnectionStates.VOICE_ICE_CHECKING)}),t.on("failed",function(){return a.setState(u.VoiceConnectionStates.VOICE_FAILED)}),t.on("disconnected",function(){return a.setState(u.VoiceConnectionStates.VOICE_DISCONNECTED)}),t.on("closed",function(){return a.setState(u.VoiceConnectionStates.VOICE_CLOSED)}),t.on("addStream",function(e){return a._addStream(e)}),t.on("removeStream",function(e){return a._removeStream(e)}),t.on("ssrcsUpdate",function(n){var r;t===a._peerConn&&(r={},n.audioSsrcs&&Object.keys(n.audioSsrcs).forEach(function(e){e=Number(e);var t=n.audioSsrcs[e];r[e]=t?{ssrc:e,sessionId:a.sessionId,parameters:t}:{sessionId:a.sessionId}}),a._socket.ssrcsUpdate({channelId:a.channelId,audioSsrcs:r}))}),this._stream&&t.setStream(this._stream);var n=(0,d.fromJitsiSdp)(e.sdpOffer);t.connect(n,function(e){t===a._peerConn&&a._socket.sdpAnswer({channelId:a.channelId,sdpAnswer:(0,d.toJitsiSdp)(e)})}),this.setState(u.VoiceConnectionStates.VOICE_CONNECTING)}},{key:"_closePeerConn",value:function(){var t=this;this._peerConn&&(this._peerConn.removeAllListeners(),this._peerConn.close(),this._peerConn=null,this.setState(u.VoiceConnectionStates.VOICE_CLOSED)),Object.keys(this._audioOutputs).forEach(function(e){t._audioOutputs[e].destroy(),delete t._audioOutputs[e]})}},{key:"_addStream",value:function(e){this._audioOutputs[e.id]&&(this._audioOutputs[e.id].destroy(),delete this._audioOutputs[e.id]),this._audioOutputs[e.id]=new f.default(e.id,e)}},{key:"_removeStream",value:function(e){this._audioOutputs[e.id]&&(this._audioOutputs[e.id].destroy(),delete this._audioOutputs[e.id])}},{key:"getPings",value:function(){return this._pings.slice(0)}},{key:"getAveragePing",value:function(){var e=this._pings;if(e.length)return e.reduce(function(e,t){return e+t},0)/e.length}},{key:"getLastPing",value:function(){var e=this._pings;if(e.length)return e[e.length-1]}},{key:"getQuality",value:function(){var e=this.getLastPing();return this.state!==u.VoiceConnectionStates.VOICE_CONNECTED||void 0===e?u.VoiceConnectionQuality.UNKNOWN:500<e?u.VoiceConnectionQuality.BAD:250<e?u.VoiceConnectionQuality.AVERAGE:u.VoiceConnectionQuality.FINE}}]),h);function h(e){var t=e.sessionId,n=e.channelId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return r.sessionId=t,r.channelId=n,r.endpoint=null,r.token=null,r.state=u.VoiceConnectionStates.NEW,r._backoff=new i.default(1e3,1e4),r._socket=null,r._peerConn=null,r._stream=null,r._audioOutputs={},r._pings=[],r._destroyed=!1,r.pingInterval=null,r.logger=s.default.create("VoiceConnection("+t+","+n+")"),r}t.default=g},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(o,[{key:"succeed",value:function(){this.cancel(),this._fails=0,this._current=this.min}},{key:"fail",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:null;this._fails+=1;var r=2*this._current;if(this.jitter&&(r*=Math.random()),this._current=Math.min(this._current+r,this.max),null!==n){if(null!==this._timeoutId)throw new Error("callback already pending");this._timeoutId=setTimeout(function(){try{n()}finally{t._timeoutId=null}},this._current)}return this._current}},{key:"cancel",value:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)}},{key:"fails",get:function(){return this._fails}},{key:"current",get:function(){return this._current}},{key:"pending",get:function(){return null!==this._timeoutId}}]),o);function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.min=e,this.max=null!==t?t:10*e,this.jitter=n,this._current=e,this._timeoutId=null,this._fails=0}t.default=a},function(e,u,c){"use strict";(function(t){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var e=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n,a=c(83),o=c(54),s=(n=o)&&n.__esModule?n:{default:n};var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,a.EventEmitter),e(l,[{key:"connect",value:function(){var e,a,o=this;this.ws||(e=!1,(a=this.ws=new WebSocket(this.url)).onopen=function(){e=!0,o.emit("connect")},a.onmessage=function(e){var t=JSON.parse(e.data);switch(t.op){case 1:o.emit("sdpOffer",t.d);break;case 3:o.emit("ssrcsUpdate",t.d);break;case 4:o.emit("ping",Date.now()-t.d.ts);break;case 5:o.emit("token",t.d);break;default:o.logger.warn("unknown payload.op ",t.op)}},a.onerror=function(e){a.onclose({wasClean:!1,code:0,reason:e.message})},a.onclose=function(e){var t=e.wasClean,n=e.code,r=e.reason;o.ws===a&&(o.ws=null,o.emit("disconnect",t,n,r))},t.nextTick(function(){e||o.emit("connecting")}))}},{key:"send",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:null,r=JSON.stringify({op:e,d:n});if(this.ws&&1===this.ws.readyState)try{this.ws.send(r)}catch(e){this.logger.warn("failed to send payload ",e)}else this.logger.warn("ws not opened yet. ignore sending: ",r)}},{key:"close",value:function(){var e;this.ws&&((e=this.ws).onclose({wasClean:!0,code:1e3,reason:""}),e.close(),this.ws=null)}},{key:"identify",value:function(e){var t=e.sessionId,n=e.channelId,r=e.token;this.send(0,{sessionId:t,channelId:n,token:r})}},{key:"ping",value:function(){this.send(4,{ts:Date.now()})}},{key:"sdpAnswer",value:function(e){var t=e.channelId,n=e.sdpAnswer;this.send(2,{channelId:t,sdpAnswer:n})}},{key:"ssrcsUpdate",value:function(e){var t=e.channelId,n=e.audioSsrcs;this.send(3,{channelId:t,audioSsrcs:n})}},{key:"connected",get:function(){return this.ws&&1===this.ws.readyState}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return t.url=e,t.ws=null,t.logger=s.default.create("VoiceControlSocket("+e+")"),t}u.default=i}).call(u,c(651))},function(e,t,n){e.exports=n(8)(89)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceConnectionQuality=t.VoiceConnectionStates=void 0;var r,a=n(25),o=(r=a)&&r.__esModule?r:{default:r};t.VoiceConnectionStates=(0,o.default)({NEW:null,CONNECTING:null,AUTHENTICATING:null,CONNECTED:null,DISCONNECTED:null,VOICE_CONNECTING:null,VOICE_ICE_CHECKING:null,VOICE_CONNECTED:null,VOICE_FAILED:null,VOICE_DISCONNECTED:null,VOICE_CLOSED:null}),t.VoiceConnectionQuality=(0,o.default)({UNKNOWN:null,BAD:null,AVERAGE:null,FINE:null})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(83),s=d(n(54)),i=d(n(471)),l=n(472),u=n(655),c=d(n(23));function d(e){return e&&e.__esModule?e:{default:e}}var f=s.default.create("PeerConnection");window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,window.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription;var p=void 0;function g(e,t){this.pc=new RTCPeerConnection(e,t),this.interop=new u.Interop}p="Firefox"===i.default.name?{offerToReceiveAudio:!0,offerToReceiveVideo:!1}:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}},g.prototype.setLocalDescription=function(e,t,n){"Firefox"===i.default.name&&(e=this.interop.toUnifiedPlan(e)),this.pc.setLocalDescription(e,t,n)},g.prototype.setRemoteDescription=function(e,t,n){"Firefox"===i.default.name&&(e=this.interop.toUnifiedPlan(e)),this.pc.setRemoteDescription(e,t,n)},g.prototype.createAnswer=function(t,e,n){var r=this;this.pc.createAnswer(function(e){"Firefox"===i.default.name&&(e=r.interop.toPlanB(e)),t(e)},e,n)},g.prototype.createOffer=function(t,e,n){this.pc.createOffer(function(e){"Firefox"===i.default.name&&(e=self.interop.toPlanB(e)),t(e)},e,n)};var h=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,o.EventEmitter),r(m,[{key:"connect",value:function(e,t){var n=this;if(!e)throw new Error("remoteSdp is null");if(this._pcAdapter)throw new Error("PeerConnection is already connected");var r,a={iceServers:[]};"Chrome"!==i.default.name||0<(r=(i.default.version||"").split(".")||[]).length&&72<=parseInt(r[0],10)&&(a.sdpSemantics="plan-b");var o=this._pcAdapter=new g(a);o.pc.onnegotiationneeded=function(){f.info("negotiationNeeded"),n._safeExecute(function(){n._updateRemoteDescription(function(){var t=(0,l.parseSdp)(n._pcAdapter.pc.localDescription.sdp);n._createLocalAnswer(function(e){return n.diffSdp(t,e)})})})},o.pc.oniceconnectionstatechange=function(){var e=n._pcAdapter.pc.iceConnectionState;f.info("iceConnectionState =>",e),"completed"===e&&(e="connected"),n.emit(e)},o.pc.onsignalingstatechange=function(){var e;f.info("signalingState =>",n._pcAdapter.pc.signalingState),"stable"===n._pcAdapter.pc.signalingState&&(n._safeExecuting=!1,(e=n._safeQueue.shift())&&(f.info("safeExecute: running queued function"),n._safeExecute(e)))},"ontrack"in o.pc?o.pc.ontrack=function(e){return n.emit("addStream",e.streams[0])}:o.pc.onaddstream=function(e){return n.emit("addStream",e.stream)},o.pc.onremovestream=function(e){return n.emit("removeStream",e.stream)},this._remoteSdp=e,this._stream&&o.pc.addStream(this._stream),this._safeExecute(function(){n._updateRemoteDescription(function(){n._createLocalAnswer(t)})})}},{key:"ssrcsUpdate",value:function(e){var n=this,r=e.audioSsrcs;if(!this._pcAdapter)throw new Error("PeerConnection is not connected");var a,o=!1;!r||(a=this._remoteSdp.media.find(function(e){return"audio"===e.mid}))&&Object.keys(r).forEach(function(e){var t=r[e];t?a.sources[e]||(a.sources[e]=t,o=!0):a.sources[e]&&(delete a.sources[e],o=!0)}),o&&this._safeExecute(function(){n._updateRemoteDescription(function(){var t=(0,l.parseSdp)(n._pcAdapter.pc.localDescription.sdp);n._createLocalAnswer(function(e){return n.diffSdp(t,e)})})})}},{key:"diffSdp",value:function(e,t){var n={},r=(0,l.diffSdp)(e,t);r&&r.forEach(function(t){"audio"===t.mid&&Object.keys(t.sources).forEach(function(e){n[e]=t.sources[e]})}),(r=(0,l.diffSdp)(t,e))&&r.forEach(function(e){"audio"===e.mid&&Object.keys(e.sources).forEach(function(e){n[e]=null})}),Object.keys(n).length&&this.emit("ssrcsUpdate",{audioSsrcs:n})}},{key:"close",value:function(){this._pcAdapter&&("closed"!==this._pcAdapter.pc.signalingState&&this._pcAdapter.pc.close(),this._pcAdapter.pc.onnegotiationneeded=null,this._pcAdapter.pc.oniceconnectionstatechange=null,this._pcAdapter.pc.onsignalingstatechange=null,"ontrack"in this._pcAdapter.pc?this._pcAdapter.pc.ontrack=null:this._pcAdapter.pc.onaddstream=null,this._pcAdapter.pc.onremovestream=null,this._pcAdapter=null),this._remoteSdp=null,this._stream=null,this._safeExecuting=!1,this._safeQueue=[]}},{key:"setStream",value:function(t){var n=this;if(!t)throw new Error("stream is null");var e=!this._pcAdapter||"closed"===this._pcAdapter.pc.signalingState;this._stream&&!e&&(this._pcAdapter.pc.removeStream?this._pcAdapter.pc.removeStream(this._stream):this._pcAdapter.pc.getSenders().forEach(function(e){t.getTracks().includes(e.track)&&n._pcAdapter.pc.removeTrack(e)})),this._stream=t,this._stream&&!e&&this._pcAdapter.pc.addStream(this._stream)}},{key:"_safeExecute",value:function(e){"closed"!==this._pcAdapter.pc.iceConnectionState?this._safeExecuting?(f.info("safeExecute: currently executing"),this._safeQueue.push(e)):"stable"!==this._pcAdapter.pc.signalingState?(f.info("safeExecute: signaling state",this._pcAdapter.pc.signalingState),this._safeQueue.push(e)):(this._safeExecuting=!0,e()):f.info("safeExecute: ICE connection closed")}},{key:"_createLocalAnswer",value:function(n){var e=this;this._pcAdapter.createAnswer(function(t){e._pcAdapter.setLocalDescription(t,function(){var e;f.info("createAnswer+setLocalDescription success"),n&&(e=(0,l.parseSdp)(t.sdp),n(e))},function(e){throw f.error("failed to setLocalDescription",e),e})},function(e){throw f.error("failed to createAnswer",e),e},p)}},{key:"_updateRemoteDescription",value:function(e){var t=(0,l.writeSdp)(c.default.cloneDeep(this._remoteSdp));this._pcAdapter.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:t}),function(){f.info("setRemoteDescription success"),e&&e()},function(e){throw f.error("failed to setRemoteDescription",e),e})}}]),m);function m(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return e._pcAdapter=null,e._remoteSdp=null,e._stream=null,e._safeExecuting=!1,e._safeQueue=[],e}t.default=h},function(e,t,n){e.exports=n(8)(437)},function(e,t,n){e.exports=n(8)(1125)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,s=n(54),i=(o=s)&&o.__esModule?o:{default:o};var l=(r(u,[{key:"destroy",value:function(){this.logger.info("destroy"),this._audioElement.pause(),this._audioElement=null}},{key:"_updateAudioElement",value:function(){this._audioElement.muted=this._mute,this._audioElement.volume=this.volume/100}},{key:"mute",get:function(){return this._mute},set:function(e){this._mute=e||!1,this._updateAudioElement()}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=Math.min(Math.round(e),100),this._updateAudioElement()}}]),u);function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.id=e,this.logger=i.default.create("AudioOutput("+this.id+")");var n=document.createElement("audio");(this._audioElement=n).autoplay=!0,n.srcObject=t,this._mute=!1,this._volume=100,this._updateAudioElement(),this.logger.info("create")}t.default=l},function(e,n,k){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var m=t(k(27)),v=t(k(32)),y=t(k(33)),_=t(k(161)),b=t(k(80)),w=k(6),S=t(k(119)),E=t(k(658)),O=k(158);function t(e){return e&&e.__esModule?e:{default:e}}var C=/image\/(jpeg|pjpeg|gif|png)$/i;n.default={name:e,depends:[m.default,v.default,y.default,_.default],signals:{messageCreate:[function(e){var t,n,r,a,o,s,i,l,u,c=e.props,d=e.state,f=e.controller,p=k(40).get("DesktopNotificationNotice.dismissed"),g=d.get("currentPath").startsWith("/messages"),h=c;m.default.getCurrentUserId(d)===h.author.id||g&&_.default.isFocused(d)||(t=y.default.transformMessage(d,h),(n=v.default.getChannel(d,h.channelId))&&!n.isMute&&(n&&"direct"===n.type||t.mentioned)&&d.get("messages.window.isMaster")&&("call"!==t.type&&(0,O.playSound)("Message",.4),!p&&S.default.hasPermission()&&(r=E.default.getUserAvatar(h.author),a=h.author.fullname,l="",l=!t.contentParsedPlainText&&t.attachments.length?(o=t.attachments[0],s=C.test(o.contentType),i=d.get(),s?(0,w.i18n)(i,b.default,"image_message",{}):(0,w.i18n)(i,b.default,"file_message",{})):t.contentParsedPlainText,u={tag:h.channelId,onClick:function(){g?(window.focus(),f.getSignal("messages.channelSelect")({channelId:n.id,workspaceId:n.workspaceId})):window.open("/messages/c/"+h.channelId,"_blank")}},S.default.showNotification(r,a,l,u))))}]},getState:function(){return{}}}}).call(n,"views/v2/modules/messages/DesktopNtfStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(659)),a=i(n(660)),o=i(n(661)),s=i(n(662));function i(e){return e&&e.__esModule?e:{default:e}}var l=[r.default,a.default,o.default,s.default];t.default={getUserAvatar:function(e){var t=e.id,n=e.avatar;if(n)return n;var r=parseInt(t.slice(0,8),16);return l[r%l.length]}}},function(e,t,n){e.exports=n.p+"../styles/i/default-icon-purple.e9c0075bd93c54d020e4485f35755728.png"},function(e,t,n){e.exports=n.p+"../styles/i/default-icon-pink.a339692c0f8078047e5bfdecbe24e3e5.png"},function(e,t,n){e.exports=n.p+"../styles/i/default-icon-green.0893a32538c298a86b81180d91b58bb6.png"},function(e,t,n){e.exports=n.p+"../styles/i/default-icon-yellow.82ebc9a57fc3e2e8bdf07b3cc704fb25.png"},function(e,n,r){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var d=t(r(32)),f=t(r(125)),p=t(r(27)),g=t(r(473));function t(e){return e&&e.__esModule?e:{default:e}}var s=["messages","displayLevel"];n.default={name:e,depends:[d.default,f.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,r=t.workspaces,a={};r.forEach(function(e){var t={level:"default"};e.organizationId||(t.job={}),a[e.id]=t}),n.set(s,a)}],changeLevel:[function(e){var t=e.props,n=e.state,r=t.workspaceId,a=t.level,o=t.job;"recruit-list"===a?n.set([].concat(s,[r,"job"]),o):n.set([].concat(s,[r,"job"]),{}),n.set([].concat(s,[r,"level"]),a)}],channelSelect:[function(e){var t,n,r,a=e.props,o=e.state,s=e.controller,i=a.channelId,l=a.workspaceId,u=d.default.getChannel(o,i),c=g.default.getSelectedMenuItem(o);u&&"default"===c&&(t=s.getSignal("messages.changeLevel"),"direct"===u.type?t({level:"default",workspaceId:l}):"private"===u.type?u.proposalId?(n=p.default.getCurrentUserId(o),(r=f.default.getChannelJob(o,u.id)).freelancerId===n?t({level:"applied-list",workspaceId:l}):t({level:"recruit-list",job:r,workspaceId:l})):t({level:"default",workspaceId:l}):"public"===u.type&&t({level:"public-list",workspaceId:l}))}],workspaceCreate:[function(e){var t=e.props,n=e.state,r={};r[t.id]={level:"default"},n.merge(s,r)}]},getState:function(){return{displayLevel:{}}}}}).call(n,"views/v2/modules/messages/DisplayLevelStore.js")},function(e,n,r){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var s=r(26),t=["messages","userCard"],i=[].concat(t,["itemPos"]),l=[].concat(t,["user"]),u=[].concat(t,["showCard"]),c=[].concat(t,["src"]);n.default={name:e,depends:[],signals:{hideUserCard:[function(e){var t=e.state;t.set(l,{}),t.set(i,{}),t.set(u,!1),t.set(c,"")}],showUserCard:[function(e){var t=e.state,n=e.props,r=n.pos,a=n.user,o=n.src;(0,s.isTouch)()?window.open("/u/"+a.id,"_blank"):(t.set(l,a),t.set(i,r),t.set(u,!0),t.set(c,o))}]},getState:function(){return{userCard:{user:{},itemPos:{},showCard:!1,src:""}}}}}).call(n,"views/v2/modules/messages/UserCardStore.js")},function(e,n,b){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var g=t(b(33)),h=t(b(27)),m=t(b(32)),v=t(b(119)),y=b(7);function t(e){return e&&e.__esModule?e:{default:e}}var _=["messages","bubbleMessages"];n.default={name:e,depends:[h.default,m.default,g.default],signals:{messageCreate:[function(e){var t,n=e.props,r=e.state,a=n.trackingId;!a||null!==(t=r.get(_)).messageToReply&&t.messageToReply.id===a&&(0,y.isLoading)(t.messageToReplyStatus)&&r.merge(_,{messageToReplyStatus:"succeeded"});var o=b(40).get("DesktopNotificationNotice.dismissed"),s=r.get("currentPath").startsWith("/messages");if((!v.default.hasPermission()||o)&&!s){var i=n;if(!(h.default.getCurrentUserId(r)===i.author.id)){var l,u,c,d=g.default.transformMessage(r,i),f=m.default.getChannel(r,d.channelId),p=f&&"direct"===f.type;if(f&&!f.isMute){if("call"===d.type)if(!d.call.duration)return;(p||d.mentioned)&&(u=!1,null!==(l=r.get(_)).messageToReply&&(l.messageToReply.id===d.id?(r.merge(_,{messageToReply:d}),u=!0):l.messageToReply.authorId===d.authorId&&l.messageToReply.channelId===d.channelId&&""===l.messageToReplyStatus&&(""!==d.contentParsedPlainText?d.contentParsedPlainText=l.messageToReply.contentParsedPlainText+"\n"+d.contentParsedPlainText:d.contentParsedPlainText=l.messageToReply.contentParsedPlainText,d.attachments=l.messageToReply.attachments.concat(d.attachments),r.merge(_,{messageToReply:d}),u=!0)),u||((c=l.messagesQueue.find(function(e){return e.id===d.id||e.authorId===d.authorId&&e.channelId===d.channelId}))&&(""!==d.contentParsedPlainText?d.contentParsedPlainText=c.contentParsedPlainText+"\n"+d.contentParsedPlainText:d.contentParsedPlainText=c.contentParsedPlainText,d.attachments=c.attachments.concat(d.attachments)),r.merge(_,{messagesQueue:l.messagesQueue.filter(function(e){return!c||e.id!==c.id}).concat([d])})))}}}}],sendMessageFailed:[function(e){var t,n=e.props,r=e.state,a=n.trackingId;!a||null!==(t=r.get(_)).messageToReply&&t.messageToReply.id===a&&(0,y.isLoading)(t.messageToReplyStatus)&&r.merge(_,{messageToReplyStatus:"failed"})}],bubbleTryToReplyMessage:[function(e){var t=e.props,n=e.state,r=t.messageId,a=n.get(_),o=a.messagesQueue.find(function(e){return e.id===r});o&&null===a.messageToReply&&n.merge(_,{messageToReply:o,messageToReplyStatus:"",messagesQueue:a.messagesQueue.filter(function(e){return e.id!==r})})}],bubbleReplyMessage:[function(e){var t=e.props,n=e.state,r=e.controller,a=t.messageId,o=t.content,s=n.get(_);null!==s.messageToReply&&s.messageToReply.id===a&&""===s.messageToReplyStatus&&(n.merge(_,{messageToReplyStatus:"inProgress"}),r.getSignal("messages.sendMessage")({channelId:s.messageToReply.channelId,content:o,trackingId:a}))}],bubbleCloseMessage:[function(e){var t=e.props,n=e.state,r=t.messageIds,a={};(void 0===r?[]:r).forEach(function(e){a[e]=!0});var o=n.get(_);null!==o.messageToReply&&a[o.messageToReply.id]&&n.merge(_,{messageToReply:null,messageToReplyStatus:""}),n.merge(_,{messagesQueue:o.messagesQueue.filter(function(e){return!a[e.id]})})}]},getState:function(){return{bubbleMessages:{messagesQueue:[],messageToReply:null,messageToReplyStatus:""}}}}}).call(n,"views/v2/modules/messages/BubbleStore.js")},function(e,S,E){"use strict";(function(e){Object.defineProperty(S,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=g(["messages.reportStatus"],["messages.reportStatus"]),n=g(["messages.reportInfo.firstLoad"],["messages.reportInfo.firstLoad"]),r=g(["firstLoad"],["firstLoad"]),a=g(["messages.fetchInfoStatus.report"],["messages.fetchInfoStatus.report"]),o=g(["messages.showInfoType"],["messages.showInfoType"]),s=E(9),i=E(0),f=p(E(33)),l=p(E(27)),u=E(21),c=p(E(7));function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var m=["messages"],v=[].concat(m,["reportInfo"]),y=[].concat(m,["reportForm"]);function _(e){e.state.set([].concat(h(v),["reportingKey"]),"")}function b(){return[function(){return{fieldPath:[].concat(h(y),["inputReasons"]),fieldDetails:{value:""}}},u.chains.addField]}function w(n){return[function(e){var t=e.props;return{field:[].concat(h(y),[n]),value:t.value,touched:!0}}].concat(h(u.chains.fieldChanged),[(0,s.set)((0,i.state)(t),c.default.initial)])}S.default={name:e,depends:[l.default],signals:{ignoreReport:[function(e){var t=e.props,n=e.state,r=e.path,a=e.http,o=t.reportId,s=t.messageId,i=n.get([].concat(h(v),["items"]));return Object.values(i).filter(function(e){return e.message&&e.message.id===s}).map(function(e){return e.id}).forEach(function(e){n.unset([].concat(h(v),["items",e]))}),a.post("/api/reports/"+o+"/ignore",{}).then(r.success).catch(r.error)},{success:[],error:[]}],fetchReportInfo:[(0,s.set)((0,i.state)(n),(0,i.props)(r)),(0,s.set)((0,i.state)(a),c.default.inProgress),(0,s.set)((0,i.state)(o),"report"),[function(e){var t=e.props,n=e.path,r=e.http,a=e.state,o=t.channelId,s=t.firstLoad,i=a.get(v),l=i.currentPage,u=i.hasMore;return s||u?r.get("/api/channels/"+o+"/reportedMessages",{page:s?0:l+1}).then(n.success).catch(n.error):n.dummy},{success:[function(e){var t,n,r,a,i,o=e.props,s=e.controller,l=e.state,u=o.status,c=o.result;200===u&&c&&(t=c.reports,n=c.hasMore,r=c.page,a=l.get([].concat(h(v),["items"])),i=d({},a),t.forEach(function(e){var t=e.id,n=e.reportUser,r=e.message,a=e.status,o=e.reason,s=e.updatedTime;i[e.id]={id:t,reportUserId:n.id,message:f.default.transformMessage(l,r),status:a,reason:o,updatedTime:s}}),s.getSignal("messages.syncFetchedReportInfo")({reports:t}),l.set([].concat(h(v),["items"]),i),l.set([].concat(h(v),["hasMore"]),n),l.set([].concat(h(v),["currentPage"]),r))},(0,s.set)((0,i.state)(a),c.default.succeeded)],error:[(0,s.set)((0,i.state)(a),c.default.failed)],dummy:[(0,s.set)((0,i.state)(a),c.default.succeeded)]}]],messageDelete:[function(e){var t=e.props,n=e.state,r=t,a=n.get([].concat(h(v),["items"]));Object.values(a).filter(function(e){return e.message&&e.message.id===r.id}).map(function(e){return e.id}).forEach(function(e){n.unset([].concat(h(v),["items",e]))})}],changeReportType:[].concat(h(w("type")),[function(e){var t=e.state,n=e.path;return"other"!==t.get([].concat(h(y),["type","value"]))?(t.set("messages.reportForm.inputReasons.value",""),n.no()):n.yes()},{yes:[function(){return{fieldPath:[].concat(h(y),["inputReasons"]),fieldDetails:{value:"",validations:["isValue","minLength:10","maxLength:80"],errorMessages:["error_isRequired","error_minLength10","error_maxLength80"],isRequired:!0}}},u.chains.addField],no:b()}]),changeInputReasons:w("inputReasons"),clearShowInfo:[function(e){e.state.set(v,{items:{},hasMore:!1,firstLoad:!1,currentPage:0})}],openReport:[function(e){var t=e.state,n=e.props.messageId;t.set([].concat(h(v),["reportingKey"]),n)}],closeReport:[_].concat(h(u.chains.reset),h(b())),submitReport:[].concat(h(u.chains.formValidated),[function(e){var t=e.state,n=e.path,r=t.get(y);return(0,u.isValidForm)(r)?n.yes():n.no()},{yes:[(0,s.set)((0,i.state)(t),c.default.inProgress),[function(e){var t=e.state,n=e.http,r=e.path,a=t.get(y),o=t.get([].concat(h(v),["reportingKey"]));if((0,u.isValidForm)(a)){var s={reason:"other"!==a.type.value?a.type.value:"other:"+a.inputReasons.value};return n.post("/api/messages/"+o+"/report",s).then(r.success).catch(r.error)}return r.dummy()},{success:[(0,s.set)((0,i.state)(t),c.default.succeeded),_],error:[(0,s.set)((0,i.state)(t),c.default.failed)],dummy:[]}]],no:[(0,s.set)((0,i.state)(t),c.default.failed)]}])},getState:function(){return{reportInfo:{items:{},firstLoad:!1,hasMore:!1,currentPage:0,reportingKey:""},reportStatus:"",reportForm:(0,u.Form)({type:{value:"spam"},inputReasons:{value:""}})}}}}).call(S,"views/v2/modules/messages/ReportStore.js")},function(e,d,f){"use strict";(function(e){Object.defineProperty(d,"__esModule",{value:!0});var t,n=Object.freeze(Object.defineProperties(["messages.editChannel.editTopicStatus"],{raw:{value:Object.freeze(["messages.editChannel.editTopicStatus"])}})),r=f(25),a=(t=r)&&t.__esModule?t:{default:t},o=f(9),s=f(0);var i=(0,a.default)({initial:null,succeeded:null,failed:null,inProgress:null}),l=["messages","editChannel"];function u(e){e.state.set([].concat(l,["name"]),{isEditing:!1,value:""})}function c(e){e.state.set([].concat(l,["topic"]),{isEditing:!1,value:""})}d.default={name:e,depends:[],signals:{editChannelNameEdit:[function(e){var t=e.props;e.state.set([].concat(l,["name"]),{isEditing:!0,value:t.name})}],editChannelNameEditChange:[function(e){var t=e.props;e.state.set([].concat(l,["name"]),{isEditing:!0,value:t.value||""})}],editChannelNameEditCancel:[u],editChannelNameEditCommit:[[function(e){var t=e.props,n=e.state,r=e.path,a=e.http,o=n.get([].concat(l,["name"]));return a.post("/api/channels/"+t.channelId+"/setName",{name:o.value}).then(r.success).catch(r.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;n.getSignal("messages.channelUpdate")(r)},u],error:[u]}]],editChannelTopicEdit:[function(e){var t=e.props;e.state.set([].concat(l,["topic"]),{isEditing:!0,value:t.topic})}],editChannelTopicEditChange:[function(e){var t=e.props;e.state.set([].concat(l,["topic"]),{isEditing:!0,value:t.value})}],editChannelTopicEditCancel:[c],editChannelTopicEditCommit:[(0,o.set)((0,s.state)(n),i.inProgress),[function(e){var t=e.props,n=e.path,r=e.state,a=e.http,o=r.get([].concat(l,["topic"]));return a.post("/api/channels/"+t.channelId+"/setTopic",{topic:o.value}).then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;n.getSignal("messages.channelUpdate")(r)},c,(0,o.set)((0,s.state)(n),i.succeeded)],error:[c,(0,o.set)((0,s.state)(n),i.failed)]}]],setChannelAvatar:[function(e){var t=e.props,n=e.path,r=e.http,a=t.value,o=t.channelId;return r.post("/api/channels/"+o+"/setAvatar",{avatar:a}).then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelUpdate")(r)}],error:[]}],setChannelLive:[function(e){var t=e.props,n=e.path,r=e.http,a=t.live,o=t.channelId;return r.post("/api/channels/"+o+"/setLive",{live:a}).then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.channelUpdate")(r)}],error:[]}]},getState:function(){return{editChannel:{name:{isEditing:!1,value:""},topic:{isEditing:!1,value:""}}}}}}).call(d,"views/v2/modules/messages/EditChannelStore.js")},function(e,r,a){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var m=t(a(33)),v=t(a(27)),y=t(a(164)),_=t(a(166)),b=t(a(165)),w=t(a(167)),o=t(a(7));function t(e){return e&&e.__esModule?e:{default:e}}function n(a){return function(e){var t=e.props,n=e.state,r=t.messageId;n.set("messages.reactionStatus.status",a),a===o.default.inProgress?n.set("messages.reactionStatus.messageId",r):n.set("messages.reactionStatus.messageId","")}}r.default={name:e,depends:[],signals:{toggleReaction:[n(o.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.state,a=e.path,o=t.messageId,s=t.channelId,i=t.reactionType,l=r.get("messages.channels."+s),u=l.type,c=l.ticketId,d=l.workspaceId,f=v.default.getCurrentUserId(r),p=r.get("support.tickets.entities."+c+".data"),g=r.get("messages.workspaces."+d);("ticket"===u&&p.assignee===f||g.residentId===f)&&(f=g.botId);var h=(m.default.getMessage(r,s,o)||b.default.getStarMessage(r,o)||_.default.getReplyMessage(r,o)||y.default.getMentionMessage(r,o)||w.default.getSearchedMessage(r,o)).reactions[i];return h&&h[f]?n.post("/api/messages/"+o+"/removeReaction",{reactionType:i}).then(a.success).catch(a.error):n.post("/api/messages/"+o+"/addReaction",{reactionType:i}).then(a.success).catch(a.error)},{success:[function(e){var t=e.props;e.controller.getSignal("messages.syncReactionResult")(t)},n(o.default.succeeded)],error:[n(o.default.failed)]}]],syncReactionResult:[function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&n.getSignal("messages.messageUpdate")(r)}]},getState:function(){return{reactionStatus:{}}}}}).call(r,"views/v2/modules/messages/ReactionStore.js")},function(e,r,a){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var t,n=a(55),i=(t=n)&&t.__esModule?t:{default:t};var o=["messages","searchUsers"];r.default={name:e,depends:[],signals:{onConversationsFilterChanged:[function(e){var t=e.props,n=e.http,r=e.path,a=e.state,o=t.value,s=i.default.getWorkspaceId(a);return o&&s?n.get("/api/workspaces/"+s+"/searchUser",{keyword:o}).then(r.success).catch(r.error):r.success()},{success:[function(e){var t=e.props,n=e.state,r=(t.result||{}).users,a={};(void 0===r?[]:r).forEach(function(e){a[e.id]={id:e.id,fullname:e.fullname,avatar:e.avatar}}),n.set(o,a)}],error:[]}]},getState:function(){return{searchUsers:{}}}}}).call(r,"views/v2/modules/messages/SearchUserStore.js")},function(e,o,s){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t,n=s(33),a=(t=n)&&t.__esModule?t:{default:t};var l=["messages","editingMessage"];function r(e){e.state.set(l,{})}o.default={name:e,depends:[],signals:{editMessageStart:[function(e){var t=e.props,n=e.state,r=t.channelId,a=t.id,o=t.content,s=n.get(l),i=0;s&&s.id===a&&s.channelId===r&&(i=s.ticker+1),n.set(l,{channelId:r,id:a,content:o,ticker:i})}],editMessageEnd:[r],channelSelect:[r]},getState:function(){return{editingMessage:{}}},getEditingMessage:function(e){var t=e.get([].concat(l)),n=t.channelId,r=t.id;return a.default.getMessage(e,n,r)},isEditing:function(e,t,n){var r=this.getEditingMessage(e);return r&&r.channelId===t&&r.id===n}}}).call(o,"views/v2/modules/messages/EditMessageStore.js")},function(e,u,c){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=Object.freeze(Object.defineProperties(["deleteAsAdmin"],{raw:{value:Object.freeze(["deleteAsAdmin"])}})),r=c(51),a=(t=r)&&t.__esModule?t:{default:t},o=c(9),s=c(0);var i=["messages","deletingMessage"];function l(e){var t=e.props,n=e.state,r=t.channelId,a=t.messageId,o=t.deleteAsAdmin;n.set(i,{channelId:r,messageId:a,deleteAsAdmin:o})}u.default={name:e,depends:[],signals:{deleteMessageStart:[(0,o.when)((0,s.props)(n),function(e){return e}),{true:[a.default.TfaRequired(l)],false:[l]}],deleteMessageEnd:[function(e){e.state.set(i,{})}]},getState:function(){return{deletingMessage:{}}}}}).call(u,"views/v2/modules/messages/DeleteMessageStore.js")},function(e,p,g){"use strict";(function(e){Object.defineProperty(p,"__esModule",{value:!0});var t,n=l(["messages.fetchInvitationInfoStatus"],["messages.fetchInvitationInfoStatus"]),r=l(["messages.showInvitationDialog"],["messages.showInvitationDialog"]),a=g(9),o=g(0),s=g(7),i=(t=s)&&t.__esModule?t:{default:t};function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=["messages"],c=[].concat(u,["invitationInfo"]),d=[].concat(u,["showInvitationDialog"]);function f(e){var t=e.controller,n=e.props;t.getSignal("messages.syncInvitationInfo")(n)}p.default={name:e,depends:[],signals:{fetchInvitationInfo:[(0,a.set)((0,o.state)(n),i.default.inProgress),[function(e){var t=e.props,n=e.path,r=e.http,a=t.channelId;return r.get("/api/invitation/channel/"+a).then(n.success).catch(n.error)},{success:[f,(0,a.set)((0,o.state)(n),i.default.succeeded)],error:[(0,a.set)((0,o.state)(n),i.default.failed)]}]],syncInvitationInfo:[function(e){var t=e.props,n=e.state,r=t.result;200===t.status&&r&&(n.set(c,r),n.set(d,!0))}],closeInvitationDialog:[(0,a.set)((0,o.state)(r),!1)],makeInvitationNeverExpire:[(0,a.set)((0,o.state)(n),i.default.inProgress),[function(e){var t=e.props,n=e.path,r=e.http,a=t.id;return r.post("/api/invitation/"+a+"/makeNeverExpire").then(n.success).catch(n.error)},{success:[f,(0,a.set)((0,o.state)(n),i.default.succeeded)],error:[(0,a.set)((0,o.state)(n),i.default.failed)]}]],resetInvitationNeverExpire:[(0,a.set)((0,o.state)(n),i.default.inProgress),[function(e){var t=e.props,n=e.path,r=e.http,a=t.id;return r.post("/api/invitation/"+a+"/resetNeverExpire").then(n.success).catch(n.error)},{success:[f,(0,a.set)((0,o.state)(n),i.default.succeeded)],error:[(0,a.set)((0,o.state)(n),i.default.failed)]}]]},getState:function(){return{invitationInfo:{},showInvitationDialog:!1,fetchInvitationInfoStatus:i.default.initial}}}}).call(p,"views/v2/modules/messages/InvitationInfoStore.js")},function(e,a,o){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["messages.showInvitationEventDialog"],{raw:{value:Object.freeze(["messages.showInvitationEventDialog"])}})),n=o(9),r=o(0);a.default={name:e,depends:[],signals:{openInvitationEventDialog:[function(e){var t=e.props,n=e.state,r=t.eventId,a=n.get("currentHost");r&&(n.set(["messages","invitationEventUrl"],"https://"+a+"/events/"+r),n.set(["messages","showInvitationEventDialog"],!0))}],closeInvitationEventDialog:[(0,n.set)((0,r.state)(t),!1)]},getState:function(){return{invitationEventUrl:"",showInvitationEventDialog:!1}}}}).call(a,"views/v2/modules/messages/InvitationEventStore.js")},function(e,O,C){"use strict";(function(e){Object.defineProperty(O,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=y(["messages.beALobby.uploadImage.open"],["messages.beALobby.uploadImage.open"]),n=y(["messages.beALobby.updateStatus"],["messages.beALobby.updateStatus"]),a=y(["messages.beALobby.displayBeALobbyDialog"],["messages.beALobby.displayBeALobbyDialog"]),o=y(["value"],["value"]),s=y(["messages.beALobby.form"],["messages.beALobby.form"]),i=y(["messages.beALobby.isNew"],["messages.beALobby.isNew"]),l=y(["isNew"],["isNew"]),u=C(9),c=C(0),d=C(21),f=m(C(52)),p=m(C(25)),g=m(C(35)),h=m(C(82));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function y(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _=(0,p.default)({initial:null,succeeded:null,failed:null,inProgress:null}),b=["messages","beALobby","form"],w=["messages","beALobby","uploadImage"];function S(){return{open:!1,top:0,left:0,imageFile:"",imageWidth:0,imageHeight:0,originWidth:0,originHeight:0,cropWidth:0,cropHeight:0,maxCropWidth:0,maxCropHeight:0}}function E(){return(0,d.Form)({avatar:{value:"",validations:[],errorMessages:[]},name:{value:"",validations:["isValue"],errorMessages:["error_nameIsRequired"],isRequired:!0},description:{value:"",validations:["isValue"],errorMessages:["error_descriptionIsRequired"],isRequired:!0},tags:{value:[]},isLive:{value:!1,isRequired:!1},isPrivate:{value:!1,isRequired:!1}})}O.default={name:e,depends:[],signals:{openUploadImage:[function(e){var t=e.props,n=S();e.state.merge([].concat(w),r({},n,t,{open:!0}))}],closeUploadImage:[(0,u.set)((0,c.state)(t),!1)],suggestTag:[function(e){var t=e.props,n=e.http,r=e.path,a=t.q;return n.get("/api/searchSuggest",{q:a,t:"tags"}).then(r.success).catch(r.error)},{success:[function(e){var t=e.props,n=e.state,r=t.result.candidates;n.set("messages.beALobby.tagSuggestions",r)}],error:[]}],changeTag:[function(e){var t=e.props;return{field:[].concat(b,["tags"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),saveImage:[function(e){var t=e.props;return{field:[].concat(b,["avatar"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),changeName:[function(e){var t=e.props;return{field:[].concat(b,["name"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),changeDescription:[function(e){var t=e.props;return{field:[].concat(b,["description"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),changeIsLive:[function(e){var t=e.props;return{field:[].concat(b,["isLive"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),changeIsPrivate:[function(e){var t=e.props;return{field:[].concat(b,["isPrivate"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),submitLobbyRequest:f.default.EmailRequired([function(e){return e.props.formPath?{}:{formPath:[].concat(b)}}].concat(v(d.chains.formValidated),[function(e){var t=e.state,n=e.path,r=t.get(b);return(0,d.isValidForm)(r)?n.yes():n.no()},{yes:[(0,u.set)((0,c.state)(n),_.inProgress),[function(e){var t=e.state,n=e.http,r=e.path,a=e.props,o=t.get(b),s=a.workspaceId,i=h.default.getWorkspace(t,s);if(!i)return r.error();if((0,d.isValidForm)(o)){var l=Object.keys(o).reduce(function(e,t){return e[t]=o[t].value,e},{});if(l.tags=l.tags.map(function(e){return{id:e.id,type:e.type}}),l.workspaceId=s,t.get("messages.beALobby.isNew"))return n.post("/api/workspaces/"+s+"/channels_lobby",l).then(r.createSuccess).catch(r.error);var u=g.default.getChannelId(t);return l.channelId=u,n.post("/api/channels/"+u+"/convertToLobby",l).then(function(e){return r.convertSuccess({resp:e,isTicket:""===i.organizationId})}).catch(r.error)}return r.dummy()},{convertSuccess:[(0,u.set)((0,c.state)(n),_.succeeded),function(e){var t,n,r,a=e.props,o=e.state,s=e.controller,i=a.resp,l=i.result,u=i.status,c=a.isTicket;200===u&&l&&(c?(t=g.default.getChannelId(o),o.set("messages.channels."+t+".ticket",l),s.getSignal("header.showMessage")({message:"be_a_lobby_request_sent",type:"info"})):(n=l.lobbyChannel,r=l.lobbyCount,s.getSignal("messages.channelCreate")(n),s.getSignal("messages.channelSelect")({channelId:n.id,workspaceId:n.workspaceId}),s.getSignal("messages.handleChannelScroll")(),s.getSignal("messages.syncLobbyCount")({count:r,workspaceId:n.workspaceId})))},(0,u.set)((0,c.state)(a),!1)],createSuccess:[(0,u.set)((0,c.state)(n),_.succeeded),function(e){var t,n,r=e.props,a=e.controller,o=r.result;200===r.status&&o&&(t=o.lobbyChannel,n=o.lobbyCount,a.getSignal("messages.channelCreate")(t),a.getSignal("messages.channelSelect")({channelId:t.id,workspaceId:t.workspaceId}),a.getSignal("messages.handleChannelScroll")(),a.getSignal("messages.syncLobbyCount")({count:n,workspaceId:t.workspaceId}))},(0,u.set)((0,c.state)(a),!1)],error:[(0,u.set)((0,c.state)(n),_.failed),function(e){var t=e.props,n=e.controller,r="submitted_failed_"+t.result.errorCode;n.getSignal("header.showMessage")({message:r})}],dummy:[]}]],no:[(0,u.set)((0,c.state)(n),_.failed)]}])),changeDisplayBeALobbyDialog:[(0,u.when)((0,c.props)(o),function(e){return e}),{true:[(0,u.set)((0,c.state)(s),E()),(0,u.set)((0,c.state)(i),(0,c.props)(l))],false:[]},(0,u.set)((0,c.state)(a),(0,c.props)(o))]},getState:function(){return{beALobby:{updateStatus:_.initial,displayBeALobbyDialog:!1,uploadImage:S(),tagSuggestions:[],form:E(),isNew:!1}}}}}).call(O,"views/v2/modules/messages/BeALobbyStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=[].concat(["messages"],["memberOptionKey"]);t.default={name:e,depends:[],signals:{clearShowInfo:[function(e){e.state.set(r,"")}],setMemberOptionKey:[function(e){var t=e.state,n=e.props.userId;t.set(r,n)}]},getState:function(){return{memberOptionKey:""}}}}).call(t,"views/v2/modules/messages/MemberOptionStore.js")},function(e,i,l){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["messages.setRoleInfo.setRoleStatus"],{raw:{value:Object.freeze(["messages.setRoleInfo.setRoleStatus"])}})),n=o(l(25)),r=l(0),a=l(9),u=o(l(42));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)({initial:null,succeeded:null,failed:null,inProgress:null}),c=["messages","setRoleInfo"];i.default={name:e,depends:[],signals:{toggleSetRoleDialog:[function(e){var t=e.controller,n=e.props,r=e.state,a=n.userId;a||t.getSignal("messages.changeSelectedRole")({role:""}),r.set([].concat(c,["userId"]),a)}],changeSelectedRole:[function(e){var t=e.props;e.state.set([].concat(c,["selectedRole"]),t.role)}],setChannelMemberRole:[(0,a.set)((0,r.state)(t),s.inProgress),[function(e){var t=e.props,n=e.state,r=e.http,a=e.path,o=t.channelId,s=t.userId,i=n.get([].concat(c,["selectedRole"])),l=u.default.getMember(n,o,s);return(!l||l.role!==i)&&i?r.post("/api/channels/"+o+"/members/"+s+"/setRole",{role:i}).then(a.success).catch(a.error):a.success()},{success:[(0,a.set)((0,r.state)(t),s.succeeded),function(e){var t=e.props,n=e.controller,r=e.state,a=t.result,o=t.status;r.set([].concat(c,["userId"]),""),200===o&&a&&n.getSignal("messages.channelMemberAdd")(a)}],error:[(0,a.set)((0,r.state)(t),s.failed)]}]]},getState:function(){return{setRoleInfo:{userId:"",selectedRole:""}}}}}).call(i,"views/v2/modules/messages/SetRoleStore.js")},function(e,M,T){"use strict";(function(e){Object.defineProperty(M,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=E(["messages.exploreInfo.",".searchStatus"],["messages.exploreInfo.",".searchStatus"]),n=E(["workspaceId"],["workspaceId"]),r=E(["messages.exploreInfo.",".pageTicker"],["messages.exploreInfo.",".pageTicker"]),a=E(["messages.exploreInfo.",".liveOnly"],["messages.exploreInfo.",".liveOnly"]),o=E(["messages.exploreInfo.",".isExploring"],["messages.exploreInfo.",".isExploring"]),i=E(["page"],["page"]),l=E(["messages.exploreInfo.",".joinLobbyStatus.",""],["messages.exploreInfo.",".joinLobbyStatus.",""]),u=E(["channelId"],["channelId"]),c=E(["display"],["display"]),d=E(["messages.entitlementRequired.eventId"],["messages.entitlementRequired.eventId"]),f=E(["eventId"],["eventId"]),p=E(["messages.entitlementRequired.display"],["messages.entitlementRequired.display"]),g=E(["messages.kickedFromChannel.display"],["messages.kickedFromChannel.display"]),h=E(["messages.exploreInfo.",".lobbyType"],["messages.exploreInfo.",".lobbyType"]),m=E(["value"],["value"]),v=T(9),y=T(0),_=S(T(32)),b=S(T(55)),w=S(T(7));function S(e){return e&&e.__esModule?e:{default:e}}function E(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var C=["messages","exploreInfo"];function k(){return{isExploring:!1,searchQuery:"",searchStatus:w.default.initial,joinLobbyStatus:{},searchResult:{items:[],currentPage:0,pages:[],total:0},pageTicker:0,lobbyCount:{public:0,live:0,event:0,total:0},lobbyType:"public",liveOnly:!1}}function I(e){var t=e.state,n=e.props,r=e.http,a=e.path,o=n.page,s=n.workspaceId,i=t.get([].concat(C,[s,"searchQuery"])),l=t.get([].concat(C,[s,"lobbyType"])),u=[];return u.push("q:"+i),r.get("/api/c",{k:JSON.stringify(u),page:o,lt:l,workspaceId:s}).then(a.success).catch(a.error)}function j(e){var t,n,r,a,o,s,i=e.state,l=e.props,u=l.result;200===l.status&&u&&(t=i.get([].concat(C,[l.workspaceId,"searchResult"])),n=u.items,r=u.currentPage,a=u.pages,o=u.total,t&&n&&0<r?(s=t.items||[],i.set([].concat(C,[l.workspaceId,"searchResult"]),{items:[].concat(O(s),O(n)),currentPage:r,pages:a,total:t.total})):i.set([].concat(C,[l.workspaceId,"searchResult"]),{items:n,currentPage:r,pages:a,total:o}))}M.default={name:e,depends:[],signals:{openExplore:[(0,v.set)((0,y.state)(t,(0,y.props)(n)),w.default.inProgress),(0,v.set)((0,y.state)(r,(0,y.props)(n)),0),(0,v.set)((0,y.state)(a,(0,y.props)(n)),!1),(0,v.set)((0,y.state)(o,(0,y.props)(n)),!0),[I,{success:[j,(0,v.set)((0,y.state)(t,(0,y.props)(n)),w.default.succeeded)],error:[(0,v.set)((0,y.state)(t,(0,y.props)(n)),w.default.failed)]}]],stopExplore:[(0,v.set)((0,y.state)(o,(0,y.props)(n)),!1)],searchChannel:[(0,v.set)((0,y.state)(t,(0,y.props)(n)),w.default.inProgress),(0,v.set)((0,y.state)(r,(0,y.props)(n)),(0,y.props)(i)),[I,{success:[j,(0,v.set)((0,y.state)(t,(0,y.props)(n)),w.default.succeeded)],error:[(0,v.set)((0,y.state)(t,(0,y.props)(n)),w.default.failed)]}]],channelSelect:[function(e){var t=e.props,n=e.state,r=t.channelId,a=t.workspaceId;r&&(n.set([].concat(C,[a,"isExploring"]),!1),n.set([].concat(C,[a,"searchQuery"]),""))}],onSearchQueryChanged:[function(e){var t=e.props;e.state.set([].concat(C,[t.workspaceId,"searchQuery"]),t.query)}],onExploredLobbySelect:[function(e){var t=e.props,n=e.state,r=e.controller,a=t.channel;_.default.getChannel(n,a.id)?(r.getSignal("messages.channelSelect")({channelId:a.id,workspaceId:a.workspaceId}),r.getSignal("messages.handleChannelScroll")()):r.getSignal("messages.joinLobby")({channelId:a.id})}],joinLobby:[(0,v.set)((0,y.state)(l,(0,y.props)(n),(0,y.props)(u)),w.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.channelId;return n.post("/api/channels/"+a+"/join",{}).then(r.success).catch(r.error)},{success:[function(e){var t=e.props,n=e.controller,r=t.result;200===t.status&&r&&r.forEach(function(e){n.getSignal("messages.channelCreate")(e),"live"!==e.type&&(n.getSignal("messages.channelSelect")({channelId:e.id,workspaceId:e.workspaceId}),n.getSignal("messages.handleChannelScroll")())})},(0,v.set)((0,y.state)(l,(0,y.props)(n),(0,y.props)(u)),w.default.succeeded)],error:[function(e){var t,n=e.controller,r=e.props,a=r.result,o=a.errorCode,s=a.target,i=r.status;400===i&&"ChannelMemberWasKicked"===o&&n.getSignal("messages.toggleKickedFromChannel")({display:!0}),400===i&&"EntitlementRequired"===o&&(t=s||null,n.getSignal("messages.toggleEntitlementRequired")({display:!0,eventId:t}))},(0,v.set)((0,y.state)(l,(0,y.props)(n),(0,y.props)(u)),w.default.failed)]}]],connectionOpen:[function(e){var t=e.props,n=e.state,r=t.lobbyCounts,a=t.workspaces,o={};r.forEach(function(e){var t=k();o[e.workspaceId]=s({},t,{lobbyCount:e})}),a.forEach(function(e){o[e.id]||(o[e.id]=k())}),n.set(C,o)}],workspaceCreate:[function(e){var t=e.props,n=e.state,r={};r[t.id]=k(),n.merge(C,r)}],setLiveOnly:[function(e){var t=e.props,n=e.state,r=e.controller,a=t.workspaceId,o=t.value;n.set([].concat(C,[a,"liveOnly"]),o),r.getSignal("messages.searchChannel")({page:0,liveOnly:o,workspaceId:a})}],syncLobbyCount:[function(e){var t=e.props,n=e.state,r=t.count,a=t.workspaceId;n.set([].concat(C,[a,"lobbyCount","total"]),r)}],toggleEntitlementRequired:[(0,v.when)((0,y.props)(c),function(e){return e}),{true:[(0,v.set)((0,y.state)(d),(0,y.props)(f))],false:[(0,v.set)((0,y.state)(d),null)]},(0,v.set)((0,y.state)(p),(0,y.props)(c))],toggleKickedFromChannel:[(0,v.set)((0,y.state)(g),(0,y.props)(c))],switchLobbyType:[(0,v.set)((0,y.state)(h,(0,y.props)(n)),(0,y.props)(m)),function(e){var t=e.controller,n=e.props.workspaceId;t.getSignal("messages.searchChannel")({page:0,workspaceId:n})}],openSupportTickets:[function(e){var t=e.props,n=e.state,r=t.workspaceId;n.set([].concat(C,[r,"isExploring"]),!1),n.set([].concat(C,[r,"searchQuery"]),"")}]},getState:function(){return{exploreInfo:{},entitlementRequired:{display:!1,eventId:null},kickedFromChannel:{display:!1}}},getExploreInfo:function(e,t){var n=(n=1<arguments.length&&void 0!==t?t:"")||b.default.getWorkspaceId(e);return e.get([].concat(C,[n]))}}}).call(M,"views/v2/modules/messages/ExploreLobbyStore.js")},function(e,p,g){"use strict";(function(e){Object.defineProperty(p,"__esModule",{value:!0});var t=d(["value"],["value"]),n=d(["messages.channelTags.tags"],["messages.channelTags.tags"]),r=d(["tags"],["tags"]),a=d(["messages.channelTags.display"],["messages.channelTags.display"]),o=d(["messages.channelTags.updateStatus"],["messages.channelTags.updateStatus"]),s=g(9),i=g(0),l=c(g(25)),u=c(g(35));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=(0,l.default)({initial:null,succeeded:null,failed:null,inProgress:null});p.default={name:e,depends:[],signals:{toggleChannelTags:[(0,s.when)((0,i.props)(t),function(e){return e}),{true:[(0,s.set)((0,i.state)(n),(0,i.props)(r))],false:[(0,s.set)((0,i.state)(n),[])]},(0,s.set)((0,i.state)(a),(0,i.props)(t))],changeChannelTags:[(0,s.set)((0,i.state)(n),(0,i.props)(t))],requestChannelTagsChange:[(0,s.set)((0,i.state)(o),f.inProgress),function(e){var t=e.state,n=e.http,r=e.path,a=t.get("messages.channelTags.tags"),o=u.default.getChannelId(t);return n.post("/api/channels/"+o+"/setTags",{tags:a}).then(r.success).catch(r.error)},{success:[(0,s.set)((0,i.state)(o),f.succeeded),(0,s.set)((0,i.state)(n),[]),(0,s.set)((0,i.state)(a),!1)],error:[(0,s.set)((0,i.state)(o),f.failed)]}]},getState:function(){return{channelTags:{display:!1,tags:[],updateStatus:f.initial}}}}}).call(p,"views/v2/modules/messages/ChannelTagsStore.js")},function(e,v,y){"use strict";(function(e){Object.defineProperty(v,"__esModule",{value:!0});var t=m(["messages.addHostDialog.show"],["messages.addHostDialog.show"]),n=m(["messages.addHostDialog.selectedSuggestUser"],["messages.addHostDialog.selectedSuggestUser"]),r=m(["messages.addHostDialog.hide"],["messages.addHostDialog.hide"]),a=m(["messages.addHostDialog.suggestStatus"],["messages.addHostDialog.suggestStatus"]),o=m(["messages.addHostDialog.suggestUsersList"],["messages.addHostDialog.suggestUsersList"]),s=m(["messages.addHostDialog.updateStatus"],["messages.addHostDialog.updateStatus"]),i=m(["messages.removeHostDialog.updateStatus"],["messages.removeHostDialog.updateStatus"]),l=m(["messages.removeHostDialog.show"],["messages.removeHostDialog.show"]),u=m(["messages.removeHostDialog.channelId"],["messages.removeHostDialog.channelId"]),c=m(["messages.removeHostDialog.userId"],["messages.removeHostDialog.userId"]),d=y(9),f=y(0),p=h(y(7)),g=h(y(35));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}v.default={name:e,depends:[],signals:{openAddHostDialog:[function(e){var t=e.state,n=g.default.getChannelId(t),r=t.get("messages.channels"),a=t.get("messages.channelMembers")[r[n].liveChannelId],o=t.get("messages.users"),s=Object.values(a).filter(function(e){var t=e.role;return"admin"===t||"moderator"===t||"owner"===t}).map(function(e){var t=e.userId;return o[t]});t.set("messages.addHostDialog.selectedSuggestUser",s)},(0,d.set)((0,f.state)(t),!0)],openRemoveHostDialog:[function(e){var t=e.state,n=e.props,r=n.channelId,a=n.userId,o=n.name;t.set("messages.removeHostDialog",{show:!0,channelId:r,userId:a,name:o})}],closeRemoveHostDialog:[function(e){e.state.set("messages.removeHostDialog",{show:!1,channelId:"",userId:""})}],closeAddHostDialog:[(0,d.set)((0,f.state)(t),!1)],addSelectUser:[function(e){var t=e.props,n=e.state,r=n.get("messages.addHostDialog.selectedSuggestUser");n.set("messages.addHostDialog.selectedSuggestUser",[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r),[t]))}],cancelSuggestUsers:[(0,d.set)((0,f.state)(n),null)],hideSearchBar:[(0,d.set)((0,f.state)(r),!0)],showSearchBar:[(0,d.set)((0,f.state)(r),!1)],suggestUsers:[(0,d.set)((0,f.state)(a),p.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path,a=t.v;return n.get("/api/userSuggest",{q:a,limit:5}).then(r.success).catch(r.error)},{success:[(0,d.set)((0,f.state)(a),p.default.succeeded),function(e){var t=e.props,n=e.state,r=t.result.candidates;n.set("messages.addHostDialog.suggestUsersList",r)}],error:[(0,d.set)((0,f.state)(a),p.default.failed)]}]],clearSuggestUser:[(0,d.set)((0,f.state)(o),null)],addHost:[(0,d.set)((0,f.state)(s),p.default.inProgress),[function(e){var t=e.state,n=e.http,r=e.path,a=e.controller,o=t.get("messages.addHostDialog.selectedSuggestUser").map(function(e){return e.id}),s=g.default.getChannelId(t);if(o&&0<o.length){var i=t.get("messages.channels"),l=t.get("messages.channelMembers")[i[s].liveChannelId],u=Object.values(l).filter(function(e){var t=e.role;return"admin"===t||"moderator"===t||"owner"===t}).map(function(e){return e.userId});return n.post("/api/channels/"+s+"/members",{userIds:o.filter(function(t){return-1===u.findIndex(function(e){return e===t})}),role:"admin"}).then(r.success).catch(r.error)}return a.getSignal("header.showMessage")({message:"should_select_user"}),r.error()},{success:[(0,d.set)((0,f.state)(s),p.default.succeeded),(0,d.set)((0,f.state)(t),!1),(0,d.set)((0,f.state)(o),null),(0,d.set)((0,f.state)(n),null),(0,d.set)((0,f.state)(r),!1)],error:[(0,d.set)((0,f.state)(s),p.default.failed)]}]],removeHost:[(0,d.set)((0,f.state)(i),p.default.inProgress),[function(e){var t=e.props,n=e.path,r=e.http,a=t.userId,o=t.channelId;return a&&o?r.post("/api/channels/"+o+"/members/"+a+"/setRole",{role:"member"}).then(n.success).catch(n.error):n.error()},{success:[(0,d.set)((0,f.state)(i),p.default.succeeded),(0,d.set)((0,f.state)(l),!1),(0,d.set)((0,f.state)(u),""),(0,d.set)((0,f.state)(c),"")],error:[(0,d.set)((0,f.state)(i),p.default.failed)]}]]},getState:function(){return{addHostDialog:{show:!1,suggestUsersList:null,selectedSuggestUser:[],updateStatus:"",suggestStatus:"",hide:!1},removeHostDialog:{updateStatus:"",show:!1,channelId:"",userId:"",name:""}}}}}).call(v,"views/v2/modules/messages/AddHostStore.js")},function(e,k,I){"use strict";(function(e){Object.defineProperty(k,"__esModule",{value:!0});var t=S(["messages.addVideoDialog.type"],["messages.addVideoDialog.type"]),n=S(["messages.addVideoDialog.show"],["messages.addVideoDialog.show"]),r=S(["messages.addVideoDialog.cloudType"],["messages.addVideoDialog.cloudType"]),a=S(["messages.addVideoDialog.error"],["messages.addVideoDialog.error"]),o=S(["messages.addVideoDialog.url"],["messages.addVideoDialog.url"]),s=S(["messages.addVideoDialog.readyUrl"],["messages.addVideoDialog.readyUrl"]),i=S(["messages.addVideoDialog.streamData"],["messages.addVideoDialog.streamData"]),l=S(["messages.streamInfoDialog.show"],["messages.streamInfoDialog.show"]),u=S(["value"],["value"]),c=S(["url"],["url"]),d=S(["messages.addRecordDialog.status"],["messages.addRecordDialog.status"]),f=S(["messages.addRecordDialog.percentage"],["messages.addRecordDialog.percentage"]),p=S(["messages.showStream"],["messages.showStream"]),g=S(["messages.showRecords"],["messages.showRecords"]),h=S(["messages.selectedRecord"],["messages.selectedRecord"]),m=I(9),v=I(0),y=w(I(35)),_=w(I(15)),b=w(I(7));function w(e){return e&&e.__esModule?e:{default:e}}function S(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var E=/(.*\.?|^)(youtube|youtu)\.(com|be)/i,O=/(.*\.?|^)(youtube|youtu|vimeo|qq)\.(com|be)/i,C={};k.default={name:e,depends:[],signals:{openAddStreamDialog:[(0,m.set)((0,v.state)(t),"stream"),(0,m.set)((0,v.state)(n),!0),(0,m.set)((0,v.state)(r),"tencent")],openAddRecordDialog:[(0,m.set)((0,v.state)(t),"record"),(0,m.set)((0,v.state)(n),!0)],closeAddVideoDialog:[(0,m.set)((0,v.state)(n),!1),(0,m.set)((0,v.state)(a),""),(0,m.set)((0,v.state)(o),""),(0,m.set)((0,v.state)(s),""),(0,m.set)((0,v.state)(i),null)],closeStreamInfoDialog:[(0,m.set)((0,v.state)(l),!1)],setStreamLoading:[function(e){var t=e.state,n=e.props;t.set("messages.addVideoDialog.streamLoading",n.value)}],previewVideo:[function(e){var t=e.props,n=e.state,r=e.path,a=t.url;return!1===("record"===n.get("messages.addVideoDialog.type")?O:E).test(a)?(n.set("messages.addVideoDialog.error","Invalid "+a),r.no()):(n.unset("messages.addVideoDialog.error"),n.set("messages.addVideoDialog.url",a),r.yes({url:a}))},{yes:[function(e){var t=e.props,n=e.messages,r=e.state,a=r.get("messages.addVideoDialog.type"),o=y.default.getChannelId(r);n.httpPreviewStream(t,o,a)}],no:[]}],addStreamPreview:[function(e){var t=e.props,n=e.state,r=t.result;n.set("messages.addVideoDialog.streamData",r)}],previewStreamFail:[(0,m.set)((0,v.state)(a),"preview_failed")],changeStreamUrl:[(0,m.set)((0,v.state)(o),(0,v.props)(u))],changeStreamReadyUrl:[(0,m.set)((0,v.state)(s),(0,v.props)(c))],addStream:[function(e){var t=e.props,n=e.http,r=e.path,a=e.state,o=t.channelId,s=t.type,i=t.cloudType,l=a.get("messages.addVideoDialog.readyUrl");return n.post("/api/channels/"+o+"/stream",{url:l,type:s,cloudType:i}).then(r.success).catch(r.error)},{success:[(0,m.set)((0,v.state)(n),!1),function(e){var t,n,r,a=e.props,o=e.state;"rtmp"===a.type&&(n=(t=a.result).endpoint,r=t.stream,o.set("messages.streamInfoDialog.endpoint",n),o.set("messages.streamInfoDialog.stream",r),o.set("messages.streamInfoDialog.show",!0))}],error:[]}],addRecord:[function(e){var t=e.state,n=e.http,r=e.path,a=e.props.channelId,o=t.get("messages.addVideoDialog.readyUrl");return n.post("/api/channels/"+a+"/record",{url:o}).then(r.success).catch(r.error)},{success:[(0,m.set)((0,v.state)(n),!1)],error:[]}],removeRecord:[function(e){var t=e.http,n=e.props,r=e.path,a=n.index,o=n.channelId;return t.post("/api/channels/"+o+"/record/remove",{index:a}).then(r.success).catch(r.error)},{success:[],error:[]}],shareRecord:[function(e){var t=e.http,n=e.props,r=e.path,a=n.index,o=n.channelId;return t.post("/api/channels/"+o+"/record/share",{index:a}).then(r.success).catch(r.error)},{success:[function(e){var t,n,r=e.props,a=e.controller;""===r.result.url?a.getSignal("header.showMessage")({message:"channel_record_processing"}):(t=document.createElement("textarea"),n=new URL(window.location.href),t.value=n.protocol+"//"+n.host+r.result.url,t.setAttribute("readonly",""),t.style={position:"fixed",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),a.getSignal("header.showMessage")({message:"channel_record_share_link_copied",type:"info"}))}],error:[]}],uploadRecord:[[(0,m.set)((0,v.state)(d),b.default.inProgress)],function(e){var t=e.props,n=e.http,r=e.path;return n.post("/api/resumableUpload",{fileName:t.upload.file.name,fileType:t.upload.file.type,fileSize:t.upload.file.size,private:!1}).then(r.success).catch(r.error)},{success:[function(e){var t,n,r,a=e.state,o=e.props,s=e.messages;t=o.upload.file,n=function(e){a.set("messages.addRecordDialog.size",o.upload.file.size),a.set("messages.currentUpload",o),a.set("messages.currentUpload.upload.videoDuration",e);var t=y.default.getChannelId(a),n=a.get("messages.currentUpload");s.uploadRecord(t,n.upload,o.result.location,0)},(r=document.createElement("video")).preload="metadata",r.onloadedmetadata=function(){var e=r.src,t=r.duration;r.src="",window.URL.revokeObjectURL(e),n(t)},r.src=URL.createObjectURL(t)}],error:[(0,m.set)((0,v.state)(d),b.default.initial)]}],retryUploadRecord:[[(0,m.set)((0,v.state)(d),b.default.inProgress)],function(e){var t=e.state,n=e.http,r=e.path,a=t.get("messages.currentUpload").result.location,a=encodeURIComponent(a);return n.get("/api/resumableUpload?location="+a).then(r.success).catch(r.error)},{success:[function(e){var t=e.state,n=e.props,r=e.messages,a=y.default.getChannelId(t),o=t.get("messages.currentUpload"),s=n.result.end;r.uploadRecord(a,o.upload,o.result.location,s)}],error:[(0,m.set)((0,v.state)(d),b.default.failed)]}],uploadRecordFail:[[(0,m.set)((0,v.state)(d),b.default.failed)]],uploadRecordUpdateProgress:[function(e){var t=e.state,n=e.props,r=t.get("messages.addRecordDialog.size"),a=n.loaded/r*100;t.set("messages.addRecordDialog.percentage",a.toFixed(0))}],uploadRecordComplete:[(0,m.set)((0,v.state)(d),b.default.succeeded),(0,m.set)((0,v.state)(n),!1),function(e){e.controller.getSignal("header.showMessage")({message:"upload_record_succeed",type:"info"})}],uploadRecordStart:[(0,m.set)((0,v.state)(d),b.default.inProgress),(0,m.set)((0,v.state)(f),"0.00")],removeStream:[function(e){var t=e.props,n=e.http,r=e.path,a=t.channelId;return n.post("/api/channels/"+a+"/stream",{type:"remove"}).then(r.success).catch(r.error)},{success:[],error:[]}],reloadStream:[function(e){var t=e.http,n=e.path,r=e.props.channelId;return t.get("/api/channels/"+r+"/stream").then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.state,r=t.result,a=t.channelId;n.set("messages.channels."+a+".stream",r)}],error:[]}],channelSelect:[function(e){var t=e.state,n=e.props,r=e.controller,a=t.get("messages.channels"),o=n.channelId,s=void 0;a[o]&&(s=a[o].liveChannelId),s&&a[s]&&(a[s].stream?setTimeout(function(){r.getSignal("messages.toggleStream")({value:!0})}):a[s].records&&0!==a[s].records.length&&setTimeout(function(){r.getSignal("messages.toggleRecords")({value:!0})}),t.set("messages.selectedRecord",null))}],toggleStream:[(0,m.set)((0,v.state)(p),(0,v.props)(u)),(0,m.set)((0,v.state)(g),!1)],toggleRecords:[(0,m.set)((0,v.state)(g),(0,v.props)(u)),(0,m.set)((0,v.state)(p),!1)],selectRecord:[(0,m.set)((0,v.state)(h),(0,v.props)(u))],changeCloudType:[(0,m.set)((0,v.state)(r),(0,v.props)(u))]},getServices:function(i){return{httpPreviewStream:function(e,t,n){i.getSignal("messages.setStreamLoading")({value:!0});var r="/api/channels/"+t+"/"+n+"/preview",a=e.url,o=new XMLHttpRequest;o.open("POST",_.default.REQUEST_BASE_URL+r,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.timeout=0,o.addEventListener("readystatechange",function(){o&&4===o.readyState&&(i.getSignal("messages.setStreamLoading")({value:!1}),200<=o.status&&o.status<300?(i.getSignal("messages.changeStreamReadyUrl")({url:a}),i.getSignal("messages.addStreamPreview")({result:JSON.parse(o.response)})):0<o.status&&i.getSignal("messages.previewStreamFail")({error:o.responseText}))}),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify({url:a}))},uploadRecord:function(e,t,n,r){var a=t.file,o=new XMLHttpRequest;o.open("POST",_.default.REQUEST_BASE_URL+"/api/channels/"+e+"/record/upload",!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.timeout=0,o.upload.addEventListener("progress",function(e){return i.getSignal("messages.uploadRecordUpdateProgress")({loaded:e.loaded+r})}),o.addEventListener("timeout",function(){return i.getSignal("messages.uploadRecordFail")({id:t.id})}),o.addEventListener("error",function(){return i.getSignal("messages.uploadRecordFail")({id:t.id,err:"network_error"})}),o.addEventListener("readystatechange",function(){o&&4===o.readyState&&(200<=o.status&&o.status<300?i.getSignal("messages.uploadRecordComplete")():0<o.status&&i.getSignal("messages.uploadRecordFail")())});var s=new FormData;s.append("fileName",a&&a.name||""),s.append("fileType",a&&a.type||""),s.append("size",a&&a.size-r||0),s.append("location",n),s.append("uploadMode","resumable"),s.append("offset",r),s.append("videoDuration",t.videoDuration),s.append("file",a.slice(r)),o.send(s),C[t.id]=o,i.getSignal("messages.uploadRecordStart")()}}},getState:function(){return{addVideoDialog:{type:"",show:!1,streamLoading:!1,url:"",readyUrl:"",cloudType:""},addRecordDialog:{show:!1,size:null,status:b.default.initial,percentage:""},streamInfoDialog:{show:!1,endpoint:"",stream:""},showStream:!0,showRecords:!1,selectedRecord:null}}}}).call(k,"views/v2/modules/messages/AddStreamStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:e,depends:[],signals:{ipcSyncState:[function(e){var t=e.state.get(),n=t.locale,r=t.utcOffset,a=t.cookies,o=t.loginUser;window.sendSignal&&window.sendSignal("ipc_syncState",{locale:n,utcOffset:r,cookies:a,loginUser:o})}]},getServices:function(e){e.on("initialized",function(){e.getSignal("messages.ipcSyncState")()})},getState:function(){return{}}}}).call(t,"views/v2/modules/messages/IpcStore.js")},function(e,c,d){"use strict";(function(e){Object.defineProperty(c,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=u(["messages.recorder.processing"],["messages.recorder.processing"]),n=u(["messages.recorder.recordedTime"],["messages.recorder.recordedTime"]),r=u(["messages.recorder.displayPopup"],["messages.recorder.displayPopup"]),a=u(["id"],["id"]),o=u(["messages.recorder.recording"],["messages.recorder.recording"]),i=d(9),l=d(0);function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}c.default={name:e,depends:[],signals:{record:[function(e){var t=e.messages,n=e.state,r=e.props;n.set("messages.recorder.recordedTime",0),n.set("messages.recorder.channelId",r.channelId),n.set("messages.recorder.parentMessageId",r.parentMessageId),t.recorder.record()}],finishRecord:[function(e){e.messages.recorder.finish()}],cancelRecord:[function(e){e.messages.recorder.cancel()}],postRecord:[function(e){var t=e.state,n=e.controller,r=e.props,a=t.get("messages.recorder.channelId"),o=t.get("messages.recorder.parentMessageId");n.getSignal("messages.uploadAttachment")(s({},r,{channelId:a,content:"",parentMessageId:o}))}],closeRecord:[(0,i.set)((0,l.state)(t),!1),(0,i.set)((0,l.state)(n),0),(0,i.set)((0,l.state)(r),null)],showRecordPopup:[(0,i.set)((0,l.state)(r),(0,l.props)(a))],hideRecordPopup:[(0,i.set)((0,l.state)(r),null)],onStartedRecording:[(0,i.set)((0,l.state)(o),!0)],onFinishedRecording:[(0,i.set)((0,l.state)(t),!0),(0,i.set)((0,l.state)(o),!1)],onCanceledRecording:[(0,i.set)((0,l.state)(o),!1),(0,i.set)((0,l.state)(n),0),(0,i.set)((0,l.state)(r),null)],onRecordedTimeUpdate:[function(e){var t=e.state,n=e.props,r=e.controller,a=n.timeSpan,o=t.get("messages.recorder.recordedTime");t.set("messages.recorder.recordedTime",o+a),60<o+2*a&&r.getSignal("messages.finishRecord")()}]},getServices:function(n){var e=new(d(683).default);return e.on("time-update",function(e){n.getSignal("messages.onRecordedTimeUpdate")({timeSpan:e})}),e.on("started",function(){n.getSignal("messages.onStartedRecording")()}),e.on("finished",function(){n.getSignal("messages.onFinishedRecording")()}),e.on("canceled",function(){n.getSignal("messages.onCanceledRecording")()}),e.on("new-record",function(e,t){e.name="",n.getSignal("messages.closeRecord")(),n.getSignal("messages.postRecord")({upload:{file:e,voice:!0,duration:t,dataUrl:null,width:null,height:null,filename:"voice-message-"+(new Date).getTime()}})}),{recorder:e}},getState:function(){return{recorder:{recording:!1,recordedTime:0,channelId:null,parentMessageId:null,processing:!1,displayPopup:null}}}}}).call(c,"views/v2/modules/messages/AudioRecorderStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=l(n(464)),s=l(n(684)),i=n(83);function l(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,i.EventEmitter),r(c,[{key:"stop",value:function(){this.source.disconnect(),this.source=null,this.processor.disconnect(),this.processor=null,this.destination.disconnect(),this.destination=null,this.audioInput.disable(),this.audioInput=null,this.audioContext.close(),this.audioContext=null}},{key:"record",value:function(){var n=this;this.audioInput=new o.default,this.audioInput.enable(function(e,t){e?console.log(e):(n.audioContext=new AudioContext,n.source=n.audioContext.createMediaStreamSource(t),n.processor=n.audioContext.createScriptProcessor(8192,1,1),n.processor.onaudioprocess=function(e){var t={data:e.inputBuffer.getChannelData(0)};n.worker.postMessage({type:"audioProcess",details:t})},n.source.connect(n.processor),n.destination=n.audioContext.createMediaStreamDestination(),n.processor.connect(n.destination),n.worker.postMessage({type:"clear"}),n.worker.postMessage({type:"startRecord",details:{sampleRate:n.audioContext.sampleRate}}))},!1)}},{key:"finish",value:function(){this.worker.postMessage({type:"requestFinishRecord"})}},{key:"cancel",value:function(){this.worker.postMessage({type:"requestCancelRecord"})}}]),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return l.worker=null,l.audioContext=null,l.audioInput=null,l.source=null,l.processor=null,l.destination=null,l.worker=new s.default,l.worker.onmessage=function(e){var t=e.data,n=t.type,r=t.details;switch(n){case"new":var a=r.blob,o=r.duration;l.emit("new-record",a,o);break;case"slice-saved":var s=r.length,i=l.audioContext.sampleRate;l.emit("time-update",s/i);break;case"started":l.emit("started");break;case"finished":l.emit("finished"),l.stop(),l.worker.postMessage({type:"export"});break;case"canceled":l.emit("canceled"),l.stop(),l.worker.postMessage({type:"clear"})}},l}t.default=u},function(e,t,n){e.exports=function(){return n(685)('!function(r){var i={};function n(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=r,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://play-static.unity.com/public/assets/Project",n(n.s=0)}([function(t,e,r){"use strict";var i=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t};function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s={Mono:1,Stereo:2},o={Phone:8e3,Promote:11025,WideBand:16e3,RadioBroadcasting:22050,miniDV:32e3,CD:44100,BluRay:96e3},l=[],c=0,u=!1,h=0,f=!1,v=null;self.onmessage=function(t){var e,r=t.data,i=r.type,n=r.details;switch(i){case"audioProcess":var a=n.data;e=a,u&&(l.push(e),h+=e.length,self.postMessage({type:"slice-saved",details:{length:e.length}}),f&&(u=f=!1,v?self.postMessage({type:"finished"}):self.postMessage({type:"canceled"})));break;case"startRecord":u=!0,c=n.sampleRate,self.postMessage({type:"started"});break;case"requestFinishRecord":v=f=!0;break;case"requestCancelRecord":v=!(f=!0);break;case"clear":v=null,c=h=0,f=!(l=[]);break;case"export":!function(){for(var t=new Float32Array(h),e=0,r=0;r<l.length;r++)t.set(l[r],e),e+=l[r].length;var i=function(t){var e=new ArrayBuffer(44+2*t.length),r=new DataView(e),i=new p(r);i.writeString("RIFF"),i.writeUint32(32+2*t.length,!0),i.writeString("WAVE"),i.writeString("fmt "),i.writeUint32(16,!0),i.writeUint16(1,!0),i.writeUint16(s.Mono,!0),i.writeUint32(o.Phone,!0),i.writeUint32(o.Phone*s.Mono*2,!0),i.writeUint16(2*s.Mono,!0),i.writeUint16(16,!0),i.writeString("data"),i.writeUint32(2*t.length,!0);for(var n=0;n<t.length;n++){var a=Math.max(-1,Math.min(1,t[n]));i.writeInt16(a<0?32768*a:32767*a,!0)}return r}(new d(c,o.Phone).resample(t)),n=new Blob([i],{type:"audio/wav"});self.postMessage({type:"new",details:{blob:n,duration:h/c}})}()}};var p=(i(w,[{key:"writeString",value:function(t){for(var e=0;e<t.length;e++)this.view.setUint8(this.cursor+e,t.charCodeAt(e));this.cursor+=e}},{key:"writeUint32",value:function(t,e){var r=1<arguments.length&&void 0!==e&&e;this.view.setUint32(this.cursor,t,r),this.cursor+=4}},{key:"writeUint16",value:function(t,e){var r=1<arguments.length&&void 0!==e&&e;this.view.setUint16(this.cursor,t,r),this.cursor+=2}},{key:"writeInt16",value:function(t,e){var r=1<arguments.length&&void 0!==e&&e;this.view.setInt16(this.cursor,t,r),this.cursor+=2}}]),w);function w(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;a(this,w),this.view=null,this.cursor=0,this.view=t,this.cursor=e}var d=(i(g,[{key:"initialize",value:function(){this.srcRate===this.destRate?this.resample=this._bypass:this.srcRate<this.destRate?this.resample=this._linearInterpolation:this.resample=this._multiTap}}]),g);function g(t,e){var u=this;a(this,g),this._linearInterpolation=function(t){for(var e=Math.ceil(t.length*u.destRate/u.srcRate*1.0000004768371582)+1,r=new Float32Array(e),i=u.srcRate/u.destRate,n=1,a=0,s=0,o=void 0,l=0;n<1;n+=i)a=1-(s=n%1),r[l++]=t[0]*s;for(--n,o=Math.floor(n);o<e-1;)a=1-(s=n%1),r[l++]=t[o]*a+t[o+1]*s,n+=i,o=Math.floor(n);return r},this._multiTap=function(t){var e,r=Math.ceil(t.length*u.destRate/u.srcRate*1.0000004768371582)+1,i=new Float32Array(r),n=u.srcRate/u.destRate,a=0,s=0,o=0,l=0,c=0;do{for(s=n,o=0;0<s&&l<t.length;){if(!((e=1+l-c)<=s)){o+=t[l]*s,c+=s,s=0;break}o+=t[l++]*e,c=l,s-=e}s<=0&&(i[a++]=o/n)}while(l<t.length);return i},this._bypass=function(t){return t},this.srcRate=t,this.destRate=e,this.initialize()}}]);',n.p+"5bab090cda5d9ff75670.worker.js")}},function(e,t,n){"use strict";var a=window.URL||window.webkitURL;e.exports=function(t,n){try{try{var r;try{(r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),r=r.getBlob()}catch(e){r=new Blob([t])}return new Worker(a.createObjectURL(r))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(e){if(!n)throw Error("Inline worker is not supported");return new Worker(n)}}},function(e,g,h){"use strict";(function(e){Object.defineProperty(g,"__esModule",{value:!0});var t,n=c(["messages.editVisibilityDialog.value.",""],["messages.editVisibilityDialog.value.",""]),r=c(["type"],["type"]),a=c(["value"],["value"]),o=c(["messages.editVisibilityDialog.show"],["messages.editVisibilityDialog.show"]),s=h(9),i=h(0),l=h(35),u=(t=l)&&t.__esModule?t:{default:t};function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var f=/^[.a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,p=/^@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;g.default={name:e,depends:[],signals:{addVisibilityItem:[function(e){var t=e.state,n=e.props,r=t.get("messages.editVisibilityDialog.visibility"),a=n.value,o=n.type,s=void 0;switch(o){case"address":s=f;break;case"domain":s=p;break;default:return{}}return s.test(a)?(t.set("messages.editVisibilityDialog.error."+o,!1),t.set("messages.editVisibilityDialog.visibility",[].concat(d(r),[{value:a,type:o}])),t.set("messages.editVisibilityDialog.value."+o,"")):t.set("messages.editVisibilityDialog.error."+o,!0),{}}],removeVisibilityItem:[function(e){var t=e.state,n=e.props,r=t.get("messages.editVisibilityDialog.visibility"),a=n.value;t.set("messages.editVisibilityDialog.visibility",[].concat(d(r)).filter(function(e){return e.value!==a}))}],changeVisibilityInputValue:[(0,s.set)((0,i.state)(n,(0,i.props)(r)),(0,i.props)(a))],toggleEditVisibilityDialog:[function(e){var t=e.props,n=e.http,r=e.state,a=e.path;if(!t.value)return a.close();var o=u.default.getChannelId(r);return n.get("/api/channels/"+o+"/fetchVisibility").then(a.success).catch(a.error)},{success:[function(e){var t=e.state,n=e.props.result;t.set("messages.editVisibilityDialog.visibility",Object.keys(n).map(function(e){return{value:e,type:n[e]}}))},(0,s.set)((0,i.state)(o),!0)],error:[function(e){e.controller.getSignal("header.showMessage")({message:"error_when_fetch_channel_visibility"})}],close:[(0,s.set)((0,i.state)(o),!1)]}],postVisibility:[function(e){var t=e.http,n=e.path,r=e.state,a=u.default.getChannelId(r),o=r.get("messages.editVisibilityDialog.visibility"),s={};return o.forEach(function(e){var t=e.value,n=e.type;return s[t]=n,{}}),t.post("/api/channels/"+a+"/setVisibility",{visibility:s}).then(n.success).catch(n.error)},{success:[(0,s.set)((0,i.state)(o),!1),function(e){e.controller.getSignal("header.showMessage")({message:"edit_visibility_success",type:"info"})}],error:[]}]},getState:function(){return{editVisibilityDialog:{show:!1,visibility:[],error:{domain:!1,address:!1},value:{domain:"",address:""}}}}}}).call(g,"views/v2/modules/messages/EditVisibilityStore.js")},function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var a=4,o=10,t=["messages","streamCall"],s=["messages","call","voiceServerInfoAPI"];n.default={name:e,signals:{connectionOpen:[function(e){var t=e.state,n=e.messages,r=t.get("channelId");r&&n.socket.send(a,{channelId:r})}],createStreamCall:[function(e){var t=e.path,n=!0;return void 0===(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)&&(n=!1),void 0===(window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription)&&(n=!1),n?t.yes():t.no()},{yes:[function(e){var t=e.state,n=e.http,r=e.path,a=t.get(s);return n.get(a).then(r.success).catch(r.error)},{success:[function(e){var t=e.props,n=e.messages.socket,r=t.result.serverId,a=t.channelId;n.send(o,{channelId:a,selfMute:!1,voiceServerId:r})}],error:[function(){}]}],no:[function(e){e.state.set([].concat(t,["notSupportedTip"]),!0)}]}]},getState:function(){return{streamCall:{callInfo:{},notSupportedTip:!1}}}}}).call(n,"views/v2/modules/messages/StreamCallStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=11,s=12,i=void 0;t.default={name:e,signals:{connectionOpen:[function(e){var t,n,r=e.controller,a=e.state;-1!==a.get("currentPath").indexOf("/workspace")&&(t=a.get("channelId"),n=a.get("currentUserId"),r.getSignal("messages.workspaceStart")({channelId:t,userId:n}),r.getSignal("workspace.checkReady")(),i=setInterval(function(){return r.getSignal("messages.syncTime")()},5e3))}],connectionClosed:[function(){i&&clearInterval(i)}],workspaceStart:[function(e){var t=e.props,n=e.messages.socket,r=t.channelId,a=t.userId;n.send(o,{channelId:r,userId:a})}],syncTime:[function(e){var t=e.state,n=e.messages.socket,r=t.get("questionId"),a=t.get("currentUserId");n.send(s,{questionId:r,userId:a})}],onSyncTimeResult:[function(e){var t=e.state,n=e.props,r=n.sessionTime,a=n.seconds;t.set("workspace.seconds",a),t.set("workspace.sessionTime",r)}]},getState:function(){}}}).call(t,"views/v2/modules/messages/ODSWorkspaceStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:e,signals:{connectionOpen:[function(e){var t=e.controller;-1!==e.state.get("currentPath").indexOf("/matching")&&t.getSignal("match.isAccept")()}]},getState:function(){}}}).call(t,"views/v2/modules/messages/OdsMatchingStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=["messages.initialData"];t.default={name:e,depends:[],signals:{INITIAL_DATA:[function(e){var t=e.http,n=e.state,r=e.path,a=n.get("messages.urlChannelId");return a?t.get("/api/channels/"+a+"/touch").then(r.success).catch(r.error):r.dummy()},{success:[function(e){var t=e.props,n=e.state,r=t.result,a=t.status;r&&200===a&&n.set(o,r)}],error:[],dummy:[]}],parseInitialData:[function(e){var t=e.state,n=e.controller,r=t.get(o);r&&n.getSignal("messages.channelReady")(r)}]}}}).call(t,"views/v2/modules/messages/InitialStore.js")},function(e,s,i){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t=o(["support.createTicketStatus"],["support.createTicketStatus"]),n=o(["messages.postTicketDialog.show"],["messages.postTicketDialog.show"]),r=i(9),a=i(0);function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}s.default={name:e,signals:{openPostTicketDialog:[(0,r.set)((0,a.state)(t),""),(0,r.set)((0,a.state)(n),!0)],closePostTicketDialog:[(0,r.set)((0,a.state)(n),!1)]},getState:function(){return{postTicketDialog:{show:!1}}}}}).call(s,"views/v2/modules/messages/PostTicketDialogStore.js")},function(e,s,i){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["messages.supportView"],{raw:{value:Object.freeze(["messages.supportView"])}})),n=i(9),r=i(0);var o=["messages","supportTickets"];function a(e){var t=e.state,n=e.props.workspaceId;t.set([].concat(o,[n]),!1)}s.default={name:e,depends:[],signals:{openExplore:[a],channelSelect:[a],openSupportTickets:[function(e){var t=e.state,n=e.props,r=e.controller,a=n.workspaceId;t.set([].concat(o,[a]),!0),r.getSignal("support.searchTickets")({listType:"client"})}],supportTicketsUnSelect:[a],workspaceSelect:[function(e){var t=e.controller;t.getSignal("support.countTickets")(),t.getSignal("messages.closeSupportView")()}],showSupportView:[(0,n.set)((0,r.state)(t),!0)],closeSupportView:[(0,n.set)((0,r.state)(t),!1)]},getState:function(){return{supportTickets:{},supportView:!1}}}}).call(s,"views/v2/modules/messages/SupportTicketsStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=["messages","clipboard"];t.default={name:e,depends:[],signals:{pasteClipboardImage:[function(e){var t=e.props,n=e.state,r=t.imageFile,a={file:r,channelId:t.channelId,parentMessageId:t.parentMessageId},o=new FileReader;o.onload=function(e){var t=new Image;a.dataUrl=e.target.result,t.src=a.dataUrl,t.onload=function(){a.width=t.width,a.height=t.height,n.set([].concat(s,["upload"]),a)}},o.readAsDataURL(r)}],sendClipboardImage:[function(e){var t=e.controller,n=e.state,r=n.get([].concat(s,["upload"]));n.set([].concat(s,["upload"]),null),t.getSignal("messages.uploadAttachment")({channelId:r.channelId,parentMessageId:r.parentMessageId,content:"",upload:r})}],cancelClipboardImage:[function(e){e.state.set([].concat(s,["upload"]),null)}]},getState:function(){return{clipboard:{image:"",upload:null}}},getClipboardImage:function(e){return e.get([].concat(s,["image"]))}}}).call(t,"views/v2/modules/messages/ClipboardStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default={name:e,signals:{messageCreate:[function(e){var t=e.state,n=e.props,r=e.controller,a=n.channelId,o=n.channelType,s=n.author,i=c({},s,{fullName:s.fullname}),l=r.getSignal("embeddedMessage.openEmbeddedMessage"),u=t.get("currentUserId");l&&u!==s.id&&"direct"===o&&l({channelId:a,user:i})}]},getState:function(){}}}).call(t,"views/v2/modules/messages/ODSMessageStore.js")},function(e,S,E){"use strict";(function(e){Object.defineProperty(S,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=h(["team.updateStatus"],["team.updateStatus"]),n=h(["team.duplicateError"],["team.duplicateError"]),r=h(["team.showBasicForm"],["team.showBasicForm"]),a=h(["value"],["value"]),o=E(9),s=E(0),l=E(21),u=g(E(19)),c=g(E(7)),d=g(E(52)),f=g(E(31)),p=g(E(78));function g(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var v=["team","basicForm"];function y(n){return[function(e){var t=e.props;return{field:[].concat(v,[n]),value:t.value,touched:!0}}].concat(m(l.chains.fieldChanged),[(0,o.set)((0,s.state)(t),c.default.initial)])}function _(e){var t=e.props,n=e.http,r=e.path,a=t.name;return n.post("/api/validTeamName",{name:a}).then(r.success).catch(r.error)}function b(e){var t=e.controller,n=e.props,r=e.state.get("team.basicForm.name.value");n.name===r&&t.getSignal("team.updateDuplicateError")({value:n.result.invalid})}function w(e){var t=e.id,n=e.name,r=e.categoryIds,a=e.scaleFrom,o=e.scaleTo,s={id:{value:t||""},name:{value:n||"",validations:["isValue","minLength:2","maxLength:80"],errorMessages:["error_isRequired","error_minLength2","error_maxLength80"],isRequired:!0},websiteUrl:{value:e.websiteUrl||"",validations:["isValue","isWebsite"],errorMessages:["error_isRequired","error_isWebsite"],isRequired:!0},location:{value:e.location||"",isRequired:!0,validations:["isValue"],errorMessages:["error_isRequired"]},type:{value:e.type||"hire"}};return!t&&(s=i({},s,{categoryId:{value:(r||[])[0]||"",validations:["isValue"],errorMessages:["error_isRequired"],isRequired:!0},scale:{value:{from:a||0,to:o||null},validations:["isScale"],errorMessages:["error_isRequired"],isRequired:!0}})),(0,l.Form)(s)}S.default={name:e,depends:[],signals:{changeName:y("name"),changeNameAndClear:[(0,o.set)((0,s.state)(n),!1)].concat(m(y("name")),[function(e){var t=e.state,n=e.path;return t.get("team.basicForm.name.isValid")?n.yes():n.no()},{yes:[(0,o.debounce)(100),{continue:[function(e){return{name:e.props.value}},_,{success:[b],error:[]}],discard:[]}],no:[]}]),changeType:y("type"),changeCategoryId:y("categoryId"),changeTeamScale:y("scale"),changeWebsiteUrl:y("websiteUrl"),changeLocation:y("location"),create:d.default.EmailRequired([].concat(m(l.chains.formValidated),[function(e){var t=e.state,n=e.path,r=t.get(v);return(0,l.isValidForm)(r)?n.yes():n.no()},{yes:[(0,o.set)((0,s.state)(t),c.default.inProgress),[function(e){var t=e.state,n=e.http,r=e.path,a=t.get(v);if((0,l.isValidForm)(a)){var o={id:a.id&&a.id.value,name:a.name&&a.name.value,categoryId:a.categoryId&&a.categoryId.value,scale:a.scale&&a.scale.value,websiteUrl:a.websiteUrl&&a.websiteUrl.value,location:a.location&&a.location.value,hire:!1,forHire:!1};switch(a.type&&a.type.value){case"hire":o.hire=!0;break;case"forHire":o.forHire=!0;break;case"both":o.hire=!0,o.forHire=!0;break;default:o.hire=!0}var s=p.default.getRequestHeaderOption(t);return n.post("/api/t/0/new",o,s).then(r.success).catch(r.error)}return r.dummy()},{success:[(0,o.set)((0,s.state)(t),c.default.succeeded),function(e){var t,n,r,a=e.controller,o=e.props,s=e.state,i=e.team,l=s.get("team.basicForm.id.value"),u=o.callback,c=o.result;u&&a.getSignal(u)?a.getSignal(u)({team:c}):l?(s.get("teamData")&&s.merge("teamData",c),a.getSignal("team.closeBasicForm")()):(t=s.get("team.nextOnCreate"),n=(c||{}).id,r=!(!t||"job"!==t)?"/jobs/0/new?type=job&tid="+n:"/t/"+n,s.set("team.redirectInProgress",!0),i.locationHref(r))}],error:[(0,o.set)((0,s.state)(t),c.default.failed),function(e){var t=e.controller,n=e.props,r=(n.result||{}).errorCode;p.default.recaptchaError(r,t)||onError("company")({props:n,controller:t})}],dummy:[]}]],no:[(0,o.set)((0,s.state)(t),c.default.failed)]}])),showBasicForm:f.default.LoginRequired(d.default.EmailRequired(function(e){var t=e.props;e.controller.getSignal("team.showBasicFormWithData")(t)})),showBasicFormWithData:d.default.EmailRequired([function(e){var n=e.props,t=e.http,r=e.state,a=e.path;return r.get("categoryOptions")?a.success(n):t.get("/api/t/0/categoryOptions").then(function(e){var t=e.result;return 200===e.status&&t&&r.set("categoryOptions",t.options),a.success(n)}).catch(function(){return a.error()})},{success:[function(e){var t=e.props,n=e.state,r=w(t),a=t.next;n.set("team.nextOnCreate",a||""),n.set("team.showBasicForm",!0),n.set(v,r)}],error:[]}]),closeBasicForm:[(0,o.set)((0,s.state)(r),!1),(0,o.set)((0,s.state)(t),""),function(){return{formPath:[].concat(v)}}].concat(m(l.chains.reset)),updateDuplicateError:[(0,o.set)((0,s.state)(n),(0,s.props)(a))],validName:[_,{success:[b],error:[]}]},getServices:function(){var e=(window||{}).history;return{locationHref:u.default,history:e}},getState:function(){return{nextOnCreate:"",showBasicForm:!1,duplicateError:!1,basicForm:w({})}}}}).call(S,"views/v2/modules/teamv2/CreateTeamStore.js")},function(e,d,f){"use strict";(function(e){Object.defineProperty(d,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=Object.freeze(Object.defineProperties(["tab"],{raw:{value:Object.freeze(["tab"])}})),n=f(9),a=f(0),o=l(f(169)),s=l(f(170)),i=l(f(171));function l(e){return e&&e.__esModule?e:{default:e}}var u=!1,c=void 0;d.default={name:e,depends:[],signals:{updateTab:[function(e){var t,n=e.props.tab;t={parameters:{type:n}}.parameters,c&&c.replace({pathname:"/",query:r({},t)})},(0,n.set)((0,a.state)(t),(0,a.props)(t))],syncFromLocation:[function(e){var t=e.props,n=e.state,r=t.type;n.set("tab",r)}]},getServices:function(t){(c=(0,s.default)((0,i.default)(o.default))({basename:window.location.pathname})).listen(function(e){if(u&&"POP"===e.action)try{t.getSignal("apply.syncFromLocation")({type:e.query&&e.query.type})}catch(e){console.error("HACK!!! to be fixed",e)}}),u=!0}}}).call(d,"views/v2/modules/profile/TabStore.js")},function(e,u,k){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=i(["notification.processStatus"],["notification.processStatus"]),n=i(["notification.unseenCount"],["notification.unseenCount"]),r=k(9),a=k(0),b=k(6),w=s(k(120)),S=s(k(121)),E=s(k(119)),o=s(k(7));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var C=k(50),l=["notification","firstLoad"];u.default={name:e,depends:[],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,r=t.notificationUnseenCount;n.set("notification.connected",!0),n.set("notification.unseenCount",r)}],notificationCreate:[function(e){var t,n,r,a,o,s,i,l,u,c,d,f,p,g=e.props,h=e.state,m=e.controller,v=h.get("currentHost"),y=g.type;v.startsWith("livehelp")||(n=(t=h.get("notification")).unreadCount,r=t.unseenCount,a=t.status,(o=[].concat(O(t.results))).unshift(g),n++,a?m.getSignal("notification.makeAllSeen")():r++,h.set("notification",_({},t,{unreadCount:n,unseenCount:r,results:o})),h.get("messages.window.isMaster")&&!k(40).get("DesktopNotificationNotice.dismissed")&&E.default.hasPermission()&&(s=h.get(),l=(i=_({},g.data)).role,u=(0,S.default)(y,l,i),c=C,d="Unity Play",f=(0,b.i18n)(s,w.default,y+"_"+l+"_text",i),p={tag:"notifications",onClick:function(){window.focus();var e=u;e+=(-1<e.indexOf("?")?"&":"?")+"_nid="+g.id,window.location.href=e}},"ods_request_received"===y&&(i.questionType=(0,b.i18n)(s,w.default,i.questionType),d=(0,b.i18n)(s,w.default,y+"_"+l+"_text",i),c=i.avatar,f="$"+i.budget+" · "+i.description),E.default.showNotification(c,d,f,p)))}],notificationRead:[function(e){var t=e.props,n=e.state,r=t.id,a=t.total;n.set("notification.unreadCount",a);var o,s=n.get("notification.results");s&&0<s.length&&(-1===(o=s.findIndex(function(e){return e.id===r}))||s[o].read||((s=[].concat(O(s)))[o]=_({},s[o]),s[o].read=!0,n.set("notification.results",s)))}],notificationSeen:[function(e){var t=e.props,n=e.state,r=t.total;n.set("notification.unseenCount",r)}],switchStatus:[function(e){var t=e.state,n=e.controller;t.set("notification.status",!t.get("notification.status"));var r=t.get("notification"),a=r.status,o=r.results;!0===a&&(n.getSignal("notification.makeAllSeen")(),(o.length<=0||t.get(l))&&n.getSignal("notification.getNotifications")())}],switchStatusToFalse:[function(e){e.state.set("notification.status",!1)}],getNotifications:[(0,r.set)((0,a.state)(t),o.default.inProgress),[function(e){var t=e.state,n=e.http,r=e.path,a=t.get("notification").page;return a?a+=1:a=1,n.get("/api/notifications",{page:a}).then(r.success).catch(r.error)},{success:[(0,r.set)((0,a.state)(t),o.default.succeeded),function(e){var t,n,r,a,o,s,i,l,u,c,d=e.props,f=e.state;200===d.status&&(t=f.get("notification"),n=f.get("notification.results"),a=(r=d.result).total,o=r.page,s=r.pageTotal,i=r.results,l=r.unreadCount,u=r.unseenCount,c=i.filter(function(t){return-1===n.findIndex(function(e){return e.id===t.id})}),f.set("notification",_({},t,{firstLoad:!1,unreadCount:l,unseenCount:u,total:a,page:o,pageTotal:s,results:[].concat(O(n),O(c))})))}],error:[(0,r.set)((0,a.state)(t),o.default.failed)]}]],makeAllRead:[(0,r.set)((0,a.state)(t),o.default.inProgress),[function(e){var t=e.http,n=e.path;return t.post("/api/notifications/make-all-read",null).then(n.success).catch(n.error)},{success:[(0,r.set)((0,a.state)(t),o.default.succeeded)],error:[(0,r.set)((0,a.state)(t),o.default.failed)]}]],makeAllSeen:[function(e){var t=e.http,n=e.path;return t.post("/api/notifications/make-all-seen",null).then(n.success).catch(n.error)},{success:[(0,r.set)((0,a.state)(n),0)],error:[]}],setRead:[(0,r.set)((0,a.state)(t),o.default.inProgress),[function(e){var t=e.props,n=e.http,r=e.path;return n.post("/api/notifications/set-read/"+t.id,null).then(r.success).catch(r.error)},{success:[(0,r.set)((0,a.state)(t),o.default.succeeded),function(e){var t,n,r=e.props,a=e.state,o=a.get("notification").results;o&&o instanceof Array&&(-1!==(t=o.findIndex(function(e){return e.id===r.id}))&&(n=_({},o[t],{read:!0}),a.set("notification",_({},a.get("notification"),{results:[].concat(O(o.slice(0,t)),[n],O(o.slice(t,o.length)))}))))}],error:[(0,r.set)((0,a.state)(t),o.default.failed)]}]]},getServices:function(){return{}},getState:function(){return{connected:!1,unseenCount:0,unreadCount:0,status:!1,firstLoad:!0,page:0,total:0,pageTotal:0,results:[]}}}}).call(u,"views/v2/modules/notification/NotificationStore.js")},,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=j(["draft.editorStatesPending.",""],["draft.editorStatesPending.",""]),u=j(["editorKey"],["editorKey"]),c=j(["draft.editorStates.",""],["draft.editorStates.",""]),d=j(["draft.editorEditable.",""],["draft.editorEditable.",""]),f=j(["draft.unsetPendingEditorState"],["draft.unsetPendingEditorState"]),g=j(["draft.setEditorState"],["draft.setEditorState"]),h=j(["draft.setEditorStateCommit"],["draft.setEditorStateCommit"]),m=j(["draft.setEditorEditable"],["draft.setEditorEditable"]),v=k(n(1)),y=k(n(12)),_=k(n(2)),b=n(5),w=n(0),S=k(n(475)),E=n(476),O=k(n(70)),C=n(179);function k(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var M=(0,b.decorator)({editorStatePending:(0,w.state)(l,(0,w.props)(u)),editorState:(0,w.state)(c,(0,w.props)(u)),editable:(0,w.state)(d,(0,w.props)(u)),unsetPendingEditorState:(0,w.signal)(f),setEditorState:(0,w.signal)(g),setEditorStateCommit:(0,w.signal)(h),setEditorEditable:(0,w.signal)(m)})((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(T,v.default.Component),s(T,[{key:"componentWillMount",value:function(){var e=this.props,t=e.editorKey;(0,e.setEditorStateCommit)({editorKey:t,editorState:e.defaultEditorState})}},{key:"componentDidMount",value:function(){this.applyPendingState(),this.checkFocus()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.editorKey,r=t.setEditorState,a=t.defaultEditorState,o=e.defaultEditorState;o!==a&&r({editorKey:n,editorState:C.EditorState.set(o,{decorator:this.editorStateDecorator})})}},{key:"componentDidUpdate",value:function(){this.applyPendingState(),this.checkFocus()}},{key:"applyPendingState",value:function(){var e=this.props,t=e.editorKey,n=e.editorStatePending,r=e.unsetPendingEditorState;n&&(r({editorKey:t,editorState:n}),this.editor.onChange(n))}},{key:"checkFocus",value:function(){var e,t,n,r=this.props,a=r.defaultEditable,o=r.editorKey,s=r.renderOnly,i=r.editorStatePending,l=r.setEditorStateCommit,u=this.props.editable;s||!(void 0===u?a:u)||i||(t=(e=this.context.controller.getState("draft.editorStates."+o)).getSelection()).getHasFocus()&&(n=y.default.findDOMNode(this.editor).querySelector('[contenteditable="true"]'),document.activeElement!==n&&(this.editor.focus(),l({editorKey:o,editorState:C.EditorState.forceSelection(e,t)})))}},{key:"render",value:function(){var t=this,e=this.props.defaultEditable,n=this.props,r=n.editable,a=void 0===r?e:r,o=n.editorKey,s=n.renderOnly,i=n.offsetKey,l=n.stripPastedStyles,u=this.context.controller,c=u.getState("draft.editorStates."+o),d=(0,O.default)(this.props,"editorStatePending","editorState","defaultEditorState","editable","setEditorStateCommit","setEditorEditable"),f=v.default.createElement(S.default,p({},d,{spellCheck:!0,stripPastedStyles:l,controller:u,editorState:c,readOnly:s||!a,onChange:this.onChange,ref:function(e){t.editor=e}}));return v.default.createElement("div",{"data-offset-key":i,onMouseDown:this.onMouseDown},f)}}]),o=a=T,a.contextTypes={controller:_.default.object},a.propTypes={editorKey:_.default.string.isRequired,editorStatePending:_.default.object,editorState:_.default.object,defaultEditorState:_.default.object.isRequired,editable:_.default.bool,defaultEditable:_.default.bool,renderOnly:_.default.bool,offsetKey:_.default.string,unsetPendingEditorState:_.default.func,setEditorState:_.default.func,setEditorStateCommit:_.default.func,setEditorEditable:_.default.func,stripPastedStyles:_.default.bool},a.defaultProps={defaultEditable:!1,stripPastedStyles:!0},r=o))||r;function T(){var e,t,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=o=I(this,(e=T.__proto__||Object.getPrototypeOf(T)).call.apply(e,[this].concat(r)))).onMouseDown=function(e){var t,n=o.props,r=n.editorKey,a=n.setEditorEditable;r===(0,E.findEditorKey)(e.target)&&(a({editorKey:r}),t=window.getSelection(),r===(0,E.findEditorKey)(t.anchorNode)&&r===(0,E.findEditorKey)(t.focusNode)||t.removeAllRanges())},o.onChange=function(e){var t=o.props,n=t.editorKey;(0,t.setEditorStateCommit)({editorKey:n,editorState:e}),o.editorStateDecorator=e.getDecorator()},I(o,t)}t.default=M},function(e,t,n){"use strict";var a=n(479),o=55296,s=57343,r=/[\uD800-\uDFFF]/;function i(e){return o<=e&&e<=s}function l(e){return r.test(e)}function u(e,t){return 1+i(e.charCodeAt(t))}function c(e,t,n){if(t=t||0,n=void 0===n?1/0:n||0,!l(e))return e.substr(t,n);var r=e.length;if(r<=0||r<t||n<=0)return"";var a=0;if(0<t){for(;0<t&&a<r;t--)a+=u(e,a);if(r<=a)return""}else if(t<0){for(a=r;t<0&&0<a;t++)a-=u(e,a-1);a<0&&(a=0)}var o=r;if(n<r)for(o=a;0<n&&o<r;n--)o+=u(e,o);return e.substring(a,o)}var d={getCodePoints:function(e){for(var t=[],n=0;n<e.length;n+=u(e,n))t.push(e.codePointAt(n));return t},getUTF16Length:u,hasSurrogateUnit:l,isCodeUnitInSurrogateRange:i,isSurrogatePair:function(e,t){if(0<=t&&t<e.length||a(!1),t+1===e.length)return!1;var n=e.charCodeAt(t),r=e.charCodeAt(t+1);return o<=n&&n<=56319&&56320<=r&&r<=s},strlen:function(e){if(!l(e))return e.length;for(var t=0,n=0;n<e.length;n+=u(e,n))t++;return t},substring:function(e,t,n){(t=t||0)<0&&(t=0),(n=void 0===n?1/0:n||0)<0&&(n=0);var r=Math.abs(n-t);return c(e,t=t<n?t:n,r)},substr:c};e.exports=d},function(e,t,n){e.exports=n(8)(205)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetItemIdByType=function(e){var t=e.id,n=e.type,r=a[n];return r?r+"_"+t:t};var a={course:"lco",project:"lpr",tutorial:"ltu",liveSession:"lls",badge:"lbg",mission:"lms",user:"u",team:"t",faq:"lfa",quiz:"lqz",submission:"lsu",competency:"lcp"}},function(e,t,n){e.exports=n(8)(703)},function(e,t,n){e.exports=n(8)(342)},function(e,t,n){e.exports=n(8)(137)},function(e,t){},,,,,,function(e,t){e.exports={"scroller-wrap":"scroller-wrap_2ebVUni0",scroller:"scroller_1zcid46f",center:"center_3xcNbSCI",top:"top_2wrdd5MN",scrollbar:"scrollbar_213WWY7Z",track:"track_1t4sH5Wt",thumb:"thumb_3hY4wmjr",fade:"fade_3GzSaPUc",isPressed:"isPressed_397zSpHJ",white:"white_1iBH3PBK"}},function(e,t,n){"use strict";e.exports=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}},function(e,t){e.exports={container:"container_1NEeLFjP",currentText:"currentText_15f1QOEr",innerCurrentText:"innerCurrentText_F-JXwypx",disabled:"disabled_1MTrs_wV",text:"text_2UNuHrrU",hint:"hint_MHIPwg_J",triangle:"triangle_20fmw_FF",selectsWrapContainer:"selectsWrapContainer_e9yUGf3D",selects:"selects_2ppiVyIj",selectItem:"selectItem_2K6fI4KB",active:"active_137ZXAvm",scroller:"scroller_1G_pfrNc",errorText:"errorText_1GOGF4ws",description:"description_2RsoZDJp"}},function(e,t){e.exports={container:"container_nliE-BsI",disabled:"disabled_ESepX3m_",radio:"radio_18J4COWz",radioInner:"radioInner_37T1iQiJ",active:"active_3-aenzNB",label:"label_1mlJc9H0",hintLabel:"hintLabel_71l3i8DG",blue:"blue_OemTWVwT",selected:"selected_3fCSOkgP",icon:"icon_34Fe_8yb",primary:"primary_1QHYNCE6","primary-blue":"primary-blue_11gdaiLi"}},function(e,t){var n,r;n="undefined"!=typeof window?window:{},r=function(u,N,c){"use strict";var L,F;if(function(){var e;var t={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:true,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:true,ricTimeout:0,throttleDelay:125};F=u.lazySizesConfig||u.lazysizesConfig||{};for(e in t){if(!(e in F)){F[e]=t[e]}}}(),!N||!N.getElementsByClassName){return{init:function(){},cfg:F,noSupport:true}}var K=N.documentElement,r=u.HTMLPictureElement,U="addEventListener",B="getAttribute",z=u[U].bind(u),W=u.setTimeout,V=u.requestAnimationFrame||W,i=u.requestIdleCallback,q=/^picture$/i,a=["load","error","lazyincluded","_lazyloaded"],n={},H=Array.prototype.forEach,$=function(e,t){if(!n[t]){n[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")}return n[t].test(e[B]("class")||"")&&n[t]},G=function(e,t){if(!$(e,t)){e.setAttribute("class",(e[B]("class")||"").trim()+" "+t)}},Y=function(e,t){var n;if(n=$(e,t)){e.setAttribute("class",(e[B]("class")||"").replace(n," "))}},J=function(t,n,e){var r=e?U:"removeEventListener";if(e){J(t,n)}a.forEach(function(e){t[r](e,n)})},Q=function(e,t,n,r,a){var o=N.createEvent("Event");if(!n){n={}}n.instance=L;o.initEvent(t,!r,!a);o.detail=n;e.dispatchEvent(o);return o},Z=function(e,t){var n;if(!r&&(n=u.picturefill||F.pf)){if(t&&t.src&&!e[B]("srcset")){e.setAttribute("srcset",t.src)}n({reevaluate:true,elements:[e]})}else if(t&&t.src){e.src=t.src}},X=function(e,t){return(getComputedStyle(e,null)||{})[t]},s=function(e,t,n){n=n||e.offsetWidth;while(n<F.minSize&&t&&!e._lazysizesWidth){n=t.offsetWidth;t=t.parentNode}return n},ee=function(){var n,r;var t=[];var a=[];var o=t;var s=function(){var e=o;o=t.length?a:t;n=true;r=false;while(e.length){e.shift()()}n=false};var e=function(e,t){if(n&&!t){e.apply(this,arguments)}else{o.push(e);if(!r){r=true;(N.hidden?W:V)(s)}}};e._lsFlush=s;return e}(),te=function(n,e){return e?function(){ee(n)}:function(){var e=this;var t=arguments;ee(function(){n.apply(e,t)})}},ne=function(e){var n;var r=0;var a=F.throttleDelay;var o=F.ricTimeout;var t=function(){n=false;r=c.now();e()};var s=i&&o>49?function(){i(t,{timeout:o});if(o!==F.ricTimeout){o=F.ricTimeout}}:te(function(){W(t)},true);return function(e){var t;if(e=e===true){o=33}if(n){return}n=true;t=a-(c.now()-r);if(t<0){t=0}if(e||t<9){s()}else{W(s,t)}}},re=function(e){var t,n;var r=99;var a=function(){t=null;e()};var o=function(){var e=c.now()-n;if(e<r){W(o,r-e)}else{(i||a)(a)}};return function(){n=c.now();if(!t){t=W(o,r)}}},e=function(){var p,g,d,h,e;var m,v,y,_,b,w,S;var o=/^img$/i;var f=/^iframe$/i;var E="onscroll"in u&&!/(gle|ing)bot/.test(navigator.userAgent);var O=0;var C=0;var k=0;var I=-1;var j=function(e){k--;if(!e||k<0||!e.target){k=0}};var M=function(e){if(S==null){S=X(N.body,"visibility")=="hidden"}return S||!(X(e.parentNode,"visibility")=="hidden"&&X(e,"visibility")=="hidden")};var T=function(e,t){var n;var r=e;var a=M(e);y-=t;w+=t;_-=t;b+=t;while(a&&(r=r.offsetParent)&&r!=N.body&&r!=K){a=(X(r,"opacity")||1)>0;if(a&&X(r,"overflow")!="visible"){n=r.getBoundingClientRect();a=b>n.left&&_<n.right&&w>n.top-1&&y<n.bottom+1}}return a};var t=function(){var e,t,n,r,a,o,s,i,l,u,c,d;var f=L.elements;if((h=F.loadMode)&&k<8&&(e=f.length)){t=0;I++;for(;t<e;t++){if(!f[t]||f[t]._lazyRace){continue}if(!E||L.prematureUnveil&&L.prematureUnveil(f[t])){R(f[t]);continue}if(!(i=f[t][B]("data-expand"))||!(o=i*1)){o=C}if(!u){u=!F.expand||F.expand<1?K.clientHeight>500&&K.clientWidth>500?500:370:F.expand;L._defEx=u;c=u*F.expFactor;d=F.hFac;S=null;if(C<c&&k<1&&I>2&&h>2&&!N.hidden){C=c;I=0}else if(h>1&&I>1&&k<6){C=u}else{C=O}}if(l!==o){m=innerWidth+o*d;v=innerHeight+o;s=o*-1;l=o}n=f[t].getBoundingClientRect();if((w=n.bottom)>=s&&(y=n.top)<=v&&(b=n.right)>=s*d&&(_=n.left)<=m&&(w||b||_||y)&&(F.loadHidden||M(f[t]))&&(g&&k<3&&!i&&(h<3||I<4)||T(f[t],o))){R(f[t]);a=true;if(k>9){break}}else if(!a&&g&&!r&&k<4&&I<4&&h>2&&(p[0]||F.preloadAfterLoad)&&(p[0]||!i&&(w||b||_||y||f[t][B](F.sizesAttr)!="auto"))){r=p[0]||f[t]}}if(r&&!a){R(r)}}};var n=ne(t);var P=function(e){var t=e.target;if(t._lazyCache){delete t._lazyCache;return}j(e);G(t,F.loadedClass);Y(t,F.loadingClass);J(t,x);Q(t,"lazyloaded")};var r=te(P);var x=function(e){r({target:e.target})};var A=function(t,n){try{t.contentWindow.location.replace(n)}catch(e){t.src=n}};var D=function(e){var t;var n=e[B](F.srcsetAttr);if(t=F.customMedia[e[B]("data-media")||e[B]("media")]){e.setAttribute("media",t)}if(n){e.setAttribute("srcset",n)}};var s=te(function(t,e,n,r,a){var o,s,i,l,u,c;if(!(u=Q(t,"lazybeforeunveil",e)).defaultPrevented){if(r){if(n){G(t,F.autosizesClass)}else{t.setAttribute("sizes",r)}}s=t[B](F.srcsetAttr);o=t[B](F.srcAttr);if(a){i=t.parentNode;l=i&&q.test(i.nodeName||"")}c=e.firesLoad||"src"in t&&(s||o||l);u={target:t};G(t,F.loadingClass);if(c){clearTimeout(d);d=W(j,2500);J(t,x,true)}if(l){H.call(i.getElementsByTagName("source"),D)}if(s){t.setAttribute("srcset",s)}else if(o&&!l){if(f.test(t.nodeName)){A(t,o)}else{t.src=o}}if(a&&(s||l)){Z(t,{src:o})}}if(t._lazyRace){delete t._lazyRace}Y(t,F.lazyClass);ee(function(){var e=t.complete&&t.naturalWidth>1;if(!c||e){if(e){G(t,"ls-is-cached")}P(u);t._lazyCache=true;W(function(){if("_lazyCache"in t){delete t._lazyCache}},9)}if(t.loading=="lazy"){k--}},true)});var R=function(e){if(e._lazyRace){return}var t;var n=o.test(e.nodeName);var r=n&&(e[B](F.sizesAttr)||e[B]("sizes"));var a=r=="auto";if((a||!g)&&n&&(e[B]("src")||e.srcset)&&!e.complete&&!$(e,F.errorClass)&&$(e,F.lazyClass)){return}t=Q(e,"lazyunveilread").detail;if(a){ae.updateElem(e,true,e.offsetWidth)}e._lazyRace=true;k++;s(e,t,a,r,n)};var a=re(function(){F.loadMode=3;n()});var i=function(){if(F.loadMode==3){F.loadMode=2}a()};var l=function(){if(g){return}if(c.now()-e<999){W(l,999);return}g=true;F.loadMode=3;n();z("scroll",i,true)};return{_:function(){e=c.now();L.elements=N.getElementsByClassName(F.lazyClass);p=N.getElementsByClassName(F.lazyClass+" "+F.preloadClass);z("scroll",n,true);z("resize",n,true);z("pageshow",function(e){if(e.persisted){var t=N.querySelectorAll("."+F.loadingClass);if(t.length&&t.forEach){V(function(){t.forEach(function(e){if(e.complete){R(e)}})})}}});if(u.MutationObserver){new MutationObserver(n).observe(K,{childList:true,subtree:true,attributes:true})}else{K[U]("DOMNodeInserted",n,true);K[U]("DOMAttrModified",n,true);setInterval(n,999)}z("hashchange",n,true);["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){N[U](e,n,true)});if(/d$|^c/.test(N.readyState)){l()}else{z("load",l);N[U]("DOMContentLoaded",n);W(l,2e4)}if(L.elements.length){t();ee._lsFlush()}else{n()}},checkElems:n,unveil:R,_aLSL:i}}(),ae=function(){var n;var o=te(function(e,t,n,r){var a,o,s;e._lazysizesWidth=r;r+="px";e.setAttribute("sizes",r);if(q.test(t.nodeName||"")){a=t.getElementsByTagName("source");for(o=0,s=a.length;o<s;o++){a[o].setAttribute("sizes",r)}}if(!n.detail.dataAttr){Z(e,n.detail)}});var r=function(e,t,n){var r;var a=e.parentNode;if(a){n=s(e,a,n);r=Q(e,"lazybeforesizes",{width:n,dataAttr:!!t});if(!r.defaultPrevented){n=r.detail.width;if(n&&n!==e._lazysizesWidth){o(e,a,r,n)}}}};var e=function(){var e;var t=n.length;if(t){e=0;for(;e<t;e++){r(n[e])}}};var t=re(e);return{_:function(){n=N.getElementsByClassName(F.autosizesClass);z("resize",t)},checkElems:t,updateElem:r}}(),t=function(){if(!t.i&&N.getElementsByClassName){t.i=true;ae._();e._()}};return W(function(){F.init&&t()}),L={cfg:F,autoSizer:ae,loader:e,init:t,uP:Z,aC:G,rC:Y,hC:$,fire:Q,gW:s,rAF:ee}}(n,n.document,Date),n.lazySizes=r,"object"==typeof e&&e.exports&&(e.exports=r)},function(e,t){e.exports={image:"image_3Ptw5emY","placeholder-wrapper":"placeholder-wrapper_2kAsug7c","image-wrapper":"image-wrapper_kqQYamzk",imageholder:"imageholder_3AZvfbQ0"}},function(e,t){e.exports={avatar:"avatar_1pXJO-sl","image-wrap":"image-wrap_1EOvBkv7",status:"status_3CtMmnq4",circle:"circle_3O7nubv8","avatar-xxxxxsmall":"avatar-xxxxxsmall_2p2DI31L",name:"name_28PeiSGS","avatar-xxxxsmall":"avatar-xxxxsmall_2qnQEFRo","avatar-xxxsmall":"avatar-xxxsmall_2Ax8O3Sm",anonymous:"anonymous_1o8IISuv","avatar-xxsmall":"avatar-xxsmall_A5vJezb2",followed:"followed_2ZTheVlP",check:"check_vCXB-A_n","avatar-xsmall":"avatar-xsmall_1cHryyYf","avatar-xmsmall":"avatar-xmsmall_26aRVX4D","avatar-small":"avatar-small_2lXok6jK","avatar-medium":"avatar-medium_dteYOS9D","avatar-large":"avatar-large_2qaKZHnM","avatar-xlarge":"avatar-xlarge_t2leCgt-","avatar-suggest":"avatar-suggest_1h5dUtCQ","avatar-quick-search":"avatar-quick-search_1WKDPJlV","avatar-expert-card":"avatar-expert-card_1x4sBqHS","avatar-v2-large":"avatar-v2-large_3TlmjtNf","avatar-v2-medium":"avatar-v2-medium_1Qo4NJk8","avatar-v2-small":"avatar-v2-small_3-dRpL29","avatar-repost":"avatar-repost_1c5cNX4m","avatar-xxlarge":"avatar-xxlarge_3ECwtZVw","avatar-xxxlarge":"avatar-xxxlarge_1Gvsr0mk","avatar-profile":"avatar-profile_3NKxSkRi","avatar-group":"avatar-group_3Tefn6rH","avatar-group-small":"avatar-group-small_3hlxminM","avatar-message-card":"avatar-message-card_3Sm-yZzZ","avatar-company-card":"avatar-company-card_1wel10om","avatar-user-card":"avatar-user-card_1Y-nRBnY","avatar-unified-profile":"avatar-unified-profile_1kJ2Pg0a","avatar-message-menu":"avatar-message-menu_1a9tbVbq","avatar-xxxxlarge":"avatar-xxxxlarge_3oiciYQ5","status-online":"status-online_1x83sQjt","status-idle":"status-idle_3F0z4Egj","status-offline":"status-offline_3JdXJfAy","status-typing":"status-typing_2lvEuoOp",ellipsis:"ellipsis_wKFe4GWt","default-bg":"default-bg_2oTxdovK"}},function(e,t){e.exports={followed:"followed_2fwP"}},function(e,t){e.exports={"raised-btn":"raised-btn_2vTjL538","raised-btn-primary":"raised-btn-primary_MYOE9bp7","raised-btn-default":"raised-btn-default_3M_uvHPG","raised-btn-loading":"raised-btn-loading_2zV-H5G8","raised-btn-secondary":"raised-btn-secondary_Bj_15kbi","raised-btn-thirdly":"raised-btn-thirdly_QAfXf1ST","raised-btn-fourthly":"raised-btn-fourthly_o3QM0JY8","raised-btn-fifthly":"raised-btn-fifthly_2BYYZWlt","raised-btn-black":"raised-btn-black_25LClDGh","raised-btn-red":"raised-btn-red_2RcoM63p","raised-btn-blue":"raised-btn-blue_37QDrHj0","raised-btn-primary-blue":"raised-btn-primary-blue_CwUp44WJ","raised-btn-new-default":"raised-btn-new-default_37xxsZuI","raised-btn-purple":"raised-btn-purple_36DUDqpQ","raised-btn-violet":"raised-btn-violet_P77QoYei","raised-btn-header-default":"raised-btn-header-default_1IsqgmEz","raised-btn-white":"raised-btn-white_eL_TEgAO","raised-btn-transparent":"raised-btn-transparent_2agQEVMe","raised-btn-gray":"raised-btn-gray_39ycbZo9","raised-btn-link":"raised-btn-link_3LQYwRXO","raised-btn-link-border":"raised-btn-link-border_2WfXE-XU","raised-btn-white-link-border":"raised-btn-white-link-border_t559qF12","raised-btn-blue-link-border":"raised-btn-blue-link-border_P_arkiuo","raised-btn-pink":"raised-btn-pink_1NcMdHjn","raised-btn-webgl":"raised-btn-webgl_3_kjsmT6","size-xxsmall":"size-xxsmall_66MaEoEz","size-xsmall":"size-xsmall_10lMFD2d","size-small":"size-small_2Xetoijv","size-medium":"size-medium_3tC1AZkh","size-large":"size-large_w0zciFUV","size-xlarge":"size-xlarge_26YC-cEO","size-xxlarge":"size-xxlarge_3C-2YrGl","width-full":"width-full_2wWLBFy9","width-auto":"width-auto_vfULHdfR","size-new-small":"size-new-small_1JdsN8Ck","size-new-medium":"size-new-medium_1KbDqy0a","size-new-large":"size-new-large_2sAP2xiz","size-new-xlarge":"size-new-xlarge_dGFweqnR","size-new-xxlarge":"size-new-xxlarge_1-52_mbt","raised-btn-loading-wrap":"raised-btn-loading-wrap_1FEK6jS1"}},function(e,t){e.exports={backdrop:"backdrop_gQOFTh3M",modal:"modal_2HSf4u4a","max-height":"max-height_9Pso-m0n","modal-inner":"modal-inner_1ZHQC_XC",center:"center_xVQHpEcL"}},function(e,t){e.exports={"dialog-contents":"dialog-contents_3KtBo-qF","title-wrap":"title-wrap_29i7CSPo","button-close":"button-close_1QpE5YKK",close:"close_pfShAWCK","button-wrap":"button-wrap_3eIwXx6i",reverse:"reverse_3n_E3Sc1","button-delete":"button-delete_2_218Xno",buttons:"buttons_3fbds3X8",button:"button_3a50b_UU",blue:"blue_1N0NIlL6",error:"error_2ab7Bqdn"}},function(e,t){e.exports={dialog_title:"dialog_title_p6dP",button_ok:"button_ok_8OVG",ok:"ok_1B6I",cancel:"cancel_2nl_"}},function(e,t){e.exports={"input-wrap":"input-wrap_37qHZuNK","active-blue-green":"active-blue-green_3WIO54QT","active-primary-blue":"active-primary-blue_3p_2lKf4",disabled:"disabled_XkbqWG6P",failed:"failed_3-4CaefV",icon:"icon_2BR9dnuD",close:"close_2ZtV7Eoy",input:"input_3yaUP2ah","text-input":"text-input_1zwaVtSr","theme-small":"theme-small_3BIyN2zD","theme-transparent":"theme-transparent_1qfAkTuT","theme-dark":"theme-dark_2f3h2N29",notice:"notice_2SH_cyIz",succeeded:"succeeded_1E5Kcckx",inProgress:"inProgress_1aQUaJof",initial:"initial_1M_5HFm5",right:"right_1hrVYbeV",bottom:"bottom_2KFENrcf",hide:"hide_3RMsfyaL","right-hint":"right-hint_3e6r6uIL"}},function(e,t){e.exports={numberInput:"numberInput_2iuk",numberOutput:"numberOutput_14uS",inProgress:"inProgress_3sG-",succeeded:"succeeded_3Je8",failed:"failed_1WdK"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=b(n(2)),f=b(n(1)),c=b(n(3)),p=b(n(122)),d=b(n(739)),g=b(n(17)),h=n(26),m=b(n(4)),v=b(n(742)),y=b(n(6)),_=b(n(743));function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=(0,m.default)(v.default)(r=(0,y.default)(_.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,c.default),s(E,[{key:"componentDidMount",value:function(){this.props.onDidMount&&this.props.onDidMount(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.defaultIndex,n=e.defaultIndex;t!==n&&this.setState({candidateIndex:n})}},{key:"onSave",value:function(e){var t;!e||(t=this.getCandidate())&&this.onAddCandidate(t)}},{key:"onFocus",value:function(){this.props.onFocus&&this.props.onFocus(),this.setState({isActive:!0})}},{key:"onBlur",value:function(e){(0,h.isTouch)()||(this.props.onBlur&&this.props.onBlur(e),this.onClear(),this.setState({isActive:!1}))}},{key:"onChange",value:function(e){this.props.onChange&&this.props.onChange(e),e&&e.trim()?this.props.onFetchCandidate&&this.props.onFetchCandidate(e):this.props.onClearCandidate&&this.props.onClearCandidate()}},{key:"onKeyDown",value:function(e){var t=e.keyCode,n=this.getFullCandidates(),r=this.state.candidateIndex,a=n.length;switch(this.props.onKeyDown&&this.props.onKeyDown(e),t){case 40:e.preventDefault(),this.setState({candidateIndex:(r+1)%a});break;case 38:e.preventDefault(),this.setState({candidateIndex:(r+a-1)%a})}}},{key:"onInnerClear",value:function(){this.refs.textField&&this.refs.textField.onInnerClear()}},{key:"onClear",value:function(e){e&&e.preventDefault(),this.onInnerClear(),this.setState({candidateIndex:this.props.defaultIndex}),this.props.onClearCandidate&&this.props.onClearCandidate()}},{key:"onAddCandidate",value:function(e,t){var n,r,a,o;t&&t.preventDefault(),this.props.onSelected&&this.props.onSelected(e),this.props.onRemoveFromMap&&this.props.onSaveToMap?this.props.onSaveToMap(e):(n=e.id,a=(r=this.props).selectedIds,o=r.idToCandidateMap,n&&!o[n]&&(o[n]=e,a.push(n)),this.setState({selectedIds:a,idToCandidateMap:o})),this.onClear()}},{key:"getFullCandidates",value:function(){var e=this.props.candidates;return void 0===e?[]:e}},{key:"getSelectedValues",value:function(){var e=this.props,t=e.selectedIds,n=e.idToCandidateMap,r=[];return t&&0<t.length&&t.forEach(function(e){e&&n&&n[e]&&r.push(n[e].name)}),r}},{key:"getCandidate",value:function(){var e=this.getFullCandidates(),t=this.state.candidateIndex,n=e.length,r=null;return 0<=t&&t<n&&(r=e[t]),r}},{key:"setFocus",value:function(e){this.refs.textField.setFocus(e)}},{key:"renderCandidates",value:function(){var l=this,e=this.getFullCandidates(),t=this.props,u=t.onRenderCandidate,c=t.activeClassName,d=t.tagType;return e.map(function(t,e){function n(){l.setState({candidateIndex:e})}function r(){l.setState({candidateIndex:l.props.defaultIndex})}var a=t.text,o=t.type,s=t.name,i=f.default.createElement("li",null,(0,p.default)(a));return"q"===o&&(i="tag"===d?f.default.createElement("li",null,l.__("create_new_tag",{name:s})):"skill"===d?f.default.createElement("li",null,l.__("create_new",{name:s})):f.default.createElement("li",null,l.__("create_new_category",{name:s}))),u&&(i=u(t)),i?e===l.state.candidateIndex?f.default.cloneElement(i,{className:l.ss("active",c),key:""+e,onMouseEnter:n,onMouseLeave:r,onMouseDown:function(e){return l.onAddCandidate(t,e)}}):f.default.cloneElement(i,{key:""+e,onMouseEnter:n,onMouseLeave:r}):null})}},{key:"renderCandidatesWrap",value:function(){var e=this.props,t=e.candidateClassName,n=e.maxCandidatesCount,r=e.maxCandidatesHeight,a=e.headerText,o=e.headerClassName,s=void 0,i=this.renderCandidates(),s=0!==i.length?this.ss(t,"candidates","expand"):this.ss(t,"candidates"),l={};n&&r&&i.length>n&&(l.height=r);var u=void 0;return a&&(u=f.default.createElement("div",{className:this.ss(o)},a)),f.default.createElement("ul",{className:s},u,f.default.createElement(g.default,null,f.default.createElement("div",{style:l},i)))}},{key:"render",value:function(){var n=this,e=this.props,t=e.className,r=e.textFieldClassName,a=(e.candidateClassName,e.activeClassName,e.maxCandidatesCount,e.maxCandidatesHeight,e.onRenderCandidate,e.onSelected,e.onFetchCandidate,e.onClearCandidate,e.onSaveToMap,e.onRemoveFromMap,e.onDidMount,e.selectedIds,e.idToCandidateMap,e.candidates,e.headerText,e.headerClassName,e.defaultIndex,e.theme),o=(e.tagType,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","textFieldClassName","candidateClassName","activeClassName","maxCandidatesCount","maxCandidatesHeight","onRenderCandidate","onSelected","onFetchCandidate","onClearCandidate","onSaveToMap","onRemoveFromMap","onDidMount","selectedIds","idToCandidateMap","candidates","headerText","headerClassName","defaultIndex","theme","tagType"])),s=(this.state.isActive,this.getSelectedValues());return f.default.createElement("div",{className:this.ss("text-auto",t,a&&"theme-"+a)},f.default.createElement(d.default,i({},o,{ref:"textField",className:this.ss(r),valueList:s,onChange:function(e,t){return n.onChange(t)},onBlur:function(e){return n.onBlur(e)},onClear:function(e){return n.onClear(e)},onKeyDown:function(e){return n.onKeyDown(e)},onSave:function(e){return n.onSave(e)},onFocus:function(){return n.onFocus()},onRemove:this.onRemoveCandidate})),this.renderCandidatesWrap())}}]),o=a=E,a.propTypes={candidates:u.default.arrayOf(u.default.shape({value:u.default.oneOfType([u.default.string,u.default.number]),text:u.default.string,name:u.default.string})),className:u.default.string,textFieldClassName:u.default.string,defaultIndex:u.default.number,candidateClassName:u.default.string,maxCandidatesCount:u.default.number,maxCandidatesHeight:u.default.number,activeClassName:u.default.string,headerText:u.default.string,headerClassName:u.default.string,selectedIds:u.default.array,idToCandidateMap:u.default.object,tagType:u.default.oneOf(["skill","tag","category"]),onSelected:u.default.func,onRemove:u.default.func,onBlur:u.default.func,onFocus:u.default.func,onChange:u.default.func,onFetchCandidate:u.default.func,onClearCandidate:u.default.func,onDidMount:u.default.func,onSaveToMap:u.default.func,onRemoveFromMap:u.default.func,onRenderCandidate:u.default.func,onKeyDown:u.default.func,theme:u.default.oneOf(["small"])},a.defaultProps={defaultIndex:0,tagType:"skill"},r=o))||r)||r;function E(){var e,t,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=l=w(this,(e=E.__proto__||Object.getPrototypeOf(E)).call.apply(e,[this].concat(r)))).state={candidateIndex:l.props.defaultIndex,isActive:!1},l.onRemoveCandidate=function(e,t){var n,r,a=l.props,o=a.selectedIds,s=a.idToCandidateMap,i=s[o[t]];l.props.onRemove&&l.props.onRemove(i),l.props.onSaveToMap&&l.props.onRemoveFromMap?l.props.onRemoveFromMap(i):((n=i.id)&&s[n]&&(delete s[n],(r=o.findIndex(function(e){return e===n}))<0&&o.splice(r,1)),l.setState({selectedIds:o,idToCandidateMap:s}))},w(l,t)}t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=h(n(2)),w=h(n(1)),u=h(n(3)),c=h(n(25)),S=h(n(37)),d=h(n(4)),f=h(n(740)),p=h(n(6)),g=h(n(741));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=(0,c.default)({single:null,multiple:null}),y=(0,d.default)(f.default)(r=(0,p.default)(g.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_,u.default),s(_,[{key:"componentWillReceiveProps",value:function(e){this.checkToSyncInputValue(e),"unFold"===e.fold&&this.refs.input&&this.refs.input.setFocus(e.autoFocus)}},{key:"onInnerClear",value:function(){this.refs.input&&this.refs.input.onClearInput()}},{key:"onClear",value:function(e){this.props.onClear&&this.props.onClear(e)}},{key:"onSave",value:function(t){var e=this.state.valueList,n=this.props.valueList||e,r=[].concat(m(n));t&&t.trim()&&r.findIndex(function(e){return e===t})<0&&(r.push(t),this.setState({valueList:r}),this.props.onSave&&this.props.onSave(t)),this.onInnerClear()}},{key:"onRemove",value:function(e,t){e&&e.preventDefault();var n,r,a=this.state.valueList,o=this.props.valueList||a;0<o.length&&0<=t&&t<o.length&&(r=(n=[].concat(m(o))).splice(t,1),this.setState({valueList:n}),this.props.onRemove&&this.props.onRemove(r&&r[0],t))}},{key:"getInitValueList",value:function(){var e=[],t=this.props.inputValue;return Array.isArray(t)?e.push.apply(e,m(t)):t&&e.push(t),e}},{key:"setFocus",value:function(e){this.refs.input&&this.refs.input.setFocus(e)}},{key:"checkToSyncInputValue",value:function(e){var t=e.valueList,n=this.props.valueList;(t&&t.length||0)!==(n&&n.length||0)&&this.onInnerClear(),"fold"===this.props.fold&&this.onInnerClear()}},{key:"renderValueList",value:function(e){var n=this,t=this.props,r=t.valueTheme,a=t.valueClassName;return"green"===r?e.map(function(e,t){return w.default.createElement("div",{key:"v"+t,className:n.ss("value",a)},w.default.createElement("div",{className:n.ss("name")},e),w.default.createElement("div",{className:n.ss("close-icon","ifont","ifont-icon-close"),onClick:function(e){return n.onRemove(e,t)}}))}):e.map(function(e,t){return w.default.createElement("div",{key:"v"+t,className:n.ss("value-gray",a)},w.default.createElement("div",{className:n.ss("name")},e),w.default.createElement("div",{className:n.ss("delete"),onClick:function(e){return n.onRemove(e,t)}},w.default.createElement("div",{className:n.ss("close-icon","ifont","ifont-icon-close2")})))})}},{key:"render",value:function(){var t=this,e=this.props,n=e.hintText,r=e.inputType,a=e.inputValue,o=e.valueList,s=e.hideResult,i=(e.fold,e.onRemove,e.className),l=e.valueListClassName,u=(e.valueClassName,e.inputTheme),c=e.valueTheme,d=e.valueMode,f=e.borderClassName,p=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["hintText","inputType","inputValue","valueList","hideResult","fold","onRemove","className","valueListClassName","valueClassName","inputTheme","valueTheme","valueMode","borderClassName"]),g=this.state.valueList,h=o||g,m="inner"===d,v=[],y=[f];if(m&&y.push("no-border"),v.push(w.default.createElement(S.default,b({},p,{ref:"input",key:"input",borderClassName:this.ss.apply(this,y),className:this.ss(m?"text-input":""),theme:u,placeholder:n,value:a,onSave:function(e){return t.onSave(e)},onClear:function(e){return t.onClear(e)}}))),!1===s){var _="gray"===c&&"gray";switch(r){case E.single:1===h.length&&(v=w.default.createElement("div",{key:r,className:this.ss("value-wrap","single",_,l)},this.renderValueList(h)));break;case E.multiple:0<h.length&&(m?v.unshift(this.renderValueList(h)):v.push(w.default.createElement("div",{key:r,className:this.ss("value-wrap",_,l)},this.renderValueList(h))))}}return w.default.createElement("div",{className:this.ss("text-field",m&&"inner-mode",i)},v)}}]),o=a=_,a.propTypes={onSave:l.default.func,onRemove:l.default.func,onClear:l.default.func,autoFocus:l.default.bool,fold:l.default.string,hintText:l.default.string,className:l.default.string,valueListClassName:l.default.string,valueClassName:l.default.string,valueTheme:l.default.oneOf(["green","gray"]),inputTheme:l.default.string,type:l.default.string,inputType:l.default.oneOf([E.single,E.multiple]),inputValue:l.default.oneOfType([l.default.string,l.default.number,l.default.array]),valueList:l.default.array,hideResult:l.default.bool,valueMode:l.default.oneOf(["below","inner"]),borderClassName:l.default.string},a.defaultProps={inputType:E.single,autoFocus:!1,hideResult:!1,valueTheme:"green",valueMode:"below"},r=o))||r)||r;function _(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=v(this,(e=_.__proto__||Object.getPrototypeOf(_)).call.apply(e,[this].concat(a)))).state={valueList:n.getInitValueList(),hide:!1},v(n,t)}t.default=y},function(e,t){e.exports={"text-field":"text-field_yH3XR3CB","inner-mode":"inner-mode_-3JfhcX9",active:"active_3Wqo-Sa8",disabled:"disabled_1di0Tgy6","value-gray":"value-gray_2NKmM-kS","value-wrap":"value-wrap_1iphTuMw",gray:"gray_xM_x4QaO",single:"single_1T8SZOWa",value:"value_3AzAEwEU",name:"name_aReFnwKy","close-icon":"close-icon_21EYbx1G",delete:"delete_3InR2brd","no-border":"no-border_8AlYfBOK","text-input":"text-input_UgmxK7Wg"}},function(e,t){e.exports={numberInput:"numberInput_3YOk",numberOutput:"numberOutput_30Hz",inProgress:"inProgress_2Ovu",succeeded:"succeeded_2eBR",failed:"failed_2FOf"}},function(e,t){e.exports={"text-auto":"text-auto_1nvGOyH8",candidates:"candidates_2P2S8HR1",active:"active_-EWVoI2B",expand:"expand_1nqDwyjv",hide:"hide_MUsp38d0"}},function(e,t){e.exports={create_new:"create_new_1A6u",create_new_tag:"create_new_tag_21LU",create_new_category:"create_new_category_3fjt"}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(746),a=n(747),o=n.n(a);function s(){return"undefined"!=typeof window&&window.recaptchaOptions||{}}var i="onloadcallback",l=s();t.default=o()(r.a,function(){var e=s(),t=e.lang?"&hl="+e.lang:"";return"https://"+(e.useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+i+"&render=explicit"+t},{callbackName:i,globalName:"grecaptcha",removeOnMount:l.removeOnMount||!1,exposeFuncs:["getValue","getWidgetId","reset","execute"]})},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(2),s=n.n(o),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var l,u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l=a.a.Component),c.prototype.getValue=function(){return this.props.grecaptcha&&void 0!==this.state.widgetId?this.props.grecaptcha.getResponse(this.state.widgetId):null},c.prototype.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this.state.widgetId?this.state.widgetId:null},c.prototype.execute=function(){var e=this.props.grecaptcha,t=this.state.widgetId;if(e&&void 0!==t)return e.execute(t);this._executeRequested=!0},c.prototype.reset=function(){this.props.grecaptcha&&void 0!==this.state.widgetId&&this.props.grecaptcha.reset(this.state.widgetId)},c.prototype.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.props.onChange&&this.props.onChange(null)},c.prototype.explicitRender=function(e){var t,n;this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this.state.widgetId&&(t=document.createElement("div"),n=this.props.grecaptcha.render(t,{sitekey:this.props.sitekey,callback:this.props.onChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,size:this.props.size,stoken:this.props.stoken,badge:this.props.badge}),this.captcha.appendChild(t),this.setState({widgetId:n},e)),this._executeRequested&&this.props.grecaptcha&&void 0!==this.state.widgetId&&(this._executeRequested=!1,this.execute())},c.prototype.componentDidMount=function(){this.explicitRender()},c.prototype.componentDidUpdate=function(){this.explicitRender()},c.prototype.componentWillUnmount=function(){if(void 0!==this.state.widgetId){for(;this.captcha.firstChild;)this.captcha.removeChild(this.captcha.firstChild);this.reset()}},c.prototype.handleRecaptchaRef=function(e){this.captcha=e},c.prototype.render=function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.size,e.stoken,e.grecaptcha,e.badge,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["sitekey","onChange","theme","type","tabindex","onExpired","size","stoken","grecaptcha","badge"]));return a.a.createElement("div",i({},t,{ref:this.handleRecaptchaRef}))},c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,l.call(this));return e.state={},e.handleExpired=e.handleExpired.bind(e),e.handleRecaptchaRef=e.handleRecaptchaRef.bind(e),e}(t.a=u).displayName="ReCAPTCHA",u.propTypes={sitekey:s.a.string.isRequired,onChange:s.a.func.isRequired,grecaptcha:s.a.object,theme:s.a.oneOf(["dark","light"]),type:s.a.oneOf(["image","audio"]),tabindex:s.a.number,onExpired:s.a.func,size:s.a.oneOf(["compact","normal","invisible"]),stoken:s.a.string,badge:s.a.oneOf(["bottomright","bottomleft","inline"])},u.defaultProps={theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"}},function(e,t,n){"use strict";t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(a,e,u){u=u||{};var t=a.displayName||a.name||"Component",n=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,t.call(this));return e.state={},e.__scriptURL="",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+i++),this.__scriptLoaderID},n.prototype.setupScriptURL=function(){return this.__scriptURL="function"==typeof e?e():e,this.__scriptURL},n.prototype.getComponent=function(){return this.__childComponent},n.prototype.asyncScriptLoaderHandleLoad=function(e){this.setState(e,this.props.asyncScriptOnLoad)},n.prototype.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=c[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[u.callbackName]},n.prototype.componentDidMount=function(){var t=this,r=this.setupScriptURL(),e=this.asyncScriptLoaderGetScriptLoaderID(),n=u.globalName,a=u.callbackName;if(n&&void 0!==window[n]&&(c[r]={loaded:!0,observers:{}}),c[r]){var o=c[r];return o&&(o.loaded||o.errored)?void this.asyncScriptLoaderHandleLoad(o):void(o.observers[e]=function(e){return t.asyncScriptLoaderHandleLoad(e)})}var s={};s[e]=function(e){return t.asyncScriptLoaderHandleLoad(e)},c[r]={loaded:!1,observers:s};var i=document.createElement("script");i.src=r,i.async=!0;function l(e){if(c[r]){var t=c[r].observers;for(var n in t)e(t[n])&&delete t[n]}}a&&"undefined"!=typeof window&&(window[a]=function(){return t.asyncScriptLoaderTriggerOnScriptLoaded()}),i.onload=function(){var t=c[r];t&&(t.loaded=!0,l(function(e){return!a&&(e(t),1)}))},i.onerror=function(e){var t=c[r];t&&(t.errored=!0,l(function(e){return e(t),1}))},i.onreadystatechange=function(){"loaded"===t.readyState&&window.setTimeout(function(){var e=c[r];e&&!0!==e.loaded&&i.onload()},0)},document.body.appendChild(i)},n.prototype.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===u.removeOnUnmount)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n+=1)-1<t[n].src.indexOf(e)&&t[n].parentNode&&t[n].parentNode.removeChild(t[n]);var r=c[e];r&&(delete r.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===u.removeOnUnmount&&delete c[e])},n.prototype.render=function(){var t=this,e=u.globalName,n=this.props,r=(n.asyncScriptOnLoad,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["asyncScriptOnLoad"]));return e&&"undefined"!=typeof window&&(r[e]=void 0!==window[e]?window[e]:void 0),s.default.createElement(a,o({ref:function(e){t.__childComponent=e}},r))},n}(s.default.Component);n.displayName="AsyncScriptLoader("+t+")",n.propTypes={asyncScriptOnLoad:r.default.func},u.exposeFuncs&&u.exposeFuncs.forEach(function(t){n.prototype[t]=function(){var e;return(e=this.getComponent())[t].apply(e,arguments)}});return n};var s=a(n(1)),r=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var c={},i=0},function(e,t){e.exports={form:"form_1Ktp2_CE",section:"section_2XUaDtVQ",col:"col_3on8DwjU",fieldName:"fieldName_3HPjEdFq",error:"error_V1--9zRU","company-type":"company-type_2ZNy-Ycm",options:"options_3PcQXafa",option:"option_39xqVddr"}},function(e,t){e.exports={createCompany:"createCompany_16Hb",editBasic:"editBasic_mAch",companyName:"companyName_2zk-",companyName_hint:"companyName_hint_2lXY",location:"location_SSAk",location_hint:"location_hint_2izX",category:"category_76eb",category_hint:"category_hint_3s0i",scale:"scale_2kOf",scale_hint:"scale_hint_XePj",link:"link_VpRg",link_hint:"link_hint_3KTE",companyType:"companyType_lqHt",hire:"hire_I5rU",forHire:"forHire_3Czh",both:"both_111M",hint_hire:"hint_hire_3UFb",hint_forHire:"hint_forHire_2jpU",hint_both:"hint_both_Bml0",button_ok:"button_ok_1sG5",button_cancel:"button_cancel_3lIy",error_isWebsite:"error_isWebsite_2mr2",error_minLength2:"error_minLength2_V_dk",error_maxLength80:"error_maxLength80_38pQ",error_duplicate:"error_duplicate_2tLy",error_isRequired:"error_isRequired_2wdc",architecture:"architecture_1lbX",automotive:"automotive_2i4T",education:"education_31hX",film_ads:"film_ads_wEHc",gambling:"gambling_3hPr",medical:"medical_IlRD",gaming:"gaming_1TkP",gov_sim:"gov_sim_2SYA",research:"research_2ZuM",training:"training_2Eyg",others:"others_2RDN"}},,,function(e,t){e.exports={tooltips:"tooltips_24IzIgV9",tooltip:"tooltip_Gkd--Rni","tooltip-top":"tooltip-top_2zLfzSnj","tooltip-bottom":"tooltip-bottom_BDSINuNm","tooltip-bottom-left":"tooltip-bottom-left_1UqYyHrr","tooltip-left":"tooltip-left_3TnVgA9-","tooltip-right":"tooltip-right_1_wsdxEm","tooltip-error":"tooltip-error_2D-eEQRO","tooltip-success":"tooltip-success_1XMlRjFn","tooltip-warning":"tooltip-warning_3Lr7LPe3"}},function(e,t){e.exports={"dialog-contents":"dialog-contents_3sffEnR5","title-wrap":"title-wrap_2D9YpHW7","button-close":"button-close_1tmvWczv",error:"error_3PpPKBl8"}},function(e,t){e.exports={"content-wrap":"content-wrap_2I5l3h3y",delete:"delete_20zsineI",description:"description_jxPp1_PI","button-wrap":"button-wrap_2jwj_YrC","button-ok":"button-ok_t2XoE94U","button-cancel":"button-cancel_1V_1gtzJ","icon-wrapper":"icon-wrapper_3l_k80aa","icon-bg":"icon-bg_2vjku-sZ",icon:"icon_1c7Vqxo9","tfa-icon":"tfa-icon_hd7IoLiv"}},function(e,t){e.exports={title:"title_tiJZ",button_ok:"button_ok_2rj9",button_cancel:"button_cancel_1EAK",button_yes:"button_yes_3HJc",button_no:"button_no_2AdN"}},function(e,t){e.exports={"content-wrap":"content-wrap_31yIicnN",delete:"delete_ZXiRMOqb",description:"description_2YtemEIT","button-wrap":"button-wrap_1PMrHzD1","button-ok":"button-ok_1g3l_Woz","button-cancel":"button-cancel_1uHAq297","icon-wrapper":"icon-wrapper_3gz-RWzN","icon-bg":"icon-bg_ITbDAxU2",icon:"icon_1B3WIq-u","tfa-icon":"tfa-icon_16ViW0Jj"}},function(e,t){e.exports={title:"title_37L0",button_ok:"button_ok_39d4",button_cancel:"button_cancel_13cX",button_yes:"button_yes_2d5p",button_no:"button_no_2uTA",button_skip:"button_skip_2UA6"}},function(e,t){e.exports={backdrop:"backdrop_OPRp0qKR",popup:"popup_3ggsADWu",description:"description_2oA0vjrl",subDes:"subDes_y6pQyDBD","button-wrap":"button-wrap_doU_5guL","button-ok":"button-ok_2ReeEGod","button-cancel":"button-cancel_9sA7ESoh",hide:"hide_2pJgoLzH"}},function(e,t){e.exports={title:"title_2YFi",button_ok:"button_ok_23tV",button_cancel:"button_cancel_3JgG",button_yes:"button_yes_GWCS",button_no:"button_no_10re",delete_submission_by_self_title:"delete_submission_by_self_title_3BLg",delete_submission_by_self_text:"delete_submission_by_self_text_2iKh",delete_submission_by_admin_title:"delete_submission_by_admin_title_7LtZ",delete_project_by_self_title:"delete_project_by_self_title_3wdp",delete_project_by_self_text:"delete_project_by_self_text_1pyt"}},,,,,,,,,,function(e,t){e.exports={"message-wrap":"message-wrap_2KepLTrr",info2:"info2_3KiViq4l",fixed:"fixed_3wcuLTLC",message:"message_FGvdUVbA",error:"error_2eqSksD1",info:"info_2DVDLmmk",message_error:"message_error_1YYdIqd3"}},function(e,t){e.exports={validation_failed:"validation_failed_1Ll9",project_created:"project_created_bkNx",project_updated:"project_updated_ObTr",project_ContributorAlreadyExist:"project_ContributorAlreadyExist_1YlW",imgMinHeight_400:"imgMinHeight_400_3YgF",imgMaxSize_10M:"imgMaxSize_10M_1l_z",imgMaxSize_2G:"imgMaxSize_2G_GJ_Z",imgMaxLength_5:"imgMaxLength_5_1lyD",imgMaxLength_9:"imgMaxLength_9_15to",challengeMaxSize_1G:"challengeMaxSize_1G_LQ6c",adminMaxSize_2G:"adminMaxSize_2G_wrIP",userMaxSize_12M:"userMaxSize_12M_349g",userMaxSize_120M:"userMaxSize_120M_318G",cover_image_required:"cover_image_required_1kFH",webgl_thumbnail_required:"webgl_thumbnail_required_2FlI",https_required:"https_required_EjWB",file_type_invalid:"file_type_invalid_3PnU",asset_store_content_required:"asset_store_content_required_2U2N",project_hidden_or_removed:"project_hidden_or_removed_1H9U",message_too_long:"message_too_long_1ACS",image_type_error:"image_type_error_3G7s",no_contact:"no_contact_HNPL",file_type_error:"file_type_error_JiFQ",fileMaxLength_3:"fileMaxLength_3_77YT",projectMaxLength_3:"projectMaxLength_3_vgl1",tagName_too_long:"tagName_too_long_2ifr",project_required:"project_required_UYGq",be_a_lobby_request_sent:"be_a_lobby_request_sent_22J4",job_InvalidParameter_user_can_not_post_job_for_non_member_team:"job_InvalidParameter_user_can_not_post_job_for_non_member_team_fYwG",job_AdminApprovalNeeded_Admin_approval_needed:"job_AdminApprovalNeeded_Admin_approval_needed_3onL",job_NotAuthenticated_not_authenticated_error:"job_NotAuthenticated_not_authenticated_error_1iPk",project_:"project__3UXx",project_unsupported_url:"project_unsupported_url_80-t",project_InvalidParameter_forbidden_file_type:"project_InvalidParameter_forbidden_file_type_YRxs",project_InvalidParameter_not_video:"project_InvalidParameter_not_video_1zUj",project_InvalidParameter_height:"project_InvalidParameter_height_2Yrz",project_InvalidParameter_width:"project_InvalidParameter_width_18wI",project_InvalidParameter_title:"project_InvalidParameter_title_25xq",project_InvalidParameter_description:"project_InvalidParameter_description_10eR",project_embed_loading:"project_embed_loading_2U--",project_embed_duplicate:"project_embed_duplicate_1jYy",project_OwnerOnlyPublish:"project_OwnerOnlyPublish_1yPW",project_title_maxLength_135:"project_title_maxLength_135_3Csr",project_description_maxLength:"project_description_maxLength_1TyH",project_InvalidParameter_url:"project_InvalidParameter_url_1x2N",not_valid_email:"not_valid_email_3szp",should_select_user:"should_select_user_f0mI",genres_select_limit:"genres_select_limit_1FAw",project_tags_limit:"project_tags_limit_2xFI",project_UnsupportedTencentVideo_Unsupported_Tencent_Video:"project_UnsupportedTencentVideo_Unsupported_Tencent_Video_3a4Q",project_AdminApprovalNeeded_Admin_approval_needed:"project_AdminApprovalNeeded_Admin_approval_needed_3TPm",title:"title_1zzB",body:"body_joR1",description:"description_A25f",headerImage:"headerImage_2b7d",subTitle:"subTitle_1X67",contentImage:"contentImage_846w",project_fields_required:"project_fields_required_380k",project_publish_after_loaded_or_saved:"project_publish_after_loaded_or_saved_1YXm",praise_not_save:"praise_not_save_2cDU",upload_failed:"upload_failed_3lCt",profile_InvalidParameter_referenceUrls:"profile_InvalidParameter_referenceUrls_3oH7",project_InvalidParameter_coverContentId:"project_InvalidParameter_coverContentId_28q5",post_ThrottlingError_Throttling_Error_post_in_10s:"post_ThrottlingError_Throttling_Error_post_in_10s_Wah4",repost_validation_failed:"repost_validation_failed_3SzW",repost_succeeded:"repost_succeeded_1po8",post_deleted:"post_deleted_rjYC",post_can_not_be_empty:"post_can_not_be_empty_Hz8Z",certification_imported:"certification_imported_1mxA",settings_saved:"settings_saved_387o",profile_saved:"profile_saved_31Wg",group_can_not_delete:"group_can_not_delete_2ZsX",group_name_duplicate:"group_name_duplicate_3rc6",you_are_blocked:"you_are_blocked_20Hm",post_AuthorizationError_authorization_error:"post_AuthorizationError_authorization_error_1tsi",edit_visibility_success:"edit_visibility_success_29aN",error_when_fetch_channel_visibility:"error_when_fetch_channel_visibility_dl-V",job_share_to_self:"job_share_to_self_1l-b",job_share_InvalidParameter_jobId:"job_share_InvalidParameter_jobId_bWjW",job_share_InvalidParameter_receiver:"job_share_InvalidParameter_receiver_2Xla",job_share_empty_friends_list:"job_share_empty_friends_list_1WTf",job_share_jobId_invalid:"job_share_jobId_invalid_ckIp",group_GroupOwnerLeave:"group_GroupOwnerLeave_1b9h",add_featured_post_success:"add_featured_post_success_3N5H",remove_featured_post_success:"remove_featured_post_success_3Qd6",imgMaxWidth_800:"imgMaxWidth_800_2WLb",at_least_select_one:"at_least_select_one_3GYi",upload_record_succeed:"upload_record_succeed_G_kK",file_max_count:"file_max_count_3Dkj",project_InternalServerError_Wrap_non_AppError:"project_InternalServerError_Wrap_non_AppError_29Ec",fileMaxSize_10:"fileMaxSize_10_JbQT",fileMaxSize_200:"fileMaxSize_200_yNCm",fileMaxSize_100:"fileMaxSize_100_2HGt",support_insufficient_funds:"support_insufficient_funds_3HxC",support_ticket_resolved:"support_ticket_resolved_acfc",saved_successfully:"saved_successfully_3naT",saved_failed:"saved_failed_1_iH",deleted_successfully:"deleted_successfully_3oxW",deleted_failed:"deleted_failed_2f2c",recaptcha_error:"recaptcha_error_1ZbR",imgRatio_478_268:"imgRatio_478_268_9vKl",operation_successfully:"operation_successfully_2SS8"}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getCurrentContent(),n=e.getSelection();if(!n.isCollapsed())return null;var r=n.getStartKey(),a=n.getStartOffset(),o=t.getBlockForKey(r).getText(),s=(0,v.default)(o),i=(0,y.default)(o),l=(0,_.default)(o,s),u=(0,b.default)(o,a,s),c=l.get(u.getLine()).slice(0,u.getOffset());if(!(0,m.default)(c,i))return null;var d=a-i.length,f=n.merge({focusKey:r,focusOffset:d,anchorKey:r,anchorOffset:a,isBackward:!0}),p=h.Modifier.removeRange(t,f,"backward"),g=h.EditorState.push(e,p,"remove-range");return h.EditorState.forceSelection(g,p.getSelectionAfter())};var h=n(10),m=r(n(775)),v=r(n(130)),y=r(n(484)),_=r(n(486)),b=r(n(487));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){e.exports=n(8)(999)},function(e,t,n){e.exports=n(8)(998)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getCurrentContent(),n=e.getSelection(),r=n.getStartKey(),a=n.getStartOffset(),o=t.getBlockForKey(r).getText(),s=(0,g.default)(o),i=void 0;{var l,u,c,d;i=n.isCollapsed()?(l=(0,h.default)(o,s),u=(0,m.default)(o,a,s).getLine(),c=l.get(u),d=s+(0,v.default)(c),p.Modifier.insertText(t,n,d)):p.Modifier.replaceText(t,n,s)}var f=p.EditorState.push(e,i,"insert-characters");return p.EditorState.forceSelection(f,i.getSelectionAfter())};var p=n(10),g=r(n(130)),h=r(n(486)),m=r(n(487)),v=r(n(778));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e).indent||""};var r,a=n(485),o=(r=a)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.preventDefault();var n=t.getCurrentContent(),r=t.getSelection(),a=r.getStartKey(),o=n.getBlockForKey(a),s=(0,u.default)(o.getText()),i=void 0;i=r.isCollapsed()?l.Modifier.insertText(n,r,s):l.Modifier.replaceText(n,r,s);return l.EditorState.push(t,i,"insert-characters")};var r,l=n(10),a=n(484),u=(r=a)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=c(n(1)),s=c(n(2)),i=n(56),l=c(n(459)),u=c(n(781));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=(r(p,[{key:"getDecorations",value:function(e){var n=new Array(e.getLength()).fill(null);if("code-block"!==e.getType())return(0,i.List)(n);var t=e.getText(),r=l.default.highlightAuto(t),a=0,o=[],s=new u.default;return s.on("open",function(e,t){var n;"span"===e&&(n=t.class||"",o.push(n))}),s.on("close",function(e){"span"===e&&o.pop()}),s.on("text",function(e){var t=o.join(" ");!function(e,t,n,r){for(var a=t;a<n;a++)e[a]=r}(n,a,a+e.length,t),a+=e.length}),s.parse(r.value),(0,i.List)(n)}},{key:"getComponentForKey",value:function(){return g}},{key:"getPropsForKey",value:function(e){return{className:e}}}]),p);function p(){d(this,p)}t.default=f;var g=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,o.default.Component),r(h,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return t.split(" ").reverse().reduce(function(e,t){return o.default.createElement("span",{className:t},e)},n)}}]),h.propTypes={className:s.default.string,children:s.default.any},h);function h(){return d(this,h),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}},function(e,t,n){e.exports=n(8)(992)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.default=function(t){var e,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=r.editorKey,o=r.placeholder,s=(n=e=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,c.default),i(e,[{key:"render",value:function(){var e=this.props.children,n=[];return e.forEach(function(e){var t=e.key;n.push(l.default.createElement(d.default,{key:"separator-"+t,blockKey:t})),o&&n.push(l.default.createElement(f.default,{key:"placeholder-"+t,editorKey:a,blockKey:t,text:o})),n.push(e)}),l.default.cloneElement(t,{children:n})}}]),e}(),e.propTypes={children:u.default.array},n);return l.default.createElement(s,null)};var l=a(n(1)),u=a(n(2)),c=a(n(3)),d=a(n(783)),f=a(n(785));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=_(["project.dragOverBlockKey"],["project.dragOverBlockKey"]),i=_(["project.internalDrag"],["project.internalDrag"]),l=_(["project.dragStartBlockKey"],["project.dragStartBlockKey"]),u=_(["project.dragStartBlockAfterKey"],["project.dragStartBlockAfterKey"]),c=y(n(1)),d=y(n(2)),f=y(n(3)),p=n(5),g=n(0),h=n(10),m=y(n(4)),v=y(n(784));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var b=(0,p.decorator)({dragOverBlockKey:(0,g.state)(s),internalDrag:(0,g.state)(i),dragStartBlockKey:(0,g.state)(l),dragStartBlockAfterKey:(0,g.state)(u)})(r=(0,m.default)(v.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(w,f.default),a(w,[{key:"render",value:function(){var e=this.props,t=e.blockKey,n=e.dragOverBlockKey,r=e.internalDrag,a=e.dragStartBlockKey,o=e.dragStartBlockAfterKey,s=h.DraftOffsetKey.encode(t,0,0),i=c.default.createElement("div",{"data-offset-key":s});return t===n&&(!r||a&&n!==a&&n!==o)?c.default.createElement("div",{className:this.ss("dragover"),"data-offset-key":s}):i}}]),w.propTypes={blockKey:d.default.string.isRequired,dragOverBlockKey:d.default.string,internalDrag:d.default.bool,dragStartBlockKey:d.default.string,dragStartBlockAfterKey:d.default.string},r=w))||r)||r;function w(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}t.default=b},function(e,t){e.exports={dragover:"dragover_a2WJypiR"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=y(["draft.editorStates.",""],["draft.editorStates.",""]),i=y(["editorKey"],["editorKey"]),l=y(["draft.editorEditable.",""],["draft.editorEditable.",""]),c=v(n(1)),u=v(n(2)),d=v(n(3)),f=n(5),p=n(0),g=n(10),h=v(n(4)),m=v(n(786));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _=(0,f.decorator)({editorState:(0,p.state)(s,(0,p.props)(i)),editable:(0,p.state)(l,(0,p.props)(i))})(r=(0,h.default)(m.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(b,d.default),a(b,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.blockKey,r=e.editorState,a=e.editable,o=g.DraftOffsetKey.encode(n,0,0),s=c.default.createElement("div",{"data-offset-key":o});if(!r)return s;if(r.isInCompositionMode())return s;var i=r.getCurrentContent(),l=i.getBlocksAsArray().filter(function(e){if("atomic"!==e.getType())return!0;var t=!1;return e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&("SHOWCASEGALLERY"===i.getEntity(t).getType()||"GAMEGALLERY"===i.getEntity(t).getType()||"WEBGLGALLERY"===i.getEntity(t).getType())},function(){t=!0}),!t});if(1!==l.length||0<l[0].getLength()||l[0].getKey()!==n)return s;var u=r.getSelection().getHasFocus()&&a;return c.default.createElement("div",{className:this.ss("placeholder",u&&"has-focus"),"data-offset-key":o},t)}}]),b.propTypes={editorKey:u.default.string.isRequired,blockKey:u.default.string.isRequired,text:u.default.string.isRequired,editorState:u.default.object,editable:u.default.bool},r=b))||r)||r;function b(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}t.default=_},function(e,t){e.exports={placeholder:"placeholder_2TYShexQ","has-focus":"has-focus_2EU6z7r3"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=M(["draft.editorStates.",""],["draft.editorStates.",""]),i=M(["editorKey"],["editorKey"]),l=M(["project.sideToolbars.",""],["project.sideToolbars.",""]),u=M(["project.showSideToolbar"],["project.showSideToolbar"]),c=M(["project.hideSideToolbar"],["project.hideSideToolbar"]),d=M(["project.toggleSideToolbar"],["project.toggleSideToolbar"]),f=M(["project.closeSideToolbar"],["project.closeSideToolbar"]),p=I(n(1)),g=I(n(2)),h=I(n(3)),m=n(5),v=n(0),y=n(18),_=I(n(131)),b=n(10),w=I(n(788)),S=I(n(793)),E=I(n(794)),O=I(n(813)),C=I(n(4)),k=I(n(73));function I(e){return e&&e.__esModule?e:{default:e}}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=(0,m.decorator)({editorState:(0,v.state)(s,(0,v.props)(i)),sideToolbarState:(0,v.state)(l,(0,v.props)(i)),showSideToolbar:(0,v.signal)(u),hideSideToolbar:(0,v.signal)(c),toggleSideToolbar:(0,v.signal)(d),closeSideToolbar:(0,v.signal)(f)})(r=(0,C.default)(k.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(P,h.default),a(P,[{key:"componentDidMount",value:function(){this.removeClickOutside=(0,y.addClickOutside)([this],this.onClickOutside)}},{key:"componentDidUpdate",value:function(){var e,t,n,r,a,o=this.props,s=o.editorKey,i=o.editorState,l=o.hideSideToolbar,u=o.showSideToolbar,c=i.getSelection().getStartKey(),d=i.getCurrentContent().getBlockForKey(c);"atomic"!==d.getType()?(e='[data-block="true"][data-editor="'+s+'"][data-offset-key="'+b.DraftOffsetKey.encode(d.getKey(),0,0)+'"]',(t=document.querySelector(e))&&(n=t.getBoundingClientRect(),r=((0,_.default)(t.parentElement)||document.body).getBoundingClientRect(),a=n.top-r.top,u({editorKey:s,blockType:d.getType(),top:a}))):l({editorKey:s})}},{key:"componentWillUnmount",value:function(){this.removeClickOutside()}},{key:"render",value:function(){var e=this.props,t=e.sideToolbarState,n=e.editorKey,r=e.allowImage,a=e.allowVideo,o=e.allowAttachment,s=!!t,i=t&&t.blockType,l=t&&{top:t.top},u=t&&t.isOpen,c=!1===r&&!1===a&&!1===o;return p.default.createElement("div",{className:this.ss("side-toolbar",s&&"show",i),style:l},!c&&p.default.createElement("div",{className:this.ss("ifont","ifont-icons-add","plus",u&&"open"),onClick:this.onTogglePlus}),p.default.createElement(O.default,{editorKey:n}),p.default.createElement("div",{className:this.ss("menu-icons",u&&"open")},!1!==r&&p.default.createElement(w.default,{editorKey:n}),!1!==a&&p.default.createElement(S.default,{editorKey:n}),!1!==o&&p.default.createElement(E.default,{editorKey:n})))}}]),P.propTypes={editorKey:g.default.string.isRequired,editorState:g.default.object,sideToolbarState:g.default.object,allowImage:g.default.bool,allowVideo:g.default.bool,allowAttachment:g.default.bool,showSideToolbar:g.default.func,hideSideToolbar:g.default.func,toggleSideToolbar:g.default.func,closeSideToolbar:g.default.func},r=P))||r)||r;function P(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=j(this,(e=P.__proto__||Object.getPrototypeOf(P)).call.apply(e,[this].concat(a)))).onClickOutside=function(){var e=n.props,t=e.editorKey;(0,e.closeSideToolbar)({editorKey:t})},n.onTogglePlus=function(){var e=n.props,t=e.editorKey;(0,e.toggleSideToolbar)({editorKey:t})},j(n,t)}t.default=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=I(["draft.editorStates.",""],["draft.editorStates.",""]),u=I(["editorKey"],["editorKey"]),c=I(["header.showMessage"],["header.showMessage"]),d=I(["project.uploadAttachment"],["project.uploadAttachment"]),f=I(["draft.setEditorState"],["draft.setEditorState"]),p=C(n(1)),g=C(n(2)),h=C(n(3)),m=n(5),v=n(0),y=n(132),_=n(10),b=C(n(22)),w=C(n(4)),S=C(n(73)),E=C(n(6)),O=C(n(215));function C(e){return e&&e.__esModule?e:{default:e}}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var j=9,M=(0,m.decorator)({editorState:(0,v.state)(l,(0,v.props)(u)),showMessage:(0,v.signal)(c),uploadAttachment:(0,v.signal)(d),setEditorState:(0,v.signal)(f)})(r=(0,w.default)(S.default)(r=(0,E.default)(O.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(T,h.default),s(T,[{key:"render",value:function(){var e=this.props.type;return p.default.createElement(b.default,{text:this.__("image_tooltip"),position:"bottom"},p.default.createElement("button",{className:this.ss("button",e),onClick:this.onClickUpload},p.default.createElement("div",{className:this.ss("ifont","ifont-icons-"+e,"icon")}),p.default.createElement("input",{type:"file",ref:"imageSelect",multiple:!0,accept:"image/*",className:this.ss("hide"),onChange:this.onFilesChange})))}}]),o=a=T,a.propTypes={type:g.default.string,editorKey:g.default.string.isRequired,editorState:g.default.object,showMessage:g.default.func,uploadAttachment:g.default.func,setEditorState:g.default.func},a.defaultProps={type:"photo"},r=o))||r)||r)||r;function T(){var e,t,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=l=k(this,(e=T.__proto__||Object.getPrototypeOf(T)).call.apply(e,[this].concat(r)))).onClickUpload=function(){l.refs.imageSelect.click()},l.onFilesChange=function(e){var t,n,r,a,o,s,i;e&&e.target&&(n=void 0===(t=(e.target||{}).files)?[]:t,a=(r=l.props).showMessage,o=r.uploadAttachment,s=r.setEditorState,i=r.editorKey,n.length>j?a({message:"fileMaxLength_9"}):(0,y.readImages)(n).then(function(e){var t=r.editorState,n=t.getSelection().focusKey;e.forEach(function(e){t=(0,_.addAtomicBlockBefore)(t,n,"IMAGE",{uploadId:e.id}),o({upload:e})}),s({editorKey:i,editorState:t})}),l.refs.imageSelect.value=null)},k(l,t)}t.default=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=I(["header.setting.windowWidth"],["header.setting.windowWidth"]),i=I(["project.contentMap"],["project.contentMap"]),l=I(["project.uploads"],["project.uploads"]),u=I(["draft.editorStates.",""],["draft.editorStates.",""]),c=I(["editorKey"],["editorKey"]),d=I(["draft.setEditorState"],["draft.setEditorState"]),f=I(["draft.setEditorEditable"],["draft.setEditorEditable"]),p=I(["project.retryUploadAttachment"],["project.retryUploadAttachment"]),h=I(["project.openContent"],["project.openContent"]),P=k(n(1)),m=k(n(2)),v=k(n(3)),y=n(5),_=n(0),x=n(7),b=n(10),A=k(n(14)),w=k(n(89)),D=k(n(22)),S=k(n(4)),E=k(n(791)),O=k(n(6)),C=k(n(792));function k(e){return e&&e.__esModule?e:{default:e}}function I(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var j=(0,y.decorator)({windowWidth:(0,_.state)(s),contentMap:(0,_.state)(i),uploads:(0,_.state)(l),editorState:(0,_.state)(u,(0,_.props)(c)),setEditorState:(0,_.signal)(d),setEditorEditable:(0,_.signal)(f),retryUploadAttachment:(0,_.signal)(p),openContent:(0,_.signal)(h)})(r=(0,S.default)(E.default)(r=(0,O.default)(C.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(M,v.default),a(M,[{key:"componentDidMount",value:function(){this.checkUpload()}},{key:"componentDidUpdate",value:function(){this.checkUpload()}},{key:"onImageClick",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:"",a=this.props,o=a.renderOnly,s=a.focus,i=a.openContent;o?i({contentId:t,url:r}):s(e)}},{key:"checkUpload",value:function(){var e,t,n,r,a,o,s,i,l,u,c,d,f,p;this.props.renderOnly||(t=(e=this.props).entityKey,n=e.uploads,r=e.contentMap,a=e.editorKey,o=e.editorState,s=e.setEditorState,u=(l=(i=o.getCurrentContent()).getEntity(t).getData()).uploadId,c=l.contentId,d=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(l,["uploadId","contentId"]),(f=u&&n[u])&&f.contentId&&r&&r[f.contentId]&&!c&&(p=(0,b.mergeAtomicEntityData)(i,t,g({},d,{contentId:f.contentId})),s({editorKey:a,editorState:b.EditorState.set(o,{currentContent:p})}),this.__placeholderSrc=f.dataUrl))}},{key:"retry",value:function(e,t){e.preventDefault(),(0,this.props.retryUploadAttachment)(t)}},{key:"renderLoading",value:function(e){var t=e.loaded,n=void 0===t?0:t,r=e.total,a=100*n/(void 0===r?1:r);return P.default.createElement("div",{className:this.ss("loading-wrap")},P.default.createElement("div",{className:this.ss("loading-text")},this.__("image_uploading")),P.default.createElement("div",{className:this.ss("loading-bar")},P.default.createElement("div",{className:this.ss("loading"),style:{width:a+"%"}})))}},{key:"renderFailed",value:function(t){var n=this;return P.default.createElement("div",{className:this.ss("loading-wrap")},P.default.createElement("div",{className:this.ss("loading-text")},this.__("image_uploading_failed")),P.default.createElement("button",{className:this.ss("loading-button"),onClick:function(e){return n.retry(e,t)}},P.default.createElement("span",{className:this.ss("content")},P.default.createElement("span",{className:this.ss("ifont","ifont-icons_refresh","retry")}),P.default.createElement("span",{className:this.ss("text")},this.__("image_uploading_retry")))))}},{key:"renderCaption",value:function(){var e=this.props,t=e.isFocused,n=e.offsetKey,r=e.editorKey,a=e.entityKey,o=e.renderOnly;return P.default.createElement(w.default,{parentEditorKey:r,parentIsFocused:t,parentOffsetKey:n,editorKey:r+":"+n,entityKey:a,renderOnly:o,placeholder:this.__("image_caption_placeholder")})}},{key:"render",value:function(){var e,t,n,r,a,o,s,i,l,u,c,d=this,f=this.props,p=f.isFocused,g=f.focus,h=f.onDragStart,m=f.editorState,v=f.entityKey,y=f.uploads,_=f.contentMap,b=f.renderOnly,w=f.windowWidth,S=m.getCurrentContent().getEntity(v).getData(),E=S.uploadId,O=S.contentId,C=S.url,k=void 0===C?"":C,I=O&&_[O],j=y[E],M=w?Math.min(w,1e3):1e3,T=void 0;return I?(e=this.__placeholderSrc,n=(t=I.originalImage).url,r=t.width,a=t.height,o=t.gif,s=r<M?{width:r,height:a,margin:"0 auto",display:"block"}:{},T=P.default.createElement("div",{className:this.ss("image-wrap","content")},P.default.createElement("div",{className:this.ss("image",p&&"focus"),style:s,onClick:function(e){return d.onImageClick(e,O,k)},draggable:!!h,onDragStart:h},P.default.createElement(A.default,{src:n,sizes:"1000px",placeholderSrc:e,width:r,height:a,gif:!!o})))):j&&(i=j.dataUrl,l=j.width,u=j.height,c=l<M?{width:l,height:u,margin:"0 auto",display:"block"}:{},T=P.default.createElement("div",{className:this.ss("image-wrap","upload",p&&"focus")},P.default.createElement("div",{className:this.ss("image"),style:c,onClick:g,draggable:!!h,onDragStart:h},P.default.createElement(A.default,{src:i,sizes:"1000px",width:l,height:u})),(0,x.isLoading)(j.status)&&this.renderLoading(j),(0,x.isFailed)(j.status)&&this.renderFailed(j))),P.default.createElement("div",{className:this.ss("image-wrapper",b&&"render-only")},P.default.createElement(D.default,{text:k,position:"bottom",clickToHide:!1},T),this.renderCaption(I))}}]),M.propTypes={windowWidth:m.default.number,isFocused:m.default.bool,entityKey:m.default.string,renderOnly:m.default.bool,offsetKey:m.default.string,uploads:m.default.object,contentMap:m.default.object,editorKey:m.default.string.isRequired,editorState:m.default.object,focus:m.default.func,onDragStart:m.default.func,setEditorState:m.default.func,setEditorEditable:m.default.func,retryUploadAttachment:m.default.func,openContent:m.default.func},r=M))||r)||r)||r;function M(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}t.default=j},function(e,t){e.exports={caption:"caption_2W6VtqEE",hide:"hide_3WsfRMnn"}},function(e,t){e.exports={"image-wrapper":"image-wrapper_3dqAwXWn","image-wrap":"image-wrap_2hIHVxg4",upload:"upload_1gep5Qhf",focus:"focus_2unaBO4d",content:"content_1Z6Qs-jN",image:"image_1z_exUwH",caption:"caption_3zflifMe","render-only":"render-only_ThD25orX","loading-wrap":"loading-wrap_lnoeRNnR","loading-text":"loading-text_1ecGCLG1","loading-bar":"loading-bar_2qIJLZhB",loading:"loading_1scOZSM2","loading-button":"loading-button_1AiyV8fx",retry:"retry_jHqyJ8cE",text:"text_2-ifxOy9"}},function(e,t){e.exports={image_uploading:"image_uploading_S4H2",image_uploading_failed:"image_uploading_failed_UaVA",image_uploading_retry:"image_uploading_retry_1RAt",image_caption_placeholder:"image_caption_placeholder_3uu3"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=E(["draft.editorStates.",""],["draft.editorStates.",""]),u=E(["editorKey"],["editorKey"]),c=E(["project.openUploadVideo"],["project.openUploadVideo"]),d=w(n(1)),f=w(n(2)),p=w(n(3)),g=n(5),h=n(0),m=w(n(22)),v=w(n(4)),y=w(n(73)),_=w(n(6)),b=w(n(215));function w(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var O=(0,g.decorator)({editorState:(0,h.state)(l,(0,h.props)(u)),openUploadVideo:(0,h.signal)(c)})(r=(0,v.default)(y.default)(r=(0,_.default)(b.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(C,p.default),s(C,[{key:"render",value:function(){var e=this.props.type;return d.default.createElement(m.default,{text:this.__("video_tooltip"),position:"bottom"},d.default.createElement("button",{className:this.ss("button",e),onClick:this.onClickVideo},d.default.createElement("div",{className:this.ss("ifont","ifont-icons_embed","icon",e)})))}}]),o=a=C,a.propTypes={type:f.default.string,editorKey:f.default.string.isRequired,openUploadVideo:f.default.func},a.defaultProps={type:"video"},r=o))||r)||r)||r;function C(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,C);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=S(this,(e=C.__proto__||Object.getPrototypeOf(C)).call.apply(e,[this].concat(a)))).onClickVideo=function(){var e=n.props.editorKey;n.props.openUploadVideo({editorKey:e})},S(n,t)}t.default=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,s=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=M(["draft.editorStates.",""],["draft.editorStates.",""]),u=M(["editorKey"],["editorKey"]),c=M(["loginUser"],["loginUser"]),d=M(["project.challengeId"],["project.challengeId"]),f=M(["header.showMessage"],["header.showMessage"]),p=M(["project.uploadAttachment"],["project.uploadAttachment"]),g=M(["draft.setEditorState"],["draft.setEditorState"]),h=I(n(1)),m=I(n(2)),v=I(n(3)),y=n(5),_=n(0),b=n(90),w=n(10),S=I(n(22)),E=I(n(4)),O=I(n(73)),C=I(n(6)),k=I(n(215));function I(e){return e&&e.__esModule?e:{default:e}}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=9,P=1073741824,x=2147483648,A=125829120,D=(0,y.decorator)({editorState:(0,_.state)(l,(0,_.props)(u)),loginUser:(0,_.state)(c),challengeId:(0,_.state)(d),showMessage:(0,_.signal)(f),uploadAttachmentMultipart:(0,_.signal)(p),setEditorState:(0,_.signal)(g)})(r=(0,E.default)(O.default)(r=(0,C.default)(k.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(R,v.default),s(R,[{key:"render",value:function(){var e=this.props.type;return h.default.createElement(S.default,{text:this.__("attachment_tooltip"),position:"bottom"},h.default.createElement("button",{className:this.ss("button",e),onClick:this.onClickUpload},h.default.createElement("div",{className:this.ss("ifont","ifont-icons-"+e,"icon")}),h.default.createElement("input",{type:"file",ref:"fileSelect",multiple:!0,accept:"*/*",className:this.ss("hide"),onChange:this.onFilesChange})))}}]),o=a=R,a.propTypes={loginUser:m.default.object,challengeId:m.default.string,type:m.default.string,editorKey:m.default.string.isRequired,editorState:m.default.object,showMessage:m.default.func,uploadAttachmentMultipart:m.default.func,setEditorState:m.default.func},a.defaultProps={type:"upload"},r=o))||r)||r)||r;function R(){var e,t,_;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,R);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=_=j(this,(e=R.__proto__||Object.getPrototypeOf(R)).call.apply(e,[this].concat(r)))).onClickUpload=function(){_.refs.fileSelect.click()},_.onFilesChange=function(e){var t,n,r,a,o,s,i,l,u,c,d,f,p,g,h=_.props,m=h.loginUser,v=h.challengeId,y=m&&m.isAdmin;e&&e.target&&(n=void 0===(t=(e.target||{}).files)?[]:t,a=(r=_.props).showMessage,o=r.uploadAttachmentMultipart,s=r.setEditorState,i=r.editorKey,l=(0,b.getFiles)(n),u=A,c="userMaxSize_120M",y?(u=x,c="adminMaxSize_2G"):""!==v&&(u=P,c="challengeMaxSize_1G"),d=!1,l.forEach(function(e){e.file.size>u&&(d=!0)}),d?a({message:c}):n.length>T?a({message:"fileMaxLength_9"}):(f=0!==l.length,p=_.props.editorState,g=p.getSelection().focusKey,l.forEach(function(e){p=(0,w.addAtomicBlockBefore)(p,g,"ATTACHMENT",{uploadId:e.id}),o({upload:e})}),f&&s({editorKey:i,editorState:p})),_.refs.fileSelect.value=null)},j(_,t)}t.default=D},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=B(["loginUser"],["loginUser"]),i=B(["project.uploads"],["project.uploads"]),l=B(["project.challengeId"],["project.challengeId"]),u=B(["project.submission"],["project.submission"]),c=B(["project.userCanDownload"],["project.userCanDownload"]),d=B(["project.contentMap"],["project.contentMap"]),f=B(["draft.editorStates.",""],["draft.editorStates.",""]),p=B(["editorKey"],["editorKey"]),h=B(["header.loginTo"],["header.loginTo"]),m=B(["draft.setEditorState"],["draft.setEditorState"]),v=B(["project.retryUploadAttachment"],["project.retryUploadAttachment"]),y=B(["project.continueUploadAttachmentMultipart"],["project.continueUploadAttachmentMultipart"]),_=B(["project.downloadContent"],["project.downloadContent"]),b=B(["project.downloadDraftContent"],["project.downloadDraftContent"]),w=B(["project.switchContentVisibility"],["project.switchContentVisibility"]),P=U(n(1)),S=U(n(2)),E=U(n(3)),O=n(5),C=n(0),x=n(7),A=n(11),k=n(10),I=U(n(216)),D=U(n(22)),j=U(n(14)),M=U(n(89)),T=U(n(13)),R=U(n(217)),N=U(n(4)),L=U(n(810)),F=U(n(6)),K=U(n(811));function U(e){return e&&e.__esModule?e:{default:e}}function B(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var z=["video/mp4"],W=n(812),V=(0,O.decorator)({loginUser:(0,C.state)(s),uploads:(0,C.state)(i),challengeId:(0,C.state)(l),submission:(0,C.state)(u),userCanDownload:(0,C.state)(c),contentMap:(0,C.state)(d),editorState:(0,C.state)(f,(0,C.props)(p)),loginTo:(0,C.signal)(h),setEditorState:(0,C.signal)(m),retryUploadAttachment:(0,C.signal)(v),continueUploadAttachmentMultipart:(0,C.signal)(y),downloadContent:(0,C.signal)(_),downloadDraftContent:(0,C.signal)(b),switchContentVisibility:(0,C.signal)(w)})(r=(0,N.default)(L.default)(r=(0,F.default)(K.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(q,E.default),a(q,[{key:"componentDidMount",value:function(){this.checkUpload()}},{key:"componentDidUpdate",value:function(){this.checkUpload()}},{key:"onDownload",value:function(e){var t=e.id,n=this.props,r=n.downloadContent,a=n.downloadDraftContent;n.renderOnly?r&&r({id:t}):a&&a({id:t})}},{key:"onAttachmentClick",value:function(e){var t=this.props,n=t.renderOnly,r=t.focus;n||r(e)}},{key:"onSwitchLock",value:function(e){var t=e.id;(0,this.props.switchContentVisibility)({id:t})}},{key:"checkUpload",value:function(){var e,t=this.props,n=t.entityKey,r=t.uploads,a=t.contentMap,o=t.editorKey,s=t.editorState,i=t.setEditorState,l=s.getCurrentContent(),u=l.getEntity(n).getData(),c=u.uploadId,d=u.contentId,f=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(u,["uploadId","contentId"]),p=c&&r[c];p&&p.contentId&&a&&a[p.contentId]&&!d&&(e=(0,k.mergeAtomicEntityData)(l,n,g({},f,{contentId:p.contentId})),i({editorKey:o,editorState:k.EditorState.set(s,{currentContent:e})}))}},{key:"retry",value:function(e,t){e.preventDefault();var n=this.props,r=n.retryUploadAttachment,a=n.continueUploadAttachmentMultipart;(t.uploadId&&""!==t.uploadId?a:r)(t)}},{key:"renderLoading",value:function(e){var t=e.loaded,n=void 0===t?0:t,r=e.total,a=100*n/(void 0===r?1:r);return P.default.createElement("div",{className:this.ss("loading"),style:{width:a+"%"}})}},{key:"renderFailed",value:function(t){var n=this;return P.default.createElement("div",{className:this.ss("loading-failed")},P.default.createElement("div",{className:this.ss("loading-text")},this.__("file_uploading_failed")),P.default.createElement("button",{className:this.ss("loading-button"),onClick:function(e){return n.retry(e,t)}},P.default.createElement("span",{className:this.ss("content")},P.default.createElement("span",{className:this.ss("ifont","ifont-icons_refresh","retry")}),P.default.createElement("span",{className:this.ss("text")},this.__("file_uploading_retry")))))}},{key:"renderCaption",value:function(){var e=this.props,t=e.isFocused,n=e.offsetKey,r=e.editorKey,a=e.entityKey,o=e.renderOnly;return P.default.createElement(M.default,{parentEditorKey:r,parentIsFocused:t,parentOffsetKey:n,editorKey:r+":"+n,entityKey:a,renderOnly:o,placeholder:this.__("player_caption_placeholder")})}},{key:"renderPlayer",value:function(e){var t=this,n=this.props,r=n.isFocused,a=n.onDragStart,o=n.renderOnly,s=n.challengeId,i=n.submission,l=n.loginUser,u=n.loginTo,c=e||{},d=c.downloadUrl,f="btn_tip_public",p="ifont-icons_lockon";c.isPrivate||(f="btn_tip_private",p="ifont-icons_lockoff");var g=null;!o&&""!==s&&i&&(g=P.default.createElement(D.default,{text:this.__(f),position:"top",className:this.ss("lock_tooltip")},P.default.createElement("button",{className:this.ss("lock","ifont",p),onClick:function(){return t.onSwitchLock(e)}})));var h=P.default.createElement("div",{className:this.ss("footer")},P.default.createElement("div",{className:this.ss("caption")},this.renderCaption()),P.default.createElement("div",{className:this.ss("buttons")},g)),m=P.default.createElement("div",{className:this.ss("login-btn-mask")},P.default.createElement("div",{className:this.ss("login-icon","ifont","ifont-material-baseline-account_circle")}),P.default.createElement(T.default,{className:this.ss("button"),label:this.__("login_to_watch"),theme:"primary-blue",onClick:function(){return u()}}));return P.default.createElement("div",{className:this.ss("attachment-media",r&&"selected",o&&"render-only"),onClick:function(e){return t.onAttachmentClick(e)},draggable:!!a,onDragStart:a},P.default.createElement("div",{className:this.ss("player")},!l&&m,P.default.createElement(I.default,{src:d,size:"auto",width:1e3,height:560,directPlay:!0,progress:!0})),h)}},{key:"renderPrivatePlayer",value:function(){var e=this.props,t=e.loginUser,n=e.loginTo;return P.default.createElement("div",{className:this.ss("private-player")},P.default.createElement("div",{className:this.ss("player-wrap",!t&&"no-login"),onClick:function(){return!t&&n()}},P.default.createElement("div",{className:this.ss("player-img")},P.default.createElement(j.default,{src:W,sizes:"160px",width:160,height:133})),P.default.createElement("span",null,this.__(t?"label_private_player":"label_private_player_no_login"))))}},{key:"render",value:function(){var t=this,e=this.props,n=e.isFocused,r=e.focus,a=e.onDragStart,o=e.editorState,s=e.entityKey,i=e.uploads,l=e.contentMap,u=e.renderOnly,c=e.offsetKey,d=e.editorKey,f=e.challengeId,p=e.userCanDownload,g=e.submission,h=o.getCurrentContent().getEntity(s).getData(),m=h.uploadId,v=h.contentId,y=v&&l[v],_=i[m];if(y){var b=y.title,w=y.size,S=y.contentType,E=y.isPrivate;if(y.oembed)return P.default.createElement(R.default,{isFocused:n,entityKey:s,renderOnly:u,offsetKey:c,editorKey:d,focus:r,onDragStart:a});if(-1!==z.indexOf(S))return!p&&E&&u?this.renderPrivatePlayer(y):this.renderPlayer(y);var O,C,k=P.default.createElement("button",{className:this.ss("download","ifont","ifont-icons_download_cloud"),onClick:function(){return t.onDownload(y)}}),I=null;return!u&&""!==f&&g&&(O="btn_tip_public",C="ifont-icons_lockon",E||(O="btn_tip_private",C="ifont-icons_lockoff"),I=P.default.createElement(D.default,{text:this.__(O),position:"top",className:this.ss("lock_tooltip")},P.default.createElement("button",{className:this.ss("lock","ifont",C),onClick:function(){return t.onSwitchLock(y)}}))),u&&""!==f&&(E&&(I=P.default.createElement("i",{className:this.ss("lock","nonpointer","ifont","ifont-icons_lockon")})),E&&!p&&(k=null)),P.default.createElement("div",{className:this.ss("attachment",n&&"selected",u&&"render-only"),onClick:function(e){return t.onAttachmentClick(e)},draggable:!!a,onDragStart:a},P.default.createElement("div",{className:this.ss("empty")}),P.default.createElement("div",{className:this.ss("file-icon","ifont","ifont-icons_attachment2")}),P.default.createElement("div",{className:this.ss("content-body")},P.default.createElement("div",{className:this.ss("title")},b),P.default.createElement("div",{className:this.ss("size")},(0,A.formatSize)(w))),I,k)}if(_){var j=_.filename,M=_.fileSize,T=_.status;return P.default.createElement("div",{className:this.ss("attachment",!(0,x.isLoading)(T)&&n&&"selected"),onClick:r,draggable:!!a,onDragStart:a},P.default.createElement("div",{className:this.ss("empty")}),P.default.createElement("div",{className:this.ss("file-icon","ifont","ifont-icons_attachment2")}),P.default.createElement("div",{className:this.ss("content-body")},P.default.createElement("div",{className:this.ss("title")},j),P.default.createElement("div",{className:this.ss("size")},(0,A.formatSize)(M))),(0,x.isFailed)(T)&&this.renderFailed(_),(0,x.isLoading)(T)&&this.renderLoading(_))}return null}}]),q.propTypes={loginUser:S.default.object,isFocused:S.default.bool,entityKey:S.default.string,offsetKey:S.default.string,renderOnly:S.default.bool,challengeId:S.default.string,userCanDownload:S.default.bool,submission:S.default.object,uploads:S.default.object,contentMap:S.default.object,editorKey:S.default.string,editorState:S.default.object,loginTo:S.default.func,focus:S.default.func,onDragStart:S.default.func,setEditorState:S.default.func,retryUploadAttachment:S.default.func,continueUploadAttachmentMultipart:S.default.func,downloadContent:S.default.func,downloadDraftContent:S.default.func,switchContentVisibility:S.default.func},r=q))||r)||r)||r;function q(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,q),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(q.__proto__||Object.getPrototypeOf(q)).apply(this,arguments))}t.default=V},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=g(n(3)),d=g(n(1)),i=g(n(12)),f=g(n(797)),l=g(n(2)),u=g(n(4)),p=g(n(798));function g(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=["application/x-mpegURL","application/vnd.apple.mpegURL"],v=(0,u.default)(p.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,s.default),a(y,[{key:"componentDidMount",value:function(){var e,t,n,r=i.default.findDOMNode(this.refs.video),a=!1;f.default.isSupported()&&!this.props.directPlay?(e=this.props.src,this.hls=new f.default,this.hls.loadSource(e),this.hls.attachMedia(r),this.bindEvents(this.hls)):r.canPlayType&&(a=m.reduce(function(e,t){return e||/probably|maybe/.test(r.canPlayType(t))},!1)),this.props.onInitialized&&(t=this.refs.video.volume,n=this.state.loading,this.props.onInitialized({volume:t,loading:n,mseSupported:f.default.isSupported(),m3u8Supported:a}))}},{key:"componentDidUpdate",value:function(e){var t=e.src,n=this.props,r=n.src,a=n.directPlay;r!==t&&f.default.isSupported()&&!a&&(this.reloadTimeout&&(clearTimeout(this.reloadTimeout),this.reloadTimeout=null),this.reload(r))}},{key:"componentWillUnmount",value:function(){f.default.isSupported()&&this.hls&&!this.props.directPlay&&(this.reloadTimeout&&(clearTimeout(this.reloadTimeout),this.reloadTimeout=null),this.hls.destroy())}},{key:"onPlay",value:function(){var e;this.props.onPlay&&(e=this.props).onPlay.apply(e,arguments)}},{key:"onPlaying",value:function(){var e;this.props.onPlaying&&(e=this.props).onPlaying.apply(e,arguments)}},{key:"onEnded",value:function(){var e;this.props.onEnded&&(e=this.props).onEnded.apply(e,arguments)}},{key:"onPause",value:function(){var e;this.props.onPause&&(e=this.props).onPause.apply(e,arguments)}},{key:"onVolumeChange",value:function(){var e;this.props.onVolumeChange&&(e=this.props).onVolumeChange.apply(e,arguments)}},{key:"onDurationChange",value:function(){this.props.onDurationChange&&this.props.onDurationChange(this.refs.video.duration)}},{key:"onMutedChange",value:function(e){this.props.onMutedChange&&this.props.onMutedChange(e)}},{key:"onLoadingChange",value:function(e){this.props.onLoadingChange&&this.props.onLoadingChange(e)}},{key:"onTimeUpdate",value:function(){this.props.onTimeUpdate&&this.props.onTimeUpdate(this.refs.video.currentTime)}},{key:"onProgress",value:function(){if(this.props.onProgress){for(var e=[],t=0;t<this.refs.video.buffered.length;t++)e.push({start:this.refs.video.buffered.start(t),end:this.refs.video.buffered.end(t)});this.props.onProgress(e)}}},{key:"changeLoading",value:function(e){this.setState({loading:e}),this.onLoadingChange(e)}},{key:"reload",value:function(e){var t;this.changeLoading(!0),f.default.isSupported()&&!this.props.directPlay&&(t=i.default.findDOMNode(this.refs.video),this.hls.destroy(),this.hls=new f.default,this.hls.attachMedia(t),this.bindEvents(this.hls),this.hls.loadSource(e))}},{key:"seekTo",value:function(e){this.refs.video.currentTime=e}},{key:"bindEvents",value:function(e){var s=this;e.on(f.default.Events.MANIFEST_PARSED,function(){s.changeLoading(!1),i.default.findDOMNode(s.refs.video).play()}),e.on(f.default.Events.ERROR,function(e,t){var n=t.type,r=t.details,a=t.response,o=(void 0===a?{}:a).code;switch(n){case f.default.ErrorTypes.NETWORK_ERROR:switch(r){case f.default.ErrorDetails.MANIFEST_LOAD_ERROR:o&&403===o?s.props.onHardReloadNeeded&&(s.reloadTimeout=setTimeout(function(){s.reloadTimeout=null,s.props.onHardReloadNeeded()},1e4)):s.reloadTimeout=setTimeout(function(){s.reloadTimeout=null,s.reload(s.props.src)},1e4);break;case f.default.ErrorDetails.LEVEL_LOAD_ERROR:s.reload(s.props.src)}}})}},{key:"pause",value:function(){this.refs.video.pause()}},{key:"play",value:function(){this.refs.video.play()}},{key:"load",value:function(){this.refs.video.load()}},{key:"unmute",value:function(){this.setState({muted:!1}),this.onMutedChange(!1)}},{key:"mute",value:function(){this.setState({muted:!0}),this.onMutedChange(!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.src,a=t.directPlay,o=t.controls,s=t.preload,i=t.playsInline,l=this.state.muted,u={};return f.default.isSupported()&&!a||(u.src=r),o&&(u.controls=o),s&&(u.preload=s),i&&(u.playsInline=!0),d.default.createElement("video",c({ref:"video",height:"100%",muted:l,className:this.ss(n,"video"),onPlay:function(){return e.onPlay.apply(e,arguments)},onPlaying:function(){return e.onPlaying.apply(e,arguments)},onEnded:function(){return e.onEnded.apply(e,arguments)},onPause:function(){return e.onPause.apply(e,arguments)},onVolumeChange:function(){return e.onVolumeChange.apply(e,arguments)},onDurationChange:function(){return e.onDurationChange()},onTimeUpdate:function(){return e.onTimeUpdate()},onProgress:function(){return e.onProgress()}},u))}},{key:"volume",get:function(){return this.refs.video.volume},set:function(e){this.refs.video.volume=Math.max(Math.min(e,1),0)}},{key:"loading",get:function(){return this.state.loading}},{key:"seekable",get:function(){for(var e=this.refs.video.seekable,t=0,n=0;n<e.length;n++)t+=e.end(n)-e.start(n);return 0<t}}]),y.propTypes={src:l.default.string,className:l.default.string,directPlay:l.default.bool.isRequired,controls:l.default.string,preload:l.default.string,playsInline:l.default.bool,onPlay:l.default.func,onPlaying:l.default.func,onEnded:l.default.func,onPause:l.default.func,onVolumeChange:l.default.func,onMutedChange:l.default.func,onInitialized:l.default.func,onLoadingChange:l.default.func,onHardReloadNeeded:l.default.func,onDurationChange:l.default.func,onTimeUpdate:l.default.func,onProgress:l.default.func},r=y))||r;function y(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=h(this,(e=y.__proto__||Object.getPrototypeOf(y)).call.apply(e,[this].concat(a)))).state={muted:!1,loading:!0},n.reloadTimeout=null,n.hls=null,h(n,t)}t.default=v},function(e,t,n){e.exports=n(8)(1135)},function(e,t){e.exports={video:"video_3Pdt9-4t"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=h(n(1)),l=h(n(3)),p=h(n(12)),u=h(n(2)),c=n(460),d=h(n(4)),g=h(n(800));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(0,d.default)(g.default)((y(b,l.default),o(b,[{key:"componentDidMount",value:function(){var n=this,e=this.props.requestUniqueKey;this.pipeId=(0,c.registerPipe)(e(),function(e,t){return n.send(e,t)})}},{key:"componentWillUnmount",value:function(){var e;this.pipeId&&(e=this.props.requestUniqueKey,(0,c.withdrawPipe)(e(),this.pipeId))}},{key:"getNextLine",value:function(){for(var e=0;this.lines[e];)e++;return this.lines[e]=!0,e}},{key:"send",value:function(e,t){for(var n=1<arguments.length&&void 0!==t?t:{},r=p.default.findDOMNode(this).parentNode.getBoundingClientRect().height/28-2,a=!0,o=0;o<r;o++)this.lines[o]||(a=!1);var s,i,l,u=this.state,c=u.items,d=u.keyCursor;a?this.queue.push({item:e,options:n}):this.setState({items:f({},c,(l=e,(i=d)in(s={})?Object.defineProperty(s,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[i]=l,s)),keyCursor:d+1})}},{key:"releaseLine",value:function(e){var t,n,r;this.lines[e]=!1,0!==this.queue.length&&(n=(t=this.queue.shift()).item,r=t.options,this.send(n,r))}},{key:"destroyItem",value:function(e){var t=this.state.items;delete t[e],this.setState({items:t})}},{key:"render",value:function(){var t=this,n=this.state.items;return i.default.createElement("div",{className:this.ss("barrage-box")},Object.keys(n).map(function(e){return i.default.createElement(w,{key:e,renderBarrage:t.props.renderBarrage,value:n[e],onReleaseLine:function(e){return t.releaseLine(e)},onRequestLine:function(){return t.getNextLine()},onDestroy:function(){return t.destroyItem(e)}})}))}}]),b.propTypes={renderBarrage:u.default.func.isRequired,requestUniqueKey:u.default.func.isRequired},r=b))||r;function b(){var e,t,n;m(this,b);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=v(this,(e=b.__proto__||Object.getPrototypeOf(b)).call.apply(e,[this].concat(a)))).state={items:{},keyCursor:0},n.pipeId=0,n.queue=[],n.lines={},v(n,t)}t.default=_;var w=(0,d.default)(g.default)((y(S,l.default),o(S,[{key:"componentDidMount",value:function(){var e=p.default.findDOMNode(this),t=e.getBoundingClientRect().width,n=e.parentNode.getBoundingClientRect().width;this.line=this.props.onRequestLine(),this.register(t,n)}},{key:"register",value:function(e,t){this.setState({width:e,boxWidth:t}),this.startAnimation()}},{key:"startAnimation",value:function(){var e=this;setTimeout(function(){e.setState({animated:!0})})}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.onDestroy,r=e.renderBarrage;return i.default.createElement("div",{className:this.ss("barrage-item"),style:this.style,onTransitionEnd:function(){return n()}},r(t))}},{key:"style",get:function(){var e=this,t=this.state,n=t.width,r=t.boxWidth,a=this.props.onReleaseLine,o={transition:"left 12000ms linear",height:28,top:28*this.line};return n?(o.left="-"+(n/r*100+1)+"%",this.lineFreeCalled||(this.lineFreeCalled=!0,setTimeout(function(){return a(e.line)},n/(n+r)*12e3+800))):o.left="100%",o}}]),S.propTypes={value:u.default.any,renderBarrage:u.default.func.isRequired,onReleaseLine:u.default.func.isRequired,onRequestLine:u.default.func.isRequired,onDestroy:u.default.func.isRequired},a=S))||a;function S(){var e,t,n;m(this,S);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=v(this,(e=S.__proto__||Object.getPrototypeOf(S)).call.apply(e,[this].concat(a)))).state={animated:!1,transitionSet:!1,width:null,boxWidth:null},n.lineFreeCalled=!1,n.line=0,v(n,t)}},function(e,t){e.exports={"barrage-box":"barrage-box_1EINnQ0Z","barrage-item":"barrage-item_1Juxo5Q8"}},function(e,t){e.exports={switch:"switch_3LSWzEmT",blue:"blue_3MY5s__x",switchContent:"switchContent_15ZQhkhs",checked:"checked_go6jpT8O",medium:"medium_2ppmumlC",inner:"inner_2HgR_EWN",small:"small_viXnvpWP",rcSwitchOff:"rcSwitchOff_k2j8y_3N",rcSwitchOn:"rcSwitchOn_3IpaO-Ls",disabled:"disabled_1qkZagg2",none:"none_2a8RmF5p"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=f(n(1)),s=f(n(3)),l=f(n(12)),i=f(n(2)),u=f(n(4)),c=f(n(803));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e){return("0"+e).slice(-2)}var h=(0,u.default)(c.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,s.default),a(m,[{key:"onProgressClick",value:function(e){var t,n,r,a,o=this.props,s=o.duration,i=o.onChange;o.seekable&&(n=(t=l.default.findDOMNode(this).getBoundingClientRect()).left,r=t.width,a=e.clientX-n,a=Math.max(0,a),i((a=Math.min(r,a))/r*s))}},{key:"renderLoaded",value:function(){var a=this,e=this.props,t=e.loaded,n=void 0===t?[]:t,o=e.duration;return n.map(function(e,t){var n=e.start,r=e.end;return d.default.createElement("div",{key:t,className:a.ss("loaded"),style:{left:n/o*100+"%",width:(r-n)/o*100+"%"}})})}},{key:"render",value:function(){var t=this,e=this.props,n=e.played,r=e.duration,a=e.seekable,o=this.state,s=o.virtualPlayed,i=o.showKnobTip,l=s||n,u=void 0,c=this.duration(l,"s"),u=c.hours()?g(c.hours())+":"+g(c.minutes())+":"+g(c.seconds()):g(c.minutes())+":"+g(c.seconds());return d.default.createElement("div",{className:this.ss("progress",a&&"seekable"),onMouseDown:function(e){return t.onProgressClick(e)}},d.default.createElement("div",{className:this.ss("played"),style:{width:n/r*100+"%"}}),this.renderLoaded(),a&&d.default.createElement("div",{className:this.ss("knob"),style:{left:"calc("+l/r*100+"% - 5px)"},onMouseDown:this.adjustProgressEntry,onMouseEnter:function(){return t.setState({showKnobTip:!0})},onMouseLeave:function(){return t.setState({showKnobTip:!1})}},d.default.createElement("div",{className:this.ss("knob-tip-box",(s||i)&&"show")},d.default.createElement("div",{className:this.ss("knob-tip")},u))))}}]),m.propTypes={loaded:i.default.array,played:i.default.number,duration:i.default.number,seekable:i.default.bool,onChange:i.default.func},r=m))||r;function m(){var e,t,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=o=p(this,(e=m.__proto__||Object.getPrototypeOf(m)).call.apply(e,[this].concat(r)))).state={virtualPlayed:null,showKnobTip:!1},o.adjustProgressEntry=function(){o.setState({virtualPlayed:o.props.played});function t(e){var t=o.state.virtualPlayed,n=o.props.duration,r=t+e.movementX/a*n,r=Math.min(n,Math.max(0,r));o.setState({virtualPlayed:r})}var a=l.default.findDOMNode(o).getBoundingClientRect().width;window.addEventListener("mouseup",function e(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e),o.props.onChange(o.state.virtualPlayed),o.setState({virtualPlayed:null})}),window.addEventListener("mousemove",t)},p(o,t)}t.default=h},function(e,t){e.exports={progress:"progress_2nr9H-v9",seekable:"seekable_20qznWuC",played:"played_30HmIueD",loaded:"loaded_11kNGWso",knob:"knob_33kBdZvq","knob-tip-box":"knob-tip-box_1s8bh_FI",show:"show_1-pMfu8Z","knob-tip":"knob-tip_rUJ6sqjN"}},function(e,t){e.exports={player:"player_1iu5jvOO",hover:"hover_1uiqdibz",controls:"controls_1wKCwlLp",idle:"idle_12Alv2ur",small:"small_9r6Gz_sv","video-wrap":"video-wrap_3OkltpRr",auto:"auto_12BKwZbM","video-idle":"video-idle_2IM6P156","controls-left":"controls-left_21dzqEqq","controls-right":"controls-right_2eAZ6mQ6","play-btn":"play-btn_2OKqMNtE","sound-btn":"sound-btn_1w2CByIe","refresh-btn":"refresh-btn_1E4YmQqp","fullscreen-btn":"fullscreen-btn_p3CGZnHl","cancel-fullscreen-btn":"cancel-fullscreen-btn_1i5Ikx7x","pause-btn":"pause-btn_28_T4j2V","mute-btn":"mute-btn_3ApXHqPw","volume-tier":"volume-tier_3ysymlA8","volume-bar":"volume-bar_2Yqw8ek9","volume-bar-value":"volume-bar-value_eP096ZlM","volume-knob":"volume-knob_2Usb5MxA","video-full-screen":"video-full-screen_14rJy7xR","volume-bar-wrap":"volume-bar-wrap_1Hzeyg3U",loading:"loading_1NTKuVh2","loading-circle":"loading-circle_3rRC2Za0",unsupported:"unsupported_DPUHbJIT","video-small":"video-small_1Ek42bMo","full-screen":"full-screen_342Axm29","video-wrap-full-screen":"video-wrap-full-screen_2cs5wP9W","barrage-ctrl":"barrage-ctrl_1xm1hBM9","barrage-ctrl-text":"barrage-ctrl-text_2raseCGs"}},function(e,t){e.exports={player_unsupported:"player_unsupported_2qX2",barrage:"barrage_R8WN"}},function(e,t){e.exports={"asset-wrap":"asset-wrap_gIy7Yh0u",gallery:"gallery_1E773NuT","asset-info":"asset-info_3nH0OFuG","asset-button":"asset-button_2-vRmiAb","asset-publisher":"asset-publisher_1J0yrHU5","asset-name":"asset-name_1plVq4xv","asset-price-wrap":"asset-price-wrap_1C6wH4vP","asset-price-origin":"asset-price-origin_1l14i0-L","asset-price-final":"asset-price-final_1sbJcnxN","asset-sale":"asset-sale_3Il29iv3","asset-sale-icon":"asset-sale-icon_3WAWFVpQ","asset-sale-text":"asset-sale-text_3gF3f-9m"}},function(e,t){e.exports={asset_price:"asset_price_1uys",asset_free:"asset_free_3dnq",button_buy:"button_buy_2Rjc",tag_sale:"tag_sale_12tE"}},function(e,t){e.exports={"video-container":"video-container_3ifzArEu","render-only":"render-only_35OX1Xy5","video-wrap":"video-wrap_D2B7z4fH",focus:"focus_3pFAAt6I","mark-wrap":"mark-wrap_E_dKdxeH","iframe-wrap":"iframe-wrap_26tmEn6c","video-icon-wrap":"video-icon-wrap_sU8Dd6bT",icon:"icon_1e9OhqfQ","image-wrap":"image-wrap_XAw6AWyK",image:"image_302XTHL0","edit-row":"edit-row_ks7Y0Dck","visibility-setting":"visibility-setting_3P73YYaO","visibility-setting-text":"visibility-setting-text_1JBKT3OK","setting-icon":"setting-icon_3Lrm-8qx"}},function(e,t){e.exports={video_caption_placeholder:"video_caption_placeholder_1ix1",visibility_setting:"visibility_setting_1U_g"}},function(e,t){e.exports={empty:"empty_2eKyqO6F","file-icon":"file-icon_3oIaJf_X","content-body":"content-body_3zrbOgw2",title:"title_14h_QzN6",size:"size_1chxozsp",download:"download_2F3al03N",lock:"lock_2cj7aBHr",nonpointer:"nonpointer_1MiRsCai",attachment:"attachment_bsCLeF7M",selected:"selected_1S9rZ3wx","render-only":"render-only_2oPTuX5j","attachment-media":"attachment-media_DuUJp3tr",player:"player_2LhddHhR","private-player":"private-player_1bM8brqm","player-wrap":"player-wrap_1fiKuib_","no-login":"no-login_tXoIkjCp","player-img":"player-img_2L0dDR1a",footer:"footer_1K2bRB0f",caption:"caption_2eoLQLp4",buttons:"buttons_1droTT7Z","loading-failed":"loading-failed_HR9aGYmz","loading-text":"loading-text_MIaJhh3d","loading-button":"loading-button_2ZV6fhKl",content:"content_3Bcprdlc",retry:"retry_2mGUg8mF",text:"text_3i0KGVld",loading:"loading_1pSOV3ZU","login-btn-mask":"login-btn-mask_s4iUwpvj",button:"button_2Ho7ZLA0","login-icon":"login-icon_1_pSCKiL"}},function(e,t){e.exports={file_uploading_failed:"file_uploading_failed_2-vE",file_uploading_retry:"file_uploading_retry_-fDS",btn_tip_public:"btn_tip_public_DZjr",btn_tip_private:"btn_tip_private_Eb2U",player_caption_placeholder:"player_caption_placeholder_3n8-",label_private_player:"label_private_player_3yhT",label_private_player_no_login:"label_private_player_no_login_33xq",login_to_watch:"login_to_watch_GSQS"}},function(e,t,n){e.exports=n.p+"../styles/i/player@2x.21e68022b8d193174dd7c86aaf615a32.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=y(["draft.editorStates.",""],["draft.editorStates.",""]),i=y(["editorKey"],["editorKey"]),l=m(n(1)),u=m(n(2)),c=m(n(3)),d=n(5),f=n(0),p=m(n(4)),g=m(n(73)),h=m(n(814));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _={"header-one":"icons_block_h1","header-two":"icons_block_h2","unordered-list-item":"icons_block_ul","ordered-list-item":"icons_block_ol",blockquote:"icons_block_quote","code-block":"icons_code"},b=(0,d.decorator)({editorState:(0,f.state)(s,(0,f.props)(i))})(r=(0,p.default)(g.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(w,c.default),a(w,[{key:"renderToolbar",value:function(){if(!this.state.hover)return null;var e=this.props.editorKey,t=[l.default.createElement(S,{editorKey:e,key:"h1"}),l.default.createElement(E,{editorKey:e,key:"h2"}),l.default.createElement(O,{editorKey:e,key:"ul"}),l.default.createElement(C,{editorKey:e,key:"ol"}),l.default.createElement(k,{editorKey:e,key:"quote"}),l.default.createElement(I,{editorKey:e,key:"code-block"})];return l.default.createElement("div",{className:this.ss("block-toolbar-wrapper")},l.default.createElement("div",{className:this.ss("block-toolbar")},t))}},{key:"render",value:function(){var e,t,n=this.props.editorState,r="icons_paragraph";return n&&(e=n.getSelection().getStartKey(),t=n.getCurrentContent().getBlockForKey(e).getType(),_[t]&&(r=_[t])),l.default.createElement("div",{className:this.ss("paragraph-icon-wrapper"),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.default.createElement("div",{className:this.ss("ifont","ifont-"+r,"paragraph-icon")}),this.renderToolbar())}}]),w.propTypes={editorKey:u.default.string.isRequired,editorState:u.default.object},r=w))||r)||r;function w(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n=v(this,(e=w.__proto__||Object.getPrototypeOf(w)).call.apply(e,[this].concat(a)))).state={hover:!1},n.onMouseEnter=function(){n.setState({hover:!0})},n.onMouseLeave=function(){n.setState({hover:!1})},v(n,t)}t.default=b;var S=(0,h.default)("header-one","icons_block_h1"),E=(0,h.default)("header-two","icons_block_h2"),O=(0,h.default)("unordered-list-item","icons_block_ul"),C=(0,h.default)("ordered-list-item","icons_block_ol"),k=(0,h.default)("blockquote","icons_block_quote"),I=(0,h.default)("code-block","icons_code")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=o(["draft.editorStates.",""],["draft.editorStates.",""]),u=o(["editorKey"],["editorKey"]),c=o(["draft.setEditorState"],["draft.setEditorState"]);t.default=function(i,r){var e,t,n,a,o;return e=(0,g.decorator)({editorState:(0,h.state)(s,(0,h.props)(u)),setEditorState:(0,h.signal)(c)}),t=(0,v.default)(y.default),e(n=t((o=a=function(){function s(){var e,t,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=a=_(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(r)))).toggleStyle=function(e){e.preventDefault();var t=a.props,n=t.editorKey,r=t.editorState;(0,t.setEditorState)({editorKey:n,editorState:(0,m.toggleBlockType)(r,i)})},a.preventBubblingUp=function(e){e.preventDefault()},_(a,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,p.default),l(s,[{key:"render",value:function(){var e=this.props.editorState,t=e.getSelection().getStartKey(),n=e.getCurrentContent().getBlockForKey(t).getType()===i;return d.default.createElement("div",{className:this.ss("toolbar-button-wrapper"),onMouseDown:this.preventBubblingUp},d.default.createElement("button",{type:"button",onClick:this.toggleStyle,className:this.ss("toolbar-button",i,"ifont","ifont-"+r,n&&"active")}))}}]),s}(),a.displayName="BlockStyleButton("+i+")",a.propTypes={editorKey:f.default.string.isRequired,editorState:f.default.object,setEditorState:f.default.func},n=o))||n)||n};var d=a(n(1)),f=a(n(2)),p=a(n(3)),g=n(5),h=n(0),m=n(10),v=a(n(4)),y=a(n(73));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=O(["draft.editorStates.",""],["draft.editorStates.",""]),i=O(["editorKey"],["editorKey"]),l=O(["project.inlineToolbars.",""],["project.inlineToolbars.",""]),u=O(["project.showInlineToolbar"],["project.showInlineToolbar"]),c=O(["project.hideInlineToolbar"],["project.hideInlineToolbar"]),d=E(n(1)),f=E(n(12)),p=E(n(2)),g=E(n(3)),h=n(5),m=n(0),v=E(n(4)),y=E(n(133)),_=n(10),b=E(n(131)),w=n(816),S=E(n(820));function E(e){return e&&e.__esModule?e:{default:e}}function O(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var C=(0,h.decorator)({editorState:(0,m.state)(s,(0,m.props)(i)),inlineToolbarState:(0,m.state)(l,(0,m.props)(i)),showInlineToolbar:(0,m.signal)(u),hideInlineToolbar:(0,m.signal)(c)})(r=(0,v.default)(y.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(k,g.default),a(k,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.editorKey,n=e.editorState,r=e.inlineToolbarState,a=e.showInlineToolbar,o=e.hideInlineToolbar;if(n.getSelection().isCollapsed())o({editorKey:t});else{var s=(0,_.getVisibleSelectionRect)(window);if(s&&s.width&&s.height){var i=f.default.findDOMNode(this),l=((0,b.default)(i.parentElement)||document.body).getBoundingClientRect(),u=s.top-l.top-16,c=s.left-l.left+s.width/2;a({editorKey:t,top:Math.round(u),left:Math.round(c)})}else{if(r&&"linkInput"===r.mode)return;o({editorKey:t})}}}},{key:"render",value:function(){var e=this.props,t=e.editorKey,n=e.inlineToolbarState,r=!!n,a=n&&{top:n.top,left:n.left},o=void 0;return n&&(o="linkInput"===n.mode?[d.default.createElement(w.LinkInput,{editorKey:t,key:"linkInput"})]:[d.default.createElement(I,{editorKey:t,key:"bold"}),d.default.createElement(j,{editorKey:t,key:"italic"}),d.default.createElement(M,{editorKey:t,key:"underline"}),d.default.createElement(T,{editorKey:t,key:"code"}),d.default.createElement(w.LinkButton,{editorKey:t,key:"link"})]),d.default.createElement("div",{className:this.ss("inline-toolbar",r&&"show"),style:a},o)}}]),k.propTypes={editorKey:p.default.string.isRequired,editorState:p.default.object,inlineToolbarState:p.default.object,showInlineToolbar:p.default.func,hideInlineToolbar:p.default.func},r=k))||r)||r;function k(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}t.default=C;var I=(0,S.default)("BOLD","icons_inline_bold"),j=(0,S.default)("ITALIC","icons_inline_italic"),M=(0,S.default)("UNDERLINE","icons_inline_underline"),T=(0,S.default)("CODE","icons_code")},function(e,t,n){"use strict";var r,a,o=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=M(["draft.editorStates.",""],["draft.editorStates.",""]),l=M(["editorKey"],["editorKey"]),u=M(["draft.setEditorState"],["draft.setEditorState"]),c=M(["project.showLinkInput"],["project.showLinkInput"]),d=M(["project.inlineToolbars.",""],["project.inlineToolbars.",""]),f=M(["project.changeLinkInputValue"],["project.changeLinkInputValue"]),p=M(["project.hideLinkInput"],["project.hideLinkInput"]),g=C(n(1)),h=C(n(2)),m=C(n(3)),v=n(5),y=n(0),_=n(10),b=C(n(488)),w=C(n(4)),S=C(n(133)),E=C(n(6)),O=C(n(819));function C(e){return e&&e.__esModule?e:{default:e}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function M(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=(0,v.decorator)({editorState:(0,y.state)(i,(0,y.props)(l)),setEditorState:(0,y.signal)(u),showLinkInput:(0,y.signal)(c)})(r=(0,w.default)(S.default)((j(P,m.default),o(P,[{key:"render",value:function(){var e=this.props.editorState,t=e.getSelection();if(t.getStartKey()!==t.getEndKey())return null;var n=_.RichUtils.currentBlockContainsLink(e);return g.default.createElement("div",{className:this.ss("toolbar-button-wrapper"),onMouseDown:this.preventBubblingUp},g.default.createElement("button",{type:"button",onClick:n?this.removeLinks:this.showLinkInput,className:this.ss("toolbar-button","link","ifont","ifont-icons_inline_link",n&&"active")}))}}]),P.propTypes={editorKey:h.default.string.isRequired,editorState:h.default.object,setEditorState:h.default.func,showLinkInput:h.default.func},r=P))||r)||r;function P(){var e,t,f;k(this,P);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=f=I(this,(e=P.__proto__||Object.getPrototypeOf(P)).call.apply(e,[this].concat(r)))).removeLinks=function(e){e.preventDefault();var t=f.props,n=t.editorKey,r=t.editorState,a=t.setEditorState,o=r.getSelection(),s=o.getStartKey(),i=o.getStartOffset(),l=o.getEndOffset(),u=r.getCurrentContent(),c=u.getBlockForKey(s),d=u;c.findEntityRanges(function(e){var t=e.getEntity(),n=t&&u.getEntity(t);return n&&"LINK"===n.getType()},function(e,t){var n;(e=Math.max(e,i))<(t=Math.min(t,l))&&(n=new _.SelectionState({anchorKey:s,anchorOffset:e,focusKey:s,focusOffset:t}),d=_.Modifier.applyEntity(d,n,null))}),d!==u&&(d=d.merge({selectionAfter:o.merge({hasFocus:!0})}),a({editorKey:n,editorState:_.EditorState.push(r,d,"apply-entity")}))},f.showLinkInput=function(e){e.preventDefault();var t=f.props,n=t.editorKey;(0,t.showLinkInput)({editorKey:n})},f.preventBubblingUp=function(e){e.preventDefault()},I(f,t)}var x=(0,v.decorator)({editorState:(0,y.state)(i,(0,y.props)(l)),inlineToolbarState:(0,y.state)(d,(0,y.props)(l)),setEditorState:(0,y.signal)(u),changeLinkInputValue:(0,y.signal)(f),hideLinkInput:(0,y.signal)(p)})(a=(0,w.default)(S.default)(a=(0,E.default)(O.default)((j(A,m.default),o(A,[{key:"render",value:function(){var t=this,e=this.props.inlineToolbarState.value;return g.default.createElement("div",{className:this.ss("link-input-wrapper"),onMouseDown:this.preventBubblingUp},g.default.createElement("input",{type:"text",className:this.ss("link-input"),autoFocus:!0,value:e,placeholder:this.__("link_input_place_holder"),onChange:this.onChange,onKeyDown:this.onKeyDown,ref:function(e){t.inputRef=e}}),g.default.createElement("button",{type:"button",className:this.ss("close-button","ifont","ifont-icon-close2"),onClick:this.hideLinkInput}))}}]),A.propTypes={editorKey:h.default.string.isRequired,editorState:h.default.object,inlineToolbarState:h.default.object,setEditorState:h.default.func,changeLinkInputValue:h.default.func,hideLinkInput:h.default.func},a=A))||a)||a)||a;function A(){var e,t,h;k(this,A);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=h=I(this,(e=A.__proto__||Object.getPrototypeOf(A)).call.apply(e,[this].concat(r)))).onChange=function(e){e.preventDefault();var t=e.currentTarget.value,n=h.props,r=n.editorKey;(0,n.changeLinkInputValue)({editorKey:r,value:t})},h.onKeyDown=function(e){if("Enter"===e.key){e.preventDefault();var t=h.props,n=t.inlineToolbarState,r=t.editorKey,a=t.editorState,o=t.setEditorState,s=t.hideLinkInput,i=n.value,l=b.default.match(i),u=l&&l[0]?l[0].url:"";if(!u)return;s({editorKey:r});var c=a.getSelection(),d=c.merge({hasFocus:!0}),f=a.getCurrentContent(),p=(f=f.createEntity("LINK","MUTABLE",{url:u})).getLastCreatedEntityKey();f=(f=_.Modifier.applyEntity(f,c,p)).merge({selectionAfter:d});var g=_.EditorState.forceSelection(a,f.getSelectionAfter()),g=_.EditorState.push(g,f,"apply-entity");h.inputRef.blur(),o({editorKey:r,editorState:g})}else"Escape"===e.key&&h.hideLinkInput(e)},h.hideLinkInput=function(e){e.preventDefault();var t=h.props,n=t.editorKey,r=t.editorState,a=t.setEditorState;(0,t.hideLinkInput)({editorKey:n}),h.inputRef.blur(),a({editorKey:n,editorState:_.EditorState.forceSelection(r,r.getSelection())})},h.preventBubblingUp=function(e){e.preventDefault()},I(h,t)}e.exports={LinkButton:T,LinkInput:x}},function(e,t,n){e.exports=n(8)(1016)},function(e,t,n){e.exports=n(8)(1022)},function(e,t){e.exports={link_input_place_holder:"link_input_place_holder_3V_y"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=o(["draft.editorStates.",""],["draft.editorStates.",""]),u=o(["editorKey"],["editorKey"]),c=o(["draft.setEditorState"],["draft.setEditorState"]);t.default=function(l,n){var e,t,r,a,o;return e=(0,g.decorator)({editorState:(0,h.state)(i,(0,h.props)(u)),setEditorState:(0,h.signal)(c)}),t=(0,v.default)(y.default),e(r=t((o=a=function(){function o(){var e,t,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=i=_(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(r)))).applyStyle=function(e){e.preventDefault();var t=i.props,n=t.editorKey,r=t.editorState,a=t.setEditorState,o=r.getSelection(),s=r.getCurrentContent(),s=m.Modifier.applyInlineStyle(s,o,l);a({editorKey:n,editorState:m.EditorState.push(r,s,"change-inline-style")})},i.removeStyle=function(e){e.preventDefault();var t=i.props,n=t.editorKey,r=t.editorState,a=t.setEditorState,o=r.getSelection(),s=r.getCurrentContent(),s=m.Modifier.removeInlineStyle(s,o,l);a({editorKey:n,editorState:m.EditorState.push(r,s,"change-inline-style")})},i.preventBubblingUp=function(e){e.preventDefault()},_(i,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,p.default),s(o,[{key:"render",value:function(){var e=this.props.editorState,t=(0,m.getSelectionInlineStyle)(e).has(l);return d.default.createElement("div",{className:this.ss("toolbar-button-wrapper"),onMouseDown:this.preventBubblingUp},d.default.createElement("button",{type:"button",onClick:t?this.removeStyle:this.applyStyle,className:this.ss("toolbar-button",l,"ifont","ifont-"+n,t&&"active")}))}}]),o}(),a.displayName="InlineStyleButton("+l+")",a.propTypes={editorKey:f.default.string.isRequired,editorState:f.default.object,setEditorState:f.default.func},r=o))||r)||r};var d=a(n(1)),f=a(n(2)),p=a(n(3)),g=n(5),h=n(0),m=n(10),v=a(n(4)),y=a(n(133));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=i(["draft.editorStates.",""],["draft.editorStates.",""]),l=i(["project.openSettings"],["project.openSettings"]);t.default=function(e){var n=e.editorKey,i=e.theme;return function(s){var e;function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,f.decorator)({editorState:(0,p.state)(o,n),openSettings:(0,p.state)(l)})(e=(0,g.default)(h.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default),r(t,[{key:"render",value:function(){var e=this.props,t=e.editorState,n=e.entityKey,r=e.openSettings,a=(t.getCurrentContent().getEntity(n).getData()||{}).alignment,o=void 0===a?"default":a;return u.default.createElement("div",{className:this.ss("alignment-"+o,i,r&&"openSettings")},u.default.createElement(s,this.props))}}]),t.propTypes={editorState:c.default.object,entityKey:c.default.string,openSettings:c.default.bool},e=t))||e)||e}};var u=s(n(1)),c=s(n(2)),d=s(n(3)),f=n(5),p=n(0),g=s(n(4)),h=s(n(134));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=E(["draft.editorStates.",""],["draft.editorStates.",""]),i=E(["editorKey"],["editorKey"]),l=E(["project.alignmentToolbar.",""],["project.alignmentToolbar.",""]),u=E(["project.showAlignmentToolbar"],["project.showAlignmentToolbar"]),c=E(["project.hideAlignmentToolbar"],["project.hideAlignmentToolbar"]),d=S(n(1)),f=S(n(12)),p=S(n(2)),g=S(n(3)),h=n(5),m=n(0),v=S(n(131)),y=S(n(4)),_=S(n(134)),b=S(n(823)),w=n(824);function S(e){return e&&e.__esModule?e:{default:e}}function E(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var O=(0,b.default)("default","icons_alignment_normal"),C=(0,b.default)("left","icons_alignment_left"),k=(0,b.default)("right","icons_alignment_right"),I=(0,b.default)("center","icons_alignment_center"),j=(0,b.default)("fullscreen","icons_alignment_fullscreen");var M=(0,h.decorator)({editorState:(0,m.state)(s,(0,m.props)(i)),alignmentToolbarState:(0,m.state)(l,(0,m.props)(i)),showAlignmentToolbar:(0,m.signal)(u),hideAlignmentToolbar:(0,m.signal)(c)})(r=(0,y.default)(_.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(T,g.default),a(T,[{key:"componentDidUpdate",value:function(){var e,t,n,r,a,o,s=this.props,i=s.editorKey,l=s.showAlignmentToolbar,u=s.hideAlignmentToolbar;this.getEntityKey()?!function(e,t){for(;t;){if(t===e)return 1;t=t.parentNode}}(e=f.default.findDOMNode(this),t=window.getSelection().focusNode)&&(n=t&&t.getBoundingClientRect&&t.getBoundingClientRect())&&n.width&&n.height&&(r=((0,v.default)(e.parentElement)||document.body).getBoundingClientRect(),a=n.top-r.top-21,o=n.left-r.left+n.width/2,l({editorKey:i,top:Math.round(a),left:Math.round(o)})):u({editorKey:i})}},{key:"getEntityKey",value:function(){var e=this.props.editorState;if(e){var t=e.getSelection(),n=t.getAnchorKey(),r=t.getFocusKey(),a=e.getCurrentContent(),o=a.getBlockForKey(r);if(n===r&&"atomic"===o.getType()){var s=o.getEntityAt(0),i=a.getEntity(s).getType();if("IMAGE"===i||"VIDEO"===i)return s}}}},{key:"render",value:function(){var e=this.props,t=e.editorKey,n=e.alignmentToolbarState,r=!!n,a=n&&{top:n.top,left:n.left},o=void 0,s=this.getEntityKey();return s&&n&&(o="linkInput"===n.mode?[d.default.createElement(w.ImageLinkInput,{editorKey:t,entityKey:s,key:"linkInput"})]:[d.default.createElement(C,{editorKey:t,entityKey:s,key:"left"}),d.default.createElement(I,{editorKey:t,entityKey:s,key:"center"}),d.default.createElement(O,{editorKey:t,entityKey:s,key:"default"}),d.default.createElement(j,{editorKey:t,entityKey:s,key:"fullscreen"}),d.default.createElement(k,{editorKey:t,entityKey:s,key:"right"}),d.default.createElement(w.ImageLinkButton,{editorKey:t,entityKey:s,key:"link"})]),d.default.createElement("div",{className:this.ss("alignment-toolbar",r&&"show"),style:a},o)}}]),T.propTypes={editorKey:p.default.string.isRequired,editorState:p.default.object,alignmentToolbarState:p.default.object,showAlignmentToolbar:p.default.func,hideAlignmentToolbar:p.default.func},r=T))||r)||r;function T(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}t.default=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=u(["draft.editorStates.",""],["draft.editorStates.",""]),i=u(["editorKey"],["editorKey"]),l=u(["draft.setEditorState"],["draft.setEditorState"]),d=u(["project.contentMap"],["project.contentMap"]);t.default=function(u,c){var e,t,n,r,a;return e=(0,h.decorator)({editorState:(0,m.state)(o,(0,m.props)(i)),setEditorState:(0,m.signal)(l),contentMap:(0,m.state)(d)}),t=(0,y.default)(_.default),e(n=t((a=r=function(){function o(){var e,t,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=i=b(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(r)))).onClick=function(){var e=i.props,t=e.editorKey,n=e.editorState,r=e.entityKey,a=e.setEditorState,o=n.getCurrentContent(),s=(0,v.mergeAtomicEntityData)(o,r,{alignment:u});a({editorKey:t,editorState:v.EditorState.set(n,{currentContent:s})})},i.preventBubblingUp=function(e){e.preventDefault()},b(i,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,g.default),s(o,[{key:"render",value:function(){var e=this.props,t=e.entityKey,n=e.editorState,r=e.contentMap,a=n.getCurrentContent().getEntity(t).getData()||{},o=a.alignment,s=a.contentId,i=(void 0===o?"default":o)===u,l=((s&&r&&r[s]||{}).originalImage||{}).width;return l&&l<w&&-1===S.indexOf(u)?null:f.default.createElement("div",{className:this.ss("toolbar-button-wrapper"),onMouseDown:this.preventBubblingUp},f.default.createElement("button",{type:"button",onClick:i?void 0:this.onClick,className:this.ss("toolbar-button",u,"ifont","ifont-"+c,i&&"active")}))}}]),o}(),r.displayName="AlignmentButton("+u+")",r.propTypes={editorKey:p.default.string.isRequired,editorState:p.default.object,contentMap:p.default.object,entityKey:p.default.string.isRequired,setEditorState:p.default.func},n=a))||n)||n};var f=a(n(1)),p=a(n(2)),g=a(n(3)),h=n(5),m=n(0),v=n(10),y=a(n(4)),_=a(n(134));function a(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var w=1e3,S=["left","default","right","center"]},function(e,t,n){"use strict";var r,a,o=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=M(["draft.editorStates.",""],["draft.editorStates.",""]),l=M(["editorKey"],["editorKey"]),u=M(["draft.setEditorState"],["draft.setEditorState"]),c=M(["project.showImageLinkInput"],["project.showImageLinkInput"]),d=M(["project.alignmentToolbar.",""],["project.alignmentToolbar.",""]),f=M(["project.changeImageLinkInputValue"],["project.changeImageLinkInputValue"]),p=M(["project.hideImageLinkInput"],["project.hideImageLinkInput"]),g=C(n(1)),h=C(n(2)),m=C(n(3)),v=n(5),y=n(0),_=n(10),b=C(n(488)),w=C(n(4)),S=C(n(134)),E=C(n(6)),O=C(n(825));function C(e){return e&&e.__esModule?e:{default:e}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function M(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=(0,v.decorator)({editorState:(0,y.state)(i,(0,y.props)(l)),setEditorState:(0,y.signal)(u),showImageLinkInput:(0,y.signal)(c)})(r=(0,w.default)(S.default)((j(P,m.default),o(P,[{key:"render",value:function(){var e=this.props,t=e.editorState,n=e.entityKey,r=t.getCurrentContent().getEntity(n);if("IMAGE"!==r.getType())return null;var a=!!(r.getData()||{}).url;return g.default.createElement("div",{className:this.ss("toolbar-button-wrapper"),onMouseDown:this.preventBubblingUp},g.default.createElement("button",{type:"button",onClick:a?this.removeLinks:this.showImageLinkInput,className:this.ss("toolbar-button","link","ifont","ifont-icons_inline_link",a&&"active")}))}}]),P.propTypes={editorKey:h.default.string.isRequired,editorState:h.default.object,entityKey:h.default.string.isRequired,setEditorState:h.default.func,showImageLinkInput:h.default.func},r=P))||r)||r;function P(){var e,t,l;k(this,P);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=l=I(this,(e=P.__proto__||Object.getPrototypeOf(P)).call.apply(e,[this].concat(r)))).removeLinks=function(e){e.preventDefault();var t,n=l.props,r=n.editorKey,a=n.editorState,o=n.entityKey,s=n.setEditorState,i=a.getCurrentContent();(i.getEntity(o).getData()||{}).url&&(t=(0,_.mergeAtomicEntityData)(i,o,{url:""}),s({editorKey:r,editorState:_.EditorState.push(a,t,"apply-entity")}))},l.showImageLinkInput=function(e){e.preventDefault();var t=l.props,n=t.editorKey;(0,t.showImageLinkInput)({editorKey:n})},l.preventBubblingUp=function(e){e.preventDefault()},I(l,t)}var x=(0,v.decorator)({editorState:(0,y.state)(i,(0,y.props)(l)),alignmentToolbarState:(0,y.state)(d,(0,y.props)(l)),setEditorState:(0,y.signal)(u),changeImageLinkInputValue:(0,y.signal)(f),hideImageLinkInput:(0,y.signal)(p)})(a=(0,w.default)(S.default)(a=(0,E.default)(O.default)((j(A,m.default),o(A,[{key:"render",value:function(){var t=this,e=this.props.alignmentToolbarState.value;return g.default.createElement("div",{className:this.ss("link-input-wrapper"),onMouseDown:this.preventBubblingUp},g.default.createElement("input",{type:"text",className:this.ss("link-input"),autoFocus:!0,value:e,placeholder:this.__("image_link_input_place_holder"),onChange:this.onChange,onKeyDown:this.onKeyDown,ref:function(e){t.inputRef=e}}),g.default.createElement("button",{type:"button",className:this.ss("close-button","ifont","ifont-icon-close2"),onClick:this.hideImageLinkInput}))}}]),A.propTypes={editorKey:h.default.string.isRequired,editorState:h.default.object,entityKey:h.default.string.isRequired,alignmentToolbarState:h.default.object,setEditorState:h.default.func,changeImageLinkInputValue:h.default.func,hideImageLinkInput:h.default.func},a=A))||a)||a)||a;function A(){var e,t,p;k(this,A);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=p=I(this,(e=A.__proto__||Object.getPrototypeOf(A)).call.apply(e,[this].concat(r)))).onChange=function(e){e.preventDefault();var t=e.currentTarget.value,n=p.props,r=n.editorKey;(0,n.changeImageLinkInputValue)({editorKey:r,value:t})},p.onKeyDown=function(e){if("Enter"===e.key){e.preventDefault();var t=p.props,n=t.alignmentToolbarState,r=t.editorKey,a=t.editorState,o=t.entityKey,s=t.setEditorState,i=t.hideImageLinkInput,l=n.value,u=b.default.match(l),c=u&&u[0]?u[0].url:"";if(!c)return;i({editorKey:r}),p.inputRef.blur();var d=a.getCurrentContent(),f=(0,_.mergeAtomicEntityData)(d,o,{url:c});s({editorKey:r,editorState:_.EditorState.push(a,f,"apply-entity")})}else"Escape"===e.key&&p.hideImageLinkInput(e)},p.hideImageLinkInput=function(e){e.preventDefault();var t=p.props,n=t.editorKey,r=t.editorState,a=t.setEditorState;(0,t.hideImageLinkInput)({editorKey:n}),p.inputRef.blur(),a({editorKey:n,editorState:_.EditorState.forceSelection(r,r.getSelection())})},p.preventBubblingUp=function(e){e.preventDefault()},I(p,t)}e.exports={ImageLinkButton:T,ImageLinkInput:x}},function(e,t){e.exports={image_link_input_place_holder:"image_link_input_place_holder_37Ed"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=C(["draft.editorStates.",""],["draft.editorStates.",""]),i=C(["editorKey"],["editorKey"]),l=C(["project.mentionToolbars.",""],["project.mentionToolbars.",""]),u=C(["suggest.candidate"],["suggest.candidate"]),c=C(["project.showMentionToolbar"],["project.showMentionToolbar"]),d=C(["project.hideMentionToolbar"],["project.hideMentionToolbar"]),f=C(["project.moveToMentionItem"],["project.moveToMentionItem"]),p=C(["suggest.fetchCandidates"],["suggest.fetchCandidates"]),g=C(["draft.setEditorState"],["draft.setEditorState"]),h=E(n(1)),k=E(n(12)),m=E(n(2)),v=E(n(3)),y=n(5),_=n(0),I=n(10),j=E(n(131)),b=E(n(16)),w=E(n(4)),S=E(n(490));function E(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var M=(0,y.decorator)({editorState:(0,_.state)(s,(0,_.props)(i)),mentionToolbarState:(0,_.state)(l,(0,_.props)(i)),suggestCandidate:(0,_.state)(u),showMentionToolbar:(0,_.signal)(c),hideMentionToolbar:(0,_.signal)(d),moveToMentionItem:(0,_.signal)(f),fetchCandidates:(0,_.signal)(p),setEditorState:(0,_.signal)(g)})(r=(0,w.default)(S.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(T,v.default),a(T,[{key:"componentDidUpdate",value:function(e){var t=e.editorState,n=this.props,r=n.editorState,a=n.editorKey,o=n.showMentionToolbar,s=n.hideMentionToolbar,i=n.fetchCandidates,l=t.getSelection(),u=r.getSelection();if(l!==u)if(u.isCollapsed()&&u.getHasFocus()){var c=r.getCurrentContent(),d=u.getFocusKey(),f=c.getBlockForKey(d),p=u.getFocusOffset();if("atomic"!==f.getType()&&"code-block"!==f.getType()){for(var g,h,m,v,y,_,b,w,S,E,O="",C=p-1;0<=C&&p-20<=C&&!(f.getEntityAt(C)||/\s/.test(f.getText()[C])&&" "!==f.getText()[C]);C--)if("@"===f.getText()[C]){(0===C||f.getEntityAt(C-1)||/\s/.test(f.getText()[C-1]))&&C+1<p&&(O=f.getText().substring(C+1,p));break}O?(h=(g=(0,I.getLeafOffsetKeyAndOffset)(r,d,p-1-O.length)).offsetKey,m=g.offset,v=(0,I.getLeafBoundingClientRect)(a,h,m),y=k.default.findDOMNode(this),_=((0,j.default)(y.parentElement)||document.body).getBoundingClientRect(),v.top+v.bottom<window.innerHeight?(b=v.bottom-_.top+5,w=v.left-_.left,o({editorKey:a,top:Math.round(b),left:Math.round(w),prefix:O})):(S=_.bottom-v.top+5,E=v.left-_.left,o({editorKey:a,bottom:Math.round(S),left:Math.round(E),prefix:O})),i({q:O,st:"user"})):s({editorKey:a})}else s({editorKey:a})}else s({editorKey:a})}},{key:"renderCandidate",value:function(e,t,n){var r=this;return h.default.createElement("div",{className:this.ss("candidate",n&&"active"),key:e.id,onMouseEnter:function(){return r.onMouseEnter(t)},onMouseDown:this.onMouseDown},h.default.createElement(b.default,{className:this.ss("avatar"),user:e,size:"xxxsmall"}),h.default.createElement("span",{className:this.ss("name")},"@",e.name))}},{key:"renderCandidates",value:function(){var n=this,e=this.props,t=e.mentionToolbarState,r=e.suggestCandidate,a=[];if(t&&"user"===r.st&&r.q===t.prefix&&r.user&&(a=r.user),!a.length)return null;var o=a.length,s=(t.index%o+o)%o;return h.default.createElement("div",{className:this.ss("candidates")},a.map(function(e,t){return n.renderCandidate(e,t,t===s)}))}},{key:"render",value:function(){var e=this.props.mentionToolbarState,t=!!e,n=e&&{top:e.top,bottom:e.bottom,left:e.left};return h.default.createElement("div",{className:this.ss("mention-toolbar",t&&"show"),style:n},this.renderCandidates())}}]),T.propTypes={editorKey:m.default.string.isRequired,editorState:m.default.object,mentionToolbarState:m.default.object,suggestCandidate:m.default.object,showMentionToolbar:m.default.func,hideMentionToolbar:m.default.func,moveToMentionItem:m.default.func,fetchCandidates:m.default.func,setEditorState:m.default.func},r=T))||r)||r;function T(){var e,t,d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=d=O(this,(e=T.__proto__||Object.getPrototypeOf(T)).call.apply(e,[this].concat(r)))).onMouseDown=function(e){e.preventDefault();var t=d.props,n=t.mentionToolbarState,r=t.suggestCandidate,a=t.editorKey,o=t.editorState,s=t.setEditorState,i=n.prefix,l=n.index,u=r.user,c=u.length;s({editorKey:a,editorState:(0,I.addUserMention)(o,i,u[(l%c+c)%c])})},d.onMouseEnter=function(e){var t=d.props,n=t.editorKey;(0,t.moveToMentionItem)({editorKey:n,index:e})},O(d,t)}t.default=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=_(["project.userCards"],["project.userCards"]),i=_(["project.fetchUserCard"],["project.fetchUserCard"]),l=v(n(1)),u=v(n(12)),c=v(n(2)),d=v(n(3)),f=n(5),p=n(0),g=v(n(828)),h=v(n(4)),m=v(n(490));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function b(){var e,t,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=s=y(this,(e=b.__proto__||Object.getPrototypeOf(b)).call.apply(e,[this].concat(r)))).state={hover:!1,top:void 0,bottom:void 0},s.onMouseEnter=function(){var e=s.props,t=e.entityKey,n=e.contentState;(0,e.fetchUserCard)({id:n.getEntity(t).getData().userId});var r=u.default.findDOMNode(s).getBoundingClientRect(),a=void 0,o=void 0;r.top+r.bottom<window.innerHeight?a=r.height:o=r.height,s.clearHoverTimeout(),s.hoverTimeout=setTimeout(function(){s.setState({hover:!0,top:a,bottom:o})},750)},s.onMouseLeave=function(){s.clearHoverTimeout(),s.hoverTimeout=setTimeout(function(){s.setState({hover:!1})},750)},y(s,t)}var w={strategy:function(e,t,n){e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&"MENTION"===n.getEntity(t).getType()},t)},component:(0,f.decorator)({userCards:(0,p.state)(s),fetchUserCard:(0,p.signal)(i)})(r=(0,h.default)(m.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(b,d.default),a(b,[{key:"componentWillUnmount",value:function(){this.clearHoverTimeout()}},{key:"clearHoverTimeout",value:function(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null)}},{key:"renderUserCard",value:function(){var e=this.props,t=e.entityKey,n=e.contentState,r=e.userCards[n.getEntity(t).getData().userId],a=this.state,o=a.hover,s=a.top,i=a.bottom;return r&&o?l.default.createElement(g.default,{user:r,top:s,bottom:i}):null}},{key:"render",value:function(){var e=this.props,t=e.entityKey,n=e.contentState,r=e.children,a=n.getEntity(t).getData().userId;return l.default.createElement("span",{className:this.ss("mention-wrapper"),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.default.createElement("a",{href:"/u/"+a},r),this.renderUserCard())}}]),b.propTypes={entityKey:c.default.string.isRequired,contentState:c.default.object.isRequired,children:c.default.any.isRequired,userCards:c.default.object,fetchUserCard:c.default.func},r=b))||r)||r};t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=y(n(1)),i=y(n(2)),l=y(n(3)),u=n(11),c=y(n(829)),d=y(n(16)),f=y(n(14)),p=y(n(22)),g=y(n(4)),h=y(n(834)),m=y(n(6)),v=y(n(835));function y(e){return e&&e.__esModule?e:{default:e}}var _=n(50),b=(0,g.default)(h.default)(r=(0,m.default)(v.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(w,l.default),a(w,[{key:"onAvatarClick",value:function(e){(0,u.pauseEvent)(e);var t="/u/"+this.props.user.id;window.open(t,"_blank")}},{key:"renderProjects",value:function(){var r=this,e=this.props.user.projects;if(!e||0===e.length)return null;var t=e.map(function(e){var t=e.id,n=e.thumbnail;return s.default.createElement("div",{key:t,className:r.ss("project-thumbnail")},s.default.createElement(f.default,{src:n&&n.url||_,sizes:"80px"}))});return s.default.createElement("div",{className:this.ss("projects")},t)}},{key:"render",value:function(){var t=this,e=this.props,n=e.user,r=e.top,a=e.bottom,o=c.default.getCoverImage(n);return s.default.createElement("div",{className:this.ss("user-card"),style:{top:r,bottom:a},contentEditable:!1,onClick:function(e){return t.onAvatarClick(e)}},s.default.createElement("div",{className:this.ss("content-wrapper")},s.default.createElement("div",{className:this.ss("cover-image")},s.default.createElement(f.default,{src:o,sizes:"300px"})),s.default.createElement("div",{className:this.ss("avatar-area")},s.default.createElement(d.default,{user:n,size:"xlarge"})),s.default.createElement("div",{className:this.ss("card-desc")},s.default.createElement("div",{className:this.ss("card-desc-top")},s.default.createElement("div",{className:this.ss("card-name")},n.fullName),s.default.createElement("div",{className:this.ss("card-title")},n.title),s.default.createElement("div",{className:this.ss("social-wrapper")},s.default.createElement(p.default,{text:this.__("followers_count"),position:"bottom"},s.default.createElement("div",{className:this.ss("followers")},s.default.createElement("div",{className:this.ss("icon","ifont","ifont-followers-icon")}),s.default.createElement("div",{className:this.ss("followers-count")},(0,u.formatNumber)(n.followCount)))),s.default.createElement("div",{className:this.ss("divider")}),s.default.createElement(p.default,{text:this.__("likes_count"),position:"bottom"},s.default.createElement("div",{className:this.ss("likes")},s.default.createElement("div",{className:this.ss("icon","ifont","ifont-icon-heart")}),s.default.createElement("div",{className:this.ss("likes-count")},(0,u.formatNumber)(n.likeCount))))),this.renderProjects()))))}}]),w.propTypes={user:i.default.object,top:i.default.number,bottom:i.default.number},r=w))||r)||r;function w(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}t.default=b},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=["cover1.jpg","cover2.jpg","cover3.jpg"];t.default={getCoverImage:function(e){if(!e)return null;var t=e.id,n=e.coverImage;if(n)return n;var r=parseInt(t.slice(0,8),16),a=s[r%s.length];return o(830)("./"+a)}}},function(e,t,n){var r={"./cover1.jpg":831,"./cover2.jpg":832,"./cover3.jpg":833};function a(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}a.keys=function(){return Object.keys(r)},a.resolve=o,(e.exports=a).id=830},function(e,t,n){e.exports=n.p+"../styles/i/covers/cover1.11afc8808f4eb99ed42e5d990061d7a3.jpg"},function(e,t,n){e.exports=n.p+"../styles/i/covers/cover2.862db3f5daf7c6eb0c25a59086b58be5.jpg"},function(e,t,n){e.exports=n.p+"../styles/i/covers/cover3.b987e978934b1adfff96cff52cacea49.jpg"},function(e,t){e.exports={"user-card":"user-card_3knOls37","content-wrapper":"content-wrapper_3ElBmhUU","cover-image":"cover-image_25CyGwlB","avatar-area":"avatar-area_12QnvrxR","card-desc":"card-desc_15GQIgeV","card-desc-top":"card-desc-top_3NzLKS_g","card-name":"card-name_3DqaUNT5","card-title":"card-title_3WQTXL2e","social-wrapper":"social-wrapper_3PVg1RJ5",followers:"followers_1xngoZGs",likes:"likes_fgpzQZT6",icon:"icon_E7n02UV3",divider:"divider_yC_3Gdhy",projects:"projects_1unr_xBB","project-thumbnail":"project-thumbnail_2r25Jn-u"}},function(e,t){e.exports={followers_count:"followers_count_1Gvb",likes_count:"likes_count_1Vyn"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=m(["draft.editorStates.",""],["draft.editorStates.",""]),i=m(["project.dragOverBlockKey"],["project.dragOverBlockKey"]),l=m(["project.dragStartBlockKey"],["project.dragStartBlockKey"]),u=m(["project.dragStartBlockAfterKey"],["project.dragStartBlockAfterKey"]),c=m(["project.setDragOverBlockKey"],["project.setDragOverBlockKey"]),d=m(["project.setDragStartBlockKey"],["project.setDragStartBlockKey"]);t.default=function(e){var t,n,r,m=e.editorKey,a=e.renderOnly;return(0,h.decorator)({editorState:(0,y.state)(s,m),dragOverBlockKey:(0,y.state)(i),dragStartBlockKey:(0,y.state)(l),dragStartBlockAfterKey:(0,y.state)(u),setDragOverBlockKey:(0,y.signal)(c),setDragStartBlockKey:(0,y.signal)(d)})((r=n=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var h=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return h.onDragEnter=function(){h.counter++},h.onDragLeave=function(){var e,t,n;h.counter--,0===h.counter&&(t=(e=h.props).dragOverBlockKey,n=e.setDragOverBlockKey,t&&n())},h.onDragOver=function(t){t.preventDefault();var e=v.default.findDOMNode(h).querySelectorAll('[data-editor="'+m+'"][data-block="true"]'),n=void 0;e.forEach(function(e){n||e.getBoundingClientRect().bottom>t.clientY&&(n=e)});var r=h.props,a=r.dragOverBlockKey,o=r.setDragOverBlockKey,s=r.dragStartBlockKey,i=r.dragStartBlockAfterKey,l=n&&n.getAttribute("data-offset-key"),u=(l&&_.DraftOffsetKey.decode(l)||{}).blockKey,c=void 0===u?"":u;if(c!==a){var d=h.props.editorState.getCurrentContent(),f=d.getBlockForKey(c);if(f&&"atomic"===f.getType()){var p=f.getEntityAt(0),g=d.getEntity(p).getType();if(-1!==["GAMEGALLERY","SHOWCASEGALLERY","WEBGLGALLERY"].indexOf(g))return void o()}o({blockKey:c,internalDrag:h.internalDrag})}!h.internalDrag||s&&c!==s&&c!==i||(t.dataTransfer.dropEffect="none")},h.onDrop=function(){var e=h.props,t=e.dragOverBlockKey,n=e.setDragOverBlockKey;t&&n(),h.counter=0},h.onDragStart=function(){h.internalDrag=!0},h.onDragEnd=function(){(h.internalDrag=!1,h.props.setDragStartBlockKey)()},h.counter=0,h.internalDrag=!1,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,g.default),o(n,[{key:"render",value:function(){var e=this.props.children;return f.default.createElement("div",{onDragEnter:a?void 0:this.onDragEnter,onDragLeave:a?void 0:this.onDragLeave,onDragOver:a?void 0:this.onDragOver,onDrop:a?void 0:this.onDrop,onDragStart:a?void 0:this.onDragStart,onDragEnd:a?void 0:this.onDragEnd,style:{paddingTop:"1px",paddingBottom:"1px"}},e)}}]),n}(),n.propTypes={editorState:p.default.object,dragOverBlockKey:p.default.string,dragStartBlockKey:p.default.string,dragStartBlockAfterKey:p.default.string,setDragOverBlockKey:p.default.func,setDragStartBlockKey:p.default.func,children:p.default.any},t=r))||t};var f=a(n(1)),v=a(n(12)),p=a(n(2)),g=a(n(3)),h=n(5),y=n(0),_=n(10);function a(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=m(["draft.editorStates.",""],["draft.editorStates.",""]),l=m(["project.setDragStartBlockKey"],["project.setDragStartBlockKey"]);t.default=function(e){var n=e.editorKey,r=e.renderOnly;return function(e){var t;function o(){var e,t,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=s=h(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(r)))).onDragStart=function(e){var t=s.props,n=t.offsetKey,r=t.editorState,a=g.DraftOffsetKey.decode(n).blockKey;e.dataTransfer.dropEffect="move",e.dataTransfer.setData("CONNECT_BLOCK_DRAG",1);var o=r.getCurrentContent().getKeyAfter(a);(0,s.props.setDragStartBlockKey)({blockKey:a,blockAfterKey:o})},h(s,t)}return(0,f.decorator)({editorState:(0,p.state)(i,n),setDragStartBlockKey:(0,p.signal)(l)})((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,d.default),s(o,[{key:"render",value:function(){return u.default.createElement(e,a({},this.props,{onDragStart:r?void 0:this.onDragStart}))}}]),o.propTypes={offsetKey:c.default.string,editorState:c.default.object,setDragStartBlockKey:c.default.func},t=o))||t}};var u=o(n(1)),c=o(n(2)),d=o(n(3)),f=n(5),p=n(0),g=n(10);function o(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},function(e,t){e.exports={content:"content_2Z0BDHTp",head:"head_1wgys79j","button-close":"button-close_2Tsjh1vb","input-wrap":"input-wrap_2R_bJrTZ",input:"input_1bnWeffK","supported-hint":"supported-hint_1g7RGveZ","embed-wrap":"embed-wrap_xsP9xALU",title:"title_2k60smls","embed-previews":"embed-previews_1YosqFGH",item:"item_1y7ITpAP","item-thumbnail":"item-thumbnail_2ESzND7-","item-content":"item-content_7ndEdDUJ","item-info":"item-info_3Ff3-54F","item-title":"item-title_2oiRIFdL","item-provider":"item-provider_R9ytn-H2","item-delete":"item-delete_1xJGVge4",delete:"delete_215D28QY",foot:"foot_wgrk-Mf6",button:"button_3Wl5QEuk","loading-wrap":"loading-wrap_3jewD8lz",loading:"loading_3f1QMv6J"}},function(e,t){e.exports={title_add_embed:"title_add_embed_3uCt",input_placeholder:"input_placeholder_3pIf",supported_hint:"supported_hint_3dC4",total_embeds:"total_embeds_1Frc",from_provider:"from_provider_1dL3",asset_store:"asset_store_1K3T",button_delete:"button_delete_2pPz",button_cancel:"button_cancel_2qO2",button_ok:"button_ok_39s8"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=d(["draft.editorStates.",""],["draft.editorStates.",""]),l=d(["draft.editorEditable.",""],["draft.editorEditable.",""]),u=d(["draft.setEditorState"],["draft.setEditorState"]);t.default=function(e){var d=e.editorKey,i=e.renderOnly;return function(t){var e;function o(){var e,t,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=c=_(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(r)))).onCopy=function(e){var t,n,r,a,o,s,i,l;c.props.editorKey===(0,y.findEditorKey)(e.target)&&(e.preventDefault(),n=(t=c.props).offsetKey,r=t.editorState,a=y.DraftOffsetKey.decode(n).blockKey,s=(o=r.getCurrentContent()).getBlockForKey(a).getEntityAt(0),l={type:(i=o.getEntity(s)).getType(),data:i.getData()},e.clipboardData.setData("text","CONNECT_ATOMIC_ENTITY:"+JSON.stringify(l)))},c.onCut=function(e){var t,n,r,a,o,s,i,l,u;c.props.editorKey===(0,y.findEditorKey)(e.target)&&(c.onCopy(e),n=(t=c.props).offsetKey,r=t.editorState,a=t.setEditorState,o=y.DraftOffsetKey.decode(n).blockKey,s=new y.ContentBlock({key:o}),l=(i=r.getCurrentContent()).getBlockMap().set(o,s),u=i.merge({blockMap:l,selectionAfter:new y.SelectionState({anchorKey:o,anchorOffset:0,focusKey:o,focusOffset:0,hasFocus:!0})}),a({editorKey:d,editorState:y.EditorState.push(r,u,"remove-range")}))},c.onFocus=function(e){e.stopPropagation()},c.onBlur=function(e){e.stopPropagation()},c.onSelect=function(e){e.stopPropagation()},c.focus=function(){var e=c.props,t=e.offsetKey,n=e.editorState,r=e.setEditorState,a=y.DraftOffsetKey.decode(t).blockKey;r({editorKey:d,editorState:y.EditorState.forceSelection(n,new y.SelectionState({anchorKey:a,anchorOffset:0,focusKey:a,focusOffset:0}))})},_(c,t)}return(0,h.decorator)({editorState:(0,m.state)(s,d),editable:(0,m.state)(l,d),setEditorState:(0,m.signal)(u)})((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,g.default),a(o,[{key:"componentDidMount",value:function(){this.setSelection()}},{key:"componentDidUpdate",value:function(){this.setSelection()}},{key:"setSelection",value:function(){var e,t,n,r,a,o,s;i||(t=(e=this.props).offsetKey,n=e.editorState,r=e.editable,a=y.DraftOffsetKey.decode(t).blockKey,o=n.getSelection(),r&&o.getHasFocus()&&o.hasEdgeWithin(a,0,1)&&(s=f.default.findDOMNode(this),(0,y.setDraftEditorSelection)(o,s,a,0,1)))}},{key:"isFocused",value:function(){var e=this.props,t=e.offsetKey,n=e.editorState,r=y.DraftOffsetKey.decode(t).blockKey,a=n.getSelection();return a.getHasFocus()&&a.hasEdgeWithin(r,0,1)}},{key:"render",value:function(){var e=!i&&this.isFocused();return c.default.createElement("div",{onCopy:i?void 0:this.onCopy,onCut:i?void 0:this.onCut,onFocus:i?void 0:this.onFocus,onBlur:i?void 0:this.onBlur,onSelect:i?void 0:this.onSelect},c.default.createElement(t,r({},(0,v.default)(this.props,"editorState","editable","setEditorState"),{isFocused:e,focus:i?void 0:this.focus})))}}]),o.propTypes={offsetKey:p.default.string.isRequired,editorKey:p.default.string.isRequired,editorState:p.default.object,editable:p.default.bool,setEditorState:p.default.func},e=o))||e}};var c=i(n(1)),f=i(n(12)),p=i(n(2)),g=i(n(3)),h=n(5),m=n(0),v=i(n(70)),y=n(10);function i(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},,,,function(e,t){e.exports={"title-wrap":"title-wrap_-ekColTs",webgl:"webgl_2pSxb2PI",warning:"warning_1fQ4d39i"}},function(e,t){e.exports={"desc-wrap":"desc-wrap_PnjADqsM",webgl:"webgl_2kx-zyK1"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.editorKey,n=e.renderOnly,r=e.editorType;if(!t)throw new Error("editorKey is empty");return{onChange:n||"webgl"!==r?void 0:function(e,t){var n=t.getEditorState,r=t.getProps,a=e.getCurrentContent().getFirstBlock().getLength();return s<a?(r().controller.getSignal("header.showMessage")({message:"project_description_maxLength",params:{maxLength:s}}),o.EditorState.forceSelection(n(),n().getSelection())):e}}};var o=n(10),s=1e3},function(e,t,n){"use strict";function r(e){return 0===e.indexOf("application/zip")||0===e.indexOf("application/x-zip-compressed")||0===e.indexOf("application/octet-stream")}Object.defineProperty(t,"__esModule",{value:!0}),t.readZipFile=function(t){if(r(t.type))return new Promise(function(e){e({id:Date.now()+"_"+Math.random().toString().slice(2,6),file:t,uploadType:"webgl"})});throw new Error("file is not zip file")},t.readZipFiles=function(e){return e=[].concat(function(e){{if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}}(e)).filter(function(e){return r(e.type)}),Promise.all(e.map(readImage))}},function(e,t){e.exports={"upload-box":"upload-box_c6FwRnT1","add-new-wrap":"add-new-wrap_3hETAbYG","add-new":"add-new_U98aWd7R","drag-over":"drag-over_2NRUO8jR","add-new-icon":"add-new-icon_26tQ0eyh",webgl:"webgl_1XuRqfBP","add-new-title":"add-new-title_1JoeSvLq","add-new-description":"add-new-description_1BQhph2z","webgl-description":"webgl-description_tVFJzuDA","add-new-buttons":"add-new-buttons_1Yz6cC1H",button:"button_dbLZhdMD","black-background":"black-background_2mabe52L",hide:"hide_3lAUgXb9"}},function(e,t){e.exports={add_new_title:"add_new_title_2wKN",add_new_description:"add_new_description_1_iC",add_new_title_webgl:"add_new_title_webgl_3umT",add_new_description_webgl:"add_new_description_webgl_1ifb",button_upload_photo:"button_upload_photo_278_",button_upload_embed:"button_upload_embed_31ZK",button_upload_webgl:"button_upload_webgl_33PU"}},function(e,t,n){e.exports=n.p+"../styles/i/upload.e6ce3e994a4e0a115ef3cc622fc5c008.png"},function(e,t,n){e.exports=n.p+"../styles/i/ic-cloud-upload.f19a337e5a19e31ad2eaff1cc9c4f6aa.png"},,,,,,,function(e,t){e.exports={"body-wrap":"body-wrap_3YlawKUK","render-only":"render-only_13OpRvr5"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=K(["project.gallery.itemPos"],["project.gallery.itemPos"]),i=K(["project.setItemPos"],["project.setItemPos"]),l=K(["project.gallery.thumbPos"],["project.gallery.thumbPos"]),u=K(["project.setThumbPos"],["project.setThumbPos"]),c=K(["project.uploads"],["project.uploads"]),d=K(["project.uploadVideo.pendingUploadIds"],["project.uploadVideo.pendingUploadIds"]),f=K(["project.contentMap"],["project.contentMap"]),p=K(["draft.editorStates.",""],["draft.editorStates.",""]),g=K(["editorKey"],["editorKey"]),h=K(["project.projectData.pendingWebgl"],["project.projectData.pendingWebgl"]),m=K(["draft.setEditorState"],["draft.setEditorState"]),v=K(["project.positions"],["project.positions"]),y=K(["project.unsetPressed"],["project.unsetPressed"]),_=K(["project.setPressed"],["project.setPressed"]),b=K(["project.updatePressed"],["project.updatePressed"]),w=K(["project.checkPendingWebgl"],["project.checkPendingWebgl"]),S=N(n(1)),E=N(n(2)),O=N(n(3)),C=N(n(12)),k=n(5),I=n(0),j=N(n(96)),M=n(10),T=n(11),P=N(n(860)),x=N(n(4)),A=N(n(863)),D=N(n(6)),R=N(n(864));function N(e){return e&&e.__esModule?e:{default:e}}function L(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function F(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function K(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var U=(0,k.decorator)({itemPos:(0,I.state)(s),setItemPos:(0,I.signal)(i),thumbPos:(0,I.state)(l),setThumbPos:(0,I.signal)(u),uploads:(0,I.state)(c),uploadIds:(0,I.state)(d),contentMap:(0,I.state)(f),editorState:(0,I.state)(p,(0,I.props)(g)),pendingWebgl:(0,I.state)(h),setEditorState:(0,I.signal)(m),positions:(0,I.state)(v),unsetPressed:(0,I.signal)(y),setPressed:(0,I.signal)(_),updatePressed:(0,I.signal)(b),checkPendingWebgl:(0,I.signal)(w)})(r=(0,x.default)(A.default)(r=(0,D.default)(R.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(B,O.default),a(B,[{key:"componentDidMount",value:function(){var e=this;this.props.renderOnly||(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),this.setItemPos(this.getContentMax()),this.setThumbPos(this.getThumbMax()));var t=this.props,n=t.pendingWebgl,r=t.checkPendingWebgl;n&&setTimeout(function(){e.syncToEntity([{uploadId:n}]),r()},100)}},{key:"componentWillReceiveProps",value:function(e){var t=this.getContentMax();t<e.itemPos&&this.setItemPos(t)}},{key:"componentWillUnmount",value:function(){this.props.renderOnly||(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)),this.setItemPos(0)}},{key:"setItemPos",value:function(e){var t,n,r,a=this.props,o=a.itemPos,s=a.thumbPos;e!==o&&(n=0<(t=this.getContentMax())?Math.max(0,Math.min(t,e)):Math.max(0,e),this.props.setItemPos({itemPos:n}),r=Math.min(t,s+4-1),n<=s?this.setThumbPos(s-1):r<=n&&this.setThumbPos(s+1))}},{key:"setThumbPos",value:function(e){var t,n;e!==this.props.thumbPos&&(n=0<(t=this.getThumbMax())?Math.max(0,Math.min(t,e)):Math.max(0,e),this.props.setThumbPos({thumbPos:n}))}},{key:"getEntityData",value:function(e){var t=e.entityKey;return e.editorState.getCurrentContent().getEntity(t).getData()}},{key:"getEntityContents",value:function(){var e=this.getEntityData(this.props).contents,t=void 0===e?[]:e;return!0===this.props.renderOnly?[].concat(L(t)):[].concat(L(t),[{addNew:!0}])}},{key:"getContentMax",value:function(){return this.getEntityContents().length-1}},{key:"getThumbMax",value:function(){return this.getEntityContents().length-4}},{key:"focusToClick",value:function(e,t){var n=this.props,r=n.isFocused;n.renderOnly||r||this.onClickGallery(e),t&&t()}},{key:"calcNewSort",value:function(e,t){var n,r,a,o,s=C.default.findDOMNode(this.refMap[e]),i=e;return s&&(r=void 0===(n=(s||{}).offsetWidth)?1:n,a=Math.round(t/r)+e,o=this.getEntityContents(),i=Math.max(0,Math.min(a,o.length-2))),i}},{key:"renderUploadBox",value:function(){var e=this.props,t=e.isFocused,n=e.editorKey,r=e.entityKey,a=e.renderOnly,o=e.editorState,s=e.focus;return S.default.createElement(j.default,{key:"new",isFocused:t,editorKey:n,entityKey:r,renderOnly:a,editorState:o,focus:s,ratio:.56,syncToEntity:this.syncToEntity})}},{key:"renderUploading",value:function(e){var t=this.props.uploads,n=void 0===t?{}:t,r=e.uploadId;if(!n[r])return null;var a=n[r],o=a.loaded,s=void 0===o?0:o,i=a.total,l=100*s/(void 0===i?1:i);return S.default.createElement("div",{key:r,className:this.ss("progress-wrapper")},S.default.createElement("div",{className:this.ss("loading-text")},this.__("zip_uploading")),S.default.createElement("div",{className:this.ss("loading-bar")},S.default.createElement("div",{className:this.ss("loading"),style:{width:l+"%"}})))}},{key:"renderItems",value:function(){var t=this,e=this.props,n=e.editorKey,r=e.entityKey,a=e.renderOnly,o=this.getEntityContents(),s=o;return(a||1<o.length)&&(s=o.filter(function(e){return!e.addNew})),s.map(function(e){return e.addNew?t.renderUploadBox():S.default.createElement(P.default,{key:e.uploadId||e.contentId,renderOnly:a,editorKey:n,entityKey:r,item:e})})}},{key:"renderWebgl",value:function(){}},{key:"render",value:function(){return S.default.createElement("div",{className:this.ss("game-gallery")},this.renderItems())}}]),B.propTypes={editorKey:E.default.string.isRequired,entityKey:E.default.string,offsetKey:E.default.string,renderOnly:E.default.bool,isFocused:E.default.bool,editorState:E.default.object,itemPos:E.default.number,setItemPos:E.default.func,thumbPos:E.default.number,setThumbPos:E.default.func,uploads:E.default.object,contentMap:E.default.object,uploadIds:E.default.array,pendingWebgl:E.default.string,setEditorState:E.default.func,focus:E.default.func,positions:E.default.object,unsetPressed:E.default.func,setPressed:E.default.func,updatePressed:E.default.func,checkPendingWebgl:E.default.func},r=B))||r)||r)||r;function B(){var e,t,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,B);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=u=F(this,(e=B.__proto__||Object.getPrototypeOf(B)).call.apply(e,[this].concat(r)))).state={},u.onNext=function(e,t){var n=t.animating,r=t.pageSize;n||u.focusToClick(e,function(){u.setThumbPos(u.props.thumbPos+r-1)})},u.onPrev=function(e,t){var n=t.animating,r=t.pageSize;n||u.focusToClick(e,function(){u.setThumbPos(u.props.thumbPos-r+1)})},u.onClickThumbnail=function(e){var t=e.index;u.setItemPos(t)},u.onClickGallery=function(e){u.props.focus&&u.props.focus(e)},u.onMouseMove=function(e){var t,n,r=e.pageX,a=u.props,o=a.positions,s=a.updatePressed;o&&(t=o.pageX,n=o.left,o.isPressed&&s({pos:{pageX:r,left:n+(r-t)}}))},u.onMouseUp=function(){var e,t,n,r,a,o,s=u.props,i=s.positions,l=s.unsetPressed;i&&(e=i.id,t=i.isPressed,n=i.left,t&&(r=u.calcNewSort(e,n),a=u.getEntityContents(),e!==r&&r<a.length&&(o=(0,T.arrayMove)(a,e,r),u.syncToEntity(o)),l(),u.setItemPos(r)))},u.onMouseDown=function(o,s){0===o.button&&u.focusToClick(o,function(){var e,t=u.props,n=t.renderOnly,r=t.setPressed,a=t.itemPos;s!==a&&u.setItemPos(s),n||(e=o.pageX,r({pos:{id:s,pageX:e,left:0}}))})},u.refMap={},u.deleteItem=function(e,t){var n,r;u.props.itemPos===t&&((0,T.pauseEvent)(e),n=u.getEntityData(u.props).contents,(r=[].concat(L(void 0===n?[]:n))).splice(t,1),u.syncToEntity(r))},u.syncToEntity=function(e){var t=u.props,n=t.entityKey,r=t.editorKey,a=t.editorState,o=t.setEditorState,s=(0,M.mergeAtomicEntityData)(a.getCurrentContent(),n,{contents:e.filter(function(e){return e.contentId||e.uploadId})});o({editorKey:r,editorState:M.EditorState.push(a,s,"apply-entity")})},F(u,t)}t.default=U},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=R(["project.loadingMobile"],["project.loadingMobile"]),i=R(["project.uploads"],["project.uploads"]),l=R(["project.uploadVideo.pendingUploadIds"],["project.uploadVideo.pendingUploadIds"]),u=R(["project.contentMap"],["project.contentMap"]),c=R(["draft.editorStates.",""],["draft.editorStates.",""]),d=R(["editorKey"],["editorKey"]),f=R(["project.webglProcess"],["project.webglProcess"]),p=R(["currentUserId"],["currentUserId"]),g=R(["project.checkWindow"],["project.checkWindow"]),h=R(["project.removeWebgl"],["project.removeWebgl"]),m=R(["draft.setEditorState"],["draft.setEditorState"]),v=R(["project.setCheckWindow"],["project.setCheckWindow"]),_=x(n(1)),b=x(n(2)),w=x(n(3)),S=n(5),E=n(0),O=n(10),C=n(11),k=x(n(7)),I=n(136),j=x(n(4)),M=x(n(861)),T=x(n(6)),P=x(n(862));function x(e){return e&&e.__esModule?e:{default:e}}function A(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var N=(0,S.decorator)({loadingMobile:(0,E.state)(s),uploads:(0,E.state)(i),uploadIds:(0,E.state)(l),contentMap:(0,E.state)(u),editorState:(0,E.state)(c,(0,E.props)(d)),webglProcess:(0,E.state)(f),currentUserId:(0,E.state)(p),checkWindow:(0,E.state)(g),removeWebgl:(0,E.state)(h),setEditorState:(0,E.signal)(m),setCheckWindow:(0,E.signal)(v)})(r=(0,j.default)(M.default)(r=(0,T.default)(P.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(L,w.default),a(L,[{key:"componentDidMount",value:function(){this.checkUpload()}},{key:"componentDidUpdate",value:function(){this.checkUpload()}},{key:"getEntityData",value:function(){var e=this.props,t=e.entityKey;return e.editorState.getCurrentContent().getEntity(t).getData()}},{key:"checkUpload",value:function(){var e,t,n,r,a,o,s,i,l,u,c=this.props,d=c.uploads,f=c.contentMap,p=c.item,g=p.uploadId,h=p.contentId,m=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(p,["uploadId","contentId"]),v=g&&d[g];v&&v.contentId&&f[v.contentId]&&!h&&(e=this.getEntityData().contents,n=[].concat(A(t=void 0===e?[]:e)),-1!==(r=t.findIndex(function(e){return e.uploadId===g}))&&(n.splice(r,1,y({},m,{contentId:v.contentId})),o=(a=this.props).entityKey,s=a.editorKey,i=a.editorState,l=a.setEditorState,u=(0,O.mergeAtomicEntityData)(i.getCurrentContent(),o,{contents:n}),l({editorKey:s,editorState:O.EditorState.set(i,{currentContent:u})})),this.__placeholderSrc=v.dataUrl)}},{key:"renderLoading",value:function(e,t,n,r,a){var o=3<arguments.length&&void 0!==r?r:0,s=4<arguments.length&&void 0!==a?a:100;if(t<0)return _.default.createElement("div",{key:e,className:this.ss("uploading-wrapper","fade-out")},_.default.createElement("div",{className:this.ss("check-icon","ifont","ifont-check-mark")}),_.default.createElement("div",{className:this.ss("loading-text")},this.__(e)),n&&this.renderDeleteButton());var i=60*Math.PI,l=(s-(t+o))/s*i;return isNaN(l)&&(l=i),_.default.createElement("div",{key:e,className:this.ss("uploading-wrapper")},_.default.createElement("svg",{className:this.ss("spinner"),width:"40px",height:"40px",viewBox:"0 0 66 66"},_.default.createElement("circle",{className:this.ss("circle"),fill:"none",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:l,cx:"33",cy:"33",r:"30"})),_.default.createElement("div",{className:this.ss("loading-text")},this.__(e)),n&&this.renderDeleteButton())}},{key:"renderUploading",value:function(){var e=this.props,t=e.uploads,n=void 0===t?{}:t,r=(e.item||{}).uploadId;if(!n[r])return null;var a=n[r],o=a.loaded,s=a.total,i=a.status;if(i===k.default.succeeded)return this.renderWebglProcess();var l=100*o/s;return this.renderLoading("zip_uploading",l,i===k.default.failed,0,200)}},{key:"renderWebglProcess",value:function(){var e=this.props,t=e.webglProcess.progress,n=e.checkWindow,r=e.setCheckWindow;return n||r(),this.renderLoading("zip_uploading",t,!1,100,200)}},{key:"renderUploadDone",value:function(){return this.props.checkWindow?this.renderLoading("upload_done",-1,!1):null}},{key:"renderDeleteButton",value:function(){var t=this,n=this.props.item.contentId;return _.default.createElement("button",{className:this.ss("delete","ifont","ifont-icons_trash"),onClick:function(e){return t.deleteItem(e,n)}})}},{key:"renderWebgl",value:function(){var e=this.props,t=e.item.contentId,n=e.contentMap,r=e.renderOnly,a=e.currentUserId,o=e.loadingMobile;if(!n[t])return null;var s=(0,I.getDetailHtml)(n[t],a,o,!1,r?"detail":"edit");return _.default.createElement("div",null,this.renderUploadDone(),_.default.createElement("div",{className:this.ss("webgl-wrapper")},_.default.createElement("div",{className:this.ss("webgl",r&&"render-only"),dangerouslySetInnerHTML:{__html:s}})))}},{key:"render",value:function(){var e=this.props,t=e.renderOnly,n=e.item,r=e.removeWebgl,a=n||{},o=a.contentId;return!t&&a.uploadId?this.renderUploading():r?_.default.createElement("div",{className:this.ss("place-holder")}):o&&!r?this.renderWebgl():null}}]),L.propTypes={editorKey:b.default.string.isRequired,loadingMobile:b.default.bool,entityKey:b.default.string,editorState:b.default.object,webglProcess:b.default.object,currentUserId:b.default.string,item:b.default.object,renderOnly:b.default.bool,uploads:b.default.object,contentMap:b.default.object,checkWindow:b.default.bool,removeWebgl:b.default.bool,setEditorState:b.default.func,setCheckWindow:b.default.func},r=L))||r)||r)||r;function L(){var e,t,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,L);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=i=D(this,(e=L.__proto__||Object.getPrototypeOf(L)).call.apply(e,[this].concat(r)))).syncToEntity=function(e){var t=i.props,n=t.entityKey,r=t.editorKey,a=t.editorState,o=t.setEditorState,s=(0,O.mergeAtomicEntityData)(a.getCurrentContent(),n,{contents:e.filter(function(e){return e.contentId||e.uploadId})});o({editorKey:r,editorState:O.EditorState.push(a,s,"apply-entity")})},i.deleteItem=function(e,t){(0,C.pauseEvent)(e);var n,r=i.getEntityData().contents,a=void 0===r?[]:r,o=a.findIndex(function(e){return e.contentId===t});0<=o&&((n=[].concat(A(a))).splice(o,1),i.syncToEntity(n))},D(i,t)}t.default=N},function(e,t){e.exports={"uploading-wrapper":"uploading-wrapper_1zlVJbxR","check-icon":"check-icon_2XpxaLYH",spinner:"spinner_14hZ_N_h",circle:"circle_1dRFkjdC","loading-text":"loading-text_T0V1Cd1Z","loading-button":"loading-button_1zjbv-WW",content:"content_1bJ--qC9",retry:"retry_3ac0I9BX",text:"text_34fMIzhZ","place-holder":"place-holder_1vMuwTrk",display:"display_20KMt6am","fade-out":"fade-out_2Xy3wWOR",fade:"fade_2bx98Rac","webgl-wrapper":"webgl-wrapper_3m-QlLms",webgl:"webgl_9Q8if8gt","render-only":"render-only_MOLaCMHj",delete:"delete_3ithFa6p"}},function(e,t){e.exports={zip_uploading:"zip_uploading_LujW",webgl_processing:"webgl_processing_23UC",upload_done:"upload_done_fKZf"}},function(e,t){e.exports={"game-gallery":"game-gallery_nO7XOTx7","game-slides":"game-slides_2MfYWDkg","game-thumb-container":"game-thumb-container_2hj0IDHL","game-thumb-wrap":"game-thumb-wrap_16AQfJWO","game-thumb":"game-thumb_3l28tLwA","thumbnail-add-new-wrap":"thumbnail-add-new-wrap_14dfh-QB",focus:"focus_1Uqe7Mss","thumbnail-add-new":"thumbnail-add-new_3GHxnbRS",icon:"icon_2K1FBnis",text:"text_2hylvYbG",nav:"nav_2-tdEW1j",active:"active_Tpvt7Dad","left-nav":"left-nav_1CdRPnaw","right-nav":"right-nav_3qKbTWcn",hide:"hide_JfRnpLTh","game-gallery-device":"game-gallery-device_306gxyJ_","game-item":"game-item_2A4JLpjL"}},function(e,t){e.exports={button_add_new:"button_add_new_2dvP"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.editorKey,n=e.renderOnly;if(!t)throw new Error("editorKey is empty");return{onChange:n?void 0:function(e,t){var n=t.getEditorState,r=!1,a=0,o=e.getCurrentContent();if(o.getBlocksAsArray().forEach(function(e,t){var n;r||((n=!1,l.findGalleryEntities)(e,function(){n=!0},o),n&&(1===++a?0!==t&&(r=!0):1<a&&(r=!0)))}),0===a&&(r=!0),r)return u.EditorState.forceSelection(n(),n().getSelection());var s=o.getLastBlock();if("atomic"===s.getType())return e;var i=(i=o.getBlockMap()).delete(s.getKey());return o.merge({blockMap:i}),u.EditorState.forceSelection(u.EditorState.set(e,{currentContent:o.merge({blockMap:i})}),n().getSelection())}}};var l=n(491),u=n(10)},,,,,,,,,,,,function(e,t){e.exports={"text-area":"text-area_2BOgovPM",failed:"failed_2e0uEJtN","theme-dark":"theme-dark_1LMHZvyK","active-blue-green":"active-blue-green_Yn_tXGPr","active-primary-blue":"active-primary-blue_2m3-wSvT",notice:"notice_JaXd-Lps",succeeded:"succeeded_2kwbLXj3",inProgress:"inProgress_3Cbo0Edf",initial:"initial_2mkG-AMx",bottom:"bottom_28Ro_W0b",hide:"hide_1Vzat0h4"}},function(e,t){e.exports={inProgress:"inProgress_2fdL",succeeded:"succeeded_3GM1",failed:"failed_1G4m"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var y=n(148),_=n(961),b=n(504),w=Math.max,S=Math.min;e.exports=function(r,a,e){var o,s,i,l,u,c,d=0,f=!1,p=!1,t=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function g(e){var t=o,n=s;return o=s=void 0,d=e,l=r.apply(n,t)}function h(e){var t=e-c;return void 0===c||a<=t||t<0||p&&i<=e-d}function m(){var e,t,n=_();if(h(n))return v(n);u=setTimeout(m,(t=a-((e=n)-c),p?S(t,i-(e-d)):t))}function v(e){return u=void 0,t&&o?g(e):(o=s=void 0,l)}function n(){var e,t=_(),n=h(t);if(o=arguments,s=this,c=t,n){if(void 0===u)return d=e=c,u=setTimeout(m,a),f?g(e):l;if(p)return clearTimeout(u),u=setTimeout(m,a),g(c)}return void 0===u&&(u=setTimeout(m,a)),l}return a=b(a)||0,y(e)&&(f=!!e.leading,p="maxWait"in e,i=p?w(b(e.maxWait)||0,a):i,t="trailing"in e?!!e.trailing:t),n.cancel=function(){void 0!==u&&clearTimeout(u),o=c=s=u=void(d=0)},n.flush=function(){return void 0===u?l:v(_())},n}},function(e,t,n){var r=n(503);e.exports=function(){return r.Date.now()}},function(e,t,n){var r=n(505),a=n(506);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return JSON.stringify(e).replace(/<\/(script)/gi,"<\\/$1").replace(/<!--/g,"<\\!--").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},,function(e,t,n){var r=n(1031);e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=r(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},function(e,t,n){var r=n(1032);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(504);e.exports=function(e){return e?(e=r(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0}},,,,,,,,,,,,,function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}}]);