!function(c){var u=window.webpackJsonp_name_;window.webpackJsonp_name_=function(e,t,n){for(var a,s,r,o=0,i=[];o<e.length;o++)s=e[o],l[s]&&i.push(l[s][0]),l[s]=0;for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&(c[a]=t[a]);for(u&&u(e,t,n);i.length;)i.shift()();if(n)for(o=0;o<n.length;o++)r=d(d.s=n[o]);return r};var n={},l={7:0};function d(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,d),t.l=!0,t.exports}d.e=function(n){var a=l[n];if(0===a)return new Promise(function(e){e()});if(a)return a[2];var e=new Promise(function(e,t){a=l[n]=[e,t]});a[2]=e;var t=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,d.nc&&s.setAttribute("nonce",d.nc),s.src=d.p+""+n+".d47ce4147cb377a9eebe.bundle.js";var r=setTimeout(o,12e4);function o(){s.onerror=s.onload=null,clearTimeout(r);var e=l[n];0!==e&&(e&&e[1](new Error("Loading chunk "+n+" failed.")),l[n]=void 0)}return s.onerror=s.onload=o,t.appendChild(s),e},d.m=c,d.c=n,d.d=function(e,t,n){d.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="https://play-static.unity.com/public/assets/Webgl",d.oe=function(e){throw console.error(e),e}}([,function(e,t,n){e.exports=n(0)(154)},function(e,t,n){e.exports=n(0)(973)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLoading=o,t.isSucceeded=i,t.isFailed=c,t.isInitial=function(e){return e===r.initial},t.isLoadingOrSucceeded=function(e){return o(e)||i(e)},t.isFailedOrSucceeded=function(e){return c(e)||i(e)};var a,s=n(15);var r=(0,((a=s)&&a.__esModule?a:{default:a}).default)({initial:null,succeeded:null,failed:null,inProgress:null});function o(e){return e===r.inProgress}function i(e){return e===r.succeeded}function c(e){return e===r.failed}t.default=r},function(e,r,o){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var t,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n=o(9),u=(t=n)&&t.__esModule?t:{default:t};var l=["messages","users"],d=["messages","currentUserId"];function f(e,t,n){var a=e[t.id];return(!a||a.id!==t.id||a.fullname!==t.fullname||a.avatar!==t.avatar||t.presenceStatus&&a.presenceStatus!==t.presenceStatus)&&(n.changed||(n.changed=!0,e=u.default.clone(e)),e[t.id]={id:t.id,username:t.username,fullname:t.fullname,avatar:t.avatar,title:t.title||"",coverImage:t.coverImage||"",followCount:t.followCount,likeCount:t.likeCount,isStaff:t.isStaff,presenceStatus:t.presenceStatus||a&&a.presenceStatus},t.isBot&&(e[t.id].isBot=!0)),e}function a(e){var t=e.props,n=e.state,a=t.messages,s=t.parents,r=t.quotes,o=t.parentMessage,i=n.get(l),c={};a.forEach(function(e){var t=e.author,n=e.mentions,a=e.reactions,s=e.replyUsers;i=f(i,t,c),n.forEach(function(e){i=f(i,e,c)}),a.forEach(function(e){i=f(i,e.user,c)}),s.forEach(function(e){i=f(i,e,c)})}),s&&s.forEach(function(e){var t=e.author,n=e.mentions,a=e.reactions,s=e.replyUsers;i=f(i,t,c),n.forEach(function(e){i=f(i,e,c)}),a.forEach(function(e){i=f(i,e.user,c)}),s.forEach(function(e){i=f(i,e,c)})}),r&&r.forEach(function(e){var t=e.author,n=e.mentions,a=e.reactions,s=e.replyUsers;i=f(i,t,c),n.forEach(function(e){i=f(i,e,c)}),a.forEach(function(e){i=f(i,e.user,c)}),s.forEach(function(e){i=f(i,e,c)})}),o&&(i=f(i,o.author,c),o.mentions.forEach(function(e){i=f(i,e,c)}),o.reactions.forEach(function(e){i=f(i,e.user,c)}),o.replyUsers.forEach(function(e){i=f(i,e,c)})),c.changed&&n.set(l,i)}function s(e){var t=e.props,n=e.state,a=t.author,s=t.mentions,r=n.get(l),o={},r=f(r,a,o);s.forEach(function(e){r=f(r,e,o)}),o.changed&&n.set(l,r)}r.default={name:e,depends:[],signals:{channelReady:[function(e){var t=e.props,n=e.state,a=t.userId,s=t.users;n.set(d,a);var r=n.get(l),o=r?c({},r):{},i={changed:!0};s.forEach(function(e){o=f(o,e,i)}),n.set(l,o)}],connectionOpen:[function(e){var t=e.props,n=e.state,a=t.userId,s=t.users;n.set(d,a);var r=n.get(l),o=r?u.default.clone(r):{},i={changed:!0};s.forEach(function(e){o=f(o,e,i)}),n.set(l,o)}],channelCreate:[function(e){var t=e.props,n=e.state,a=t.recipient,s=t.members,r=n.get(l),o={};a&&(r=f(r,a,o)),s&&s.forEach(function(e){r=f(r,e.user,o)}),o.changed&&n.set(l,r)}],channelMemberAdd:[function(e){var t=e.props,n=e.state,a={},s=f(s=n.get(l),t.user,a);a.changed&&n.set(l,s)}],fetchMessagesSuccess:[a],messageCreate:[s],messageUpdate:[function(e){s({props:e.props,state:e.state})}],addMentionUser:[function(e){var t=e.props,n=e.state,a=u.default.clone(t.user),s=n.get(l),r={};s[a.id]||(s=f(s,a,r),r.changed&&n.set(l,s))}],syncChannelMembers:[function(e){var n,a,t=e.props,s=e.state,r=t.result;200===t.status&&r&&(n=s.get(l),a={},r.forEach(function(e){var t=e.user;n=f(n,t,a)}),a.changed&&s.set(l,n))}],syncWorkspaceMembers:[function(e){var n,a,t=e.props,s=e.state,r=t.result;200===t.status&&r&&(n=s.get(l),a={},r.forEach(function(e){var t=e.user;n=f(n,t,a)}),a.changed&&s.set(l,n))}],syncFetchedMentionInfo:[a],syncFetchedStarInfo:[a],syncFetchedReplyInfo:[a],syncSearchMessageResult:[a],syncFetchedReportInfo:[function(e){var t=e.props,n=e.state,a=t.reports,r=n.get(l),o={};a.forEach(function(e){var t=e.reportUser,n=e.message,a=n.author,s=n.mentions;r=f(r,t,o),r=f(r,a,o),s.forEach(function(e){r=f(r,e,o)})}),o.changed&&n.set(l,r)}],idle:[function(e){var t,n,a,s=e.props,r=e.state,o=r.get(d);o&&(t=r.get(l),n={},(a=u.default.clone(t[o])).presenceStatus=s.idle?"idle":"online",t=f(t,a,n),n.changed&&r.set(l,t))}],presenceUpdate:[function(e){var t=e.props,n=e.state,a=t.userId,s=t.status,r=n.get(l),o={},i=u.default.clone(r[a]);i&&(i.presenceStatus=s,r=f(r,i,o),o.changed&&n.set(l,r))}]},getState:function(){return{currentUserId:null,users:{}}},getCurrentUserId:function(e){return e.get(d)},getCurrentUser:function(e){return e.get([].concat(l,[e.get(d)]))},getUsers:function(e){return e.get(l)},getUser:function(e,t){return e.get([].concat(l,[t]))}}}).call(r,"views/v2/modules/messages/UserStore.js")},function(e,f,p){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=r(p(9)),t=r(p(13)),n=r(p(14)),a=r(p(24)),s=r(p(3));function r(e){return e&&e.__esModule?e:{default:e}}var m="messages",v=[m,"channels"];function _(e){return{id:e.id,type:e.type,workspaceId:e.workspaceId||"",recipientId:e.recipient&&e.recipient.id||null,proposalId:e.proposalId||"",projectId:e.projectId||"",ticketId:e.ticketId||"",eventId:e.eventId||"",groupId:e.groupId||"",name:e.name||"",thumbnail:e.thumbnail||"",teamAvatar:e.teamAvatar||"",topic:e.topic||"",isArchived:e.isArchived||!1,readonly:e.readonly||!1,stickTimestamp:e.stickTime||"",isMute:e.isMute||!1,lastMessageId:e.lastMessage?e.lastMessage.id:e.lastMessageId||"",tags:e.tags||[],ticket:e.ticket||null,memberCount:e.memberCount||0,liveChannelId:e.liveChannelId||"",stream:e.stream||"",live:e.live||!1,milestone:e.milestone||[],records:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.records||[])).reverse(),onlineMemberCount:e.onlineMemberCount||null,event:e.event,meetUpEventId:e.meetUpEventId,privateVisible:e.privateVisible,directChannelKey:e.directChannelKey||""}}function o(s){return function(e){var t=e.props,n=e.state,a=t.channelId;n.set("messages.stickStatus."+a,s)}}function i(s){return function(e){var t=e.props,n=e.state,a=t.channelId;n.set("messages.muteStatus."+a,s)}}function u(e){var t=e.controller,n=e.props.result;t.getSignal("messages.channelSelect")({channelId:n.id,workspaceId:n.workspaceId}),t.getSignal("messages.handleChannelScroll")()}function l(t){return function(e){e.state.set("messages.addMember.submitStatus",t)}}function d(e){var t,n=e.props,a=e.state,s=n.channelId,r=n.memberCount,o=a.get([].concat(v,[s]));o&&r&&o.memberCount!==r&&(t=h({},o,{memberCount:r}),a.set([].concat(v,[s]),t))}f.default={name:e,depends:[n.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,a=t.directChannels,s=t.privateChannels,r=t.publicChannels,o=t.ticketChannels,i=t.lobbyChannels,c=t.liveChannels,u=t.groupMap,l=t.skillMap,d=t.languageMap,f=t.placeMap,p=n.get(v),g=p?h({},p):{};a.forEach(function(e){g[e.id]=_(e)}),s.forEach(function(e){g[e.id]=_(e)}),r.forEach(function(e){g[e.id]=_(e)}),o.forEach(function(e){g[e.id]=_(e)}),i.forEach(function(e){g[e.id]=_(e)}),c.forEach(function(e){g[e.id]=_(e)}),n.set(v,g),n.merge([m,"groupMap"],u||{}),n.merge([m,"skillMap"],l||{}),n.merge([m,"languageMap"],d||{}),n.merge([m,"placeMap"],f||{})}],channelCreate:[function(e){var t=e.props,n=e.state;n.set([].concat(v,[t.id]),_(t)),n.merge([m,"groupMap"],t.groupMap||{}),n.merge([m,"skillMap"],t.skillMap||{}),n.merge([m,"languageMap"],t.languageMap||{}),n.merge([m,"placeMap"],t.placeMap||{})}],channelUpdate:[function(e){var t=e.props;e.state.set([].concat(v,[t.id]),_(t))}],channelDelete:[function(e){var t=e.props,n=e.state,a=e.controller,s=n.get("messages.channels")[t.id];s&&"lobby"===s.type&&a.getSignal("messages.openExplore")({workspaceId:s.workspaceId}),n.unset([].concat(v,[t.id]))}],fetchMessagesSuccess:[function(e){var t,n=e.props,a=e.state,s=n.channelId,r=n.messages,o=[].concat(v,[s]),i=a.get(o);i&&(t=!1,r.forEach(function(e){e.id>i.lastMessageId&&(t||(i=c.default.clone(i),t=!0),i.lastMessageId=e.id)}),t&&a.set(o,i))}],messageCreate:[function(e){var t=e.props,n=e.state,a=[].concat(v,[t.channelId]),s=n.get(a);s&&s.lastMessageId<t.id&&"SENDING"!==t.state&&((s=c.default.clone(s)).lastMessageId=t.id,n.set(a,s))}],closeChannel:[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.channelId,o=n.get([].concat(v,[r]));return o&&"direct"===o.type?a.post("/api/channels/"+r+"/close").then(s.success).catch(s.error):s.dummy()},{success:[function(e){var t=e.state,n=e.props,a=e.controller,s=n.channelId,r=t.get([].concat(v,[s]));a.getSignal("messages.channelDelete")(r)}],error:[],dummy:[]}],stickChannel:[o(s.default.inProgress),[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.channelId,o=n.get([].concat(v,[r]));return o&&!o.stickTimestamp?a.post("/api/channels/"+r+"/stick").then(s.success).catch(s.error):s.dummy()},{success:[o(s.default.succeeded),function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelUpdate")(a)}],error:[o(s.default.failed)],dummy:[]}]],unStickChannel:[o(s.default.inProgress),[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.channelId,o=n.get([].concat(v,[r]));return o&&o.stickTimestamp?a.post("/api/channels/"+r+"/unStick").then(s.success).catch(s.error):s.dummy()},{success:[o(s.default.succeeded),function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelUpdate")(a)}],error:[o(s.default.failed)],dummy:[]}]],muteChannel:[i(s.default.inProgress),[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.channelId,o=n.get([].concat(v,[r]));return o&&!o.isMute?a.post("/api/channels/"+r+"/mute").then(s.success).catch(s.error):s.dummy()},{success:[i(s.default.succeeded),function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelUpdate")(a)}],error:[i(s.default.failed)],dummy:[]}]],unMuteChannel:[i(s.default.inProgress),[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.channelId,o=n.get([].concat(v,[r]));return o&&o.isMute?a.post("/api/channels/"+r+"/unMute").then(s.success).catch(s.error):s.dummy()},{success:[i(s.default.succeeded),function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelUpdate")(a)}],error:[i(s.default.failed)],dummy:[]}]],toggleChannelReadonly:[[function(e){var t=e.props,n=e.http,a=e.path,s=t.channelId;return t.value?n.post("/api/channels/"+s+"/makeReadonly").then(a.success).catch(a.error):n.post("/api/channels/"+s+"/cancelReadonly").then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelUpdate")(a)}],error:[]}]],openProposalChannel:[function(e){var t="/messages/p/"+e.props.proposalId;window.open(t,"_blank")}],createGroupChannel:a.default.EmailRequired([l(s.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.selectedUserIds,r=t.workspaceId;return n.post("/api/workspaces/"+r+"/channels_group",{memberIds:s,name:""}).then(a.success).catch(a.error)},{success:[l(s.default.succeeded),u],error:[l(s.default.failed)]}]]),createDirectChannel:[l(s.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.recipientId,r=t.workspaceId;return n.post("/api/workspaces/"+r+"/channels_direct",{recipientId:s}).then(a.success).catch(a.error)},{success:[l(s.default.succeeded),u],error:[l(s.default.failed)]}]],channelMemberAdd:[d],channelMemberRemove:[d],workspaceDelete:[function(e){var t=e.controller,n=e.props,a=e.state,s=n,r=a.get(v);Object.values(r).forEach(function(e){e.workspaceId===s.id&&t.getSignal("messages.channelDelete")(e)})}],touchChannel:[[function(e){var t=e.controller,n=e.props,a=e.http,s=e.path,r=e.state,o=n.channelId,i=r.get([].concat(v,[o]));return i?(t.getSignal("messages.channelSelect")({channelId:i.id,workspaceId:i.workspaceId}),s.dummy()):a.get("/api/channels/"+o+"/touch").then(s.success).catch(s.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelReady")(a)}],error:[],dummy:[]}]],joinChannel:[[function(e){var t=e.controller,n=e.props,a=e.http,s=e.path,r=e.state,o=n.channelId,i=r.get([].concat(v,[o]));return i?(t.getSignal("messages.channelSelect")({channelId:i.id,workspaceId:i.workspaceId}),s.dummy()):a.post("/api/channels/"+o+"/join").then(s.success).catch(s.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&a.forEach(function(e){n.getSignal("messages.channelCreate")(e),n.getSignal("messages.channelSelect")({channelId:e.id,workspaceId:e.workspaceId})})}],error:[],dummy:[]}]],channelReady:[function(e){var t=e.props,n=e.state,a=t.normalChannels,s=t.directChannel,r=n.get(v),o=r?h({},r):{};a&&a.forEach(function(e){o[e.id]=_(e)}),s&&(o[s.id]=_(s)),n.set(v,o)}]},getServices:function(){return{locationHref:t.default}},getState:function(){return{channels:{},stickStatus:{},muteStatus:{}}},getChannel:function(e,t){return e.get([].concat(v,[t]))},getLobbyChannel:function(e){var t=e.get(v);return Object.values(t).find(function(e){return"lobby"===e.type})},getChannels:function(e){return e.get(v)},getWorkspaceChannels:function(e,t){var n=e.get(v);return Object.values(n).filter(function(e){return e.workspaceId===t}).reduce(function(e,t){return e[t.id]=t,e},{})}}}).call(f,"views/v2/modules/messages/ChannelStore.js")},function(e,d,_){"use strict";(function(e){Object.defineProperty(d,"__esModule",{value:!0});var t=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},w=s(_(9)),g=s(_(70)),h=s(_(228)),S=s(_(71)),I=s(_(230)),m=s(_(72)),v=_(17),l=_(235),E=s(_(4)),n=s(_(27)),o=s(_(33)),c=s(_(7)),C=s(_(14)),u=s(_(5)),O=s(_(73));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function k(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=["messages","channelMessages"],M="fail-message-ids";function T(e){return"failed-message-"+e}function R(l,d){var e,n,t,a,s,r=d.mentionEveryone||d.mentions.some(function(e){var t,n,a,s,r,o,i=l.get("messages.channels."+d.channelId+".type"),c=E.default.getCurrentUserId(l),u=e.id===c;return"ticket"===i&&(n=(t=l.get("messages.channels."+d.channelId)).ticketId,a=t.workspaceId,s=l.get("support.tickets.entities."+n+".data.assignee")||{},o=(r=l.get("messages.workspaces."+a)||{}).botId,s!==c&&r.residentId!==c||(u=e.id===o)),u}),o=C.default.getMember(l,d.channelId,d.author.id),i=o&&("admin"===o.role||"owner"===o.role),c=function(e,t,n,a){var s,r,o,i,c=t.content||"";"call"===t.type?(s=t.call.duration,r=t.author.fullname,o=e.get(),c=s?(0,v.i18n)(o,m.default,"call_is_ended",{fullname:r,noMarkDown:!0}):(0,v.i18n)(o,m.default,"call_is_created",{fullname:r,noMarkDown:!0})):"normal"!==t.type&&(i=e.get(),c=(0,v.i18n)(i,m.default,""+t.type,b({},t.data,{noMarkDown:!0})));var u=g.default.parse(c,!0,{channelId:t.channelId,mentioned:n,authorIsAdmin:a,mentionType:"message",messageId:t.id}),l={};return l[t.author.id]=t.author,t.mentions.forEach(function(e){l[e.id]=e}),{contentParsed:u,contentParsedPlainText:h.default.unparse(c,{users:l})}}(l,d,r,i),u=c.contentParsed,f=c.contentParsedPlainText,p=(d.replyUsers||[]).map(function(e){return e.id});return{id:d.id,type:d.type,call:d.call,channelId:d.channelId,quoteMessageId:d.quoteMessageId||"",parentMessageId:d.parentMessageId||"",authorId:d.author.id,colorString:(t=l,a=d,(s=C.default.getMember(t,a.channelId,a.author.id))&&s.colorString),content:d.content||"",origContent:d.origContent||"",contentParsed:u,contentParsedPlainText:f,attachments:d.attachments,mentions:d.mentions.map(function(e){return e.id}),mentionEveryone:d.mentionEveryone,mentioned:r,timestamp:S.default.extractTimestamp(d.id),editedTimestamp:S.default.extractTimestamp(d.lastEditedId||""),state:d.state||"SENT",nonce:d.nonce,embeds:d.embeds||[],data:d.data,starred:d.starred,reactions:(e=d.reactions||[],n={},e.forEach(function(e){var t=n[e.type]||{};t[e.user.id]={id:e.id,channelId:e.channelId,messageId:e.messageId,type:e.type,updatedTime:e.updatedTime,userId:e.user.id},n[e.type]=t}),n),replyMessageIds:d.replyMessageIds||[],replyUserIds:p,lastReplyTimestamp:S.default.extractTimestamp(d.lastReplyId||""),pending:d.pending,deletedTime:d.deletedTime||""}}var P=(t(i,null,[{key:"getRaw",value:function(e){return e.get(r)}},{key:"get",value:function(e,t){var n=[].concat(r,[t]);return e.get(n)||e.set(n,{channelId:t,ready:!1,hasMore:!1,hasMoreNew:!1,loading:!1,loadingFailed:!1,loadingParams:null,loadingMode:null,scrollMessageId:"",highlightMessageId:"",messagesList:[],messages:{},moreMessageIds:[]}),new i(e,t)}},{key:"clear",value:function(e,t){var n=[].concat(r,[t]);e.unset(n)}}]),t(i,[{key:"getRaw",value:function(){return this.state.get(this.key)}},{key:"setRaw",value:function(e){this.state.set(this.key,e)}},{key:"update",value:function(e){var t=this.getRaw(),n=t.messages[e.id];n&&(n.editedTimestamp<e.editedTimestamp||e.embeds||e.starred!==n.starred||e.reactions!==n.reactions)&&((t=w.default.clone(t)).messages=w.default.clone(t.messages),"SEND_FAILED"===e.state&&(e.state="SENT"),t.messages[e.id]=e,this.setRaw(t))}},{key:"setMessageState",value:function(e,t){var n=this.getRaw(),a=n.messages[e];a&&a.state!==t&&((n=w.default.clone(n)).messages=w.default.clone(n.messages),n.messages[e]=w.default.clone(n.messages[e]),n.messages[e].state=t,this.setRaw(n))}},{key:"setProps",value:function(e){var t=e.ready,n=e.hasMore,a=e.hasMoreNew,s=e.loading,r=e.loadingFailed,o=e.loadingParams,i=e.loadingMode,c=e.scrollMessageId,u=e.highlightMessageId,l=this.getRaw();(l=w.default.clone(l)).ready=void 0!==t?t:l.ready,l.hasMore=void 0!==n?n:l.hasMore,l.hasMoreNew=void 0!==a?a:l.hasMoreNew,l.loading=void 0!==s?s:l.loading,l.loadingFailed=void 0!==r?r:l.loading,l.loadingParams=void 0!==o?o:l.loadingParams,l.loadingMode=void 0!==i?i:l.loadingMode,l.scrollMessageId=void 0!==c?c:l.scrollMessageId,l.highlightMessageId=void 0!==u?u:l.highlightMessageId,this.setRaw(l)}},{key:"replace",value:function(e,t){var n=this.getRaw();n.messages[e]&&((n=w.default.clone(n)).messages=w.default.clone(n.messages),n.messagesList=w.default.clone(n.messagesList),delete n.messages[e],n.messages[t.id]=t,n.messagesList[n.messagesList.indexOf(e)]=t.id,this.setRaw(n))}},{key:"unset",value:function(e){var t=this.getRaw();t.messages[e.id]&&((t=w.default.clone(t)).messages=w.default.clone(t.messages),t.messagesList=w.default.clone(t.messagesList),delete t.messages[e.id],t.messagesList.splice(t.messagesList.indexOf(e.id),1),this.setRaw(t))}},{key:"replaceAfterReSend",value:function(e,t){var n,a=this.getRaw();a.messages[e]&&((a=w.default.clone(a)).messages=w.default.clone(a.messages),a.messagesList=w.default.clone(a.messagesList),delete a.messages[e],a.messages[t.id]=t,n=a.messagesList.indexOf(e),a.messagesList.splice(n,1),-1===a.messagesList.indexOf(t.id)&&a.messagesList.push(t.id),this.setRaw(a))}},{key:"merge",value:function(e,t,n){var a=1<arguments.length&&void 0!==t?t:[],s=2<arguments.length&&void 0!==n&&n,r=w.default.clone(this.getRaw());r.messages=w.default.clone(r.messages),e=e.filter(function(t){var e,n=!!Object.values(r.messages).find(function(e){return e.nonce===t.id});return n||(e=r.messages[t.id])&&e.content===t.content&&0!==(e.embeds||[]).length||(r.messages[t.id]=t),-1===r.messagesList.indexOf(t.id)&&!n}),a.forEach(function(e){r.messages[e.id]=e});var o,i=!1,c=!1;e.length&&(s?(r.messagesList=e.map(function(e){return e.id}).concat(r.messagesList),c=!0):(r.messagesList=r.messagesList.concat(e.map(function(e){return e.id})),i=!0),o=e.reduce(function(e,t){return t.id>e?t.id:e},""),r.moreMessageIds=r.moreMessageIds.filter(function(e){return o<e})),this.setRaw(r),i&&this.truncateOldMessages(),c&&this.truncateNewMessages()}},{key:"reset",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:[],a=w.default.clone(this.getRaw());a.messagesList=e.map(function(e){return e.id}),a.messages=[].concat(k(e),k(n)).reduce(function(e,t){return e[t.id]=t,e},{}),a.moreMessageIds=[],this.setRaw(a)}},{key:"truncateOldMessages",value:function(e){var t=0<arguments.length&&void 0!==e?e:500,n=this.getRaw(),a=n.messagesList.length-t;if(!(a<=0)){(n=w.default.clone(n)).hasMore=!0,n.messages=w.default.clone(n.messages);for(var s={},r=a;r<n.messagesList.length;r++){var o=n.messagesList[r];s[o]=!0;var i=n.messages[o].parentMessageId;i&&(s[i]=!0)}for(var c=0;c<a;c++){var u=n.messagesList[c];s[u]||delete n.messages[u]}n.messagesList=n.messagesList.slice(a),this.setRaw(n)}}},{key:"truncateNewMessages",value:function(e){var t=0<arguments.length&&void 0!==e?e:500,n=this.getRaw();if(!(n.messagesList.length-t<=0)){(n=w.default.clone(n)).hasMoreNew=!0,n.messages=w.default.clone(n.messages);for(var a={},s=0;s<t;s++){var r=n.messagesList[s];a[r]=!0;var o=n.messages[r].parentMessageId;o&&(a[o]=!0)}for(var i=t;i<n.messagesList.length;i++){var c=n.messagesList[i];a[c]||delete n.messages[c]}n.messagesList=n.messagesList.slice(0,t),this.setRaw(n)}}},{key:"addMoreMessageId",value:function(e){var t=this.getRaw();t.moreMessageIds.includes(e)||((t=w.default.clone(t)).moreMessageIds=t.moreMessageIds.concat([e]),this.setRaw(t))}}]),i);function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.state=e,this.channelId=t,this.key=[].concat(r,[this.channelId])}function p(e){var n=e.props,t=e.state,a=e.http,s=e.controller,r=n.channelId,o=n.before,i=n.after,c=n.around,u=P.get(t,r),l={},d="latest";c?(l={around:c},d="around"):o?(l={before:o},d="before"):i&&(l={after:i},d="after"),u.setProps({loading:!0,loadingFailed:!1,loadingParams:l,loadingMode:d}),"latest"!==d&&"around"!==d||(u.setProps({ready:!1,hasMore:!1,hasMoreNew:!1}),u.reset([])),a.get("/api/channels/"+r+"/messages",l).then(function(e){var t=e.result;s.getSignal("messages.fetchMessagesSuccess")({loadingParams:l,channelId:n.channelId,messages:t.items,hasMore:t.hasMore,hasMoreNew:t.hasMoreNew,parents:t.parents,quotes:t.quotes})},function(){s.getSignal("messages.fetchMessagesError")({loadingParams:l,channelId:n.channelId,error:"request error"})})}d.default={name:e,depends:[n.default,E.default,o.default,C.default,c.default],signals:{channelReady:[function(e){var t=e.props,l=e.state;(t.messagesItems||[]).forEach(function(e){var t=e.hasMore,n=e.items,a=e.parents,s=e.quotes,r=P.get(l,e.channelId);r.setProps({ready:!0,hasMore:t,hasMoreNew:void 0,loading:!1});var o=(0,w.default)(n).reverse().map(function(e){return R(l,e)}).value(),i=a.map(function(e){return R(l,e)}),c=s.map(function(e){return R(l,e)}),u=w.default.sortBy(o,function(e){return e.id});r.merge(u,[].concat(k(i),k(c)),!0)})}],connectionOpen:[function(e){var t=e.state,n=e.props,a=t.get("currentPath"),s=c.default.getChannelId(t),r=P.getRaw(t);!a||-1===a.indexOf("/workspace")&&-1===a.indexOf("/session_detail")||(s=t.get("channelId"));var o=n.lobbyChannels.find(function(e){return e.id===s}),i=o?o.liveChannelId:"";w.default.forEach(r,function(e){e.channelId===s||i&&e.channelId===i||P.clear(t,e.channelId)})}],fetchMessages:[p],fetchMessagesSuccess:[function(e){var n,t,a,s,r,o=e.props,i=e.state,c=o.loadingParams,u=o.channelId,l=o.hasMore,d=o.hasMoreNew,f=o.messages,p=o.parents,g=o.quotes,h=P.get(i,u),m=h.getRaw(),v=m.loading,_=m.loadingParams,y=m.loadingMode;v&&w.default.isEqual(_,c)&&(h.setProps({ready:!!["latest","around"].includes(y)||void 0,hasMore:["latest","around","before"].includes(y)?l:void 0,hasMoreNew:["around","after"].includes(y)?d:void 0,loading:!1}),n=(0,w.default)(f).reverse().map(function(e){return R(i,e)}).value(),t=p.map(function(e){return R(i,e)}),a=g.map(function(e){return R(i,e)}),s=JSON.parse(localStorage.getItem(M)),w.default.forEach(s,function(e){var t=JSON.parse(localStorage.getItem(T(e)));t&&t.channelId===u&&n.push(t)}),r=w.default.sortBy(n,function(e){return e.id}),"latest"===y?h.merge(r,[].concat(k(t),k(a)),!0):"around"===y?h.reset(r,[].concat(k(t),k(a))):"before"===y?h.merge(r,[].concat(k(t),k(a)),!0):"after"===y&&h.merge(r,[].concat(k(t),k(a)),!1))}],fetchMessagesError:[function(e){var t=e.props,n=e.state,a=t.loadingParams,s=t.channelId,r=P.get(n,s),o=r.getRaw(),i=o.loading,c=o.loadingParams;i&&w.default.isEqual(c,a)&&(r.setProps({loading:!1,loadingFailed:!0}),console.log("failed to get messages for channelId "+s+": ",t.error))}],loadMore:[function(e){for(var t=e.props,n=e.state,a=f(e,["props","state"]),s=t.channelId,r=P.get(n,s).getRaw(),o=r.messagesList,i=r.messages,c=void 0,u=0;u<o.length;u++){var l=o[u],d=i[l];if(d&&"SENT"===d.state){c=l;break}}c&&p(b({props:b({},t,{before:c}),state:n},a))}],loadMoreNew:[function(e){for(var t=e.props,n=e.state,a=f(e,["props","state"]),s=t.channelId,r=P.get(n,s).getRaw(),o=r.messagesList,i=r.messages,c=void 0,u=o.length-1;0<=u;u--){var l=o[u],d=i[l];if(d&&"SENT"===d.state){c=l;break}}c&&p(b({props:b({},t,{after:c}),state:n},a))}],channelCreate:[function(e){var t=e.state,n=e.props;P.get(t,n.id)}],channelSelect:[function(e){var t,n,a=e.props,s=e.state,r=e.controller,o=a.channelId,i=u.default.getChannel(s,o);i&&(i.liveChannelId&&((t=P.get(s,i.liveChannelId).getRaw()).loading||(t.ready?t.hasMoreNew||r.getSignal("messages.loadMoreNew")({channelId:i.liveChannelId}):r.getSignal("messages.fetchMessages")({channelId:i.liveChannelId}))),(n=P.get(s,o).getRaw()).loading||(n.ready?n.hasMoreNew||r.getSignal("messages.loadMoreNew")({channelId:o}):r.getSignal("messages.fetchMessages")({channelId:o})))}],channelDelete:[function(e){var t=e.props,n=e.state,a=t.id;P.clear(n,a)}],updateDimensions:[function(e){var t=e.props,n=e.state,a=e.controller,s=t.channelId,r=P.get(n,s).getRaw();r.ready&&!r.loading&&(r.hasMore&&o.default.scrolledToTop(n,s)?a.getSignal("messages.loadMore")({channelId:s}):r.hasMoreNew&&o.default.scrolledToBottom(n,s)&&a.getSignal("messages.loadMoreNew")({channelId:s}))}],messageCreate:[function(e){var t=e.props,n=e.state,a=e.controller,s=t.channelId,r=t.parentMessage,o=t.quotedMessage,i=R(n,t),c=P.get(n,s),u=c.getRaw();u.ready&&u.hasMoreNew?"SENDING"===i.state?a.getSignal("messages.fetchMessages")({channelId:s}):c.addMoreMessageId(i.id):(r&&c.merge([],[R(n,r)]),o&&c.merge([],[R(n,o)]),!(!i.nonce||!u.messages[i.nonce])?c.replace(i.nonce,i):c.merge([i]),i.nonce&&!t.fromAjaxCall&&i.contentParsedPlainText&&"voice"!==i.type&&i.contentParsedPlainText.length<=40&&Object.values((0,l.getPipe)(s)).forEach(function(e){return e(i)}))}],messageUpdate:[function(e){var t=e.props,n=e.state,a=t.channelId,s=R(n,t);P.get(n,a).update(s)}],messageDelete:[function(e){var t=e.props,n=e.state,a=R(n,t),s=a.channelId;P.get(n,s).update(a)}],sendMessage:[function(e){var t=e.props,n=e.state,s=e.controller,a=t.channelId,r=t.content,o=t.parentMessage,i=t.trackingId,c=n.get("messages.channels."+a)||{},u=E.default.getCurrentUser(n),l=n.get("messages.selectedWorkspaceId"),d=n.get("messages.workspaces."+l);!C.default.getMember(n,a,u.id)&&(d.residentId===u.id||"ticket"===c.type&&n.get("support.tickets.entities."+c.ticketId+".data.assignee"===u.id))&&(u=E.default.getUser(n,d.botId));var f,p,g,h,m,v=(f=n,p=a,g=r,h=o?o.id:"",m=u,{id:S.default.createNonce(),type:"normal",channelId:p,author:m||E.default.getCurrentUser(f),parentMessageId:h||"",quoteMessageId:"",replyMessageIds:[],replyUsers:[],lastReplyTimestamp:0,content:g,attachments:[],reactions:[],mentionEveryone:!1,mentions:[],state:"SENDING"}),_=P.get(n,a);o&&_.merge([],[o]);var y=O.default.getPendingQuoteMessage(n,a);y&&(_.merge([],[y]),s.getSignal("messages.unsetPendingQuote")({liveChannelId:a})),s.getSignal("messages.messageCreate")(v),I.default.enqueue({type:"send",message:{channelId:a,content:r,nonce:v.id,parentMessageId:v.parentMessageId,quoteMessageId:y?y.id:null}},function(e){var t,n,a;200===e.status?(t=b({},e.result,{fromAjaxCall:!0}),s.getSignal("messages.messageCreate")(i?b({},t,{trackingId:i}):t)):(n=e&&e.result&&e.result.target,a=e&&e.result&&e.result.errorCode,n&&"ticketChannelClosed"===n?s.getSignal("header.showMessage")({message:"support_ticket_resolved"}):"rate_error"===a?s.getSignal("header.showMessage")({message:e.result.messages}):s.getSignal("messages.sendMessageFailed")(i?b({},v,{trackingId:i}):v))})}],editMessage:[function(e){var t=e.props,n=e.controller,a=t.channelId,s=t.id,r=t.content;I.default.enqueue({type:"edit",message:{channelId:a,content:r,messageId:s}},function(e){200===e.status?(n.getSignal("messages.editMessageEnd")(),n.getSignal("messages.messageUpdate")(e.result)):n.getSignal("messages.editMessageEnd")()})}],editMessageEnd:[function(){}],deleteMessage:[function(e){var t=e.props,n=e.controller,a=t.messageId,s=t.deleteAsAdmin;I.default.enqueue({type:"delete",message:{messageId:a,deleteAsAdmin:s}},function(e){200===e.status?(n.getSignal("messages.deleteMessageEnd")(),n.getSignal("messages.messageUpdate")(e.result)):n.getSignal("messages.deleteMessageEnd")()})}],reSendMessage:[function(e){var t=e.props,n=e.controller,a=e.state,s=t.message,r=JSON.parse(localStorage.getItem(M)),o=r.indexOf(s.id);-1<o&&(r.splice(o,1),localStorage.setItem(M,JSON.stringify(r)),localStorage.removeItem(T(s.id))),P.get(a,s.channelId).unset(s),n.getSignal("messages.sendMessage")({channelId:s.channelId,content:s.content,parentMessageId:s.parentMessageId})}],messageReSendSuccess:[function(e){var t=e.props,n=e.state,a=t.oldMsgId,s=t.newMessage,r=s.channelId,o=R(n,s);P.get(n,r).replaceAfterReSend(a,o)}],sendMessageFailed:[function(e){var t=e.props,n=e.state,a=t,s=P.get(n,a.channelId);s.setMessageState(a.id,"SEND_FAILED");var r,o,i=s.getRaw().messages[a.id];i&&(r=T(a.id),(o=JSON.parse(localStorage.getItem(M))||[]).push(a.id),localStorage.setItem(M,JSON.stringify(o)),localStorage.setItem(r,JSON.stringify(i)))}],chooseMessage:[function(e){var t=e.props,n=e.state,a=t.messageId,s=t.channelId;P.get(n,s).setProps({scrollMessageId:a})}],unsetScrollMessage:[function(e){var t=e.props,n=e.state,a=t.channelId;P.get(n,a).setProps({scrollMessageId:""})}],setHighlightMessageId:[function(e){var t=e.props,n=e.state,a=t.channelId,s=t.messageId;P.get(n,a).setProps({highlightMessageId:s})}],unsetHighlightMessageId:[function(e){var t=e.props,n=e.state,a=t.channelId;P.get(n,a).setProps({highlightMessageId:""})}]},getState:function(){return{channelMessages:{}}},getMessages:function(e,t){return e.get([].concat(r,[t]))},getMessage:function(e,t,n){var a=this.getMessages(e,t);return a&&a.messages&&a.messages[n]},transformMessage:R}}).call(d,"views/v2/modules/messages/MessageStore.js")},function(e,n,r){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=t(r(5)),a=t(r(19));function t(e){return e&&e.__esModule?e:{default:e}}var u=["messages","selectedChannelIds"],s=["messages","needScrollTicker"];n.default={name:e,depends:[i.default],signals:{channelReady:[function(e){var t=e.state,n=e.props,a=e.controller,s=n.workspace,r=n.channelId,o=t.get(u),i=o?c({},o):{};i[s.id]=r,t.set(u,i),a.getSignal("messages.channelSelect")({channelId:r,workspaceId:s.id})}],connectionOpen:[function(e){var t=e.state,n=e.props.workspaces,a=t.get(u),s=a?c({},a):{};n.forEach(function(e){s[e.id]||(s[e.id]="")}),t.set(u,s)}],channelSelect:[function(e){var t=e.controller,n=e.props,a=e.state,s=n.channelId,r=n.workspaceId;a.get([].concat(u,[r]))!==s&&i.default.getChannel(a,s)&&a.set([].concat(u,[r]),s);var o=i.default.getChannel(a,s);o&&o.ticketId&&t.getSignal("support.getTicket")({id:o.ticketId})}],channelUnselect:[function(e){var t=e.state,n=e.props.workspaceId;t.get([].concat(u,[n]))&&t.set([].concat(u,[n]),"")}],channelDelete:[function(e){var t=e.props,n=e.state,a=e.controller,s=t;n.get([].concat(u,[s.workspaceId]))===s.id&&a.getSignal("messages.channelUnselect")({workspaceId:s.workspaceId})}],handleChannelScroll:[function(e){var t=e.state,n=t.get(s);t.set(s,n+1)}],openExplore:[function(e){var t=e.controller,n=e.props.workspaceId;t.getSignal("messages.channelUnselect")({workspaceId:n})}],openSupportTickets:[function(e){var t=e.controller,n=e.props.workspaceId;t.getSignal("messages.channelUnselect")({workspaceId:n})}],workspaceCreate:[function(e){var t=e.props;e.state.set([].concat(u,[t.id]),"")}],workspaceDelete:[function(e){var t=e.props,n=e.state,a=t;n.get([].concat(u,[a.id]))&&n.unset([].concat(u,[a.id]))}]},getState:function(){return{selectedChannelIds:{},needScrollTicker:0}},getChannelId:function(e,t){var n=(n=1<arguments.length&&void 0!==t?t:null)||a.default.getWorkspaceId(e);return e.get([].concat(u,[n]))}}}).call(n,"views/v2/modules/messages/SelectedChannelStore.js")},,function(e,t,n){e.exports=n(0)(1023)},function(e,t,n){e.exports=n(0)(12)},function(e,t,n){"use strict";e.exports=function(e){return Array.isArray(e)||(e=e.split(".")),e}},function(e,t,n){e.exports=n(0)(121)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.location.href=e}},function(e,g,h){"use strict";(function(e){Object.defineProperty(g,"__esModule",{value:!0});var t=l(["messages.finishLobbyGuideStatus"],["messages.finishLobbyGuideStatus"]),n=l(["messages.acceptChannelTermsStatus"],["messages.acceptChannelTermsStatus"]),a=l(["messages.fetchMemberStatus.",""],["messages.fetchMemberStatus.",""]),s=l(["channelId"],["channelId"]),r=h(1),o=h(2),i=u(h(3)),c=u(h(4));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=["messages","channelMembers"];function f(e,t){var n={id:e.id,userId:e.user.id,role:e.role,isBanned:e.isBanned||!1,isSupport:e.user.isSupport||!1};return t===e.user.id&&(n.showTerms=e.showTerms||!1,n.guideFinished=e.guideFinished||!1),n}function p(r){return function(e){var t=e.props,n=e.state,a=t.channelId,s=t.userId;n.get("messages.banStatus."+a)||n.set("messages.banStatus."+a,{}),n.set("messages.banStatus."+a+"."+s,r)}}g.default={name:e,depends:[],signals:{channelReady:[function(e){var n,t=e.props,a=e.state,s=t.normalChannels;s&&(n=a.get(d)||{},s.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,e.user.id)}),n[e.id]=t}),a.set(d,n))}],connectionOpen:[function(e){var t=e.props,n=e.state,a=t.privateChannels,s=t.publicChannels,r=t.lobbyChannels,o=t.liveChannels,i=t.userId,c={};a.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,i)}),c[e.id]=t}),s.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,i)}),c[e.id]=t}),r.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,i)}),c[e.id]=t}),o.forEach(function(e){var t={};e.members.forEach(function(e){t[e.user.id]=f(e,i)}),c[e.id]=t}),n.set(d,c)}],channelCreate:[function(e){var t,n,a=e.props,s=e.state;"direct"!==a.type&&(t={},n=c.default.getCurrentUserId(s),a.members&&a.members.forEach(function(e){t[e.user.id]=f(e,n)}),s.set([].concat(d,[a.id]),t))}],channelDelete:[function(e){var t=e.props,n=e.state;"direct"!==t.type&&n.unset([].concat(d,[t.id]))}],channelMemberAdd:[function(e){var t=e.props,n=e.state,a=[].concat(d,[t.channelId,t.user.id]),s=c.default.getCurrentUserId(n);n.set(a,f(t,s))}],channelMemberRemove:[function(e){var t=e.props,n=e.state,a=[].concat(d,[t.channelId,t.user.id]);n.unset(a)}],syncChannelMembers:[function(e){var t,n,a=e.props,s=e.state,r=a.result,o=a.status,i=a.channelId;200===o&&r&&(t={},n=c.default.getCurrentUserId(s),r.forEach(function(e){t[e.user.id]=f(e,n)}),s.set([].concat(d,[i]),t))}],finishLobbyGuide:[(0,o.set)((0,r.state)(t),i.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.userId;return n.post("/api/finishLobbyGuide",{userId:s}).then(a.success).catch(a.error)},{success:[(0,o.set)((0,r.state)(t),i.default.succeeded),function(e){var n,t=e.props,a=e.state,s=t.status,r=t.result;200===s&&r&&(n=c.default.getCurrentUserId(a),r.forEach(function(e){var t=[].concat(d,[e.channelId,e.user.id]);a.set(t,f(e,n))}))}],error:[(0,o.set)((0,r.state)(t),i.default.failed)]}]],acceptChannelTerms:[(0,o.set)((0,r.state)(n),i.default.inProgress),[function(e){var t=e.props,n=e.path,a=e.http,s=t.channelId;return a.post("/api/channels/"+s+"/acceptTerms",{}).then(n.success).catch(n.error)},{success:[(0,o.set)((0,r.state)(n),i.default.succeeded),function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelMemberAdd")(a)}],error:[(0,o.set)((0,r.state)(n),i.default.failed)]}]],addChannelMembers:[[function(e){var t=e.props,n=e.http,a=e.path,s=t.selectedChannelId,r=t.userIds,o=t.role;return n.post("/api/channels/"+s+"/members",{userIds:r,role:o}).then(a.success).catch(a.error)},{success:[function(e){var t,n=e.controller,a=e.props.result;a&&0!==a.length&&(t=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a.map(function(e){return e.memberCount}))),a.forEach(function(e){n.getSignal("messages.channelMemberAdd")({id:e.id,channelId:e.channelId,user:e.user,role:e.role,memberCount:t})}))}],error:[]}]],removeChannelMember:[[function(e){var t=e.props,n=e.path,a=e.http,s=t.channelId,r=t.userId;return a.post("/api/channels/"+s+"/members/"+r+"/remove").then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;n.getSignal("messages.channelMemberRemove")({channelId:t.channelId,user:{id:t.userId},memberCount:a.memberCount})}],error:[]}]],banChannelMember:[p(i.default.inProgress),[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.channelId,o=t.userId,i=n.get([].concat(d,[r,o]));return i&&!i.isBanned?a.post("/api/channels/"+r+"/members/"+o+"/ban").then(s.success).catch(s.error):s.dummy()},{success:[p(i.default.succeeded),function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelMemberAdd")(a)}],error:[p(i.default.failed)],dummy:[]}]],unbanChannelMember:[p(i.default.inProgress),[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.channelId,o=t.userId,i=n.get([].concat(d,[r,o]));return i&&i.isBanned?a.post("/api/channels/"+r+"/members/"+o+"/unban").then(s.success).catch(s.error):s.dummy()},{success:[p(i.default.succeeded),function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelMemberAdd")(a)}],error:[p(i.default.failed)],dummy:[]}]],leaveChannel:[function(e){var t=e.props,n=e.http,a=e.path,s=t.channelId;return n.post("/api/channels/"+s+"/leave",{}).then(a.success).catch(a.error)},{success:[],error:[]}],fetchChannelMember:[(0,o.set)((0,r.state)(a,(0,r.props)(s)),i.default.inProgress),function(e){var t=e.props,n=e.path,a=e.http,s=t.channelId;return a.get("/api/channels/"+s+"/members").then(n.success).catch(n.error)},{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncChannelMembers")(n)},(0,o.set)((0,r.state)(a,(0,r.props)(s)),i.default.succeeded)],error:[(0,o.set)((0,r.state)(a,(0,r.props)(s)),i.default.failed)]}],channelSelect:[function(e){var t=e.props,n=e.controller,a=t.channelId;n.getSignal("messages.fetchChannelMember")({channelId:a})}]},getState:function(){return{channelMembers:{}}},getMembers:function(e,t){return e.get([].concat(d,[t]))},getMember:function(e,t,n){return e.get([].concat(d,[t,n]))}}}).call(g,"views/v2/modules/messages/ChannelMemberStore.js")},function(e,t,n){e.exports=n(0)(609)},function(e,t,n){e.exports=n(0)(165)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.i18n=r,t.default=function(n){return function(e){return e.prototype.__=function(e,t){return r(this.context,n,e,t)},e}};var v=s(n(127)),_=s(n(130)),a=s(n(38));function s(e){return e&&e.__esModule?e:{default:e}}var y=/\{.+?}/,b=/[~*_]{2}.+?[~*_]{2}|\[.+?]\(.+?\)|:([^\s:]+?):|\n\n/,w="";function r(e,t,n,a){var s=e.locale,r=e.i18nOverrides,o=e.i18nKeyOnly,i=e.utcOffset,c=e.cookies.utcOffset,u=t[n];if(!u)return n;if(o)return u;var l=w||c||i,d=t.__i18nPlugin||"undefined"!=typeof window&&window.__i18nPlugin;if(s){var f=r&&r[s]&&r[s][u]||d&&d[s]&&d[s][u];if(f){var p=y.test(f),g=!0;a&&a.noMarkDown&&(g=!1);var h=g&&b.test(f);if(p||h)try{var m=(0,v.default)(f,s,l);return h?(0,_.default)(m.format(a),a):m.format(a)}catch(e){return console.error("fail to parse intl message, key: "+u+", result: "+f,e),f}return f}}return n}"undefined"!=typeof window&&(w=""+-(new Date).getTimezoneOffset(),a.default.set("utcOffset",w,{expires:7}))},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var r="\n  font-weight: bold;\n  color: purple;\n",s=(function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(o,[{key:"log",value:function(e){for(var t,n=arguments.length,a=Array(1<n?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];(t=console)[e||"log"].apply(t,["%c["+this.name+"]",r].concat(a))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,["info"].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,["warn"].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,["error"].concat(t))}},{key:"trace",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,["trace"].concat(t))}}]),o);function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.name=e,this.log=this.log.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this),this.trace=this.trace.bind(this)}var i=new s;t.default={create:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(s,[null].concat(t)))},log:i.log,info:i.info,warn:i.warn,error:i.error,trace:i.trace}},function(e,n,a){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var r=t(a(28)),o=t(a(19));function t(e){return e&&e.__esModule?e:{default:e}}var i=["messages","selectedWorkspaceId"];n.default={name:e,depends:[r.default],signals:{connectionOpen:[function(e){var t,n=e.props,a=e.state;a.get(i)||((t=n.workspaces.find(function(e){return!e.organizationId}))?a.set(i,t.id):a.set(i,null))}],workspaceSelect:[function(e){var t=e.props,n=e.state,a=t.workspaceId;n.get(i)!==a&&r.default.getWorkspace(n,a)&&n.set(i,a)}],workspaceUnselect:[function(e){var t=e.state,n=e.controller,a=t.get(i),s=r.default.getDefaultWorkspace(t);a&&s&&n.getSignal("messages.workspaceRouted")({workspaceId:s.id})}],workspaceDelete:[function(e){var t=e.props,n=e.state,a=e.controller;n.get(i)===t.id&&a.getSignal("messages.workspaceUnselect")()}],channelSelect:[function(e){var t=e.props,n=e.controller,a=e.state,s=t.workspaceId;o.default.getWorkspaceId(a)!==s&&r.default.getWorkspace(a,s)&&n.getSignal("messages.workspaceSelect")({workspaceId:s})}],openExplore:[function(e){var t=e.props,n=e.controller,a=e.state,s=t.workspaceId;o.default.getWorkspaceId(a)!==s&&r.default.getWorkspace(a,s)&&n.getSignal("messages.workspaceSelect")({workspaceId:s})}],openSupportTickets:[function(e){var t=e.props,n=e.controller,a=e.state,s=t.workspaceId;o.default.getWorkspaceId(a)!==s&&r.default.getWorkspace(a,s)&&n.getSignal("messages.workspaceSelect")({workspaceId:s})}],showSupportView:[function(e){e.state.set(i,"")}]},getState:function(){return{selectedWorkspaceId:null}},getWorkspaceId:function(e){return e.get(i)}}}).call(n,"views/v2/modules/messages/SelectedWorkspaceStore.js")},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=u(n(12)),s=u(n(10)),r=u(n(37)),i=u(n(8)),c=u(n(38));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d="";"undefined"!=typeof window&&(d=""+-(new Date).getTimezoneOffset(),c.default.set("utcOffset",d,{expires:7}));var f=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,s.default.Component),p.contextTypes={locale:a.default.string,i18nOverrides:a.default.object,i18nKeyOnly:a.default.string,utcOffset:a.default.string,cookies:a.default.object},o=function(){this.moment=function(){var e=r.default.apply(void 0,arguments);d?e.utcOffset(parseInt(d,10)):this.context.cookies.utcOffset?e.utcOffset(parseInt(this.context.cookies.utcOffset,10)):this.context.utcOffset&&e.utcOffset(parseInt(this.context.utcOffset,10));var t=i.default.MOMENT_LOCALE[this.context.locale];return t&&e.locale(t),e}.bind(this),this.duration=function(){var e=r.default.duration.apply(r.default,arguments),t=i.default.MOMENT_LOCALE[this.context.locale];return t&&e.locale(t),e}.bind(this)},p);function p(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var a=arguments.length,s=Array(a),r=0;r<a;r++)s[r]=arguments[r];return t=n=l(this,(e=p.__proto__||Object.getPrototypeOf(p)).call.apply(e,[this].concat(s))),o.call(n),l(n,t)}t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTouch=function(){return window.matchMedia("screen and (max-width: "+(a-1)+"px)").matches},t.isDesktop=function(){return window.matchMedia("screen and (min-width: "+a+"px)").matches},t.isDevice=function(){return void 0===r?r=s.test(navigator.userAgent):r};var a=1e3;var s=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/,r=void 0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,r.default)(e);return function(e){return e.prototype.ss=function(){return t.apply(void 0,arguments)},e}};var a,s=n(125),r=(a=s)&&a.__esModule?a:{default:a}},function(e,t,n){"use strict";var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=(a(i,[{key:"get",value:function(e){var t=localStorage.getItem(e);try{t=JSON.parse(t)}catch(e){}return t}},{key:"set",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"clear",value:function(){localStorage.clear()}}]),i);function i(){r(this,i)}var c=(a(u,[{key:"get",value:function(e){return this.storage[e]}},{key:"set",value:function(e,t){this.storage[e]=t}},{key:"remove",value:function(e){delete this.storage[e]}},{key:"clear",value:function(){this.storage={}}}]),u);function u(){r(this,u),this.storage={}}e.exports=new(function(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),1}catch(e){return}}()?o:c)},function(e,l,d){"use strict";(function(e){Object.defineProperty(l,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["header.doAddEmailStatus"],{raw:{value:Object.freeze(["header.doAddEmailStatus"])}})),n=d(2),a=d(1),s=o(d(3)),r=o(d(13));function o(e){return e&&e.__esModule?e:{default:e}}var i="header.emailRequiredDialog";function c(e){var t=e.state,n=e.path;return!0!==(t.get("loginUser")||{}).emailRequired?n.yes():n.no()}function u(e){e.state.set(i,{open:!0})}l.default={name:e,depends:[],signals:{openEmailRequiredDialog:[u],closeEmailRequiredDialog:[function(e){e.state.set(i,{open:!1})}],doAddEmail:[(0,n.set)((0,a.state)(t),s.default.inProgress),function(e){var t=e.state.get("currentUrl"),n="/auth/email?redirect_to="+encodeURIComponent(t);(0,r.default)(n)}]},getState:function(){return{emailRequiredDialog:{open:!1}}},EmailRequired:function(e){return[c,{yes:[Array.isArray(e)?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)):[e]],no:[u]}]}}}).call(l,"views/modules/common/header/EmailCheckStore.js")},function(e,t,n){e.exports=n(0)(1700)},function(e,d,f){"use strict";(function(e){Object.defineProperty(d,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["header.doTfaStatus"],{raw:{value:Object.freeze(["header.doTfaStatus"])}})),n=f(2),a=f(1),s=i(f(3)),r=i(f(13)),o=i(f(8));function i(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e){var t=e.state,n=e.path;if(!0!==o.default.TFA_ENABLED)return n.yes();var a=(t.get("loginUser")||{}).tfaEndTime;return a&&new Date(a).getTime()>Date.now()?n.yes():n.no()}function l(e){e.state.set("header.tfaConfirmDialog",{open:!0})}d.default={name:e,depends:[],signals:{closeTfaConfirmDialog:[function(e){e.state.set("header.tfaConfirmDialog",{open:!1})}],closeTfaNotifyDialog:[function(e){e.state.set("header.tfaNotifyDialog",{open:!1})}],doTfa:[(0,n.set)((0,a.state)(t),s.default.inProgress),function(e){var t=e.state.get("currentUrl"),n="/auth/tfa?redirect_to="+encodeURIComponent(t);(0,r.default)(n)}],openNeedReviewDialog:[function(e){e.state.set("header.needReviewDialog",{open:!0})}],closeNeedReviewDialog:[function(e){e.state.set("header.needReviewDialog",{open:!1})},function(e){var t=e.state.get("loginUser"),n=t?"/u/"+t.id:"/";(0,r.default)(n)}]},getState:function(){return{tfaConfirmDialog:{open:!1},tfaNotifyDialog:{open:!1},needReviewDialog:{open:!1}}},TfaRequired:function(e){return[u,{yes:[Array.isArray(e)?[].concat(c(e)):[e]],no:[l]}]},TfaNotified:function(e,t){var n;return[u,{yes:[Array.isArray(e)?[].concat(c(e)):[e]],no:[(n=t,function(e){var t=e.props;e.state.set("header.tfaNotifyDialog",{open:!0,signalPath:n,actionProps:t})})]}]}}}).call(d,"views/modules/common/header/TfaStore.js")},function(e,u,l){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t=i(["messages.connected"],["messages.connected"]),n=i(["messages.sessionId"],["messages.sessionId"]),a=i(["sessionId"],["sessionId"]),s=i(["messages.disconnected"],["messages.disconnected"]),r=l(2),o=l(1);function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=void 0;u.default={name:e,depends:[],signals:{connectionOpen:[(0,r.set)((0,o.state)(t),!0),(0,r.set)((0,o.state)(n),(0,o.props)(a)),(0,r.set)((0,o.state)(s),!1)],connectionClosed:[(0,r.set)((0,o.state)(t),!1),function(e){var n,t=e.props,a=e.state,s=t.retryInMilliSeconds;void 0===s?a.set("messages.disconnected",!0):"number"==typeof s&&(a.set("messages.disconnected",s),n=Date.now()+s,function e(){c&&(clearTimeout(c),c=null);var t=n-Date.now();t<1e3&&(t=1e3),"number"==typeof a.get("messages.disconnected")&&(a.set("messages.disconnected",t),c=setTimeout(e,500))}())}],connectionReconnecting:[(0,r.set)((0,o.state)(s),"reconnecting")],forceReload:[function(e){var t=e.props.delay;setTimeout(function(){window.location.reload()},t)}]},getServices:function(){},getState:function(){return{connected:!1,sessionId:"",disconnected:!1}},isConnected:function(e){return e.get("messages.connected")},getSessionId:function(e){return e.get("messages.sessionId")}}}).call(u,"views/v2/modules/messages/ConnectionStore.js")},function(e,_,y){"use strict";(function(e){Object.defineProperty(_,"__esModule",{value:!0});var t,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n=p(["messages.showSearchOrgs"],["messages.showSearchOrgs"]),a=p(["messages.createWorkspaceStatus.",""],["messages.createWorkspaceStatus.",""]),s=p(["organizationId"],["organizationId"]),r=p(["messages.joinWorkspaceStatus.",""],["messages.joinWorkspaceStatus.",""]),i=p(["messages.licenseExpireDisplay"],["messages.licenseExpireDisplay"]),c=p(["display"],["display"]),u=y(2),l=y(1),d=y(3),f=(t=d)&&t.__esModule?t:{default:t};function p(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=["messages","workspaces"],h=["messages","organizations"];function m(e){return{id:e.id,organizationId:e.organizationId,name:e.name,licenseActive:e.licenseActive,trialExpireTime:e.trialExpireTime,supportQuota:e.supportQuota,supportBalance:e.supportBalance,botId:e.botId,residentId:e.residentId}}function v(t){return function(e){e.state.set("messages.searchOrgStatus",t)}}_.default={name:e,depends:[],signals:{channelReady:[function(e){var t=e.props,n=e.state,a=t.workspace,s=n.get(g),r=s?o({},s):{};r[a.id]=m(a),n.set(g,r)}],connectionOpen:[function(e){var t=e.props,n=e.state,a=t.workspaces,s=n.get(g),r=s?o({},s):{};a.forEach(function(e){r[e.id]=m(e)}),n.set(g,r)}],searchOrganizations:[v(f.default.inProgress),(0,u.set)((0,l.state)(n),!0),[function(e){var t=e.http,n=e.path;return t.get("/api/organizations").then(n.success).catch(n.error)},{success:[v(f.default.succeeded),function(e){var t=e.props,n=e.state,a=t.status,s=t.result,r={};200===a&&s&&(s.forEach(function(e){r[e.id]=e}),n.set(h,r))}],error:[v(f.default.failed)]}]],createWorkspace:[(0,u.set)((0,l.state)(a,(0,l.props)(s)),f.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.organizationId;return n.post("/api/workspace",{organizationId:s}).then(a.success).catch(a.error)},{success:[(0,u.set)((0,l.state)(a,(0,l.props)(s)),f.default.succeeded),function(e){var t=e.props,n=e.controller,a=t.status,s=t.result;200===a&&s&&n.getSignal("messages.workspaceCreate")(o({},s,{open:!0}))}],error:[(0,u.set)((0,l.state)(a,(0,l.props)(s)),f.default.failed)]}]],joinWorkspace:[(0,u.set)((0,l.state)(r,(0,l.props)(s)),f.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.workspaceId;return n.post("/api/workspaces/"+s+"/join",{}).then(a.success).catch(a.error)},{success:[(0,u.set)((0,l.state)(r,(0,l.props)(s)),f.default.succeeded),function(e){var t=e.props,n=e.controller,a=t.status,s=t.result;200===a&&s&&n.getSignal("messages.workspaceCreate")(o({},s,{open:!0}))}],error:[(0,u.set)((0,l.state)(r,(0,l.props)(s)),f.default.failed)]}]],workspaceSelect:[v(f.default.initial),(0,u.set)((0,l.state)(n),!1)],channelSelect:[(0,u.set)((0,l.state)(n),!1)],openExplore:[(0,u.set)((0,l.state)(n),!1)],workspaceRouted:[(0,u.set)((0,l.state)(n),!1)],showSupportView:[(0,u.set)((0,l.state)(n),!1)],workspaceCreate:[function(e){var t=e.props,n=e.state,a=e.controller,s=t,r={};r[s.id]=m(s),n.merge(g,r),s&&s.open&&a.getSignal("messages.workspaceSelect")({workspaceId:s.id})}],workspaceDelete:[function(e){var t=e.props,n=e.state,a=t;n.get([].concat(g,[a.id]))&&n.unset([].concat(g,[a.id]))}],toggleLicenseExpire:[(0,u.set)((0,l.state)(i),(0,l.props)(c))]},getState:function(){return{workspaces:{},searchOrgStatus:f.default.initial,showSearchOrgs:!1,createWorkspaceStatus:{},joinWorkspaceStatus:{},licenseExpireDisplay:!1}},getWorkspace:function(e,t){return e.get([].concat(g,[t]))},getWorkspaces:function(e){return e.get(g)},getDefaultWorkspace:function(e){var t=e.get(g);return Object.values(t).find(function(e){return""===e.organizationId})}}}).call(_,"views/v2/modules/messages/WorkspaceStore.js")},function(e,t,n){e.exports=n(0)(409)},function(e,t,n){"use strict";function o(){var e=window.Notification;return!!e&&"granted"===e.permission}Object.defineProperty(t,"__esModule",{value:!0}),t.default={hasPermission:o,permissionDenied:function(){var e=window.Notification;return!e||"denied"===e.permission},requestPermission:function(){var e=window.Notification;return e?e.requestPermission():new Promise(function(e){e("denied")})},showNotification:function(e,t,n,a){if(!o())return null;var s=a&&a.tag||null,r=new Notification(t,{body:n,icon:e,tag:s});return setTimeout(function(){return r.close()},1e4),r.onclick=function(){a.onClick&&a.onClick(),r.close()},r}}},function(e,p,g){"use strict";(function(e){Object.defineProperty(p,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=Object.freeze(Object.defineProperties(["header.login"],{raw:{value:Object.freeze(["header.login"])}})),n=g(2),a=g(1),u=s(g(8)),l=s(g(13)),d=g(21);function s(e){return e&&e.__esModule?e:{default:e}}var o=["header","login"],i={open:!1};function c(e){var t,n,a=e.props,s=e.state,r=e.controller,o=a.url||s.get("currentUrl"),i=!!a.isReg,c=s.get("loginUser");(0,d.isDevice)()||!0!==u.default.LOGIN_POPUP||null!==c?(t=window&&window.location||{},n=o||t.pathname,null===c?i?(0,l.default)("/auth/signup?redirect_to="+encodeURIComponent(n)):(0,l.default)("/auth/login?redirect_to="+encodeURIComponent(n)):(0,l.default)(n)):r.getSignal("header.openLoginWindow")({url:o,isReg:i})}function f(e){var t=e.state,n=e.path;return t.get("loginUser")?n.yes():n.no()}p.default={name:e,depends:[],signals:{loginTo:[c],openLoginWindow:[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.url,o=t.isReg,i={redirect_to:r||n.get("currentUrl"),locale:n.get("locale")};return o&&(i.is_reg=!0),a.get("/api/authUrl",i).then(s.success).catch(s.error)},{success:[function(e){var t,n=e.props,a=e.state,s=n.result;200===n.status&&s&&(t=s.url,a.set([].concat(o),r({},i,{open:!0,url:t})))}],error:[]}],closeLoginWindow:[(0,n.set)((0,a.state)(t),i)]},getServices:function(){},getState:function(){return{login:i}},LoginRequired:function(e){return[f,{yes:[Array.isArray(e)?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)):[e]],no:[c]}]}}}).call(p,"views/modules/common/header/LoginStore.js")},function(e,t,n){"use strict";function a(e){return null!=e}function s(e){return""===e}function r(e,t){return!a(e)||s(e)||t.test(e)}var o={isValue:function(e){return!(void 0===e||""===e||null===e||!1===e||Array.isArray(e)&&!e.length)},isExisty:a,matchRegexp:function(e,t,n){return r(e,n)},isUndefined:function(e){return void 0===e},isEmptyString:s,isEmail:function(e){return r(e,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(e,t){return o.matchRegexp(e,t,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(e){return!0===e},isFalse:function(e){return!1===e},isNumeric:function(e){return"number"==typeof e||r(e,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(e){return r(e,/^[A-Z]+$/i)},isAlphanumeric:function(e){return r(e,/^[0-9A-Z]+$/i)},isInt:function(e){return r(e,/^(?:[-+]?(?:0|[1-9]\d*))$/)},minInt:function(e,t,n){return!!(o.isInt(e)&&n<=e)},isPhone:function(e){return r(e,/^1\d{10}$/)},isFloat:function(e){return r(e,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(e){return r(e,/^[A-Z\s]+$/i)},isSpecialWords:function(e){return r(e,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(e,t,n){return!a(e)||s(e)||e.length===n},equals:function(e,t,n){return!a(e)||s(e)||e===n},equalsField:function(e,t,n){return e===t[n].value},maxLength:function(e,t,n){return!a(e)||e.length<=n},minLength:function(e,t,n){return!a(e)||s(e)||e.length>=n}};e.exports=o},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var l=["messages","dimensions"];t.default={name:e,depends:[],signals:{updateDimensions:[function(e){var t=e.props,n=e.state,a=t.channelId,s=t.isScroll,r=t.scrollTop,o=t.scrollHeight,i=t.offsetHeight,c=[].concat(l,[a]),u=n.get(c);u&&u.isScroll===s&&u.scrollTop===r&&u.scrollHeight===o&&u.offsetHeight===i||n.set(c,{channelId:a,isScroll:s,scrollTop:r,scrollHeight:o,offsetHeight:i})}]},getState:function(){return{dimensions:{}}},isAtTop:function(e,t){var n=[].concat(l,[t]),a=e.get(n);if(!a)return!1;var s=a.scrollTop,r=a.scrollHeight,o=a.offsetHeight;return 0===s&&s<r-1-o},scrolledToTop:function(e,t){var n=[].concat(l,[t]),a=e.get(n);if(!a)return!1;var s=a.scrollTop,r=a.isScroll,o=a.scrollHeight,i=a.offsetHeight;return 0===s&&r&&s<o-1-i},isAtBottom:function(e,t){var n=[].concat(l,[t]),a=e.get(n);if(!a)return!1;var s=a.scrollTop;return a.scrollHeight-1-a.offsetHeight<=s},scrolledToBottom:function(e,t){var n=[].concat(l,[t]),a=e.get(n);if(!a)return!1;var s=a.scrollTop,r=a.scrollHeight,o=a.offsetHeight,i=a.isScroll;return r-1-o<=s&&i},getDimensions:function(e,t){var n=[].concat(l,[t]);return e.get(n)}}}).call(t,"views/v2/modules/messages/DimensionStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=["messages","channelJobs"];function c(e){var t=e.channelJobInfo;return t?{id:t.id,title:t.title,channelId:e.id,freelancerId:t.freelancerId}:null}t.default={name:e,depends:[],signals:{channelReady:[function(e){var t,n,a=e.props,s=e.state,r=a.normalChannels,o=r&&r.find(function(e){return"private"===e.type&&!!e.proposalId});!o||(t=c(o))&&((n={})[o.id]=t,s.set(i,n))}],connectionOpen:[function(e){var t=e.props,n=e.state,a=t.privateChannels,s={};a.forEach(function(e){var t;!e.proposalId||(t=c(e))&&(s[e.id]=t)}),n.set(i,s)}],channelCreate:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&t.channelJobInfo&&n.set([].concat(i,[t.id]),c(t))}],channelDelete:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&n.unset([].concat(i,[t.id]))}]},getState:function(){return{channelJobs:{}}},getChannelJob:function(e,t){return e.get([].concat(i,[t]))}}}).call(t,"views/v2/modules/messages/ChannelJobStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AxiosProviderFactory=function(e){var t=o;a.default.PROXY_HOST&&(t.proxy={host:a.default.PROXY_HOST,port:a.default.PROXY_PORT});e&&(t=(0,c.merge)(t,e));var n=null;return function(){return n=n||r(t)}};var i=s(n(51)),c=n(97),a=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}function r(e){var s=0<arguments.length&&void 0!==e?e:{};function r(e){return{result:e.data,status:e.status,headers:e.headers}}function o(e){if(e.response){var t=e.response,n=t.data,a=t.status,s=t.headers;return Promise.reject({message:e.message,code:e.code,result:n,status:a,headers:s})}return Promise.reject({message:e.message,code:e.code})}return{get:function(e,t,n){var a=2<arguments.length&&void 0!==n?n:{};return a.params=t,i.default.get(e,(0,c.merge)(s,a)).then(r,o)},put:function(e,t,n){var a=2<arguments.length&&void 0!==n?n:{};return i.default.put(e,t,(0,c.merge)(s,a)).then(r,o)},post:function(e,t,n){var a=2<arguments.length&&void 0!==n?n:{};return i.default.post(e,t,(0,c.merge)(s,a)).then(r,o)},delete:function(e,t,n){var a=2<arguments.length&&void 0!==n?n:{};return a.params=t,i.default.delete(e,(0,c.merge)(s,a)).then(r,o)}}}var o={baseURL:a.default.REQUEST_BASE_URL,timeout:a.default.REQUEST_TIMEOUT,headers:{"X-Requested-With":"XMLHttpRequest"}},u=r(o);t.default=u},function(e,t,n){e.exports=n(0)(65)},,function(e,t,n){e.exports=n(0)(1015)},function(e,t,n){e.exports=n(0)(1122)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=n||{};var a=Object.keys(n).map(function(e){return e+"="+n[e]}).join(",");return window.open(e,t,a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chains=t.isValidatingForm=t.isValidForm=t.Form=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.Forms=function(){return(0,o.default)()};var r=v(n(32)),s=n(175),o=v(n(176)),i=v(n(65)),c=v(n(190)),u=v(n(192)),l=v(n(58)),d=v(n(62)),f=v(n(61)),p=v(n(66)),g=v(n(67)),h=v(n(64)),m=v(n(59));function v(e){return e&&e.__esModule?e:{default:e}}r.default.requiredIfFieldEquals=function(e,t,n){var a=n.field,s=n.value;return t[a].value!==s||r.default.isValue(e)},r.default.lessZero=function(e){return!!r.default.isNumeric(e)&&("number"==typeof e?0<=e:0<=parseFloat(e))},r.default.lessOne=function(e){return!!r.default.isNumeric(e)&&("number"==typeof e?1<=e:1<=parseInt(e,10))},r.default.moreHundred=function(e){return!!r.default.isNumeric(e)&&("number"==typeof e?e<=100:parseInt(e,10)<=100)},r.default.maxSkills=function(e){return!(e instanceof Array)||e.length<=10},r.default.isLocation=function(e){return!!(e&&e instanceof Object&&""!==e.country)},r.default.isWebsite=function(e){return!(e&&("string"!=typeof e||!/^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i.test(e)))},r.default.isSocialUrl=function(e,t,n){return!(e&&("string"!=typeof e||!(0,s.testSocialUrl)(n)(e)))},r.default.isAssetstoreUrl=function(e){return!(e&&("string"!=typeof e||!/^(https?:\/\/)?(www\.)?assetstore.unity3d.com\/.+$/i.test(e)))},r.default.isPathOfWebsite=function(e,t,n){var a={applestore:/(https?:\/\/)?(itunes\.)?(apple)\.(com)\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i,googleplay:/(https?:\/\/)?(play\.)?(google)\.(com)\/store\/apps\/details\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i,steam:/(https?:\/\/)?(store\.)?(steampowered)\.(com)\/app\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i,url:/(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i};return!(e&&("string"!=typeof e||!(a[n||"url"]||a.url).test(e)))},r.default.isNotLess=function(e,t,n){return!(t[n].value&&e&&parseInt(t[n].value,10)>parseInt(e,10))},r.default.isNotLarger=function(e,t,n){return!(t[n].value&&e&&parseInt(t[n].value,10)<parseInt(e,10))},r.default.isNotLessThan=function(e,t,n){return!(parseInt(e,10)<parseInt(n,10))},r.default.isHour=function(e){return!e||!!r.default.isNumeric(e)&&("number"!=typeof e&&(e=parseInt(e,10)),0<=e&&e<=23)},r.default.isMinute=function(e){return!e||!!r.default.isNumeric(e)&&("number"!=typeof e&&(e=parseInt(e,10)),0<=e&&e<=59)},r.default.anyUpperCase=function(e){return!(e&&("string"!=typeof e||!/[A-Z]+/g.test(e)))},r.default.anyLowerCase=function(e){return!(e&&("string"!=typeof e||!/[a-z]+/g.test(e)))},r.default.anyNumber=function(e){return!(e&&("string"!=typeof e||!/\d/g.test(e)))},r.default.isScale=function(e){return!!(e&&"object"===(void 0===e?"undefined":a(e))&&"from"in e&&"to"in e)&&!(0===e.from&&!e.to)},r.default.notNullDepends=function(e,t,n){return!(e&&!t[n].value)},r.default.typeInArray=function(e,t,n){if(e&&e instanceof Array)switch(n){case"boolean":return-1!==e.findIndex(function(e){return"boolean"==typeof e});case"number":return-1!==e.findIndex(function(e){return"number"==typeof e});case"object":return-1!==e.findIndex(function(e){return"object"===(void 0===e?"undefined":a(e))});case"string":default:return-1!==e.findIndex(function(e){return"string"==typeof e&&""!==e.trim()})}return!1},r.default.isUdpPackageName=function(e){return!(e&&("string"!=typeof e||!/^([a-z]{1}[a-z\d_]*\.)*[a-z][a-z\d_]*$/.test(e)))},r.default.isPrice=function(e){return!(e&&("string"!=typeof e||!/(^[0-9]\d*(\.\d{1,2})?$)|(^0(\.\d{1,2})?$)/g.test(e)))},r.default.isPositive=function(e){return!e||!!r.default.isNumeric(e)&&("number"==typeof e?0<e:0<parseFloat(e))},r.default.isGameCredit=function(e){return!(e&&("string"!=typeof e||!/(^[1-9]\d*(\.\d{1,8})?$)|(^0(\.\d{1,8})?$)/g.test(e)))},r.default.isApkVersion=function(e){return!(e&&("string"!=typeof e||!/^\d+(\.\d+)+$/g.test(e)))},r.default.isUdpCallbackUrl=function(e){return!(e&&("string"!=typeof e||!/^(https?:\/\/[\w-]+(\.[\w-]+)+(:\d+)?((\/|\/[\w-]+)?)*(\?[\w-]+=[\w-]+((&[\w-]+=[\w-]+)?)*)?)?$/.test(e)))},r.default.isUdpIapSlug=function(e){return!(e&&("string"!=typeof e||!/^[a-z0-9][a-z0-9_.]*$/.test(e)))},r.default.urlInArray=function(e){if(e&&e instanceof Array&&!e.find(function(e){return!e.url}))return!0;return!1},r.default.isSlug=function(e){return null!=e&&/^[\w-]*$/g.test(e)},r.default.isObjectEmpty=function(e){return 0<Object.keys(e||{}).length},r.default.isObjectLength=function(e,t,n){return Object.keys(e||{}).length===n};t.Form=i.default,t.isValidForm=c.default,t.isValidatingForm=u.default,t.chains={fieldAdded:l.default,fieldChanged:d.default,fieldRemoved:f.default,formValidated:p.default,reset:g.default,validate:h.default,addField:m.default}},function(e,t,n){"use strict";var l=n(60),d=n(43);e.exports=function(e,t){if(!("value"in t))return t;var n=t.isValue||["isValue"],a=t.isRequired||!1,s=t.value,r=t.defaultValue||s,o=t.validations||null,i=t.errorMessages||[],c=l(e,s,n),u=d(e,s,o);return t.value=s,t.defaultValue=r,t.validations=o,t.isValid=!a&&!c||u.isValid,t.errorMessages=i,t.errorMessage=u.isValid?null:i[u.failedRule],t.isValue=n,t.isRequired=a,t.hasValue=c,t.isTouched=c,t}},function(e,t,n){"use strict";var o=n(32);e.exports=function(s,r,e){var t={isValid:!0,failedRuleIndex:null};return e?Array.isArray(e)?e.reduce(function(e,n,t){if(!e.isValid)return e;if("string"==typeof n){var a=n.split(/:(.+)?/);if(n={},a[1])try{n[a[0]]=JSON.parse(a[1])}catch(e){n[a[0]]=a[1]}else n[a[0]]=void 0}return{isValid:Object.keys(n).reduce(function(e,t){return!!e&&(o[t]||function(){console.warn("Rule "+t+" is not found")})(r,s,n[t])},!0),failedRuleIndex:t}},t):void 0:t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playSound=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=s[e];n||(n=function(e){var t=document.createElement("audio");return t.src=a(239)("./"+e+".mp3"),t.preload=!0,t}(e),s[e]=n);n.volume=t,n.load(),n.play()};var s={}},function(e,s,o){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t,n=o(250),a=(t=n)&&t.__esModule?t:{default:t};var r=["messages","window"];s.default={name:e,depends:[],signals:{windowIsMaster:[function(e){var t=e.props,n=e.state,a=t.isMaster;n.get([].concat(r,["isMaster"]))!==a&&n.set([].concat(r,["isMaster"]),a)}],windowVisible:[function(e){var t=e.props,n=e.state,a=t.visible;n.get([].concat(r,["visible"]))!==a&&n.set([].concat(r,["visible"]),a)}],windowFocused:[function(e){var t=e.props,n=e.state,a=t.focused;n.get([].concat(r,["focused"]))!==a&&n.set([].concat(r,["focused"]),a)}],windowResized:[function(e){var t=e.props,n=e.state,a=t,s=n.get([].concat(r,["size"]));s.width===a.width&&s.height===a.height||n.set([].concat(r,["size"]),a)}],connectionOpen:[function(e){var t=e.state,n={width:window.innerWidth,height:window.innerHeight};t.set([].concat(r,["size"]),n)}]},getServices:function(n){n.on("initialized",function(){window.addEventListener("resize",function(){n.getSignal("messages.windowResized")({width:window.innerWidth,height:window.innerHeight})});var e=o(251);e.change(function(){n.getSignal("messages.windowVisible")({visible:!e.hidden()})}),window.addEventListener("focus",function(){n.getSignal("messages.windowFocused")({focused:!0})}),window.addEventListener("blur",function(){n.getSignal("messages.windowFocused")({focused:!1})}),(new a.default).on("change",function(e){var t=e.isMaster;n.getSignal("messages.windowIsMaster")({isMaster:t})})})},getState:function(){return{window:{isMaster:!1,visible:!0,focused:!0,size:{width:0,height:0}}}},isVisible:function(e){return e.get([].concat(r,["visible"]))},isFocused:function(e){return e.get([].concat(r,["focused"]))},getSize:function(e){return e.get([].concat(r,["size"]))}}}).call(s,"views/v2/modules/messages/WindowStore.js")},function(e,m,v){"use strict";(function(e){Object.defineProperty(m,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=f(["messages.mentionInfo.firstLoad"],["messages.mentionInfo.firstLoad"]),n=f(["firstLoad"],["firstLoad"]),a=f(["messages.fetchInfoStatus.mention"],["messages.fetchInfoStatus.mention"]),s=f(["messages.showInfoType"],["messages.showInfoType"]),r=v(2),o=v(1),d=u(v(6)),i=u(v(4)),c=u(v(3));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var g=[].concat(["messages"],["mentionInfo"]);function h(e){var t=e.props,n=e.state,a=d.default.transformMessage(n,t);a.mentioned&&a.nonce?n.set([].concat(p(g),["items",a.id]),a):n.unset([].concat(p(g),["items",a.id]))}m.default={name:e,depends:[i.default],signals:{fetchMentionInfo:[(0,r.set)((0,o.state)(t),(0,o.props)(n)),(0,r.set)((0,o.state)(a),c.default.inProgress),(0,r.set)((0,o.state)(s),"mention"),[function(e){var t=e.props,n=e.path,a=e.state,s=e.http,r=t.channelId,o=Object.values(a.get([].concat(p(g),["items"]))).sort(function(e,t){return e.id<t.id?1:e.id>t.id?-1:0}),i=0;return 0!==o.length&&(i=o[o.length-1].id),s.get("/api/channels/"+r+"/mentions",{before:i}).then(n.success).catch(n.error)},{success:[function(e){var t,n,a,s,r=e.props,o=e.controller,i=e.state,c=r.status,u=r.result;200===c&&u&&(t=u.items,n=u.hasMore,a=i.get([].concat(p(g),["items"])),s=l({},a),t.forEach(function(e){s[e.id]=d.default.transformMessage(i,e)}),o.getSignal("messages.syncFetchedMentionInfo")({messages:t}),i.set([].concat(p(g),["items"]),s),i.set([].concat(p(g),["hasMore"]),n))},(0,r.set)((0,o.state)(a),c.default.succeeded)],error:[(0,r.set)((0,o.state)(a),c.default.failed)]}]],clearShowInfo:[function(e){e.state.set(g,{items:{},hasMore:!1,firstLoad:!1})}],messageCreate:[h],messageUpdate:[h]},getState:function(){return{mentionInfo:{items:{},hasMore:!1,firstLoad:!1}}},getMentionMessage:function(e,t){return e.get([].concat(p(g),["items",t]))}}}).call(m,"views/v2/modules/messages/MentionInfoStore.js")},function(e,b,w){"use strict";(function(e){Object.defineProperty(b,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=m(["messages.starInfo.firstLoad"],["messages.starInfo.firstLoad"]),n=m(["firstLoad"],["firstLoad"]),a=m(["messages.fetchInfoStatus.star"],["messages.fetchInfoStatus.star"]),s=m(["messages.showInfoType"],["messages.showInfoType"]),r=w(2),o=w(1),d=h(w(6)),i=h(w(4)),c=h(w(46)),u=h(w(47)),f=h(w(48)),p=h(w(49)),g=h(w(3));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _=[].concat(["messages"],["starInfo"]);function y(s){return function(e){var t=e.props,n=e.state,a=t.messageId;n.set("messages.starStatus.status",s),s===g.default.inProgress?n.set("messages.starStatus.messageId",a):n.set("messages.starStatus.messageId","")}}b.default={name:e,depends:[i.default],signals:{toggleStar:[y(g.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.state,s=e.path,r=t.messageId,o=t.channelId;return!0===(d.default.getMessage(a,o,r)||c.default.getMentionMessage(a,r)||u.default.getStarMessage(a,r)||f.default.getReplyMessage(a,r)||p.default.getSearchedMessage(a,r)).starred?n.post("/api/messages/"+r+"/unstar").then(s.success).catch(s.error):n.post("/api/messages/"+r+"/star").then(s.success).catch(s.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.messageUpdate")(a)},y(g.default.succeeded)],error:[y(g.default.failed)]}]],fetchStarInfo:[(0,r.set)((0,o.state)(t),(0,o.props)(n)),(0,r.set)((0,o.state)(a),g.default.inProgress),(0,r.set)((0,o.state)(s),"star"),[function(e){var t=e.props,n=e.path,a=e.http,s=e.state,r=t.channelId,o=Object.values(s.get([].concat(v(_),["items"]))).sort(function(e,t){return e.id<t.id?1:e.id>t.id?-1:0}),i=0;return 0!==o.length&&(i=o[o.length-1].id),a.get("/api/channels/"+r+"/starredMessages",{before:i}).then(n.success).catch(n.error)},{success:[function(e){var t,n,a,s,r=e.props,o=e.controller,i=e.state,c=r.status,u=r.result;200===c&&u&&(t=u.items,n=u.hasMore,a=i.get([].concat(v(_),["items"])),s=l({},a),t.forEach(function(e){s[e.id]=d.default.transformMessage(i,e)}),o.getSignal("messages.syncFetchedStarInfo")({messages:t}),i.set([].concat(v(_),["items"]),s),i.set([].concat(v(_),["hasMore"]),n))},(0,r.set)((0,o.state)(a),g.default.succeeded)],error:[(0,r.set)((0,o.state)(a),g.default.failed)]}]],clearShowInfo:[function(e){e.state.set(_,{items:{},hasMore:!1,firstLoad:!1})}],messageUpdate:[function(e){var t=e.props,n=e.state,a=d.default.transformMessage(n,t);a.starred?n.set([].concat(v(_),["items",a.id]),a):n.unset([].concat(v(_),["items",a.id]))}]},getState:function(){return{starInfo:{items:{},firstLoad:!1,hasMore:!1},starStatus:{}}},getStarMessage:function(e,t){return e.get([].concat(v(_),["items",t]))}}}).call(b,"views/v2/modules/messages/StarInfoStore.js")},function(e,y,b){"use strict";(function(e){Object.defineProperty(y,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=l(["messages.replyInfo.firstLoad"],["messages.replyInfo.firstLoad"]),n=l(["firstLoad"],["firstLoad"]),a=l(["messages.fetchInfoStatus.reply"],["messages.fetchInfoStatus.reply"]),s=l(["messages.showInfoType"],["messages.showInfoType"]),r=b(2),o=b(1),i=u(b(4)),p=u(b(6)),c=u(b(3));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var g=["messages","replyInfo"],h=[].concat(g,["replyMessages"]),m=[].concat(g,["parentMessage"]),v=[].concat(g,["hasMore"]),_=[].concat(g,["total"]);y.default={name:e,depends:[i.default],signals:{fetchReplyInfo:[(0,r.set)((0,o.state)(t),(0,o.props)(n)),(0,r.set)((0,o.state)(a),c.default.inProgress),(0,r.set)((0,o.state)(s),"reply"),[function(e){var t=e.props,n=e.path,a=e.state,s=e.http,r=t.messageId,o=a.get(h),i=Object.values(o).sort(function(e,t){return e.id<t.id?1:e.id>t.id?-1:0}),c=0;return 0!==i.length&&(c=i[i.length-1].id),s.get("/api/messages/"+r+"/reply",{before:c}).then(n.success).catch(n.error)},{success:[function(e){var t,n,a,s,r,o,i,c=e.controller,u=e.props,l=e.state,d=u.result;200===u.status&&d&&(t=d.items,n=d.parentMessage,a=d.hasMore,s=d.total,r=l.get(h),o=f({},r),t.forEach(function(e){o[e.id]=p.default.transformMessage(l,e)}),c.getSignal("messages.syncFetchedReplyInfo")({messages:t,parentMessage:n}),i=p.default.transformMessage(l,n),l.set(m,i),l.set(h,o),l.set(v,a),l.set(_,s))},(0,r.set)((0,o.state)(a),c.default.succeeded)],error:[(0,r.set)((0,o.state)(a),c.default.failed)]}]],messageCreate:[function(e){var t,n=e.props,a=e.state,s=n.parentMessage,r=p.default.transformMessage(a,n),o=a.get(m);r.nonce&&a.get([].concat(d(h),[r.nonce]))?(a.unset([].concat(d(h),[r.nonce])),a.set([].concat(d(h),[r.id]),r),t=a.get(_),a.set(_,t+1)):o&&o.id===r.parentMessageId&&a.set([].concat(d(h),[r.id]),r),s&&o&&o.id===s.id&&a.set(m,p.default.transformMessage(a,s))}],clearShowInfo:[function(e){e.state.set(g,{replyMessages:{},parentMessage:null,hasMore:!1,firstLoad:!1,total:0})}],messageUpdate:[function(e){var t=e.props,n=e.state,a=p.default.transformMessage(n,t);n.get([].concat(d(h),[a.id]))&&n.set([].concat(d(h),[a.id]),a)}]},getState:function(){return{replyInfo:{replyMessages:{},parentMessage:null,hasMore:!1,firstLoad:!1,total:0}}},getReplyMessage:function(e,t){return e.get([].concat(d(h),[t]))}}}).call(y,"views/v2/modules/messages/ReplyInfoStore.js")},function(e,_,y){"use strict";(function(e){Object.defineProperty(_,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=c(["messages.searchInfo.firstLoad"],["messages.searchInfo.firstLoad"]),n=c(["firstLoad"],["firstLoad"]),a=c(["messages.fetchInfoStatus.search"],["messages.fetchInfoStatus.search"]),s=y(2),r=y(1),h=i(y(6)),o=i(y(3));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l=["messages","searchInfo"],m=[].concat(l,["searchResult"]),d=[].concat(l,["searchKeyword"]),f=[].concat(l,["pendingSearchKeyword"]),p=[].concat(l,["firstLoad"]);function v(){return{items:{},currentPage:0,pages:[],total:0}}_.default={name:e,depends:[],signals:{searchMessage:[(0,s.set)((0,r.state)(t),(0,r.props)(n)),(0,s.set)((0,r.state)(a),o.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=e.state,r=t.channelId,o=void 0,i=void 0;if(t.firstLoad?(o=s.get(f),s.set(d,o),s.set(m,v())):(o=s.get(d),i=s.get(m).currentPage+1),""===o)return a.success();var c={keyword:o};return i&&(c.page=i),n.get("/api/channels/"+r+"/search",c).then(a.success).catch(a.error)},{success:[function(e){var t,n,a,s,r,o,i,c,u,l=e.props,d=e.controller,f=e.state,p=l.result;200===l.status&&p&&(t=f.get(m),n=p.items,a=p.currentPage,s=p.pages,r=p.total,o=t.items||{},i=g({},o),n.forEach(function(e){i[e.id]=h.default.transformMessage(f,e)}),d.getSignal("messages.syncSearchMessageResult")({messages:n}),c={items:i,currentPage:a,pages:s,total:r},t&&n&&0<a?f.set(m,{items:i,currentPage:a,pages:s,total:t.total}):(u=v(),f.set(m,g({},u,c))))},(0,s.set)((0,r.state)(a),o.default.succeeded)],error:[(0,s.set)((0,r.state)(a),o.default.failed)]}]],messageUpdate:[function(e){var t=e.props,n=e.state,a=h.default.transformMessage(n,t);n.get([].concat(u(m),["items",a.id]))&&n.set([].concat(u(m),["items",a.id]),a)}],onSearchKeywordChanged:[function(e){var t=e.props,n=e.state,a=t.value;n.set(f,a)}],clearShowInfo:[function(e){var t=e.state;t.set(m,v()),t.set(d,""),t.set(f,""),t.set(p,!1)}]},getState:function(){return{searchInfo:{searchResult:{items:{},currentPage:0,pages:[],total:0},searchKeyword:"",pendingSearchKeyword:"",firstLoad:!1}}},getSearchedMessage:function(e,t){return e.get([].concat(u(m),["items",t]))}}}).call(_,"views/v2/modules/messages/SearchMessageStore.js")},function(e,t,n){e.exports=n(0)(70)},function(e,t,n){e.exports=n(0)(588)},function(e,t,n){e.exports=n(0)(1095)},function(e,t,n){e.exports=n(0)(1110)},function(e,t){e.exports={join_request_received_team_text:"join_request_received_team_text_2Hbl",join_request_accepted_team_text:"join_request_accepted_team_text_2fO-",join_request_accepted_user_text:"join_request_accepted_user_text_1p_t",join_request_declined_user_text:"join_request_declined_user_text_HbOy",team_invitation_received_user_text:"team_invitation_received_user_text_2Sl9",team_invitation_received_user_admin_text:"team_invitation_received_user_admin_text_1tXf",team_invitation_accepted_user_text:"team_invitation_accepted_user_text_23q_",team_invitation_accepted_user_admin_text:"team_invitation_accepted_user_admin_text_gt2S",team_invitation_accepted_team_text:"team_invitation_accepted_team_text_1CjA",team_invitation_accepted_team_admin_text:"team_invitation_accepted_team_admin_text_3zad",team_invitation_declined_team_text:"team_invitation_declined_team_text_2Ry9",team_invitation_declined_team_admin_text:"team_invitation_declined_team_admin_text_3A6U",team_followed_team_text:"team_followed_team_text_2Re7",member_removed_team_text:"member_removed_team_text_16on",member_removed_team_admin_text:"member_removed_team_admin_text_1x-z",member_removed_user_text:"member_removed_user_text_1SIQ",member_removed_user_admin_text:"member_removed_user_admin_text_mX3i",member_leaves_team_text:"member_leaves_team_text_1805",member_leaves_team_admin_text:"member_leaves_team_admin_text_MRiR",client_receive_proposal_team_text:"client_receive_proposal_team_text_2rPN",proposal_approved_team_text:"proposal_approved_team_text_3eOU",proposal_approved_user_text:"proposal_approved_user_text_2Hj5",proposal_declined_user_text:"proposal_declined_user_text_26ST",client_invite_developer_user_text:"client_invite_developer_user_text_3Rkl",invitation_accepted_team_text:"invitation_accepted_team_text_1z5z",contributor_invitation_received_user_text:"contributor_invitation_received_user_text_haQj",contributor_invitation_accepted_user_text:"contributor_invitation_accepted_user_text_1UWT",contributor_invitation_declined_user_text:"contributor_invitation_declined_user_text_1Wxt",project_commented_user_text:"project_commented_user_text_373y",project_comment_mentioned_user_text:"project_comment_mentioned_user_text_2ANs",project_liked_user_text:"project_liked_user_text_3KVM",project_mentioned_user_text:"project_mentioned_user_text_1My2",project_message_commented_user_text:"project_message_commented_user_text_3lq6",project_participate_comment_user_text:"project_participate_comment_user_text_1nTV",post_liked_user_text:"post_liked_user_text_1Gc2",post_mentioned_user_text:"post_mentioned_user_text_IkAm",followed_user_text:"followed_user_text_ISgn",project_suspended_user_text:"project_suspended_user_text_ke6w",task_suspended_user_text:"task_suspended_user_text_1BvR",job_suspended_team_text:"job_suspended_team_text_cit9",job_share_user_text:"job_share_user_text_1koe",job_approved_user_text:"job_approved_user_text_3Nc-",task_approved_user_text:"task_approved_user_text_2lOO",showcase_approved_user_text:"showcase_approved_user_text_GeqR",game_approved_user_text:"game_approved_user_text_TZq5",article_approved_user_text:"article_approved_user_text_3byJ",company_suspended_team_text:"company_suspended_team_text_1owJ",school_admin_granted_user_text:"school_admin_granted_user_text_8Dag",school_admin_removed_user_text:"school_admin_removed_user_text_1gNE",school_request_accepted_user_text:"school_request_accepted_user_text_2ssw",school_request_declined_user_text:"school_request_declined_user_text_ByOS",school_member_removed_user_text:"school_member_removed_user_text_2ofF",school_application_received_school_text:"school_application_received_school_text_1lkL",school_deleted_school_text:"school_deleted_school_text_2HCO",reference_invitation_created_user_text:"reference_invitation_created_user_text_3yEP",reference_invitation_remind_user_text:"reference_invitation_remind_user_text_3F6Q",reference_invitation_changed_user_text:"reference_invitation_changed_user_text_1sBS",reference_received_user_text:"reference_received_user_text_2-e4",relationship_requested_user_text:"relationship_requested_user_text_2RN0",relationship_created_user_text:"relationship_created_user_text_1chn",relationship_accepted_user_text:"relationship_accepted_user_text_1MAC",event_coupon_code_user_text:"event_coupon_code_user_text_1ZIv",group_invitation_received_user_text:"group_invitation_received_user_text_2tde",group_invitation_accepted_group_text:"group_invitation_accepted_group_text_1Bh5",group_invitation_declined_group_text:"group_invitation_declined_group_text_24fb",group_member_removed_group_text:"group_member_removed_group_text_1fTq",group_member_removed_group_admin_text:"group_member_removed_group_admin_text_10mb",group_member_leaves_group_text:"group_member_leaves_group_text_3whg",group_member_leaves_group_admin_text:"group_member_leaves_group_admin_text_2qzq",group_member_removed_user_text:"group_member_removed_user_text_29U6",project_pinned_user_text:"project_pinned_user_text_Lcn2",project_featured_user_text:"project_featured_user_text_Qe_d",project_message_liked_user_text:"project_message_liked_user_text_3SyP",project_message_participate_liked_user_text:"project_message_participate_liked_user_text_3_lw",post_commented_user_text:"post_commented_user_text_Nvzm",post_participate_comment_user_text:"post_participate_comment_user_text_3VPn",post_pinned_user_text:"post_pinned_user_text_1iCI",post_featured_user_text:"post_featured_user_text_lpoP",job_pinned_user_text:"job_pinned_user_text_HmjH",job_featured_user_text:"job_featured_user_text_3AeD",realtime:"realtime_1Xlt",schedule:"schedule_yIsP",ticket_updated_user_text:"ticket_updated_user_text_1n_z",project_article_publish_user_text:"project_article_publish_user_text_ehFS",project_article_publish_team_text:"project_article_publish_team_text_3-XB",challenge_completed_win_user_text:"challenge_completed_win_user_text_1q5k",challenge_completed_win_team_text:"challenge_completed_win_team_text_1MgW",challenge_completed_honor_user_text:"challenge_completed_honor_user_text_2UzB",challenge_completed_honor_team_text:"challenge_completed_honor_team_text_312F",challenge_completed_user_text:"challenge_completed_user_text_O3Gr",challenge_completed_team_text:"challenge_completed_team_text_3t2B"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=o[e+"_"+t+"_href"],s=new RegExp("\\{(.*?)\\}","ig"),r=s.exec(a);for(;r;)a=a.replace("{"+r[1]+"}",n[r[1]]),r=s.exec(a);return a};var o={join_request_received_team_href:"/t/{teamId}/?type=members",join_request_accepted_team_href:"/t/{teamId}/?type=members",join_request_accepted_user_href:"/t/{teamId}/?type=members",join_request_declined_user_href:"/t/{teamId}",team_invitation_received_user_href:"/t/{teamId}",team_invitation_accepted_user_href:"/t/{teamId}/?type=members",team_invitation_accepted_team_href:"/t/{teamId}/?type=members",team_invitation_declined_team_href:"/t/{teamId}/?type=members",team_followed_team_href:"/u/{userId}",member_removed_team_href:"/t/{teamId}/?type=members",member_removed_user_href:"/t/{teamId}",member_leaves_team_href:"/t/{teamId}/?type=members",client_receive_proposal_team_href:"/jobs/{jobId}/manage?t=applications",proposal_approved_team_href:"/jobs/{jobId}/manage?t=matches",proposal_approved_user_href:"/jobs?t=matches",proposal_declined_user_href:"/jobs/{jobId}",client_invite_developer_user_href:"/jobs?t=interested_in_you",invitation_accepted_team_href:"/jobs/{jobId}/manage?t=matches",contributor_invitation_received_user_href:"/p/{projectId}",contributor_invitation_accepted_user_href:"/p/{projectId}",contributor_invitation_declined_user_href:"/p/{projectId}",project_commented_user_href:"/p/{projectId}",project_comment_mentioned_user_href:"/p/{projectId}",project_liked_user_href:"/p/{projectId}",project_pinned_user_href:"/p/{projectId}",project_featured_user_href:"/p/{projectId}",project_mentioned_user_href:"/p/{projectId}",project_message_commented_user_href:"/p/{projectId}",project_participate_comment_user_href:"/p/{projectId}",project_message_liked_user_href:"/p/{projectId}",project_message_participate_liked_user_href:"/p/{projectId}",project_article_publish_user_href:"/p/{projectId}",project_article_publish_team_href:"/p/{projectId}",post_liked_user_href:"/post/{postId}",post_commented_user_href:"/post/{postId}",post_participate_comment_user_href:"/post/{postId}",post_pinned_user_href:"/post/{postId}",post_featured_user_href:"/post/{postId}",post_mentioned_user_href:"/post/{postId}",followed_user_href:"/u/{userId}",project_suspended_user_href:"",task_suspended_user_href:"",job_suspended_team_href:"",job_share_user_href:"/jobs/{jobId}",job_pinned_user_href:"/jobs/{jobId}",job_featured_user_href:"/jobs/{jobId}",company_suspended_team_href:"",school_admin_granted_user_href:"/s/{schoolId}",school_admin_removed_user_href:"/s/{schoolId}",school_request_accepted_user_href:"/s/{schoolId}",school_request_declined_user_href:"/s/{schoolId}",school_member_removed_user_href:"/s/{schoolId}",school_application_received_school_href:"/s/{schoolId}/?type=tab_requested",school_deleted_school_href:"",reference_invitation_created_user_href:"/ref?tab=given",reference_invitation_remind_user_href:"/ref?tab=given",reference_invitation_changed_user_href:"/ref?tab=given",reference_received_user_href:"/ref?tab=received",relationship_requested_user_href:"/connections",relationship_created_user_href:"/messages/c/{channelId}",relationship_accepted_user_href:"/messages/c/{channelId}",group_invitation_received_user_href:"/g/{groupId}",group_invitation_accepted_group_href:"/g/{groupId}/?tab=members",group_invitation_declined_group_href:"/g/{groupId}/?tab=members",group_member_removed_group_href:"/g/{groupId}/?tab=members",group_member_removed_user_href:"/g/{groupId}",group_member_leaves_group_href:"/g/{groupId}/?tab=members",challenge_completed_win_user_href:"/showcases/{challengeId}?tab=winner&&topProjectId={projectId}",challenge_completed_win_team_href:"/showcases/{challengeId}?tab=winner&&topProjectId={projectId}",challenge_completed_honor_user_href:"/showcases/{challengeId}?tab=winner&&topProjectId={projectId}",challenge_completed_honor_team_href:"/showcases/{challengeId}?tab=winner&&topProjectId={projectId}",challenge_completed_user_href:"/u/{userId}",challenge_completed_team_href:"/t/{teamId}"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=/connect-?\w*\.unity\.com/i;t.default=function(e,t){var n=t||window&&window.location&&window.location.hostname||"";return e=e||"",!0===a.test(n)&&0!==e.indexOf("/livehelp")?"/livehelp"+e:e}},function(e,t,n){e.exports=n.p+"../styles/i/unity-logo-only.f688162d59f85318573b598d4c5b6e26.png"},function(e,t,n){"use strict";e.exports=[n(59)]},function(e,t,n){"use strict";var i=n(42),c=n(11);e.exports=function(e){var t=e.props,n=e.state,a=c(t.fieldPath).slice(),s=a.pop(),r=n.get(a),o=Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},{});o[s]=i(o,t.fieldDetails),n.set(a,o)}},function(e,t,n){"use strict";var r=n(32);e.exports=function(a,s,e){return e.reduce(function(e,t){if(!e)return!1;var n=function(e){if("string"!=typeof e)return{key:e};var t=e.split(/:(.+)?/);return t[1]?{key:t[0],params:JSON.parse(t[1])}:{key:e}}(t);return r[n.key](s,a,n.params)},!0)}},function(e,t,n){"use strict";e.exports=[n(177)]},function(e,t,n){"use strict";e.exports=[n(178),n(179),n(180),n(181),n(182),{yes:[n(64)],no:[]}]},function(e,t,n){"use strict";e.exports=function(e){return e.isRequired&&!e.hasValue}},function(e,t,n){"use strict";var l=n(43),d=n(183),f=n(11);e.exports=function(e){function s(e,t,n){var a=t[n],s=l(t,a.value,a.validations);o.merge(e.concat(n),{isValid:s.isValid,errorMessage:s.isValid?null:a.errorMessages[s.failedRuleIndex]})}var r=e.props,o=e.state,i=f(r.field),c=(n=i.slice()).pop(),t=(a=o.get(n))[c];if(s(n,a,c),Array.isArray(t.dependents)&&t.dependents.length&&(console.warn("DEPRECATED: Use new field.dependsOn API instead"),t.dependents.forEach(function(e){var t,n,a;Array.isArray(e)&&e.length?(n=(t=d(i,e)).pop(),a=o.get(t),s(t,a,n)):console.warn("cerebral-module-forms: dependent path expected to be Array. Check out dependents provided for "+r.field+".")})),Array.isArray(t.dependsOn))t.dependsOn.forEach(function(e){var t=e.split("."),n=t.pop(),a=o.get(t);if(!a)throw new Error('The path "'+t.join(".")+'" used with "dependsOn" on field "'+c+'" is not correct, please check it');s(t,a,n)});else if(t.dependsOn){var n,a,u=(n=t.dependsOn.split(".")).pop();if(!(a=o.get(n)))throw new Error('The path "'+n.join(".")+'" used with "dependsOn" on field "'+c+'" is not correct, please check it');s(n,a,u)}}},function(e,t,n){"use strict";var a=n(42);e.exports=function(n){return Object.keys(n).reduce(function(e,t){return e[t]=a(n,n[t]),e},{})}},function(e,t,n){"use strict";e.exports=[n(188)]},function(e,t,n){"use strict";e.exports=[n(189)]},function(e,t,n){"use strict";function s(n,a){return Object.keys(n).reduce(function(e,t){return!!e&&(Array.isArray(n[t])?r(n[t],a):"value"in n[t]?a(n[t]):s(n[t],a))},!0)}var r=function(e,n){return e.reduce(function(e,t){return!!e&&s(t,n)},!0)};e.exports=s},function(e,u,l){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=c(["header.recaptchaCode"],["header.recaptchaCode"]),a=c(["value"],["value"]),s=l(2),r=l(1),o=l(8),i=(t=o)&&t.__esModule?t:{default:t};function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}u.default={name:e,depends:[],signals:{changeRecaptchaCode:[(0,s.set)((0,r.state)(n),(0,r.props)(a))]},getServices:function(){},getState:function(){return{recaptchaCode:i.default.RECAPTCHA_ENABLE?"":"****"}},getRequestHeaderOption:function(e){return{headers:{captcha:e.get("header.recaptchaCode")}}},recaptchaError:function(e,t){return"ReCaptchaError"===e&&(t.getSignal("header.showMessage")({message:"recaptcha_error",type:"error"}),!0)}}}).call(u,"views/modules/common/header/ReCaptchaStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=a(n(10)),s=n(39),o=a(s),c=a(n(208)),u=a(n(225));function a(e){return e&&e.__esModule?e:{default:e}}n(227);var l={newline:s.defaultRules.newline,paragraph:r({},s.defaultRules.paragraph,{react:function(e,t,n){return i.default.createElement("p",{key:n.key},t(e.content,n))}}),escape:s.defaultRules.escape,link:r({},s.defaultRules.link,{react:function(e,t,n){return i.default.createElement("a",{key:n.key,href:o.default.sanitizeUrl(e.target),title:e.title,target:"_blank",rel:"noopener noreferrer"},t(e.content,n))}}),autolink:s.defaultRules.autolink,mailto:s.defaultRules.mailto,url:s.defaultRules.url,strong:s.defaultRules.strong,em:s.defaultRules.em,u:s.defaultRules.u,s:{order:s.defaultRules.u.order,match:o.default.inlineRegex(/^~~([\s\S]+?)~~(?!_)/),parse:s.defaultRules.u.parse,react:function(e,t,n){return i.default.createElement("s",{key:n.key},t(e.content,n))}},text:s.defaultRules.text,inlineCode:r({},s.defaultRules.inlineCode,{react:function(e,t,n){return i.default.createElement("code",{key:n.key,className:"inline"},e.content)}}),codeBlock:{order:s.defaultRules.codeBlock.order,match:function(e){return/^```(([A-z0-9-]+?)\n+)?\n*?([^]+?)```/.exec(e)},parse:function(e){return{lang:(e[2]||"").trim(),content:(e[3]||"").trim()}},react:function(e,t,n){if(e.lang&&c.default.getLanguage(e.lang)){var a=c.default.highlight(e.lang,e.content);return i.default.createElement("pre",{key:n.key},i.default.createElement("code",{className:"hljs "+a.language,dangerouslySetInnerHTML:{__html:a.value}}))}var s=c.default.highlightAuto(e.content);return i.default.createElement("pre",{key:n.key},i.default.createElement("code",{className:"hljs "+s.language,dangerouslySetInnerHTML:{__html:s.value}}))}},mention:{order:s.defaultRules.text.order,match:function(e){return/^<@([a-f0-9]+)>|^(@everyone)/.exec(e)},parse:function(e){return{userId:e[1]||e[2],content:[{type:"text",content:e[0]}]}},react:function(e,t,n){var a,s,r,o=n.mentionType;return"message"===o?i.default.createElement(u.default,{key:n.key,authorIsAdmin:!!n.authorIsAdmin,channelId:n.channelId,userId:e.userId,messageId:n.messageId,mentioned:n.mentioned,mentionType:n.mentionType},t(e.content,n)):"project"===o||"post"===o?i.default.createElement(u.default,{key:n.key,userId:e.userId,mentioned:n.mentioned,mentionType:n.mentionType},t(e.content,n)):(a=n.mentionUsers,s=e.userId,r=a.filter(function(e){return e.id===s})[0],i.default.createElement(u.default,{key:n.key,userId:e.userId,mentioned:n.mentioned,mentionUser:r,mentionType:n.mentionType},t(e.content,n)))}}};function d(e,t,n){return t(e.content,n)}var f={newline:s.defaultRules.newline,paragraph:r({},s.defaultRules.paragraph,{react:d}),url:r({},s.defaultRules.url,{parse:function(e,t,n){var a=s.defaultRules.url.parse(e,t,n);return a.context=n.context,a}}),link:r({},s.defaultRules.link,{parse:function(e,t,n){var a=s.defaultRules.link.parse(e,t,n);return a.context=n.context,a},react:function(t,e,n){var a={},s=t.context&&(t.context[t.target]||t.context.onClick);return s?a.onClick=function(e){return s(e,t.target)}:(a.href=o.default.sanitizeUrl(t.target),a.target="_blank"),a.title=t.title,i.default.createElement("a",r({key:n.key},a),e(t.content,n))}}),strong:r({},s.defaultRules.strong,{react:d}),u:r({},s.defaultRules.u,{react:d}),noparse:{order:s.defaultRules.text.order,match:o.default.inlineRegex(/^!!(.+?)!!/),parse:function(e){return{type:"text",content:e[1]}},react:function(e){return e.content}},text:s.defaultRules.text,ifont:{order:s.defaultRules.text.order,match:function(e){return/^:ifont-([^\s:]+?):/.exec(e)},parse:function(e){return{ifont:e[1]}},react:function(e,t,n){return i.default.createElement("span",{key:n.key,className:"ifont ifont-"+e.ifont})}},list:r({},s.defaultRules.list,{react:function(e,t,n){return t(e.items,n)}})};function p(e){var a=o.default.parserFor(e),s=o.default.outputFor(o.default.ruleOutput(e,"react"));return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t||(e+="\n\n"),s(a(e,r({inline:t},n)),r({},n))}}t.default={getDefaultRules:function(){return r({},l)},getPlainTextRules:function(){return r({},f)},parserFor:p,parse:p(l),plainTextParse:p(f)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(229),r=(a=s)&&a.__esModule?a:{default:a};var o=Date.UTC(2016,0,1),i=r.default.fromNumber(1);t.default={extractTimestamp:function(e){return e?r.default.fromString(e,!0,16).shiftRight(22).add(r.default.fromNumber(o)).toNumber():0},createNonce:function(){for(var e=r.default.fromNumber(Date.now()).subtract(o).add(i).shiftLeft(22).subtract(i).toString(16);e.length<16;)e="0"+e;return e}}},function(e,t){e.exports={predefined_invite_interview:"predefined_invite_interview_361K",predefined_make_offer:"predefined_make_offer_236S",predefined_accept_offer:"predefined_accept_offer_3anT",predefined_decline_offer:"predefined_decline_offer_LXqL",predefined_withdraw_offer:"predefined_withdraw_offer_3JTA",predefined_invite_interview_plaintext:"predefined_invite_interview_plaintext_H_jS",predefined_make_offer_plaintext:"predefined_make_offer_plaintext_2sgi",predefined_accept_offer_plaintext:"predefined_accept_offer_plaintext_2yoA",predefined_decline_offer_plaintext:"predefined_decline_offer_plaintext_3xB1",predefined_withdraw_offer_plaintext:"predefined_withdraw_offer_plaintext_lZO0",predefined_client_create_channel:"predefined_client_create_channel_1zvK",predefined_freelancer_create_channel:"predefined_freelancer_create_channel_1oui",predefined_client_create_channel_plaintext:"predefined_client_create_channel_plaintext_2FYf",predefined_freelancer_create_channel_plaintext:"predefined_freelancer_create_channel_plaintext_3eLG",predefined_accept_relationship:"predefined_accept_relationship_1JcD",predefined_request_relationship:"predefined_request_relationship_20JX",predefined_new_group_channel:"predefined_new_group_channel_2x-n",new_group_channel:"new_group_channel_kQpY",control_join:"control_join_1vIJ",control_left:"control_left_1oDR",control_invite:"control_invite_1SLD",control_kick:"control_kick_2OGd",control_edit_topic:"control_edit_topic_1FNi",control_edit_name:"control_edit_name_38VC",channel_name_comma:"channel_name_comma_3jHo",channel_name_and:"channel_name_and_2EBx",channel_name_people:"channel_name_people_wn4G",channel_name_empty:"channel_name_empty_2nqH",call_is_created:"call_is_created_2xFo",call_is_ended:"call_is_ended_-N2X",my_job:"my_job_1hNW",projects:"projects_1_Q6",lobbies:"lobbies_2wet",lobby_default_1:"lobby_default_1_3h2b",lobby_default_2:"lobby_default_2_WKIh",image_message:"image_message_1yCI",file_message:"file_message_16IW",workspace_connect:"workspace_connect_Nwdp",workspace_default_lobby:"workspace_default_lobby_2Clv"}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=["messages","pendingQuoteMessages"];t.default={name:e,depends:[],signals:{setPendingQuote:[function(e){var t=e.props,n=e.state,a=t.message,s=t.liveChannelId;n.set([].concat(r,[s]),a)}],unsetPendingQuote:[function(e){var t=e.props,n=e.state,a=t.liveChannelId;n.unset([].concat(r,[a]))}]},getState:function(){return{pendingQuoteMessages:{}}},getPendingQuoteMessage:function(e,t){return e.get([].concat(r,[t]))}}}).call(t,"views/v2/modules/messages/PendingQuoteStore.js")},function(e,d,f){"use strict";(function(e){Object.defineProperty(d,"__esModule",{value:!0});var t,n=c(["messages.fetchWorkspaceMemberStatus.",""],["messages.fetchWorkspaceMemberStatus.",""]),a=c(["workspaceId"],["workspaceId"]),s=f(1),r=f(2),o=f(3),i=(t=o)&&t.__esModule?t:{default:t};function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=["messages","workspaceMembers"];function l(e){return{id:e.id,userId:e.user.id,role:e.role}}d.default={name:e,depends:[],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,a={};t.userWorkspaceMembers.forEach(function(e){var t={};t[e.user.id]=l(e),a[e.workspaceId]=t}),n.set(u,a)}],workspaceMemberAdd:[function(e){var t=e.props,n=e.state,a=[].concat(u,[t.workspaceId,t.user.id]);n.set(a,l(t))}],workspaceMemberRemove:[function(e){var t=e.props,n=e.state,a=[].concat(u,[t.workspaceId,t.user.id]);n.unset(a)}],syncWorkspaceMembers:[function(e){var t,n=e.props,a=e.state,s=n.result,r=n.status,o=n.workspaceId;200===r&&s&&(t={},s.forEach(function(e){t[e.user.id]=l(e)}),a.set([].concat(u,[o]),t))}],fetchWorkspaceMember:[(0,r.set)((0,s.state)(n,(0,s.props)(a)),i.default.inProgress),function(e){var t=e.props,n=e.path,a=e.http,s=t.workspaceId;return a.get("/api/workspaces/"+s+"/members").then(n.success).catch(n.error)},{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncWorkspaceMembers")(n)},(0,r.set)((0,s.state)(n,(0,s.props)(a)),i.default.succeeded)],error:[(0,r.set)((0,s.state)(n,(0,s.props)(a)),i.default.failed)]}],workspaceSelect:[function(e){var t=e.props,n=e.controller,a=t.workspaceId;n.getSignal("messages.fetchWorkspaceMember")({workspaceId:a})}]},getState:function(){return{workspaceMembers:{}}},getMembers:function(e,t){return e.get([].concat(u,[t]))},getMember:function(e,t,n){return e.get([].concat(u,[t,n]))}}}).call(d,"views/v2/modules/messages/WorkspaceMemberStore.js")},function(e,s,r){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t,n=r(23),i=(t=n)&&t.__esModule?t:{default:t},c=r(44);var u=["messages","audioInput"],l=null;var a=!1;s.default={name:e,depends:[],signals:{onAudioInputEnabled:[function(e){var t=e.props,n=e.messages,a=e.controller;e.state.merge(u,{enabled:!0,mute:!1}),i.default.set("audioInput",{enabled:!0,mute:!1});var s=n.voiceConn.currentConn;s&&a.getSignal("messages.updateCall")({channelId:s.channelId,selfMute:!1}),s&&l.stream&&s.setStream(l.stream),l.onSpeaking=function(e){var t=n.voiceConn.currentConn;t&&a.getSignal("messages.updateCall")({channelId:t.channelId,isSpeaking:e})},t.explict&&(0,c.playSound)("Unmute",.4)}],enableAudioInput:[function(e){var n=e.controller;n.getSignal("messages.showDeviceTip")(),l.enable(function(e){var t;n.getSignal("messages.hideDeviceTip")(),e?"PermissionDeniedError"===(t=e.name)||"NotAllowedError"===t?n.getSignal("messages.showDeniedTip")():console.log("failed to enable audioInput: ",e):n.getSignal("messages.onAudioInputEnabled")({explict:!0})})}],toggleSelfMute:[function(e){var t,n,a=e.messages,s=e.state,r=e.controller,o=s.get(u);o.enabled?(l.mute=!o.mute,s.merge(u,{mute:l.mute}),(t=i.default.get("audioInput"))&&(t.mute=l.mute,i.default.set("audioInput",t)),(n=a.voiceConn.currentConn)&&r.getSignal("messages.updateCall")({channelId:n.channelId,selfMute:l.mute}),l.mute?(0,c.playSound)("Mute",.4):(0,c.playSound)("Unmute",.4)):r.getSignal("messages.enableAudioInput")()}],showDeviceTip:[function(e){e.state.set(["messages","audioInput","deviceTip"],!0)}],hideDeviceTip:[function(e){e.state.set(["messages","audioInput","deviceTip"],!1)}],showDeniedTip:[function(e){e.state.set(["messages","audioInput","deniedTip"],!0)}],hideDeniedTip:[function(e){e.state.set(["messages","audioInput","deniedTip"],!1)}],createCall:[function(e){var t,n=e.controller;a||(a=!0,(t=i.default.get("audioInput")||{enabled:!1,mute:!0}).enabled&&!t.mute&&l.enable(function(e){e?i.default.remove("audioInput"):n.getSignal("messages.onAudioInputEnabled")()}))}]},getServices:function(){var e;return l||(e=r(76).default,l=new e),{audioInput:{currentInput:l}}},getState:function(){return{audioInput:{enabled:!1,mute:!0,deviceTip:!1,deniedTip:!1}}},selfMute:function(e){return e.get([].concat(u,["mute"]))}}}).call(s,"views/v2/modules/messages/AudioInputStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=i(n(248)),o=i(n(18));function i(e){return e&&e.__esModule?e:{default:e}}window.AudioContext=window.AudioContext||window.webkitAudioContext||navigator.mozAudioContext,void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(n){var a=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return a?new Promise(function(e,t){a.call(navigator,n,e,t)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});var c=(a(u,[{key:"enable",value:function(t,e){var n=this,a=!(1<arguments.length&&void 0!==e)||e;this.disable(),navigator.mediaDevices.getUserMedia({audio:{optional:[{googEchoCancellation:!0},{googEchoCancellation2:!0},{googNoiseSuppression:!0},{googNoiseSuppression2:!0},{googAutoGainControl:!0},{googAutoGainControl2:!0},{googHighpassFilter:!0},{googTypingNoiseDetection:!0}]}}).then(function(e){if(n.disable(),n.stream=e,n._updateAudioTracks(),a){if(!n.context)try{n.context=new AudioContext}catch(e){console.warn("failed to create AudioContext",e)}n.context&&(n.voiceActivityDector=new r.default(n.context,n.stream),n.voiceActivityDector.onProcess=function(e,t){n._mute||n._setSpeaking(e),n.onVoiceActivity&&n.onVoiceActivity(t)})}t&&t(null,e)}).catch(function(e){t&&t(e)})}},{key:"disable",value:function(){if(this.voiceActivityDector&&(this.voiceActivityDector.stop(),this.voiceActivityDector=null),this.context&&this.context.close&&(this.context.close(),this.context=null),this.stream){for(var e=this.stream.getAudioTracks(),t=0,n=e.length;t<n;t++)e[t].stop();this.stream=null}this._setSpeaking(!1)}},{key:"_setSpeaking",value:function(e){this.speaking!==e&&(this.speaking=e,this.onSpeaking&&this.onSpeaking(e))}},{key:"_updateAudioTracks",value:function(){if(this.stream)for(var e=this.stream.getAudioTracks(),t=0,n=e.length;t<n;t++)e[t].enabled=!this._mute}},{key:"mute",get:function(){return this._mute},set:function(e){this._mute=e,this._updateAudioTracks(),this._setSpeaking(!1)}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.logger=o.default.create("AudioInput"),this.context=null,this.voiceActivityDector=null,this._mute=!1,this.stream=null,this.speaking=!1,this.onSpeaking=null,this.onVoiceActivity=null}t.default=c},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=["messages","teamMembers"];function o(e){var t=e.channelJobInfo,n={},a=t.teamMembers;return a&&a.forEach(function(e){n[e.id]={id:e.id,username:e.username,fullname:e.fullname,avatar:e.avatar,title:e.title,presenceStatus:e.presenceStatus}}),n}t.default={name:e,depends:[],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,a=t.privateChannels,s={};a.forEach(function(e){var t;e.proposalId&&(t=o(e),s[e.channelJobInfo.id]=t)}),n.set(r,s)}],channelCreate:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&t.channelJobInfo&&n.set([].concat(r,[t.channelJobInfo.id]),o(t))}]},getState:function(){return{teamMembers:{}}},getJobTeamMembers:function(e,t){return e.get([].concat(r,[t]))}}}).call(t,"views/v2/modules/messages/TeamMemberStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.default={name:e,depends:[],signals:{idle:[function(e){var t=e.props,n=e.state,a=e.messages,s=t.idle,r=t.idleSince;n.merge("messages",{idle:s,idleSince:r}),void 0!==a&&a.socket&&a.socket.statusUpdate&&a.socket.statusUpdate(r)}]},getServices:function(e){var t=Date.now(),n=!1;function a(){6e5<Date.now()-t?n||(n=!0,e.getSignal("messages.idle")({idle:!0,idleSince:t})):n&&(n=!1,e.getSignal("messages.idle")({idle:!1,idleSince:null}))}setInterval(a,15e4),["mousemove","keydown","mousedown","touchstart"].forEach(function(e){window.addEventListener(e,function(){t=Date.now(),a()})})},getState:function(){return{idle:!1,idleSince:null}},isIdle:function(e){return e.get("messages.idle")}}}).call(t,"views/v2/modules/messages/IdleStore.js")},function(e,b,w){"use strict";(function(e){Object.defineProperty(b,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=g(w(45)),r=g(w(33)),o=g(w(5)),c=g(w(14)),u=g(w(4)),l=g(w(7)),d=g(w(6)),f=g(w(78)),n=g(w(35)),p=g(w(9));function g(e){return e&&e.__esModule?e:{default:e}}var h=["messages","readState"];function m(e,t){var n,a,s={channelId:t,lastMessageId:t,ackMessageId:t,lastMentionId:t,oldestUnreadMessageId:"",oldestUnreadMessageIdStale:!1,estimated:!1,mentionCount:0,unreadCount:0},r=o.default.getChannel(e,t);return r&&(s.lastMessageId=r.lastMessageId,s.workspaceId=r.workspaceId,"direct"!==r.type&&(n=u.default.getCurrentUserId(e),(a=c.default.getMember(e,t,n))&&(s.ackMessageId=a.id,s.lastMentionId=a.id))),s}var v=(t(_,null,[{key:"get",value:function(e,t){var n=[].concat(h,[t]);return e.get(n)||e.set(n,m(e,t)),new _(e,t)}},{key:"clear",value:function(e,t){var n=[].concat(h,[t]);e.unset(n)}}]),t(_,[{key:"mergeChannel",value:function(e){var t=this.state.get(this.key);t.lastMessageId<e.lastMessageId&&((t=p.default.clone(t)).lastMessageId=e.lastMessageId,this.state.set(this.key,t))}},{key:"handleIncomingMessage",value:function(t){var n=this.state.get(this.key);(n=p.default.clone(n)).lastMessageId<t.id&&(n.lastMessageId=t.id);var e,a,s,r,o=u.default.getCurrentUserId(this.state),i=this.state.get("messages.channels."+t.channelId);if(i&&"ticket"===i.type&&(e=this.state.get("messages.selectedWorkspaceId"),a=this.state.get("messages.workspaces."+e),s=this.state.get("loginUser.id"),r=this.state.get("support.tickets.entities."+i.ticketId+".data.assignee"),a.residentId!==s&&r!==s||(o=a.botId)),t.author.id===o)return n.lastMentionId<t.id&&(n.lastMentionId=t.id),this.state.set(this.key,n),void this.localAck({lastMessageId:t.id,mentionCount:0});t.author.id!==o&&t.id>n.ackMessageId&&(n.unreadCount++,t.mentions&&0!==t.mentions.length?t.mentions.forEach(function(e){e.id===o&&(n.mentionCount++,t.id>n.lastMentionId&&(n.lastMentionId=t.id))}):t.mentionEveryone&&(n.mentionCount++,t.id>n.lastMentionId&&(n.lastMentionId=t.id)));var c=d.default.getMessages(this.state,this.channelId);c&&(c.messagesList.includes(n.oldestUnreadMessageId)||(n.oldestUnreadMessageId="",n.oldestUnreadMessageIdStale=!1)),n.oldestUnreadMessageId&&!n.oldestUnreadMessageIdStale||(n.oldestUnreadMessageId=t.id,n.oldestUnreadMessageIdStale=!1),this.state.set(this.key,n)}},{key:"handleUnfocus",value:function(){var e=this.state.get(this.key);e.oldestUnreadMessageId&&!e.oldestUnreadMessageIdStale&&(e.ackMessageId<e.lastMessageId||((e=p.default.clone(e)).oldestUnreadMessageIdStale=!0,this.state.set(this.key,e)))}},{key:"tryToAck",value:function(){var e=d.default.getMessages(this.state,this.channelId);e&&e.ready&&!e.hasMoreNew&&this.ack()}},{key:"ack",value:function(){var e=this.state.get(this.key);e.ackMessageId<e.lastMessageId&&((e=p.default.clone(e)).ackMessageId=e.lastMessageId,e.mentionCount=0,e.estimated=!1,e.unreadCount=0,this.state.set(this.key,e),n.default.post("/api/messages/"+e.ackMessageId+"/ack"))}},{key:"localAck",value:function(e){var t=this.state.get(this.key);(t.ackMessageId<e.lastMessageId||t.ackMessageId===e.lastMessageId&&t.mentionCount!==e.mentionCount)&&((t=p.default.clone(t)).ackMessageId=e.lastMessageId,t.mentionCount=e.mentionCount,this._rebuild(t),this.state.set(this.key,t))}},{key:"_rebuild",value:function(t,e){var n=(1<arguments.length&&void 0!==e?e:{}).resetOldestUnreadMessageId;void 0!==n&&n&&(t.oldestUnreadMessageId="",t.oldestUnreadMessageIdStale=!1),t.estimated=!1,t.unreadCount=0;var a,s=u.default.getCurrentUserId(this.state),r=d.default.getMessages(this.state,this.channelId);r&&((a=r.messagesList.filter(function(e){return r.messages[e].authorId!==s})).includes(t.oldestUnreadMessageId)||(t.oldestUnreadMessageId="",t.oldestUnreadMessageIdStale=!1),a.forEach(function(e){e>t.lastMessageId&&(t.lastMessageId=e),e>t.ackMessageId&&(t.unreadCount++,(!t.oldestUnreadMessageId||e<t.oldestUnreadMessageId)&&(t.oldestUnreadMessageId=e,t.oldestUnreadMessageIdStale=!1))}),0<t.unreadCount&&(t.estimated=r.hasMore&&a.length===t.unreadCount||r.hasMoreNew))}},{key:"rebuild",value:function(e){var t=(0<arguments.length&&void 0!==e?e:{}).resetOldestUnreadMessageId,n=void 0!==t&&t,a=this.state.get(this.key),a=p.default.clone(a);this._rebuild(a,{resetOldestUnreadMessageId:n}),this.state.set(this.key,a)}}]),_);function _(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),this.state=e,this.channelId=t,this.key=[].concat(h,[t])}function y(e){var t=e.state,n=l.default.getChannelId(t);n&&r.default.isAtBottom(t,n)&&s.default.isFocused(t)&&!f.default.isIdle(t)&&v.get(t,n).tryToAck()}b.default={name:e,depends:[s.default,r.default,f.default,o.default,c.default,u.default,l.default,d.default],signals:{channelReady:[function(e){var t=e.props,s=e.state,n=t.readStates,r=t.messagesItems,a=s.get(h),o=a?i({},a):{};n.forEach(function(t){var e=m(s,t.channelId),n=r.find(function(e){return e.channelId===t.channelId}),a=(n&&n.items||[]).reduce(function(e,t){return e.id>t.id?e:t},{});e.lastMessageId=a?a.id:"",e.lastMentionId=t.lastMentionId,e.ackMessageId=t.lastMessageId,e.mentionCount=t.mentionCount,o[e.channelId]=e}),s.set(h,o)}],connectionOpen:[function(e){var t=e.props,a=e.state,n=a.get(h),s=n?i({},n):{},r=t.lastMessages;t.readState.forEach(function(t){var e=m(a,t.channelId),n=r.find(function(e){return e.channelId===t.channelId});e.lastMessageId=n?n.id:"",e.lastMentionId=t.lastMentionId,e.ackMessageId=t.lastMessageId,e.mentionCount=t.mentionCount,s[e.channelId]=e}),a.set(h,s)}],fetchMessagesSuccess:[function(e){var t=e.props,n=e.state,a=t.channelId;v.get(n,a).rebuild()}],messageCreate:[function(e){var t=e.props,n=e.state,a=t.channelId;v.get(n,a).handleIncomingMessage(t)}],messageAck:[function(e){var t=e.props,n=e.state,a=t.channelId;v.get(n,a).localAck(t)}],channelSelect:[function(e){var t=e.props,n=e.state,a=t.channelId,s=t.selectedChannelId,r=o.default.getChannel(n,a);a!==s&&s&&r&&v.get(n,s).rebuild({resetOldestUnreadMessageId:!0})}],channelAck:[function(e){var t=e.props,n=e.state,a=t.channelId;v.get(n,a).ack()}],channelCreate:[function(e){var t=e.props,n=e.state,a=t.id;v.get(n,a).mergeChannel(t)}],channelDelete:[function(e){var t=e.props,n=e.state,a=t.id;v.clear(n,a)}],updateDimensions:[function(e){var t=e.props,n=e.state,a=t.channelId;r.default.scrolledToBottom(n,a)&&s.default.isFocused(n)&&!f.default.isIdle(n)&&v.get(n,a).tryToAck()}],windowFocused:[y,function(e){var t=e.state,n=l.default.getChannelId(t);n&&!s.default.isFocused(t)&&v.get(t,n).handleUnfocus()}],idle:[y]},getState:function(){return{readState:{}}},getReadState:function(e){return e.get(h)}}}).call(b,"views/v2/modules/messages/ReadStateStore.js")},function(e,l,d){"use strict";(function(e){Object.defineProperty(l,"__esModule",{value:!0});var t=a(d(81)),i=a(d(5)),n=a(d(3));function a(e){return e&&e.__esModule?e:{default:e}}var s=["messages","relationships"];function r(e){return{otherUserId:e.otherUser?e.otherUser.id:e.otherUserId,status:e.status,actionUserId:e.actionUserId,channelId:e.channelId}}function o(e){var t=e.props,n=e.state,a=r(t);a&&n.set([].concat(s,[a.otherUserId]),a)}function c(s){return function(e){var t=e.props,n=e.state,a=t.userId;n.set("messages.relationshipAcceptStatus."+a,s)}}function u(s){return function(e){var t=e.props,n=e.state,a=t.userId;n.set("messages.relationshipIgnoreStatus."+a,s)}}l.default={name:e,depends:[t.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,a={};t.relationships.forEach(function(e){a[e.otherUserId]=r(e)}),n.set(s,a)}],relationshipRequest:[c(n.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.userId,r=t.content;return n.post("/api/relationships/"+s+"/request",{content:r}).then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.controller,a=e.state,s=t.openChannel,r=t.result,o=i.default.getChannel(a,r.channelId);s&&n.getSignal("messages.channelSelect")({channelId:o.id,workspaceId:o.workspaceId})},c(n.default.succeeded)],error:[c(n.default.failed)]}]],relationshipAccept:[c(n.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.userId,r=t.content;return n.post("/api/relationships/"+s+"/accept",{content:r}).then(a.success).catch(a.error)},{success:[function(e){var t=e.controller,n=e.props,a=e.state,s=n.openChannel,r=n.result,o=i.default.getChannel(a,r.channelId);s&&t.getSignal("messages.channelSelect")({channelId:o.id,workspaceId:o.workspaceId})},c(n.default.succeeded)],error:[c(n.default.failed)]}]],relationshipIgnore:[u(n.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.userId;return n.post("/api/relationships/"+s+"/ignore").then(a.success).catch(a.error)},{success:[function(e){var t=e.state,n=r(e.props.result);n&&t.set([].concat(s,[n.otherUserId]),n)},u(n.default.succeeded)],error:[u(n.default.failed)]}]],relationshipAdd:[o],relationshipRemove:[o]},getState:function(){return{relationships:{},relationshipIgnoreStatus:{},relationshipAcceptStatus:{}}},getRelationships:function(e){return e.get(s)},getRelationship:function(e,t){return e.get([].concat(s,[t]))}}}).call(l,"views/v2/modules/messages/RelationshipStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=["messages","relationshipType"];t.default={name:e,depends:[],signals:{switchRelationshipFilter:[function(e){var t=e.props,n=e.state,a=t.value;n.set(s,a)}]},getState:function(){return{relationshipType:"online"}},getFilter:function(e){return e.get(s)}}}).call(t,"views/v2/modules/messages/RelationshipFilterStore.js")},function(e,r,o){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var t=s(o(14)),n=s(o(6)),a=s(o(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=["messages","lastMessages"];function u(e,t){return e?n.default.transformMessage(t,e):null}r.default={name:e,depends:[t.default,a.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,a=t.lastMessages,s=t.users,r={};a.forEach(function(t){var e={id:t.id,type:t.type,data:t.data||null,channelId:t.channelId,author:s.find(function(e){return e.id===t.author.id}),content:t.content||"",attachments:t.attachments||[],nonce:t.nonce||"",mentionEveryone:t.mentionEveryone||!1,mentions:(t.mentions||[]).map(function(t){return s.find(function(e){return e.id===t.id})}),deletedTime:t.deletedTime||"",call:t.call||null};r[t.channelId]=u(e,n)}),n.set(c,r)}],channelCreate:[function(e){var t=e.props,n=e.state;n.set([].concat(c,[t.id]),u(t.lastMessage,n))}],channelUpdate:[function(e){var t=e.props,n=e.state,a=n.get([].concat(c,[t.id]));t.lastMessage&&(!a||t.lastMessage.id>a.id)&&n.set([].concat(c,[t.id]),u(t.lastMessage,n))}],channelDelete:[function(e){var t=e.props;e.state.unset([].concat(c,[t.id]))}],fetchMessagesSuccess:[function(e){var t=e.props,n=e.state,a=t.channelId,s=t.messages,r=[].concat(c,[a]),o=n.get(r),i=!1;s.forEach(function(e){(!o||o.id<e.id)&&(i=i||!0,o=e)}),i&&n.set(r,u(o,n))}],messageCreate:[function(e){var t=e.props,n=e.state,a=[].concat(c,[t.channelId]),s=n.get(a);(!s||s.id<t.id&&"SENDING"!==t.state)&&n.set(a,u(t,n))}]},getState:function(){return{lastMessages:{}}},getLastMessages:function(e){return e.get(c)},getLastMessage:function(e,t){return e.get([].concat(c,[t]))}}}).call(r,"views/v2/modules/messages/LastMessageStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeSdp=t.parseSdp=void 0,t.fromJitsiSdp=function(e){var n=[],a=[],s=[];e.audio["payload-types"].forEach(function(t){n.push(t.id),a.push({payload:t.id,codec:t.name,rate:t.clockrate,encoding:t.channels}),t.parameters&&s.push({payload:t.id,config:Object.keys(t.parameters).map(function(e){return e+"="+t.parameters[e]}).join(";")})}),n=n.join(" ");var t={};e.audio.ssrcInfos&&e.audio.ssrcInfos.forEach(function(e){t[e.ssrc]=e.parameters});var r=[];return e.transport.candidates.forEach(function(e){r.push({foundation:e.foundation,component:e.component,transport:e.protocol,priority:e.priority,ip:e.ip,port:e.port,type:e.type,raddr:e["rel-addr"],rport:e["rel-port"],generation:e.generation,tcptype:e.tcptype})}),{version:0,origin:{username:"-",sessionId:Math.floor(o+Math.random()*i),sessionVersion:1,netType:"IN",ipVer:4,address:"0.0.0.0"},name:"-",timing:{start:0,stop:0},groups:[{type:"BUNDLE",mids:["audio"]}],msidSemantic:{semantic:"WMS",token:"*"},media:[{rtp:a,fmtp:s,type:"audio",port:9,protocol:"UDP/TLS/RTP/SAVPF",payloads:n,connection:{version:4,ip:"0.0.0.0"},rtcp:{port:9,netType:"IN",ipVer:4,address:"0.0.0.0"},iceUfrag:e.transport.ufrag,icePwd:e.transport.pwd,fingerprint:{type:e.transport.fingerprints[0].hash,hash:e.transport.fingerprints[0].fingerprint},candidates:r,setup:e.transport.fingerprints[0].setup,mid:"audio",ext:e.audio["rtp-hdrexts"].map(function(e){return{value:e.id,uri:e.uri}}),direction:"sendrecv",rtcpMux:"rtcp-mux",sources:t}]}},t.toJitsiSdp=function(e){var t=null;if(e.media.forEach(function(e){"audio"===e.type&&(t=e)}),!t)throw new Error("audioMedia is null");var n=t.fingerprint||e.fingerprint;if(!n)throw new Error("fingerprint is null");var a=[];t.sources&&Object.keys(t.sources).forEach(function(e){a.push({ssrc:Number(e),parameters:t.sources[e]})});var s=[];t.ext.forEach(function(e){s.push({id:e.value,uri:e.uri})});var r={};return t.rtp.forEach(function(e){r[e.payload]={id:e.payload,name:e.codec,clockrate:e.rate,channels:e.encoding}}),t.fmtp.forEach(function(e){var n=r[e.payload].parameters={};e.config.split(";").forEach(function(e){var t=(e=e.trim()).split("=");n[t[0]]=t[1]})}),{audio:{"payload-types":Object.values(r),"rtp-hdrexts":s,ssrcInfos:a},transport:{xmlns:"urn:xmpp:jingle:transports:ice-udp:1",fingerprints:[{fingerprint:n.hash,setup:t.setup,hash:n.type}],candidates:[],"rtcp-mux":!0,ufrag:t.iceUfrag,pwd:t.icePwd}}},t.diffSdp=function(e,t){var s=null;return t.media.forEach(function(t,n){var a=e.media[n];a||!t?t.sources&&Object.keys(t.sources).forEach(function(e){a.sources&&a.sources[e]||((s=s||[])[n]||(s[n]={index:n,mid:t.mid,sources:{}}),s[n].sources[e]=t.sources[e])}):(s=s||[])[n]={index:n,mid:t.mid,sources:t.sources||{}}}),s};var a=n(274);t.parseSdp=a.parse,t.writeSdp=a.write;var o=Math.pow(10,17),i=9*o},function(e,i,c){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t,n=c(5),a=(t=n)&&t.__esModule?t:{default:t};var s=["messages","menu"],r=[].concat(s,["showMenu"]),o=[].concat(s,["selectedMenuItem"]);i.default={name:e,depends:[a.default],signals:{toggleMenu:[function(e){var t=e.props,n=e.state,a=t.value;n.set(r,a)}],selectMenuItem:[function(e){var t=e.props,n=e.state,a=t.item;n.set(o,a),n.set(r,!1)}]},getState:function(){return{menu:{showMenu:!1,selectedMenuItem:"default"}}},getSelectedMenuItem:function(e){return e.get(o)}}}).call(i,"views/v2/modules/messages/MenuStore.js")},function(e,t,b){"use strict";b.d(t,"a",function(){return K}),b.d(t,"b",function(){return ge}),b.d(t,"c",function(){return he}),b.d(t,"d",function(){return me}),b.d(t,"e",function(){return Q}),b.d(t,"f",function(){return U});function p(e){return F.get(e)}function w(e){return console.error(e)}function n(t,n){return function(e){t.push(e),T||(T=!0,n&&4&A.$flags$?z(V):A.raf(V))}}function a(e,t){for(var n=0,a=0;n<e.length&&(a=performance.now())<t;)try{e[n++](a)}catch(e){w(e)}n===e.length?e.length=0:0!==n&&e.splice(0,n)}function g(e){return"object"===(e=typeof e)||"function"===e}function S(e,t){return void 0===t&&(t=""),function(){}}function l(e,t,n){var a,s,r,o,i,c,u,l,d=S(0,t.$tagName$),f=(a=x&&e.shadowRoot?e.shadowRoot:e.getRootNode(),r=e,u=Y((s=t).$tagName$),l=$.get(u),a=11===a.nodeType?a:j,l&&("string"==typeof l?(a=a.head||a,i=void 0,(o=J.get(a))||J.set(a,o=new Set),o.has(u)||(A.$cssShim$?(c=(i=A.$cssShim$.createHostStyle(r,u,l,!!(10&s.$flags$)))["s-sc"])&&(u=c,o=null):(i=j.createElement("style")).innerHTML=l,a.insertBefore(i,a.querySelector("link")),o&&o.add(u))):a.adoptedStyleSheets.includes(l)||(a.adoptedStyleSheets=k(a.adoptedStyleSheets,[l]))),u);10&t.$flags$&&(e["s-sc"]=f,e.classList.add(f+"-h")),d()}function i(e,t,n,a,s,r){if(n!==a){var o=t in e,i=t.toLowerCase();if("class"===t){var c=e.classList,u=te(n),l=te(a);c.remove.apply(c,u.filter(function(e){return e&&!l.includes(e)})),c.add.apply(c,l.filter(function(e){return e&&!u.includes(e)}))}else if("style"===t){for(var d in n)a&&null!=a[d]||(d.includes("-")?e.style.removeProperty(d):e.style[d]="");for(var d in a)n&&a[d]===n[d]||(d.includes("-")?e.style.setProperty(d,a[d]):e.style[d]=a[d])}else if("key"!==t)if("ref"===t)a&&a(e);else if(o||"o"!==t[0]||"n"!==t[1]){var f,p=g(a);if((o||p&&null!==a)&&!s)try{e.tagName.includes("-")?e[t]=a:(f=null==a?"":a,"list"===t?o=!1:null!=n&&e[t]==f||(e[t]=f))}catch(e){}null==a||!1===a?e.removeAttribute(t):(!o||4&r||s)&&!p&&(a=!0===a?"":a,e.setAttribute(t,a))}else t="-"===t[2]?t.slice(3):i in P?i.slice(2):i[2]+t.slice(3),n&&A.rel(e,t,n,!1),a&&A.ael(e,t,a,!1)}}function c(e,t,n,a){var s=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,r=e&&e.$attrs$||G,o=t.$attrs$||G;for(a in r)a in o||i(s,a,r[a],void 0,n,t.$flags$);for(a in o)i(s,a,r[a],o[a],n,t.$flags$)}function m(e,t,n,a,s,r){var o,i=e;for(i.shadowRoot&&i.tagName===y&&(i=i.shadowRoot);s<=r;++s)a[s]&&(o=ne(null,n,s))&&(a[s].$elm$=o,i.insertBefore(o,t))}function v(e,t,n,a,s){for(;t<=n;++t)(a=e[t])&&(s=a.$elm$,re(a),s.remove())}function d(e,t,n,a){y=e.tagName;var s,r=t.$vnode$||Z(null,null),o=(s=a)&&s.$tag$===X?a:Q(null,null,a);o.$tag$=null,o.$flags$|=4,(t.$vnode$=o).$elm$=r.$elm$=e.shadowRoot||e,_=e["s-sc"],se(r,o)}function u(t,e){e&&!t.$onRenderResolve$&&e["s-p"].push(new Promise(function(e){return t.$onRenderResolve$=e}))}function I(e,t,n,a){if(t.$flags$|=16,!(4&t.$flags$)){var s,r=S(0,n.$tagName$),o=t.$ancestorComponent$,i=t.$lazyInstance$,c=function(){return oe(e,t,n,i,a)};return u(t,o),s=a?(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.forEach(function(e){var t=e[0],n=e[1];return ue(i,t,n)}),t.$queuedListeners$=null),ue(i,"componentWillLoad")):ue(i,"componentWillUpdate"),r(),le(s,function(){return B(c)})}t.$flags$|=512}function f(e,t,n,a){var s,r,o,i=p(e),c=i.$hostElement$,u=i.$instanceValues$.get(t),l=i.$flags$,d=i.$lazyInstance$;s=n,r=a.$members$[t][0],(n=null==s||g(s)?s:4&r?"false"!==s&&(""===s||!!s):1&r?String(s):s)===u||8&l&&void 0!==u||(i.$instanceValues$.set(t,n),d&&(a.$watchers$&&128&l&&((o=a.$watchers$[t])&&o.forEach(function(e){try{d[e](n,u,t)}catch(e){w(e)}})),2==(18&l)&&I(c,i,a,!1)))}function E(e,a,s){var t,r,o;return a.$members$&&(e.watchers&&(a.$watchers$=e.watchers),t=Object.entries(a.$members$),r=e.prototype,t.forEach(function(e){var t=e[0],n=e[1][0];(31&n||2&s&&32&n)&&Object.defineProperty(r,t,{get:function(){return e=t,p(this).$instanceValues$.get(e);var e},set:function(e){f(this,t,e,a)},configurable:!0,enumerable:!0})}),1&s&&(o=new Map,r.attributeChangedCallback=function(t,e,n){var a=this;A.jmp(function(){var e=o.get(t);a[e]=(null!==n||"boolean"!=typeof a[e])&&n})},e.observedAttributes=t.filter(function(e){e[0];return 15&e[1][0]}).map(function(e){var t=e[0],n=e[1][1]||t;return o.set(n,t),n}))),e}function r(m,v,_,e,y){return o(void 0,void 0,void 0,function(){var u,l,d,f,p,g,h;return O(this,function(e){switch(e.label){case 0:return 0!=(32&v.$flags$)?[3,5]:(v.$flags$|=32,o=(r=_).$tagName$.replace(/-/g,"_"),i=r.$lazyBundleIds$,c=N.get(i),(y=c?c[o]:b(121)("./"+i+".entry.js").then(function(e){return N.set(i,e),e[o]},w)).then?(u=function(){},[4,y]):[3,2]);case 1:y=e.sent(),u(),e.label=2;case 2:y.isProxied||(_.$watchers$=y.watchers,E(y,_,2),y.isProxied=!0),l=S(0,_.$tagName$),v.$flags$|=8;try{new y(v)}catch(e){w(e)}return(v.$flags$&=-9,v.$flags$|=128,l(),d=Y(_.$tagName$),$.has(d)||!y.style)?[3,5]:(f=S(0,_.$tagName$),p=y.style,8&_.$flags$?[4,b.e(2).then(b.bind(null,326)).then(function(e){return e.scopeCss(p,d,!1)})]:[3,4]);case 3:p=e.sent(),e.label=4;case 4:t=d,n=p,a=!!(1&_.$flags$),s=$.get(t),L&&a?(s=s||new CSSStyleSheet).replace(n):s=n,$.set(t,s),f(),e.label=5;case 5:return g=v.$ancestorComponent$,h=function(){return I(m,v,_,!0)},g&&g["s-rc"]?g["s-rc"].push(h):h(),[2]}var t,n,a,s,r,o,i,c})})}function h(a,e){if(0==(1&A.$flags$)){var t=S(0,e.$tagName$),n=p(a);if(e.$listeners$&&(n.$rmListeners$=function(i,c,e){c.$queuedListeners$=c.$queuedListeners$||[];var t=e.map(function(e){var t=e[0],n=e[1],a=e[2],s=fe(i,t),r=de(c,a),o=pe(t);return A.ael(s,n,r,o),function(){return A.rel(s,n,r,o)}});return function(){return t.forEach(function(e){return e()})}}(a,n,e.$listeners$)),!(1&n.$flags$)){n.$flags$|=1;for(var s=a;s=s.parentNode||s.host;)if(s["s-p"]){u(n,n.$ancestorComponent$=s);break}e.$members$&&Object.entries(e.$members$).forEach(function(e){var t,n=e[0];31&e[1][0]&&a.hasOwnProperty(n)&&(t=a[n],delete a[n],a[n]=t)}),z(function(){return r(a,n,e)})}t()}}var s,_,y,C=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,o,i,c){return new(i=i||Promise)(function(n,t){function a(e){try{r(c.next(e))}catch(e){t(e)}}function s(e){try{r(c.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(a,s)}r((c=c.apply(e,o||[])).next())})},O=this&&this.__generator||function(n,a){var s,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,r&&(o=2&t[0]?r.return:t[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,t[1])).done)return o;switch(r=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,r=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(6===t[0]&&i.label<o[1]){i.label=o[1],o=t;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(t);break}o[2]&&i.ops.pop(),i.trys.pop();continue}t=a.call(n,i)}catch(e){t=[6,e],r=0}finally{s=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},k=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var a=Array(e),s=0,t=0;t<n;t++)for(var r=arguments[t],o=0,i=r.length;o<i;o++,s++)a[s]=r[o];return a},M=0,T=!1,R=!1,P=window,j=document,A={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,a){return e.addEventListener(t,n,a)},rel:function(e,t,n,a){return e.removeEventListener(t,n,a)}},x=function(){return!!j.documentElement.attachShadow}(),D=function(){var e=!1;try{j.addEventListener("e",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}(),L=function(){try{return new CSSStyleSheet,!0}catch(e){}return!1}(),F=new WeakMap,U=function(e,t){return F.set(t.$lazyInstance$=e,t)},N=new Map,$=new Map,H=[],q=[],W=[],V=function(){M++,function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){w(e)}e.length=0}(H);var e=2==(6&A.$flags$)?performance.now()+10*Math.ceil(M*(1/22)):1/0;a(q,e),a(W,e),0<q.length&&(W.push.apply(W,q),q.length=0),(T=0<H.length+q.length+W.length)?A.raf(V):M=0},z=function(e){return Promise.resolve().then(e)},B=n(q,!0),G={},K=function(){return P.CSS&&P.CSS.supports&&P.CSS.supports("color","var(--c)")?Promise.resolve():b.e(5).then(b.bind(null,324)).then(function(){if(A.$cssShim$=P.__stencil_cssshim,A.$cssShim$)return A.$cssShim$.initShim()})},J=new WeakMap,Y=function(e,t){return"sc-"+e},Q=function(n,e){for(var t=[],a=2;a<arguments.length;a++)t[a-2]=arguments[a];var s,r,o=null,i=null,c=!1,u=[],l=function(e){for(var t=0;t<e.length;t++)o=e[t],Array.isArray(o)?l(o):null!=o&&"boolean"!=typeof o&&((s="function"!=typeof n&&!g(o))&&(o=String(o)),s&&c?u[u.length-1].$text$+=o:u.push(s?Z(null,o):o),c=s)};l(t),e&&(e.key&&(i=e.key),(r=e.className||e.class)&&(e.class="object"!=typeof r?r:Object.keys(r).filter(function(e){return r[e]}).join(" ")));var d=Z(n,null);return d.$attrs$=e,0<u.length&&(d.$children$=u),d.$key$=i,d},Z=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null};return n},X={},ee=/\s/,te=function(e){return e?e.split(ee):[]},ne=function(e,t,n,a){var s,r,o=t.$children$[n],i=0;if(null!==o.$text$)s=o.$elm$=j.createTextNode(o.$text$);else{if(R=R||"svg"===o.$tag$,s=o.$elm$=j.createElementNS(R?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",o.$tag$),R&&"foreignObject"===o.$tag$&&(R=!1),c(null,o,R),null!=_&&s["s-si"]!==_&&s.classList.add(s["s-si"]=_),o.$children$)for(i=0;i<o.$children$.length;++i)(r=ne(e,o,i))&&s.appendChild(r);"svg"===o.$tag$?R=!1:"foreignObject"===s.tagName&&(R=!0)}return s},ae=function(e,t){return e.$tag$===t.$tag$&&e.$key$===t.$key$},se=function(e,t){var n=t.$elm$=e.$elm$,a=e.$children$,s=t.$children$;R=n&&n.parentNode&&void 0!==n.ownerSVGElement,R="svg"===t.$tag$||"foreignObject"!==t.$tag$&&R,null===t.$text$?(c(e,t,R),null!==a&&null!==s?function(e,t,n,a){for(var s,r,o=0,i=0,c=0,u=0,l=t.length-1,d=t[0],f=t[l],p=a.length-1,g=a[0],h=a[p];o<=l&&i<=p;)if(null==d)d=t[++o];else if(null==f)f=t[--l];else if(null==g)g=a[++i];else if(null==h)h=a[--p];else if(ae(d,g))se(d,g),d=t[++o],g=a[++i];else if(ae(f,h))se(f,h),f=t[--l],h=a[--p];else if(ae(d,h))se(d,h),e.insertBefore(d.$elm$,f.$elm$.nextSibling),d=t[++o],h=a[--p];else if(ae(f,g))se(f,g),e.insertBefore(f.$elm$,d.$elm$),f=t[--l],g=a[++i];else{for(c=-1,u=o;u<=l;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===g.$key$){c=u;break}g=(s=0<=c?(r=t[c]).$tag$!==g.$tag$?ne(t&&t[i],n,c):(se(r,g),t[c]=void 0,r.$elm$):ne(t&&t[i],n,i),a[++i]),s&&d.$elm$.parentNode.insertBefore(s,d.$elm$)}l<o?m(e,null==a[p+1]?null:a[p+1].$elm$,n,a,i,p):p<i&&v(t,o,l)}(n,a,t,s):null!==s?(null!==e.$text$&&(n.textContent=""),m(n,null,t,s,0,s.length-1)):null!==a&&v(a,0,a.length-1)):e.$text$!==t.$text$&&(n.data=t.$text$),R&&"svg"===t.$tag$&&(R=!1)},re=function(e){e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.forEach(re)},oe=function(e,t,n,a,s){var r=S(0,n.$tagName$),o=e["s-rc"];s&&l(e,n,t.$modeName$);var i=S(0,n.$tagName$);try{d(e,t,0,a.render())}catch(e){w(e)}A.$cssShim$&&A.$cssShim$.updateHost(e),t.$flags$&=-17,t.$flags$|=2,o&&(o.forEach(function(e){return e()}),e["s-rc"]=void 0),i(),r();function c(){return ie(e,t,n)}var u=e["s-p"];0===u.length?c():(Promise.all(u).then(c),t.$flags$|=4,u.length=0)},ie=function(e,t,n){var a=S(0,n.$tagName$),s=t.$ancestorComponent$;64&t.$flags$?a():(t.$flags$|=64,e.classList.add("hydrated"),a(),t.$onReadyResolve$(e),s||ce()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&z(function(){return I(e,t,n,!1)}),t.$flags$&=-517},ce=function(e){j.documentElement.classList.add("hydrated"),A.$flags$|=2},ue=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(e){w(e)}},le=function(e,t){return e&&e.then?e.then(t):t()},de=function(t,n){return function(e){256&t.$flags$?t.$lazyInstance$[n](e):t.$queuedListeners$.push([n,e])}},fe=function(e,t){return 8&t?P:e},pe=function(e){return D?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e)},ge=function(e,t){void 0===t&&(t={});var i,n=S(),c=[],u=t.exclude||[],a=j.head,l=P.customElements,s=a.querySelector("meta[charset]"),r=j.createElement("style"),d=[],f=!0;Object.assign(A,t),A.$resourcesUrl$=new URL(t.resourcesUrl||"./",j.baseURI).href,t.syncQueue&&(A.$flags$|=4),e.forEach(function(o){return o[1].forEach(function(e){var s={$flags$:e[0],$tagName$:e[1],$members$:e[2],$listeners$:e[3]};s.$members$=e[2],s.$listeners$=e[3],s.$watchers$={},!x&&1&s.$flags$&&(s.$flags$|=8);var r,t=s.$tagName$,n=(r=HTMLElement,C(a,r),a.prototype.connectedCallback=function(){var e=this;i&&(clearTimeout(i),i=null),f?d.push(this):A.jmp(function(){return h(e,s)})},a.prototype.disconnectedCallback=function(){var n=this;A.jmp(function(){return e=n,void(0==(1&A.$flags$)&&((t=p(e)).$rmListeners$&&(t.$rmListeners$(),t.$rmListeners$=void 0),A.$cssShim$&&A.$cssShim$.removeHost(e)));var e,t})},a.prototype["s-hmr"]=function(e){},a.prototype.forceUpdate=function(){var e,t,n;t=s,2==(18&(n=p(e=this)).$flags$)&&I(e,n,t,!1)},a.prototype.componentOnReady=function(){return p(this).$onReadyPromise$},a);function a(e){var t,n,a=r.call(this,e)||this;return(n={$flags$:0,$hostElement$:t=e=a,$instanceValues$:new Map}).$onReadyPromise$=new Promise(function(e){return n.$onReadyResolve$=e}),t["s-p"]=[],t["s-rc"]=[],F.set(t,n),1&s.$flags$&&(x?e.attachShadow({mode:"open"}):"shadowRoot"in e||(e.shadowRoot=e)),a}s.$lazyBundleIds$=o[0],u.includes(t)||l.get(t)||(c.push(t),l.define(t,E(n,s,1)))})}),r.innerHTML=c+"{visibility:hidden}.hydrated{visibility:inherit}",r.setAttribute("data-styles",""),a.insertBefore(r,s?s.nextSibling:a.firstChild),f=!1,0<d.length?d.forEach(function(e){return e.connectedCallback()}):A.jmp(function(){return i=setTimeout(ce,30,"timeout")}),n()},he=function(e,t,n){var a=me(e);return{emit:function(e){return a.dispatchEvent(new CustomEvent(t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e}))}}},me=function(e){return p(e).$hostElement$}},,,,,function(e,t,n){"use strict";n.p=window.webpack_public_path,n(91),n(92),n(93)},function(e,t,n){e.exports=n(0)(704)},function(e,t,n){e.exports=n(0)(610)},function(e,t,n){e.exports=n(0)(1101)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(95)),s=d(n(122)),r=d(n(158)),o=d(n(202)),i=d(n(205)),c=d(n(315)),u=d(n(317)),l=d(n(319));function d(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.default)({modules:[r.default,o.default,i.default,c.default,u.default,l.default],component:s.default})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e){var t,n,l=e.modules,a=e.component,d=e.routes,s=(n=t=function(){function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,t)),a=n.props,s=a.data,r=a.contextData,o=a.options.isServer,i=f({},s,r),c=null;return o?c=I(l,e):(c=function(e,t,n){var r=S(e,n),o={};t&&(o.router=(0,v.default)(t));e.forEach(function(e){Object.keys(e).forEach(function(a){var s=e[a];o[a]=function(e){var t=e.controller,n=e.path;if(n!==a)throw new Error("path("+n+") !== moduleName("+a+")");return{state:r[a],signals:(0,w.composeSignals)(s),provider:(0,h.ContextProvider)(function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},a,(0,w.composeServices)(s,t)))}}})});var a=null;{_.default.DEVTOOLS}var s={state:r,modules:o,providers:[(0,y.default)(),(0,h.ContextProvider)({http:p.default})]};a&&(s.devtools=a);var i=(0,g.Controller)(s);0<=i.contextProviders.indexOf(b.default)&&i.contextProviders.splice(i.contextProviders.indexOf(b.default),1);return i}(l,d,i),window.__controller__=c),n.state={controller:c},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,c.default.Component),o(u,[{key:"getChildContext",value:function(){return this.props.contextData}},{key:"componentDidMount",value:function(){document.body.style.display=""}},{key:"render",value:function(){var e=this.state.controller;return c.default.createElement(m.Container,{controller:e},c.default.createElement(a,null))}}]),u}(),t.propTypes={data:i.default.any.isRequired,contextData:i.default.any.isRequired,options:i.default.any.isRequired},t.childContextTypes={locale:i.default.string,i18nOverrides:i.default.object,i18nKeyOnly:i.default.string,utcOffset:i.default.string,platform:i.default.object,supportMobile:i.default.bool,publicPath:i.default.string,cookies:i.default.object,appVersion:i.default.string,weixinConfig:i.default.object,commitId:i.default.string},n);return s.ReactDOMrender=function(e,t){var n;"undefined"!=typeof window&&(n=r(118)).applyPolyfills().then(function(){n.defineCustomElements(window)}),u.default.hydrate(c.default.createElement(s,e),t)},s.runInitialData=function(e,t){var n=I(l,e,t);return n.runInitialData().then(function(){return f({},e,{data:n.getState([])})})},s};var i=s(r(12)),c=s(r(10)),u=s(r(50)),n=s(r(96)),l=r(35),p=s(l),g=r(98),h=r(99),m=r(25),v=s(r(100)),_=s(r(8)),y=s(r(101)),d=s(r(102)),b=s(r(52)),w=r(114);function s(e){return e&&e.__esModule?e:{default:e}}function S(e,a){var s={};return e&&e.forEach(function(n){Object.keys(n).forEach(function(e){if(void 0!==s[e])throw new Error("conflict module name: "+e);var t=n[e];s[e]=(0,w.composeState)(t,a)})}),(0,n.default)({},s,a)}function I(e,t,n){var a=t.data,s=t.contextData,r=S(e,f({},a,s)),o={};e&&e.forEach(function(a){Object.keys(a).forEach(function(e){var t=a[e],n=(0,w.composeInitialDataSignal)(t);n.length&&(o[e]=(0,g.parallel)(n))})});var i={};e&&e.forEach(function(e){Object.keys(e).forEach(function(n){var a=e[n];i[n]=function(e){var t=e.path;if(t!==n)throw new Error("path("+t+") !== moduleName("+n+")");return{state:r[n],signals:(0,w.composeSignals)(a)}}})});var c=null;_.default.DEVTOOLS;var u={state:r,modules:i,initialDataSignals:o,providers:[(0,h.ContextProvider)({http:(0,l.AxiosProviderFactory)({baseURL:_.default.REQUEST_BASE_URL_INTERNAL,headers:n})()})]};return c&&(u.devtools=c),new d.default(u)}},function(e,t,n){e.exports=n(0)(1024)},function(e,t,n){e.exports=n(0)(22)},function(e,t,n){e.exports=n(0)(152)},function(e,t,n){e.exports=n(0)(1011)},function(e,t,n){e.exports=n(0)(1706)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(e){var t=e.controller;return e.controller=new Proxy(t,{get:function(e,t){if("getSignal"!==t)return e[t];var n=e[t];return function(e){var t=n.apply(this,[e]);return function(e){setTimeout(function(){t(e)},0)}}}}),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r,o=n(103);var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,((r=o)&&r.__esModule?r:{default:r}).default),a(c,[{key:"runInitialData",value:function(){var n=this,a=[];return Object.keys(this.initialDataSignals).forEach(function(e){var t=n.initialDataSignals[e];a.push(n.run(e+"__INITIAL_DATA",t))}),Promise.all(a)}}]),c);function c(e){var t=e.initialDataSignals,n=void 0===t?{}:t,a=function(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["initialDataSignals"]);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));return s.initialDataSignals=n,s}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r,o=n(104),i=(r=o)&&r.__esModule?r:{default:r},c=n(16);var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i.default),a(l,[{key:"trackChanges",value:function(e){this.changes=this.changes.concat(e)}},{key:"getChanges",value:function(){var n=this;return this.changes.reduce(function(e,t){return e[t.path.join(".")]=n.getState(t.path),e},{})}},{key:"getScript",value:function(){var e=JSON.stringify(this.getChanges());return this.hasRun=!0,"<script>window.CEREBRAL_STATE = "+e+"<\/script>"}},{key:"runSequence",value:function(e,t){var n,a,s,r,o=void 0;return Array.isArray(e)?o=this.run("UniversalController.run",e,t):"string"==typeof e?(a=(n=(0,c.ensurePath)(e)).pop(),r=(s=(0,c.getModule)(n,this.module))&&s.signals[a],o=this.run(e,r.signal,t)):(0,c.throwError)("Sequence must be a signal-path or an array of action."),o}},{key:"setState",value:function(e,t){this.model.set((0,c.ensurePath)(e),t),this.flush(!0)}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.changes=[],t.model.state=JSON.parse(JSON.stringify(t.model.state)),t.trackChanges=t.trackChanges.bind(t),t.on("flush",t.trackChanges),t.hasRun=!1,t}t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=c(n(105)),o=c(n(106)),i=c(n(111));function c(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o.default),a(l,[{key:"flush",value:function(e){var t=this.model.flush();(e||Object.keys(t).length)&&(this.updateComponents(t,e),this.emit("flush",t,Boolean(e)))}},{key:"updateComponents",value:function(t,n){var a=this,e=[],e=n?this.componentDependencyStore.getAllUniqueEntities():this.componentDependencyStore.getUniqueEntities(t),s=Date.now();e.forEach(function(e){a.devtools&&a.devtools.updateComponentsMap(e),e.onUpdate(t,n)});var r=Date.now();this.devtools&&e.length&&this.devtools.sendComponentsMap(e,t,s,r)}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,Object.assign({Model:i.default},e)));return a.componentDependencyStore=new r.default,a.flush=a.flush.bind(a),a.on("asyncFunction",function(e,t){t.isParallel||a.flush()}),a.on("parallelStart",function(){return a.flush()}),a.on("parallelProgress",function(e,t,n){1===n&&a.flush()}),a.on("end",function(){return a.flush()}),a}t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=n(16);var o=(a(i,[{key:"addEntity",value:function(s,e){var t=this;for(var n in e)!function(e){var a=e.split(".");a.reduce(function(e,t,n){return e[t]||(e[t]={}),n<a.length-1?(e[t].children=e[t].children||{},e[t].children):(e[t].entities=e[t].entities?e[t].entities.concat(s):[s],e)},t.map)}(n)}},{key:"removeEntity",value:function(s,e){var t=this;for(var n in e)!function(e){var a=e.split(".");a.reduce(function(e,t,n){return n===a.length-1&&(e[t].entities.splice(e[t].entities.indexOf(s),1),e[t].entities.length||delete e[t].entities),e[t].children},t.map)}(n)}},{key:"updateEntity",value:function(e,n,a){var t=Object.keys(n).reduce(function(e,t){return a[t]||(e[t]=!0),e},{}),s=Object.keys(a).reduce(function(e,t){return n[t]||(e[t]=!0),e},{});this.removeEntity(e,t),this.addEntity(e,s)}},{key:"getAllUniqueEntities",value:function(){var s=[];return function e(t){for(var n in t){if(t[n].entities)for(var a=0;a<t[n].entities.length;a++)-1===s.indexOf(t[n].entities[a])&&s.push(t[n].entities[a]);t[n].children&&e(t[n].children)}}(this.map),s}},{key:"getUniqueEntities",value:function(e){return(0,r.dependencyMatch)(e,this.map).reduce(function(e,t){return(t.entities||[]).reduce(function(e,t){return-1===e.indexOf(t)?e.concat(t):e},e)},[])}}]),i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.map={}}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=o(n(107)),_=o(n(108)),y=n(16),b=o(n(52)),w=o(n(109)),S=o(n(110));function o(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(I,r.default),a(I,[{key:"getModel",value:function(){return this.model}},{key:"getState",value:function(e){return this.model.get((0,y.ensurePath)((0,y.cleanPath)(e)))}},{key:"runSignal",value:function(n,e,t){var d=this,a=2<arguments.length&&void 0!==t?t:{};!this.devtools||(0,y.isObject)(a)&&(0,y.isSerializable)(a)||(console.warn('You passed an invalid payload to signal "'+n+'". Only serializable payloads can be passed to a signal. The payload has been ignored. This is the object:',a),a={}),this.devtools&&(a=Object.keys(a).reduce(function(e,t){return(0,y.isSerializable)(a[t],d.devtools.allowedTypes)?e[t]=(0,y.forceSerializable)(a[t]):console.warn('You passed an invalid payload to signal "'+n+'", on key "'+t+'". Only serializable values like Object, Array, String, Number and Boolean can be passed in. Also these special value types:',d.devtools.allowedTypes),e},{})),this.run(n,e,a,function(e){if(e){var a=(0,y.ensurePath)(e.execution.name),t=a.reduce(function(e,t,n){return n===a.length-1&&e.signals[t]?e.signals[t].catch:e?e.modules[t]:null},d.module);if(!t){if(!(d.catch instanceof Map))throw e;t=d.catch}if(t instanceof Map){var n=!0,s=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=f(o.value,2),u=c[0],l=c[1];if(e instanceof u)return void d.runSignal("catch",l,e.payload)}}catch(e){s=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw r}}}throw e}})}},{key:"getSignal",value:function(e){var t=(0,y.ensurePath)(e),n=t.pop(),a=t.reduce(function(e,t){return e?e.modules[t]:void 0},this.module),s=a&&a.signals[n];return s&&s.run}},{key:"getSignals",value:function(e){var t=(0,y.ensurePath)(e).reduce(function(e,t){return e?e.modules[t]:void 0},this.module),n=t&&t.signals;if(n){var a={};for(var s in n){var r=n[s].run;a[s]=r}return a}}},{key:"addModule",value:function(e,t){var n=(0,y.ensurePath)(e),a=n.pop(),s=(0,y.getModule)(n,this.module),r=new _.default(this,(0,y.ensurePath)(e),t);(s.modules[a]=r).provider&&this.contextProviders.push(r.provider),this.emit("moduleAdded",e.split("."),r),this.flush()}},{key:"removeModule",value:function(e){if(!e)return console.warn("Controller.removeModule requires a Module Path"),null;var t=(0,y.ensurePath)(e),n=t.pop(),a=(0,y.getModule)(t,this.module),s=a.modules[n];s.provider&&this.contextProviders.splice(this.contextProviders.indexOf(s.provider),1),delete a.modules[n],this.emit("moduleRemoved",(0,y.ensurePath)(e),s),this.flush()}}]),I);function I(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(I.__proto__||Object.getPrototypeOf(I)).call(this)),n=e.state,a=void 0===n?{}:n,s=e.signals,r=void 0===s?{}:s,o=e.providers,i=void 0===o?[]:o,c=e.modules,u=void 0===c?{}:c,l=e.devtools,d=void 0===l?null:l,f=e.options,p=void 0===f?{}:f,g=e.stateChanges,h=void 0===g?"undefined"!=typeof window&&window.CEREBRAL_STATE:g,m=t.getSignal,v=t.getSignals;return t.getSignal=function(){(0,y.throwError)('You are grabbing a signal before controller has initialized, please wait for "initialized" event')},t.getSignals=function(){(0,y.throwError)('You are grabbing a signals before controller has initialized, please wait for "initialized" event')},t.options=p,t.catch=e.catch||null,t.devtools=d,t.module=new _.default(t,[],{state:a,signals:r,modules:u}),t.model=new e.Model(t),t.emit("initialized:model"),t.contextProviders=[(0,S.default)(t)].concat(t.devtools?[(0,w.default)()]:[]).concat((0,y.isDeveloping)()?[b.default]:[]).concat(t.model.StateProvider(t.devtools)).concat(i.concat((0,y.getProviders)(t.module))),h&&Object.keys(h).forEach(function(e){t.model.set((0,y.ensurePath)(e),h[e])}),t.devtools&&t.devtools.init(t),!t.devtools&&(0,y.isDeveloping)()&&"undefined"!=typeof navigator&&/Chrome/.test(navigator.userAgent)&&console.warn("You are not using the Cerebral devtools. It is highly recommended to use it in combination with the debugger: http://cerebraljs.com/docs/get_started/debugger.html"),t.getSignal=m,t.getSignals=v,t.emit("initialized"),t}t.default=i},function(e,t,n){e.exports=n(0)(84)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16);function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.default=function n(a,s,e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=s.join("."),r={controller:a,path:t,name:s.slice().pop()},o="function"==typeof e?e(r):e;return o.signals=Object.keys(o.signals||{}).reduce(function(e,t){var n=o.signals[t];return n||(0,i.throwError)('Signal with name "'+t+'" is undefined. Please check that the signal is set to either an array or a function.'),e[t]={signal:n.signal||n,catch:n.catch||a.catch?new Map([].concat(a.catch?[].concat(c(a.catch)):[]).concat(n.catch?[].concat(c(n.catch)):[])):null,run:function(e){a.runSignal(s.concat(t).join("."),n.signal||n,e)}},e},{}),o.modules=Object.keys(o.modules||{}).reduce(function(e,t){return e[t]=new n(a,s.concat(t),o.modules[t]),e},{}),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(i,t,n,a){var s=i.controller.devtools;return s.preventPropsReplacement&&Object.keys(n).forEach(function(e){if(a&&e in a&&a[e]!==n[e])throw new Error('Cerebral Devtools - You have activated the "preventPropsReplacement" option and in signal "'+i.execution.name+'", before the action "'+t.name+'", the key "'+e+'" was replaced')}),i.debugger={send:function(e){s.sendExecutionData(e,i,t,n)},wrapProvider:function(r){var o=i[r];i[r]=Object.keys(o).reduce(function(e,a){var s=o[a];return e[a]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.debugger.send({method:r+"."+a,args:t}),s.apply(o,t)},e[a].direct=s.bind(o),e},"function"==typeof o?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.debugger.send({method:""+r,args:t}),o.apply(o,t)}:{})}},i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){return function(e){return e.controller=t,e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r,u=n(16),o=n(112);var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,((r=o)&&r.__esModule?r:{default:r}).default),a(l,[{key:"updateIn",value:function(s,r,e){var o=this,i=2<arguments.length&&void 0!==e&&e;s.length?s.reduce(function(e,t,n){var a;return n===s.length-1?(Array.isArray(e)||(0,u.isObject)(e)||(0,u.throwError)('The path "'+s.join(".")+'" is invalid. Path: "'+s.slice(0,s.length-1).join(".")+'" is type of "'+(null===e?"null":void 0===e?"undefined":c(e))+'"'),a=e[t],r(e[t],e,t),(e[t]!==a||(0,u.isComplexObject)(e[t])&&(0,u.isComplexObject)(a))&&o.changedPaths.push({path:s,forceChildPathUpdates:i})):e[t]||(e[t]={}),e[t]},this.state):r(this.state,this,"state")}},{key:"verifyValue",value:function(e,t){this.devtools&&!(0,u.isSerializable)(e,this.devtools.allowedTypes)&&(0,u.throwError)('You are passing a non serializable value into the state tree on path "'+t.join(".")+'"'),this.devtools&&(0,u.forceSerializable)(e),this.devtools&&this.devtools.warnStateProps&&(0,u.addCerebralStateKey)(e)}},{key:"verifyValues",value:function(e,t){var n=this;this.devtools&&e.forEach(function(e){n.verifyValue(e,t)})}},{key:"get",value:function(e){return(0<arguments.length&&void 0!==e?e:[]).reduce(function(e,t){return e?e[t]:void 0},this.state)}},{key:"set",value:function(e,a){this.verifyValue(a,e),this.updateIn(e,function(e,t,n){t[n]=a},!0)}},{key:"toggle",value:function(e){this.updateIn(e,function(e,t,n){t[n]=!e})}},{key:"push",value:function(e,t){this.verifyValue(t,e),this.updateIn(e,function(e){e.push(t)})}},{key:"merge",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var s=Object.assign.apply(Object,n);if(this.get(e))for(var r in s)this.set(e.concat(r),s[r]);else this.set(e,s)}},{key:"pop",value:function(e){this.updateIn(e,function(e){e.pop()})}},{key:"shift",value:function(e){this.updateIn(e,function(e){e.shift()})}},{key:"unshift",value:function(e,t){this.verifyValue(t,e),this.updateIn(e,function(e){e.unshift(t)})}},{key:"splice",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.verifyValues(n,e),this.updateIn(e,function(e){e.splice.apply(e,n)})}},{key:"unset",value:function(e){this.updateIn(e,function(e,t,n){delete t[n]},!0)}},{key:"concat",value:function(e,a){this.verifyValue(a,e),this.updateIn(e,function(e,t,n){t[n]=e.concat(a)})}},{key:"increment",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:1;if(!Number.isInteger(a))throw new Error("Cerebral state.increment: you must increment with integer values.");this.updateIn(e,function(e,t,n){if(!Number.isInteger(e))throw new Error("Cerebral state.increment: you must increment integer values.");t[n]=e+a})}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.devtools=e.devtools,t.state=t.devtools&&t.devtools.warnStateProps?(0,u.addCerebralStateKey)(t.initialState):t.initialState,e.on("initialized",function(){t.flush()}),t}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r,o=n(16),i=n(113),c=(r=i)&&r.__esModule?r:{default:r};var u=(a(l,[{key:"onModuleAdded",value:function(e,t){this.set(e,t.state)}},{key:"onModuleRemoved",value:function(e){this.unset(e)}},{key:"flush",value:function(){var e=this.changedPaths.slice();return this.changedPaths=[],e}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.initialState=Object.assign(e.module.state,(0,o.extractModulesProp)(e.module.modules,"state")),this.StateProvider=c.default,this.changedPaths=[],e.on("moduleAdded",this.onModuleAdded.bind(this)),e.on("moduleRemoved",this.onModuleRemoved.bind(this))}t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(16);t.default=function(e){var t=["concat","get","increment","merge","pop","push","set","shift","splice","toggle","unset","unshift"],n=null;return function(c,u){var r,o,i;return c.state=n=n||(o=(r=c).controller.model,i=null,t.reduce(function(e,s){return e[s]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=(0,l.ensurePath)((0,l.cleanPath)(t.shift()));return"get"===s?o.get(a):(clearTimeout(i),i=setTimeout(function(){return r.controller.flush()}),o[s].apply(o,[a].concat(t)))},e},{})),c.debugger&&(c.state=t.reduce(function(e,o){var i;return"get"===o||"compute"===o?e[o]=n[o]:(i=n[o],e[o]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.slice(),s=(0,l.ensurePath)(a.shift());c.debugger.send({datetime:Date.now(),type:"mutation",color:"#333",method:o,args:[s].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a))});try{i.apply(c.controller.model,t)}catch(e){var r=c.execution.name;(0,l.throwError)('The Signal "'+r+'" with action "'+u.name+'" has an error: '+e.message)}}),e},{})),c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.composeSignals=function(e){var t=[],n={};return e.forEach(function(e){!function t(e,n,a){if("inProgress"===a[e.name])throw new Error("cyclic dependencies found");if("done"===a[e.name])return;a[e.name]="inProgress";e.depends&&e.depends.length&&e.depends.forEach(function(e){t(e,n,a)});n.push(e);a[e.name]="done"}(e,t,n)}),t.reduce(function(e,t){var n=c(t)+"/",a=t.signals||{};return Object.keys(a).reduce(function(e,t){return e[t]=(e[t]||[]).concat(u(n,a[t]||[])),e},e)},{})},t.composeInitialDataSignal=function(e){var a=[];return e.forEach(function(e){var t=c(e)+"/",n=e.signals&&e.signals.INITIAL_DATA;n&&(u(t,n),a.push([n]))}),a},t.composeServices=function(e,a){return e.reduce(function(e,t){var n=t.getServices&&t.getServices(a)||{};return Object.keys(n).reduce(function(e,t){if(void 0!==e[t])throw new Error("conflict key: "+t+" in services");return e[t]=n[t],e},e)},{})},t.composeState=function(e,a){return e.reduce(function(e,t){var n=t.getState&&t.getState(a||{})||{};return Object.keys(n).reduce(function(e,t){if(void 0!==e[t])throw new Error("conflict key: "+t+" in state");return e[t]=n[t],e},e)},{})};var a=i(n(115)),s=i(n(116)),r=i(n(36)),o=i(n(117));function i(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.name,n=t.lastIndexOf("/")+1,a=t.lastIndexOf(".");return a<0&&(a=t.length),t.substr(n,a-n)}function u(t,e){return e.forEach(function(e){if((0,a.default)(e))e.displayNamePrcessed||(e.displayNamePrcessed=!0,e.displayName=t+function(e){if(e.displayName)return e.displayName;var t=e.toString();return t=(t=t.substr("function ".length)).substr(0,t.indexOf("("))}(e));else if((0,s.default)(e))u(t,e);else{if(!(0,r.default)(e))throw Error("unknown action: "+e);u(t,(0,o.default)(e))}}),e}},function(e,t,n){e.exports=n(0)(160)},function(e,t,n){e.exports=n(0)(243)},function(e,t,n){e.exports=n(0)(1089)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(119);n.d(t,"applyPolyfills",function(){return a.a});var s,r=n(120);n.d(t,"defineCustomElements",function(){return r.a}),void 0!==window.Reflect&&void 0!==window.customElements&&(s=HTMLElement,window.HTMLElement=function(){return Reflect.construct(s,[],this.constructor)},HTMLElement.prototype=s.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,s))},function(e,t,n){"use strict";t.a=function(){var e=window,t=[];e.customElements&&(!e.Element||e.Element.prototype.closest&&e.Element.prototype.matches&&e.Element.prototype.remove)||t.push(n.e(1).then(n.bind(null,321)));"function"==typeof Object.assign&&Object.entries&&Array.prototype.find&&Array.prototype.includes&&String.prototype.startsWith&&String.prototype.endsWith&&(!e.NodeList||e.NodeList.prototype.forEach)&&e.fetch&&function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(e){return}}()&&"undefined"!=typeof WeakMap||t.push(n.e(0).then(n.bind(null,322)));return Promise.all(t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(85),s=function(e,t){return Object(a.a)().then(function(){Object(a.b)([["drop-down_4",[[1,"unity-account-switcher",{config:[1],_config:[32],_user:[32],_otherUsers:[32],_showDropdown:[32],_loginDialog:[32],_accountsLoading:[32],_height:[32],_windowHeight:[32]},[[8,"click","handleClick"]]],[1,"drop-down",{users:[16],menuItems:[16],loading:[4],logoutRedirectURL:[1,"logout-redirect-u-r-l"],currentUser:[16],userProfileURL:[1,"user-profile-u-r-l"],clientID:[1,"client-i-d"],switchAccountRidirectURL:[1,"switch-account-ridirect-u-r-l"],_editModeAccountID:[32],_showAllAccounts:[32]}],[1,"login-dialog",{loginRedirectURL:[1,"login-redirect-u-r-l"],dialogData:[16],clientID:[1,"client-i-d"],_loading:[32]}],[1,"user-avatar",{user:[16],size:[1]}]]]],t)})}},function(e,t,n){var a={"./drop-down_4.entry.js":[323,3]};function s(e){var t=a[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}s.keys=function(){return Object.keys(a)},s.id=121,e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=le(["loadingMobile"],["loadingMobile"]),i=le(["disablePlay"],["disablePlay"]),c=le(["webgl.package"],["webgl.package"]),u=le(["webgl.thumbnail"],["webgl.thumbnail"]),l=le(["webgl.webgl"],["webgl.webgl"]),d=le(["webgl.mobileWebgl"],["webgl.mobileWebgl"]),f=le(["currentHost"],["currentHost"]),p=le(["screenshot"],["screenshot"]),g=le(["embedType"],["embedType"]),h=le(["currentPath"],["currentPath"]),m=le(["webgl.project.title"],["webgl.project.title"]),v=le(["webgl.project.plays"],["webgl.project.plays"]),_=le(["webgl.project.views"],["webgl.project.views"]),y=le(["webgl.project.like"],["webgl.project.like"]),b=le(["webgl.project.reactions"],["webgl.project.reactions"]),w=le(["webgl.project.comments"],["webgl.project.comments"]),S=le(["webgl.project.likes"],["webgl.project.likes"]),I=le(["webgl.project.description"],["webgl.project.description"]),E=le(["webgl.project.enableMobile"],["webgl.project.enableMobile"]),C=le(["webgl.author.author"],["webgl.author.author"]),O=le(["webgl.author.authorTitle"],["webgl.author.authorTitle"]),k=le(["webgl.author.isAuthor"],["webgl.author.isAuthor"]),M=le(["webgl.project.projectSlug"],["webgl.project.projectSlug"]),T=le(["playerUserID"],["playerUserID"]),R=le(["webgl.webgl.projectId"],["webgl.webgl.projectId"]),P=le(["webgl.previewAttachmentId"],["webgl.previewAttachmentId"]),j=le(["webgl.uploadingPreview"],["webgl.uploadingPreview"]),A=le(["header.copyLink"],["header.copyLink"]),x=le(["webgl.logPlay"],["webgl.logPlay"]),D=le(["webgl.setUploadingPreview"],["webgl.setUploadingPreview"]),L=le(["webgl.checkVideoState"],["webgl.checkVideoState"]),F=le(["webgl.setUploadedId"],["webgl.setUploadedId"]),U=le(["header.sendCDPRequest"],["header.sendCDPRequest"]),N=le(["webgl.updateThumbnail"],["webgl.updateThumbnail"]),$=le(["webgl.setThumbnailUploading"],["webgl.setThumbnailUploading"]),H=ce(n(12)),q=ce(n(10)),W=n(25),V=n(1),z=ce(n(20)),B=ce(n(3)),G=ce(n(123)),K=n(21),J=ce(n(124)),Y=ce(n(132)),Q=ce(n(8)),Z=n(137),X=n(138),ee=n(139),te=ce(n(51)),ne=ce(n(140)),ae=n(143),se=ce(n(22)),re=ce(n(151)),oe=ce(n(17)),ie=ce(n(152));function ce(e){return e&&e.__esModule?e:{default:e}}function ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function le(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var de="cover-video",fe="record-video",pe=15,ge={mg_karting:n(153),mg_fps:n(154),mg_platformer:n(155),other:n(156),mg_lego:n(157)};var he=(0,W.decorator)({loadingMobile:(0,V.state)(o),disablePlay:(0,V.state)(i),package:(0,V.state)(c),thumbnail:(0,V.state)(u),webgl:(0,V.state)(l),mobileWebgl:(0,V.state)(d),currentHost:(0,V.state)(f),screenshot:(0,V.state)(p),embedType:(0,V.state)(g),currentPath:(0,V.state)(h),title:(0,V.state)(m),plays:(0,V.state)(v),views:(0,V.state)(_),baseLike:(0,V.state)(y),reactions:(0,V.state)(b),comments:(0,V.state)(w),likes:(0,V.state)(S),description:(0,V.state)(I),enableMobile:(0,V.state)(E),author:(0,V.state)(C),authorTitle:(0,V.state)(O),isAuthor:(0,V.state)(k),projectSlug:(0,V.state)(M),playerUserId:(0,V.state)(T),projectId:(0,V.state)(R),previewAttachmentId:(0,V.state)(P),uploadingPreview:(0,V.state)(j),copyLink:(0,V.signal)(A),logPlay:(0,V.signal)(x),setUploadingPreview:(0,V.signal)(D),checkVideoState:(0,V.signal)(L),setUploadedId:(0,V.signal)(F),sendCDPRequest:(0,V.signal)(U),updateThumbnail:(0,V.signal)(N),setThumbnailUploading:(0,V.signal)($)})(a=(0,se.default)(re.default)(a=(0,oe.default)(ie.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(me,z.default),s(me,[{key:"componentWillMount",value:function(){var e=this.props,t=e.mobileWebgl,n=e.loadingMobile,a=e.enableMobile,s=e.isAuthor,r=e.embedType,o=this.state.enableMobileState;(n||t||a)&&!o&&this.setState({enableMobileState:!0}),"detail"!==r&&"edit"!==r||(this.setState({isDetail:!0}),s&&"edit"===r&&this.setState({recordPreview:!0}))}},{key:"componentDidMount",value:function(){var e,t=this;this.isNewBuild()||(e=navigator.userAgent).indexOf("Mac OS X 1")&&-1===e.indexOf("Mac OS X 10")&&(e=e.replace(/Mac OS X 1.*?\)/,"Mac OS X 10_99)"),function(t,e){var n;if("play.unity.com"!==location.hostname&&(n="color: yellow; background-color: #2c6582; padding: 2px",console.log("Seting User-Agent from %c"+navigator.userAgent,n),console.log("                    to %c"+e,n)),navigator.__defineGetter__?navigator.__defineGetter__("userAgent",function(){return e}):Object.defineProperty&&Object.defineProperty(navigator,"userAgent",{get:function(){return e}}),t.navigator.userAgent!==e){var a={get:function(){return e}};try{Object.defineProperty(t.navigator,"userAgent",a)}catch(e){t.navigator=Object.create(navigator,{userAgent:a})}}}(window,e));var n=this.props.screenshot,a=this.state.enableMobileState;n&&window.addEventListener("keydown",this.handleKeyPress),window.addEventListener("message",this.receiveMessage),setTimeout(function(){t.setState({isDevice:(0,K.isDevice)()})},0),window.parent.postMessage({action:"webglmount",enableMobileState:a},Q.default.DEFAULT_URL),"undefined"==typeof MediaRecorder&&(console.log("Does not support recording"),setTimeout(function(){t.setState({uploadProgress:1})},0),window.parent.postMessage({action:"hideRecord",value:!0},Q.default.DEFAULT_URL)),this.loadConfig()}},{key:"componentWillUnmount",value:function(){this.props.screenshot&&window.removeEventListener("keydown",this.handleKeyPress),window.removeEventListener("message",this.receiveMessage)}},{key:"onLoad",value:function(){var e=this.props,t=e.previewAttachmentId,n=e.embedType,a=this.state.isDetail;this.setState({scriptReady:!0});var s,r=navigator.userAgent.toLowerCase();a&&t&&"no ready"!==t&&"detail"===n&&(-1!==r.indexOf("safari")&&-1===r.indexOf("chrome")||(s=videojs(de,{controls:!1,html5:{hls:{overrideNative:/Android|webOS|IEMobile|Opera Mini/i.test(navigator.userAgent)}},hls:{overrideNative:/Android|webOS|IEMobile|Opera Mini/i.test(navigator.userAgent)}}))&&(s.playsinline(!0),s.play()))}},{key:"onFullscreen",value:function(){this.gameInstance&&this.gameInstance.SetFullscreen(1)}},{key:"onStart",value:function(){var n=this,e=this.state,t=e.enableMobileState,a=e.webglConfig;if(ae.amplitudeEvents.webglDetailPlayClick(),(0,K.isDevice)()){if(!t)return;this.setState({hideCover:!0})}this.setState({preview:!1,hotkeyStep:"show"});var s,r=this.props,o=r.package.url,i=r.logPlay;this.checkWebglSupport()?(window.audioStream=[],this.initAudio(),this.isNewBuild()?(s=this.createCanvas(),createUnityInstance(s,a,function(e){return n.unityProgress(null,e)}).then(function(e){n.gameInstance=e}).catch(function(e){return console.error(e)})):UnityLoader&&UnityLoader.instantiate("gameContainer",o,{onProgress:function(e,t){return n.unityProgress(e,t)},Module:{webglContextAttributes:{preserveDrawingBuffer:!0}}}),i()):this.setState({webglNotSupport:!0})}},{key:"onScreenshot",value:function(s){var e=this,t=this.props,r=t.projectId,n=t.embedType,a=this.state,o=a.progress,i=a.showStopRecord;1<=o&&!i&&"detail"===n&&(this.gameInstance.SetFullscreen(0),this.setState({blink:!0}),setTimeout(function(){return e.setState({blink:!1})},2e3),setTimeout(function(){var e=document.getElementById("gameContainer").childNodes[0],t=e.width,n=e.height,a=document.createElement("canvas");a.width=560,a.height=560*n*1/t,a.getContext("2d").drawImage(e,0,0,a.width,a.height),window.parent.postMessage({dataUrl:a.toDataURL("image/png"),action:"screenshot",projectId:r,byHotkey:s},Q.default.DEFAULT_URL)},100))}},{key:"onClickRecordAgain",value:function(){this.setState({recordShow:!1,showStopRecord:!0}),window.parent.postMessage({action:"showStopRecord",value:!0},Q.default.DEFAULT_URL),this.sendCdp(Z.CDPRecordType.CDPRecordTypeAccept,0),window.startRecording&&(window.startRecording(),ae.amplitudeEvents.webglDetailRetryRecordingClick())}},{key:"onClickYes",value:function(){var e=this.props.setUploadingPreview,t=this.state.recordData;fetch(t).then(function(e){return e.blob()}).then(function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){window.parent.postMessage({action:"uploadPreview",dataUrl:e.target.result},Q.default.DEFAULT_URL)}}),e({value:!0}),this.sendCdp(Z.CDPRecordType.CDPRecordTypeAccept,1),window.parent.postMessage({action:"uploadingPreview",value:!0},Q.default.DEFAULT_URL),window.parent.postMessage({action:"hideRecord",value:!1},Q.default.DEFAULT_URL),this.setState({recordShow:!1,showFail:!1,hideRecord:!1}),ae.amplitudeEvents.webglDetailAcceptRecordingClick()}},{key:"onClickRetry",value:function(){(0,this.props.setUploadingPreview)({value:!0}),window.parent.postMessage({action:"retry"},Q.default.DEFAULT_URL),window.parent.postMessage({action:"uploadingPreview",value:!0},Q.default.DEFAULT_URL),window.parent.postMessage({action:"hideRecord",value:!1},Q.default.DEFAULT_URL),this.setState({recordShow:!1,showFail:!1,hideRecord:!1})}},{key:"getPlayer",value:function(e){var t=e?"cover-video_html5_api":fe;if(!document)return null;var n=document.getElementById(t);return n||(t=e?de:fe,n=document.getElementById(t)),n}},{key:"getUnityLoaderUrl",value:function(){var e=this.props,t=e.webgl.loader,n=e.package.url;if(!n)return console.log("NO URL!"),"";var a=n.lastIndexOf("/");return n.slice(0,a)+"/"+(t||"UnityLoader.js")}},{key:"isNewBuild",value:function(){return"v2"===this.props.webgl.buildVersion}},{key:"createCanvas",value:function(){var e=document.getElementById("gameContainer"),t=document.createElement("canvas");return t.setAttribute("id","#canvas"),e.appendChild(t),t}},{key:"loadConfig",value:function(){var s=this,r=this.props.package.url;this.isNewBuild()&&te.default.get(r).then(function(e){var t=e.data,n=r.lastIndexOf("/"),a=r.slice(0,n);t.dataUrl=a+"/"+t.dataUrl,t.frameworkUrl=a+"/"+t.frameworkUrl,t.codeUrl=a+"/"+t.codeUrl,t.webglContextAttributes={preserveDrawingBuffer:!0},s.setState({webglConfig:t})},function(e){console.error(e)})}},{key:"checkWebglSupport",value:function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}},{key:"initAudio",value:function(){window.recordAudioInit||(window.AudioContextOrigin=window.AudioContext||window.webkitAudioContext,window.fakeDestinations=[],window.AudioContext=function(){var t=new window.AudioContextOrigin,e=t.createMediaStreamDestination(),n=t.createGain(),a=t.createGain();return window.fakeDestinations.push(a),a.gain.value=0,a.connect(t.destination),window.audioStream.push(e.stream),n.connect(e),t.createGainOrigin=t.createGain,t.createGain=function(){var e=t.createGainOrigin();return e.connect(n),e.connectOrigin=e.connect,e.connect=function(){return e.connectOrigin(a)},e},t},window.recordAudioInit=!0)}},{key:"OpenShare",value:function(){var e=this.state.isDevice;window.parent.postMessage({action:"share",device:e},Q.default.DEFAULT_URL)}},{key:"OpenReport",value:function(){window.parent.postMessage({action:"report"},Q.default.DEFAULT_URL)}},{key:"unityProgress",value:function(e,t){var n,a=this;this.setState({progress:t}),this.gameInstance||(this.gameInstance=e),1<=t&&(setTimeout(function(){return a.setState({hotkeyStep:"fadeout"})},3e3),(n=document.getElementById("#canvas")).style.width="100%",n.style.height="100%",this.state.recordPreview&&(window.canvasStream=n.captureStream(),window.audioStream.forEach(function(e){window.canvasStream.addTrack(e.getAudioTracks()[0])}),this.initRecorder(),!this.props.previewAttachmentId&&this.state.uploadProgress<0&&(window.startRecording(),this.sendCdp(Z.CDPRecordType.CDPRecordTypeStart),this.setState({showStopRecord:!0}),window.parent.postMessage({action:"showStopRecord",value:!0},Q.default.DEFAULT_URL))))}},{key:"initRecorder",value:function(){var t,n,a=this;if("undefined"==typeof MediaRecorder)return console.log("Does not support recording"),void window.parent.postMessage({action:"hideRecord",value:!0},Q.default.DEFAULT_URL);function s(e){e.data&&0<e.data.size&&n.push(e.data)}window.recorderInit||(n=t=void 0,window.startRecording=function(){n=[];var e={mimeType:"video/webm;codecs=h264"};MediaRecorder.isTypeSupported(e.mimeType)||(console.error(e.mimeType+" is not Supported"),e={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(e.mimeType)||(console.error(e.mimeType+" is not Supported"),e={mimeType:"video/webm"},MediaRecorder.isTypeSupported(e.mimeType)||(console.error(e.mimeType+" is not Supported"),e={mimeType:""})));try{t=new MediaRecorder(window.canvasStream,e)}catch(e){return void console.error("Exception while creating MediaRecorder:",e)}(window.mediaRecorder=t).onstop=function(){var e;e=new Blob(n,{type:"video/webm"}),a.setState({recordData:window.URL.createObjectURL(e)})},t.ondataavailable=s,t.start(10),a.setState({time:pe}),window.parent.postMessage({action:"timer",time:pe},Q.default.DEFAULT_URL),window.parent.postMessage({action:"showPauseBackGround"},Q.default.DEFAULT_URL),a.timer=setInterval(function(){a.setState({time:a.state.time-1}),window.parent.postMessage({action:"timer",time:a.state.time},Q.default.DEFAULT_URL),0===a.state.time&&a.stopRecording()},1e3)},window.recorderInit=!0)}},{key:"clickClose",value:function(){window.parent.postMessage({action:"reset"},Q.default.DEFAULT_URL)}},{key:"clickMute",value:function(){var e=this.state,t=e.mute;e.progress<1||(window.fakeDestinations.forEach(function(e){e.gain.value=t?0:1}),this.setState({mute:!t}),window.parent.postMessage({action:"mute",value:!t},Q.default.DEFAULT_URL))}},{key:"stopRecording",value:function(){var e=this.state.showStopRecord;this.state.time>pe-12||!e||(clearInterval(this.timer),window.mediaRecorder.stop(),this.setState({showStopRecord:!1,recordShow:!0}),window.parent.postMessage({action:"showStopRecord",value:!1},Q.default.DEFAULT_URL),this.sendCdp(Z.CDPRecordType.CDPRecordTypeEnd),this.setState({reRecord:0,resumed:0}))}},{key:"startRecording",value:function(){var e=this,t=this.props,n=t.setUploadingPreview,a=t.uploadingPreview,s=this.state,r=s.progress,o=s.reRecord;!window.startRecording||a||r<1||(window.mediaRecorder&&"recording"===window.mediaRecorder.state?(clearInterval(this.timer),window.mediaRecorder.stop(),this.setState({showStopRecord:!1}),window.parent.postMessage({action:"showStopRecord",value:!1},Q.default.DEFAULT_URL),0===o&&this.setState({reRecord:1})):this.sendCdp(Z.CDPRecordType.CDPRecordTypeStart),setTimeout(function(){window.startRecording(),n({value:!1}),window.parent.postMessage({action:"uploadingPreview",value:!1},Q.default.DEFAULT_URL),window.parent.postMessage({action:"showStopRecord",value:!0},Q.default.DEFAULT_URL),e.setState({showStopRecord:!0})},100))}},{key:"muteRecord",value:function(e){var t=this.getPlayer(e);t&&(t.muted=!t.muted,e?this.setState({coverMuted:t.muted}):this.setState({recordMuted:t.muted}))}},{key:"gotoHead",value:function(){var e=this.getPlayer(!0);e&&(e.currentTime=.5,setTimeout(function(){return e.play()},1))}},{key:"sendCdp",value:function(e,t){var n=(0,X.getOS)(),a=(0,X.getBrowser)(),s=this.props,r=s.projectId,o=s.sendCDPRequest,i=s.previewAttachmentId,c=this.state,u=c.reRecord,l=c.resumed;switch(e){case Z.CDPRecordType.CDPRecordTypeStart:o({type:Z.CDPConnectTypes.CDPTypeWebglRecord,eventType:ee.EventType.connect,data:{type:e,projectId:r,os:n,browser:a,firstPlay:!i}});break;case Z.CDPRecordType.CDPRecordTypeEnd:o({type:Z.CDPConnectTypes.CDPTypeWebglRecord,eventType:ee.EventType.connect,data:{type:e,projectId:r,os:n,browser:a,reRecord:u,resumed:l}});break;case Z.CDPRecordType.CDPRecordTypeAccept:o({type:Z.CDPConnectTypes.CDPTypeWebglRecord,eventType:ee.EventType.connect,data:{type:e,projectId:r,os:n,browser:a,accept:t}})}}},{key:"pauseRecording",value:function(){var e=this;window.mediaRecorder&&("paused"===window.mediaRecorder.state?(window.mediaRecorder.resume(),this.timer=setInterval(function(){e.setState({time:e.state.time-1}),window.parent.postMessage({action:"timer",time:e.state.time},Q.default.DEFAULT_URL),0===e.state.time&&e.stopRecording()},1e3),window.focus(),window.parent.postMessage({action:"showPauseBackGround"},Q.default.DEFAULT_URL),window.parent.postMessage({action:"pauseState",value:!1},Q.default.DEFAULT_URL),0===this.state.resumed&&this.setState({resumed:1})):"recording"===window.mediaRecorder.state&&(window.mediaRecorder.pause(),clearInterval(this.timer),window.parent.postMessage({action:"pauseState",value:!0},Q.default.DEFAULT_URL)))}},{key:"updateProgress",value:function(e){var t,n=this.getPlayer(e);n&&(t=n.currentTime/n.duration,e?this.setState({coverPercentage:t}):this.setState({recordPercentage:t}))}},{key:"renderPlay",value:function(){var e=this,t=this.props.disablePlay,n=this.state,a=n.preview,s=n.scriptReady,r=n.isDevice,o=n.enableMobileState,i=n.isDetail,c=n.webglConfig;if(!s||!a||t||this.isNewBuild()&&!c)return null;var u=null;return r&&!o&&i||(u=q.default.createElement("a",{className:this.ss("play",i&&"play-shift"),onClick:function(){return e.onStart()}},q.default.createElement("div",{className:this.ss("mwu","ifont","ifont-icons-socialicons-unity")}),q.default.createElement("div",{className:this.ss("playtxt",!i&&"text-shift")},i?this.__("click_to_play"):this.__("play")))),q.default.createElement("div",{className:this.ss("button-wrapper")},this.renderVideo(),q.default.createElement(ne.default,null),u)}},{key:"renderThumbnail",value:function(){var e=this.props.thumbnail;if(e)return q.default.createElement("img",{src:e,className:this.ss("default-image")});var t=this.props.webgl.mgType,n=ge[t]||ge.other;return q.default.createElement("img",{src:n,className:this.ss("default-image")})}},{key:"renderEmbed",value:function(){var e=this.props,t=e.title,n=e.author,a=e.authorTitle,s=e.likes,r=e.views,o=e.description,i=e.reactions,c=e.plays,u=e.comments,l=e.projectSlug,d=[];return 0<r&&d.push(q.default.createElement("div",{id:"view",className:this.ss("count")},this.__("views_hint",{count:r}))),0<c&&d.push(q.default.createElement("div",{id:"play",className:this.ss("count")},this.__("play_hint",{count:c}))),0<i+s&&d.push(q.default.createElement("div",{id:"reaction",className:this.ss("count")},this.__("reactions_hint",{count:i+s}))),0<u&&d.push(q.default.createElement("div",{id:"comments",className:this.ss("count")},this.__("comments_hint",{count:u}))),q.default.createElement("div",{className:this.ss("embed-webgl")},q.default.createElement("a",{className:this.ss("link-share"),href:Q.default.DEFAULT_URL+"/p/"+l,target:"_blank"},q.default.createElement("div",{className:this.ss("cover")},this.renderThumbnail(),q.default.createElement("div",{className:this.ss("button-wrapper")},q.default.createElement("div",{className:this.ss("play")},q.default.createElement("div",{className:this.ss("mwu","ifont","ifont-icons-socialicons-unity")}),q.default.createElement("div",{className:this.ss("playtxt")},this.__("click_to_play"))))),q.default.createElement("div",{className:this.ss("container")},q.default.createElement("div",{className:this.ss("title")},t),q.default.createElement("div",{className:this.ss("author")},n+" - "+a),q.default.createElement("div",{className:this.ss("description")},o),q.default.createElement("div",{className:this.ss("counts")},d))))}},{key:"renderVideo",value:function(){var e=this,t=this.props,n=t.thumbnail,a=t.previewAttachmentId,s=t.embedType;if(!this.state.isDetail||!a||"no ready"===a||"detail"!==s)return null;var r="/playlist/"+a;return q.default.createElement("div",null,q.default.createElement("video",{id:de,className:"video-js vjs-default-skin vjs-big-play-centered",autoPlay:!0,playsInline:!0,muted:!0,onClick:function(){},onTimeUpdate:function(){return e.updateProgress(!0)},onEnded:function(){return e.gotoHead()},poster:n,preload:"metadata","webkit-playsinline":"",style:{display:"inline",objectFit:"cover"}},q.default.createElement("source",{src:r,type:"application/x-mpegURL"})),this.renderVideoController(!0))}},{key:"renderVideoController",value:function(e){var t=this,n=this.props.author,a=this.state,s=a.recordPercentage,r=a.coverPercentage,o=a.recordMuted,i=a.coverMuted,c=e?i:o,u={width:100*(e?r:s)+"%"};return q.default.createElement("div",{className:this.ss("video-control")},q.default.createElement("div",{className:this.ss("top-bar")},q.default.createElement("div",{className:this.ss("progress-bar")},q.default.createElement("div",{className:this.ss("percentage"),style:u})),q.default.createElement("div",{className:this.ss("mute-icon","ifont",c&&"ifont-ic_volume_mute",!c&&"ifont-ic_volume_on"),onClick:function(){return t.muteRecord(e)}})),q.default.createElement("div",{className:this.ss("video-note")},this.__("video_note",{author:n})))}},{key:"renderRecordPreview",value:function(){var e=this,t=this.state,n=t.recordShow,a=t.recordData;return q.default.createElement("div",{className:this.ss("record-preview")},q.default.createElement(Y.default,{open:n,position:"center",backDropHeight:"580px",className:this.ss("record-preview")},q.default.createElement("div",{className:this.ss("record-content")},q.default.createElement("div",{className:this.ss("preview-wrapper")},q.default.createElement("video",{id:fe,className:"video-js vjs-default-skin vjs-big-play-centered "+this.ss(fe),preload:"auto",autoPlay:!0,"data-setup":'{ "inactivityTimeout": 0 }',onTimeUpdate:function(){return e.updateProgress(!1)},muted:!0,onClick:function(){},loop:!0,src:a}),this.renderVideoController(!1)),q.default.createElement("div",{className:this.ss("preview-controller")},q.default.createElement("div",{className:this.ss("preview-controller-tip")},this.__("preview_controller_tip")),q.default.createElement("div",{className:this.ss("record-again"),onClick:function(){return e.onClickRecordAgain()}},this.__("record_again")),q.default.createElement("div",{className:this.ss("record-yes-button"),onClick:function(){return e.onClickYes()}},q.default.createElement("div",{className:this.ss("record-yes")},this.__("record_yes")))))))}},{key:"renderWebglNotSupport",value:function(){var e=this;return this.state.webglNotSupport?q.default.createElement("div",{className:this.ss("black-background")},q.default.createElement("div",{className:this.ss("webgl-not-support-tip")},this.__("webgl_not_support_tip",{link:"https://get.webgl.org/"})),q.default.createElement("div",{className:this.ss("go-back"),onClick:function(){return e.clickClose()}},this.__("go_back"))):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.screenshot,a=t.embedType,s=t.isAuthor,r=t.previewAttachmentId,o=this.state,i=o.progress,c=o.preview,u=o.hideCover,l=o.hotkeyStep,d=o.blink,f=o.isDevice,p=o.enableMobileState,g=o.isDetail,h=o.showFail,m={width:100*i+"%"},v=1<=i,_=f&&p;return"embed"===a?this.renderEmbed():q.default.createElement("div",{className:this.ss("content")},q.default.createElement("div",{className:this.ss("webgl-content"),style:{width:"100%"}},q.default.createElement("div",{className:this.ss("game-wrapper"),style:{height:"580px"}},this.renderWebglNotSupport(),q.default.createElement("div",{className:this.ss("blink-wrapper",d&&"blink")}),q.default.createElement("div",{id:"gameContainer",className:this.ss("webgl-player")}),q.default.createElement("div",{className:this.ss("close-game",!g&&"hide"),onClick:function(){return e.clickClose()}},q.default.createElement("div",{className:this.ss("close","ifont","ifont-ic_close")})),q.default.createElement("div",{className:this.ss("cover",(u||v)&&"hide")},this.renderThumbnail(),this.renderPlay(),q.default.createElement("div",{className:this.ss("mobile-warn",(!f||p)&&"hide")},this.__("mobile_tip"))),q.default.createElement("div",{className:this.ss("loading",(c||v||_)&&"hide")},q.default.createElement("div",{className:this.ss("progress-bar")},q.default.createElement("div",{style:m,className:this.ss("progress")}),q.default.createElement("a",{className:this.ss("progress-percent")},parseInt(100*i,10)+"%")),n&&q.default.createElement(J.default,{step:l,isAuthor:g&&s,firstTime:!r})),q.default.createElement("div",{className:this.ss("upload-failed",!h&&"hide")},q.default.createElement("div",{className:this.ss("close","ifont","ifont-ic_close"),onClick:function(){return e.setState({showFail:!1})}}),q.default.createElement("div",{className:this.ss("failed-tip")},this.__("failed_tip")),q.default.createElement("div",{className:this.ss("retry"),onClick:function(){return e.onClickRetry()}},this.__("retry")))),this.renderRecordPreview()),q.default.createElement(G.default,{url:this.getUnityLoaderUrl(),onLoad:function(){return e.onLoad()}}),q.default.createElement("a",{ref:"screenshot_hotkey",className:this.ss("hide","GA_screenshot_hotkey")}),q.default.createElement("unity-account-switcher",null))}}]),me.propTypes={loadingMobile:H.default.bool,disablePlay:H.default.bool,package:H.default.object,thumbnail:H.default.string,webgl:H.default.object,mobileWebgl:H.default.bool,currentHost:H.default.string,screenshot:H.default.bool,embedType:H.default.string,currentPath:H.default.string,title:H.default.string,plays:H.default.number,views:H.default.number,baseLike:H.default.bool,reactions:H.default.number,comments:H.default.number,likes:H.default.number,description:H.default.string,enableMobile:H.default.bool,author:H.default.string,authorTitle:H.default.string,isAuthor:H.default.bool,projectSlug:H.default.string,playerUserId:H.default.string,projectId:H.default.string,previewAttachmentId:H.default.string,uploadingPreview:H.default.bool,copyLink:H.default.func,logPlay:H.default.func,setUploadingPreview:H.default.func,checkVideoState:H.default.func,setUploadedId:H.default.func,sendCDPRequest:H.default.func,updateThumbnail:H.default.func,setThumbnailUploading:H.default.func},a=me))||a)||a)||a;function me(){var e,t,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,me);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=u=ue(this,(e=me.__proto__||Object.getPrototypeOf(me)).call.apply(e,[this].concat(a)))).state={muteInit:!1,recordPreview:!1,showStopRecord:!1,recordShow:!1,recordData:"",muteCover:!0,muteRecord:!0,coverPercentage:0,coverMuted:!0,recordPercentage:0,recordMuted:!0,uploadStatus:"",uploadProgress:-1,webglNotSupport:!1,isDetail:!1,showFail:!1,hideRecord:!1,time:pe,progress:0,preview:!0,scriptReady:!1,isDevice:!1,screenshotTipShow:!1,pauseTipShow:!1,stopTipShow:!1,fullscreenShow:!1,shareShow:!1,muteShow:!1,reportShow:!1,morePop:!1,hotkeyStep:"hide",mute:!1,blink:!1,like:u.props.baseLike,hideCover:!1,enableMobileState:!1,resumed:0,reRecord:0},u.handleKeyPress=function(e){var t=e.keyCode;18===t?u.onScreenshot(!0):86===t?u.pauseRecording():66===t?u.stopRecording():78===t&&u.startRecording()},u.receiveMessage=function(e){var t,n=e.origin,a=e.data,s=u.props,r=s.checkVideoState,o=s.setUploadedId,i=s.updateThumbnail,c=s.setThumbnailUploading;n===Q.default.DEFAULT_URL&&a&&("screenshot"===a.action?u.onScreenshot(!0):"clickReport"===a.action?u.setState({morePop:!1}):"uploadReport"===a.action?(u.setState({uploadStatus:a.data}),a.data===B.default.succeeded?(o({value:a.contentId}),window.parent.postMessage({action:"uploadingPreview",value:!1},Q.default.DEFAULT_URL),window.parent.postMessage({action:"processing",value:!0},Q.default.DEFAULT_URL),t=setInterval(function(){r(),u.props.uploadingPreview||clearInterval(t)},2e3)):a.data===B.default.failed&&(window.parent.postMessage({action:"hideRecord",value:!0},Q.default.DEFAULT_URL),u.setState({showFail:!0,hideRecord:!0}))):"uploadProgress"===a.action?u.setState({uploadProgress:a.data}):"startRecording"===a.action?(u.startRecording(),window.focus()):"mute"===a.action?u.clickMute():"fullscreen"===a.action?u.onFullscreen():"pauseRecording"===a.action?u.pauseRecording():"stopRecording"===a.action?u.stopRecording():"pauseRecordingByBlur"===a.action?window.mediaRecorder&&"recording"===window.mediaRecorder.state&&u.pauseRecording():"startRecordingByFocus"===a.action?window.mediaRecorder&&"paused"===window.mediaRecorder.state&&u.pauseRecording():"thumbnailUpdate"===a.action?i({value:a.data}):"thumbnailUploading"===a.action&&c({value:a.data}))},ue(u,t)}t.default=he},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r,o=n(10),i=(r=o)&&r.__esModule?r:{default:r},c=n(12);var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i.default.Component),a(l,[{key:"componentDidMount",value:function(){var e,t,n,a=this.props,s=a.onError,r=a.onLoad,o=a.url;this.constructor.loadedScripts[o]?r():this.constructor.erroredScripts[o]?s():this.constructor.scriptObservers[o]?this.constructor.scriptObservers[o][this.scriptLoaderId]=this.props:(this.constructor.scriptObservers[o]=(e={},t=this.scriptLoaderId,n=this.props,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),this.createScript())}},{key:"componentWillUnmount",value:function(){var e=this.props.url,t=this.constructor.scriptObservers[e];t&&delete t[this.scriptLoaderId]}},{key:"createScript",value:function(){var a=this,e=this.props,t=e.onCreate,s=e.url,n=e.attributes,r=document.createElement("script");function o(t){var n=a.constructor.scriptObservers[s];Object.keys(n).forEach(function(e){t(n[e])&&delete a.constructor.scriptObservers[s][a.scriptLoaderId]})}t(),n&&Object.keys(n).forEach(function(e){return r.setAttribute(e,n[e])}),r.src=s,r.hasAttribute("async")||(r.async=1),r.onload=function(){a.constructor.loadedScripts[s]=!0,o(function(e){return e.onLoad(),1})},r.onerror=function(){a.constructor.erroredScripts[s]=!0,o(function(e){return e.onError(),1})},document.body.appendChild(r)}},{key:"render",value:function(){return null}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.scriptLoaderId="id"+t.constructor.idCount++,t}u.propTypes={attributes:c.PropTypes.object,onCreate:c.PropTypes.func,onError:c.PropTypes.func.isRequired,onLoad:c.PropTypes.func.isRequired,url:c.PropTypes.string.isRequired},u.defaultProps={attributes:{},onCreate:function(){},onError:function(){},onLoad:function(){}},u.scriptObservers={},u.loadedScripts={},u.erroredScripts={},u.idCount=0,t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s,r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=g(n(12)),c=g(n(10)),u=g(n(20)),l=g(n(22)),d=g(n(126)),f=g(n(17)),p=g(n(131));function g(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=(0,l.default)(d.default)(a=(0,f.default)(p.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(v,u.default),r(v,[{key:"componentWillReceiveProps",value:function(e){var t=e.step,n=this.state.step;"fadeout"!==n&&t!==n&&this.setState({step:t})}},{key:"render",value:function(){var e=this.props,t=e.isAuthor,n=e.firstTime,a=this.state.step,s="undefined"!=typeof MediaRecorder,r=t&&s?n?"first_record":"update_by_record_again":"hotkey_tips";return c.default.createElement("div",{className:this.ss("tooltip",a)},c.default.createElement("div",{className:this.ss("icon-screenshot","ifont",t?"ifont-ic_record":"ifont-material-baseline-camera")}),c.default.createElement("div",{className:this.ss("tips")},this.__(r)))}}]),(s=v).propTypes={step:i.default.oneOf(["hide","show","fadeout"]),isAuthor:i.default.bool,firstTime:i.default.bool},a=s))||a)||a;function v(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v);for(var a=arguments.length,s=Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=n=h(this,(e=v.__proto__||Object.getPrototypeOf(v)).call.apply(e,[this].concat(s)))).state={step:n.props.step},h(n,t)}t.default=m},function(e,t,n){"use strict";var a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(9),c=(a=s)&&a.__esModule?a:{default:a};e.exports=function(o){return function(){for(var e=[],t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var s=0;s<n.length;s++){var r=n[s];r&&"string"==typeof r?e.push(r):r&&"object"===(void 0===r?"undefined":i(r))&&(e=e.concat(Object.keys(r).filter(function(t){return function(e){return t[e]}}(r))))}return c.default.map(e.join(" ").split(" "),function(e){return o[e]||e}).join(" ")||void 0}}},function(e,t){e.exports={tooltip:"tooltip_1nM44y1F",hide:"hide_289KeRL2",fadeout:"fadeout_2kLcZOia",show:"show_bkAI5Ewd","icon-screenshot":"icon-screenshot_1137y6uX",tips:"tips_23Q7fyx3","icon-close":"icon-close_1gpeq-ab"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=t+":"+n,s=l[a];s=s||(l[a]=new i.default(t,null,function(r){return{number:function(e,t,n){return c.default.culture(f(t,"numbro")||"en-US"),(0,c.default)(e).format(n)},unNumber:function(e,t){return c.default.culture(f(t,"numbro")||"en-US"),(0,c.default)().unformat(e)},date:function(e,t,n){var a=(0,u.default)(e);r&&a.utcOffset(parseInt(r,10));var s=f(t);return s&&a.locale(s),a.format(n||"ll")},monthDay:function(e,t,n){var a=(0,u.default)(e);r&&a.utcOffset(parseInt(r,10));var s=f(t);return s&&a.locale(s),a.format(n||"MMM D")},time:function(e,t,n){var a=(0,u.default)(e);r&&a.utcOffset(parseInt(r,10));var s=f(t);return s&&a.locale(s),a.format(n||"LT")},datetime:function(e,t,n){var a=(0,u.default)(e);r&&a.utcOffset(parseInt(r,10));var s=f(t);return s&&a.locale(s),a.format(n||"lll")},fromNow:function(e,t,n){var a=(0,u.default)(e);r&&a.utcOffset(parseInt(r,10));var s=f(t);return s&&a.locale(s),a.fromNow(n&&!0)},fromNowShort:function(e,t){var n=(0,u.default)(e);r&&n.utcOffset(parseInt(r,10));var a=f(t);return a&&n.locale(a),n.fromNow(!0)},toNow:function(e,t,n){var a=(0,u.default)(e);r&&a.utcOffset(parseInt(r,10));var s=f(t);return s&&a.locale(s),a.toNow(n&&!0)},calendar:function(e,t){var n=(0,u.default)(e);r&&n.utcOffset(parseInt(r,10));var a=f(t);return a&&n.locale(a),n.calendar()},timeMonthYear:function(e,t,n){var a=(0,u.default)(e);if(5e3<=a.year())return"Present";r&&a.utcOffset(parseInt(r,10));var s=f(t);return s&&a.locale(s),"zh-cn"===s?a.format(n||"YYYY  MMM"):a.format(n||"MMM  YYYY")}}}(n)));var r=d[t];r=r||(d[t]={});var o=r[e];o=o||(r[e]=s.compile(e));return{format:o}};var i=a(n(128)),c=a(n(129)),u=a(n(37)),r=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}var l={},d={};function f(e,t){var n=1<arguments.length&&void 0!==t?t:"moment",a=void 0;if(Array.isArray(e))for(var s=0;s<e.length&&!(a="moment"===n?r.default.MOMENT_LOCALE[e[s]]:r.default.NUMBRO_LOCALE[e[s]]);s++);else a="moment"===n?r.default.MOMENT_LOCALE[e]:r.default.NUMBRO_LOCALE[e];return a}},function(e,t,n){e.exports=n(0)(1097)},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=a(n(10)),s=n(39),i=a(s);function a(e){return e&&e.__esModule?e:{default:e}}var c,u,l,d=(c={newline:s.defaultRules.newline,paragraph:r({},s.defaultRules.paragraph,{react:function(e,t,n){return o.default.createElement("p",{key:n.key},t(e.content,n))}}),url:r({},s.defaultRules.url,{parse:function(e,t,n){var a=s.defaultRules.url.parse(e,t,n);return a.context=n.context,a}}),link:r({},s.defaultRules.link,{parse:function(e,t,n){var a=s.defaultRules.link.parse(e,t,n);return a.context=n.context,a},react:function(t,e,n){var a={};if(t.context&&t.context.unclickable){return a.href="#",a.style={textDecoration:"none",pointerEvents:"none",cursor:"default",color:"inherit"},o.default.createElement("a",r({key:n.key},a),e(t.content,n))}var s=t.context&&(t.context[t.target]||t.context.onClick);return s?a.onClick=function(e){return s(e,t.target)}:(a.href=i.default.sanitizeUrl(t.target),a.target="_blank"),a.title=t.title,o.default.createElement("a",r({key:n.key},a),e(t.content,n))}}),strong:r({},s.defaultRules.strong,{react:function(e,t,n){return o.default.createElement("strong",{key:n.key},t(e.content,n))}}),u:s.defaultRules.u,noparse:{order:s.defaultRules.text.order,match:i.default.inlineRegex(/^!!(.+?)!!/),parse:function(e){return{type:"text",content:e[1]}},react:function(e){return e.content}},text:s.defaultRules.text,ifont:{order:s.defaultRules.text.order,match:function(e){return/^:ifont-([^\s:]+?):/.exec(e)},parse:function(e){return{ifont:e[1]}},react:function(e,t,n){return o.default.createElement("span",{key:n.key,className:"ifont ifont-"+e.ifont})}},list:s.defaultRules.list},u=i.default.parserFor(c),l=i.default.outputFor(i.default.ruleOutput(c,"react")),function(e,t){var n=-1===e.indexOf("\n\n");return n||(e+="\n\n"),l(u(e,{inline:n,context:t}))});t.default=d},function(e,t){e.exports={hotkey_tips:"hotkey_tips_3A1c",first_record:"first_record_2Mn5",update_by_record_again:"update_by_record_again_Opg9",first_record_time:"first_record_time_3vWB"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s,r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=Object.freeze(Object.defineProperties(["header.setting.windowHeight"],{raw:{value:Object.freeze(["header.setting.windowHeight"])}})),c=h(n(12)),_=h(n(10)),u=n(25),l=n(1),d=h(n(20)),f=n(53),y=h(n(133)),p=h(n(22)),g=h(n(136));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=f.presets.stiff,b=(0,u.decorator)({windowHeight:(0,l.state)(i)})(a=(0,p.default)(g.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(w,d.default),r(w,[{key:"componentDidMount",value:function(){var t=this;this._handKeyDown=function(e){return t.onKeyDown(e)},window.addEventListener("keydown",this._handKeyDown,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this._handKeyDown,!0)}},{key:"renderDialog",value:function(e){var t=e.backDropOpacity,n=e.modalScale,a=e.modalOpacity,s=this.props,r=s.className,o=s.scrollerClassName,i=s.modalContentClassName,c=s.windowHeight,u=s.noScroller,l=s.position,d=s.backDropHeight,f=s.maxHeight;if(t<.1||a<.1)return null;var p={};0<c&&(p.maxHeight=Math.max(c-128,128));var g=this.props.children,h={opacity:t,height:d||"100%"},m={transform:"scale3d("+n+", "+n+", 1)",opacity:a},v=_.default.createElement(y.default,{className:this.ss(o),position:l},_.default.createElement("div",{className:this.ss("modal-inner-scrollable",i),style:p},g));return u&&(v=_.default.createElement("div",{className:this.ss("modal-inner-scrollable",i),style:p},g)),_.default.createElement("div",null,_.default.createElement("div",{className:this.ss("backdrop"),style:h,onClick:this.onClose}),_.default.createElement("div",{className:this.ss("modal",f&&"max-height")},_.default.createElement("div",{className:this.ss(r,"modal-inner",l),style:m},v)))}},{key:"render",value:function(){var t=this,e=this.props,n=e.noAnimation,a=void 0!==n&&n,s=e.backDropOpacity;if(!0===a){var r=!0===this.props.open?{backDropOpacity:s||.8,modalScale:1,modalOpacity:1}:{backDropOpacity:0,modalScale:.75,modalOpacity:0};return this.renderDialog(r)}var o=this.props.open?{backDropOpacity:(0,f.spring)(s||.8,v),modalScale:(0,f.spring)(1,v),modalOpacity:(0,f.spring)(1,v)}:{backDropOpacity:(0,f.spring)(0,v),modalScale:(0,f.spring)(.75,v),modalOpacity:(0,f.spring)(0,v)};return _.default.createElement(f.Motion,{defaultStyle:{backDropOpacity:0,modalScale:.75,modalOpacity:0},style:o},function(e){return t.renderDialog(e)})}}]),(s=w).propTypes={onCloseModal:c.default.func,open:c.default.bool,children:c.default.any,className:c.default.string,scrollerClassName:c.default.string,modalContentClassName:c.default.string,windowHeight:c.default.number,noScroller:c.default.bool,noAnimation:c.default.bool,position:c.default.oneOf(["center","top"]),backDropOpacity:c.default.number,backDropHeight:c.default.string,maxHeight:c.default.bool,disableBackDrop:c.default.bool},a=s))||a)||a;function w(){var e,t,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w);for(var n=arguments.length,s=Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=a=m(this,(e=w.__proto__||Object.getPrototypeOf(w)).call.apply(e,[this].concat(s)))).onClose=function(){var e=a.props,t=e.open,n=e.disableBackDrop;t&&!n&&a.props.onCloseModal&&a.props.onCloseModal()},a.onKeyDown=function(e){switch(e.keyCode){case 27:a.onClose()}},m(a,t)}t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s,r,o=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=p(a(12)),v=p(a(10)),u=p(a(20)),_=a(53),l=p(a(38)),y=a(21),d=p(a(22)),f=p(a(134));function p(e){return e&&e.__esModule?e:{default:e}}var b=_.presets.noWobble,g=(0,d.default)(f.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,u.default),o(h,[{key:"componentDidMount",value:function(){var t=this;this._handleResize=function(){return t.handleResize()},window.addEventListener("resize",this._handleResize),this._handleMouseMove=function(e){return t.handleMouseMove(e)},this._handleMouseUp=function(e){return t.handleMouseUp(e)},window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp),this.setScrollerWidth(),this.setScrollerState()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._handleResize),window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp),this.setScrollerWidthTimeout&&(clearTimeout(this.setScrollerWidthTimeout),this.setScrollerWidthTimeout=null)}},{key:"getScrollerNode",value:function(){return this.refs.scroller||{}}},{key:"getScrollbarOffset",value:function(){var e=this.dimension,t=e.scrollTop,n=e.offsetHeight,a=e.scrollHeight;if(0===a||a<=n)return 0;if((0,y.isDevice)())return 0;var s=t/(a-n);return(n-this.getScrollbarHeight())*s}},{key:"getScrollbarHeight",value:function(){var e=this.dimension,t=e.offsetHeight,n=e.scrollHeight;return 0===n||n<=t||(0,y.isDevice)()?0:Math.max(14,t/n*t)}},{key:"setScrollerWidth",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:0;this.setScrollerWidthTimeout&&(clearTimeout(this.setScrollerWidthTimeout),this.setScrollerWidthTimeout=null),this.setScrollerWidthTimeout=setTimeout(function(){var e=a(135)();t.state.scrollerWidth!==e&&(t.setState({scrollerWidth:e}),l.default.set("scrollerWidth",e,{expires:7})),t.setScrollerWidth(15e3)},n)}},{key:"setScrollerState",value:function(e){var t,n,a,s,r,o=0<arguments.length&&void 0!==e&&e,i=this.getScrollerNode();i&&(n=(t=this.dimension).scrollTop,a=t.scrollHeight,s=t.offsetHeight,o&&this.props.onScrollEnd&&!this.scrollToEnd(this.dimension)&&this.scrollToEnd(i)&&this.props.onScrollEnd(),r={isScroll:o,scrollTop:i.scrollTop,scrollHeight:i.scrollHeight,offsetHeight:i.offsetHeight},n!==i.scrollTop||a!==i.scrollHeight||s!==i.offsetHeight?(this.dimension={scrollTop:i.scrollTop,scrollHeight:i.scrollHeight,offsetHeight:i.offsetHeight},(0,y.isDevice)()||this.forceUpdate(),this.props.onUpdate&&this.props.onUpdate(r)):o&&this.props.onUpdate&&this.props.onUpdate(r))}},{key:"handleOnScroll",value:function(){this.setScrollerState(!0),this.props.onScroll&&this.props.onScroll(this.getScrollerNode())}},{key:"handleResize",value:function(){this.setScrollerState()}},{key:"handleMouseDown",value:function(e){e.preventDefault();var t=e.pageY;this.setState({isPressed:!0,initialScrollTop:this.dimension.scrollTop,initialPageY:t})}},{key:"handleMouseMove",value:function(e){var t,n,a=e.pageY,s=this.state,r=s.isPressed,o=s.initialScrollTop,i=s.initialPageY,c=this.dimension,u=c.offsetHeight,l=c.scrollHeight;r&&(t=a-i,n=(l-u)/(u-this.getScrollbarHeight()),this.scrollTo(t*n+o))}},{key:"handleMouseUp",value:function(){this.state.isPressed&&this.setState({isPressed:!1})}},{key:"scrollTo",value:function(e,t){var n=this;if(!(1<arguments.length&&void 0!==t&&t)){this.setState({scrollTo:null});var a=this.getScrollerNode();return e<0&&(e=0),e>a.scrollHeight-a.offsetHeight&&(e=a.scrollHeight-a.offsetHeight),void(a.scrollTop!==e?a.scrollTop=e:setTimeout(function(){return n.handleOnScroll()},0))}this.setState({scrollTo:{stepId:this.currentStepId,scrollTop:e}})}},{key:"scrollToEnd",value:function(e){var t=e.scrollTop;return e.scrollHeight-1<=t+e.clientHeight}},{key:"render",value:function(){var e,t,a=this,n=this.props,s=n.className,r=n.theme,o=n.fade,i=n.children,c=n.position,u=this.state,l=u.scrollTo,d=u.scrollerWidth,f=u.isPressed,p={height:this.getScrollbarHeight()+"px",top:this.getScrollbarOffset()+"px"},g=v.default.createElement("div",{className:this.ss("scrollbar")},v.default.createElement("div",{className:this.ss("track")}),v.default.createElement("div",{className:this.ss("thumb"),style:p,onMouseDown:function(e){return a.handleMouseDown(e)}})),h=void 0;l&&l.stepId===this.currentStepId&&(e={scrollTop:this.dimension.scrollTop},t={scrollTop:(0,_.spring)(l.scrollTop,b)},h=v.default.createElement(_.Motion,{defaultStyle:e,style:t},function(e){var t,n=e.scrollTop;return l.stepId===a.currentStepId&&(n===l.scrollTop&&a.currentStepId++,n<0&&(n=0),n>(t=a.getScrollerNode()).scrollHeight-t.offsetHeight&&(n=t.scrollHeight-t.offsetHeight),t.scrollTop!==n?t.scrollTop=n:setTimeout(function(){return a.handleOnScroll()},0)),v.default.createElement("noscript",null)}));var m=50;return this.dimension.offsetHeight&&(0,y.isDevice)()&&(m=d),v.default.createElement("div",{className:this.ss("scroller-wrap",o&&"fade",f&&"isPressed",r)},v.default.createElement("div",{ref:"scroller",className:this.ss("scroller",c,s),style:{marginRight:-m+"px",paddingRight:m-d+"px"},onScroll:function(){return a.handleOnScroll()}},i),g,h)}}]),r=s=h,s.propTypes={onUpdate:c.default.func,className:c.default.string,theme:c.default.string,fade:c.default.bool,children:c.default.any,onScroll:c.default.func,onScrollEnd:c.default.func,position:c.default.oneOf(["top","center","auto"])},s.contextTypes={platform:c.default.object,cookies:c.default.object},s.defaultProps={theme:"dark",fade:!0,position:"auto"},n=r))||n;function h(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var n,a,s,r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,t)),o=0;return r.context.cookies.scrollerWidth?o=parseInt(r.context.cookies.scrollerWidth,10):r.context.platform&&(a=(n=r.context.platform).name,(s=n.os)&&s.family&&-1<s.family.indexOf("Windows")?o="Microsoft Edge"===a?12:17:s&&s.family&&-1<s.family.indexOf("Ubuntu")&&("Firefox"===a?o=15:"Chrome"===a&&(o=13))),r.state={scrollerWidth:o,scrollTo:null},r.dimension={scrollTop:0,scrollHeight:0,offsetHeight:0},r.currentStepId=0,r}t.default=g},function(e,t){e.exports={"scroller-wrap":"scroller-wrap_2ebVUni0",scroller:"scroller_1zcid46f",center:"center_3xcNbSCI",top:"top_2wrdd5MN",scrollbar:"scrollbar_213WWY7Z",track:"track_1t4sH5Wt",thumb:"thumb_3hY4wmjr",fade:"fade_3GzSaPUc",isPressed:"isPressed_397zSpHJ",white:"white_1iBH3PBK"}},function(e,t,n){"use strict";e.exports=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}},function(e,t){e.exports={backdrop:"backdrop_gQOFTh3M",modal:"modal_2HSf4u4a","max-height":"max-height_9Pso-m0n","modal-inner":"modal-inner_1ZHQC_XC",center:"center_xVQHpEcL"}},function(e,t,n){"use strict";e.exports={CDPConnectTypes:{CDPTypeWebglScreenshots:"webgl_screenshots",CDPTypeWebglRecord:"webgl_record",CDPTypeAssetUnlocked:"asset_unlocked"},EventTypeConnect:"connect",CDPRecordType:{CDPRecordTypeStart:"startRecord",CDPRecordTypeEnd:"endRecord",CDPRecordTypeAccept:"acceptRecord"}}},function(e,t,n){"use strict";e.exports={getOS:function(){var e="Unknown OS";return-1!==navigator.userAgent.indexOf("Win")&&(e="Windows"),-1!==navigator.userAgent.indexOf("Mac")&&(e="Macintosh"),-1!==navigator.userAgent.indexOf("Linux")&&(e="Linux"),-1!==navigator.userAgent.indexOf("Android")&&(e="Android"),-1!==navigator.userAgent.indexOf("like Mac")&&(e="iOS"),e},getBrowser:function(){for(var e,t=navigator.userAgent,n=navigator.appName,a=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10),r=void 0,o=void 0,i=[["Opera",6],["MSIE",5],["Chrome",7],["Safari",7],["Firefox",8]],c=0;c<i.length;c++){var u=i[c][0],l=i[c][1];if(-1!==(r=t.indexOf(u))){n=u,a=t.substring(r+l),-1!==(r=t.indexOf("Version"))&&(a=t.substring(r+8));break}}0===n.length&&(e=t.lastIndexOf(" ")+1)<(r=t.lastIndexOf("/"))&&(n=t.substring(e,r),a=t.substring(r+1),n.toLowerCase()===n.toUpperCase()&&(n=navigator.appName)),-1!==(o=a.indexOf(";"))&&(a=a.substring(0,o)),-1!==(o=a.indexOf(" "))&&(a=a.substring(0,o)),s=parseInt(""+a,10),isNaN(s)&&(a=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10));var d={browser_name:n,full_version:a,major_version:s,navigator:{appName:navigator.appName,navigator_userAgent:navigator.userAgent}};return JSON.stringify(d)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventType=t.UserGroups=void 0;var a,s=n(15),r=(a=s)&&a.__esModule?a:{default:a};t.UserGroups={admin:"admin",superAdmin:"super_admin",learnCreator:"learn_creator",learnModerator:"learn_moderator",learnAdmin:"learn_admin",learnAdminEN:"learn_admin_en",learnAdminZH:"learn_admin_zh",learnAdminJA:"learn_admin_ja",learnAdminKO:"learn_admin_ko",learnAdminRU:"learn_admin_ru",learnAdminES:"learn_admin_es",learnAdminFR:"learn_admin_fr",learnAdminDE:"learn_admin_de",learnAdminPT:"learn_admin_pt",learnEditor:"learn_editor",learnEditorEN:"learn_editor_en",learnEditorZH:"learn_editor_zh",learnEditorJA:"learn_editor_ja",learnEditorKO:"learn_editor_ko",learnEditorRU:"learn_editor_ru",learnEditorES:"learn_editor_es",learnEditorFR:"learn_editor_fr",learnEditorDE:"learn_editor_de",learnEditorPT:"learn_editor_pt"},t.EventType=(0,r.default)({connect:null,learn:null})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=w(["webgl.thumbnail"],["webgl.thumbnail"]),i=w(["webgl.author.isAuthor"],["webgl.author.isAuthor"]),c=w(["embedType"],["embedType"]),u=w(["webgl.thumbnailUploading"],["webgl.thumbnailUploading"]),l=b(n(12)),d=b(n(10)),f=b(n(20)),p=n(25),g=n(1),h=b(n(8)),m=b(n(22)),v=b(n(141)),_=b(n(17)),y=b(n(142));function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var S=["default_mg_fps.png","default_mg_karting.png","default_mg_other.png","default_mg_platformer.png","default_mg_lego.png"],I=(0,p.decorator)({thumbnail:(0,g.state)(o),isAuthor:(0,g.state)(i),embedType:(0,g.state)(c),thumbnailUploading:(0,g.state)(u)})(a=(0,m.default)(v.default)(a=(0,_.default)(y.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(E,f.default),s(E,[{key:"isDetailPage",value:function(){return"detail"===this.props.embedType||"edit"===this.props.embedType}},{key:"withThumbnail",value:function(){var t=this.props.thumbnail;return!(!t||0<=S.findIndex(function(e){return t.endsWith(e)}))}},{key:"canAddThumbnail",value:function(){var e=this.props.thumbnailUploading;return!this.withThumbnail()||!!e||"edit"===this.props.embedType}},{key:"uploadThumbnail",value:function(){window.parent.postMessage({action:"fileSelect"},h.default.DEFAULT_URL)}},{key:"renderUploding",value:function(){return this.props.thumbnailUploading?d.default.createElement("div",{className:this.ss("thumbnail-uploading")},d.default.createElement("div",{className:this.ss("loading")})):null}},{key:"render",value:function(){var e=this,t=this.props.isAuthor;return this.isDetailPage()&&t&&this.canAddThumbnail()?d.default.createElement("div",{className:this.ss("thumbnail-update")},d.default.createElement("div",{className:this.ss("tips")},this.withThumbnail()?this.__("change_thumbnail_tips"):this.__("add_thumbnail_tips")),d.default.createElement("a",{className:this.ss("button-add"),onClick:function(){return e.uploadThumbnail()}},this.__("add")),this.renderUploding()):null}}]),E.propTypes={thumbnail:l.default.string,isAuthor:l.default.bool,embedType:l.default.string,thumbnailUploading:l.default.bool},a=E))||a)||a)||a;function E(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}t.default=I},function(e,t){e.exports={"thumbnail-update":"thumbnail-update_3yjLFTRz",tips:"tips_1ero6gZv","button-add":"button-add_3I9cERXX","thumbnail-uploading":"thumbnail-uploading_6VqUglKh",loading:"loading_qTRsolzJ"}},function(e,t){e.exports={add_thumbnail_tips:"add_thumbnail_tips_1Iud",change_thumbnail_tips:"change_thumbnail_tips_18lv",add:"add_3LT3"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setUserProperties=t.isAmplitudeInitialized=t.amplitudeEvents=t.USER_ROLES=t.USER_PROPERTIES=void 0;var a,s=n(144),r=(a=s)&&a.__esModule?a:{default:a};function o(t){return(0,r.default)(function(e){window.amplitude&&window.amplitude.getInstance().logEvent(t,e)},250,{leading:!0,trailing:!1})}var i=t.USER_PROPERTIES={ROLE:"role",LAST_SEEN:"lastSeen",FIRST_SEEN:"firstSeen",NUMBER_OF_SESSIONS:"numberOfSessions"},c=(t.USER_ROLES={ADMIN:"ADMIN",CUSTOMER:"CUSTOMER"},t.amplitudeEvents={newSession:o("CORE/NEW_SESSION"),headerUnityLogoClick:o("CORE/HEADER/UNITY_LOGO_CLICK"),headerAboutClick:o("CORE/HEADER/ABOUT_CLICK"),headerMessagesClick:o("CORE/HEADER/MESSAGES_CLICK"),headerNotificationsClick:o("CORE/HEADER/NOTIFICATIONS_CLICK"),headerPostProjectClick:o("CORE/HEADER/POST_PROJECT_CLICK"),applicationSwitcherClick:o("CORE/HEADER/APPLICATION_SWITCHER_CLICK"),applicationSwitcherDashboardClick:o("CORE/HEADER/APPLICATION_SWITCHER/DASHBOARD_CLICK"),applicationSwitcherAssetStoreClick:o("CORE/HEADER/APPLICATION_SWITCHER/ASSET_STORE_CLICK"),applicationSwitcherAnswersClick:o("CORE/HEADER/APPLICATION_SWITCHER/ANSWERS_CLICK"),applicationSwitcherForumClick:o("CORE/HEADER/APPLICATION_SWITCHER/FORUM_CLICK"),applicationSwitcherDistributeClick:o("CORE/HEADER/APPLICATION_SWITCHER/DISTRIBUTE_CLICK"),applicationSwitcherLearnClick:o("CORE/HEADER/APPLICATION_SWITCHER/LEARN_CLICK"),howToPageView:o("CORE/PAGE_VIEW/HOW_TO"),howToGetUnityClick:o("CORE/HOW_TO/GET_UNITY"),howToGetUnityAccept:o("CORE/HOW_TO/GET_UNITY/ACCEPT"),howToStartHerePlayVideo:o("CORE/HOW_TO/START_HERE/VIDEO_PLAY"),howToDownloadHub:o("CORE/HOW_TO/DOWNLOAD_HUB"),howToDownloadHubAccept:o("CORE/HOW_TO/DOWNLOAD_HUB/ACCEPT"),howToLearnVideoPlay:o("CORE/HOW_TO/LEARN/VIDEO_PLAY"),howToLearnHowCta:o("CORE/HOW_TO/LEARN_HOW"),howToGalleryItemClick:o("CORE/HOW_TO/GALLERY/ITEM_CLICK"),howToParticipateNowCta:o("CORE/HOW_TO/PARTICIPATE_NOW"),howToShowcasesVideoPlay:o("CORE/HOW_TO/SHOWCASES/VIDEO_PLAY"),howToJoinDiscord:o("CORE/HOW_TO/JOIN_DISCORD"),howToGetSupport:o("CORE/HOW_TO/GET_SUPPORT"),howToShareInsight:o("CORE/HOW_TO/SHARE_INSIGHTS"),homePageView:o("CORE/PAGE_VIEW/HOME"),homeAllChallengesPageView:o("CORE/PAGE_VIEW/HOME/ALL_SHOWCASES"),homeAllChallengesItemClick:o("CORE/PAGE_VIEW/HOME/ALL_SHOWCASES/ITEM_CLICK"),homeFeaturedPageView:o("CORE/PAGE_VIEW/HOME/FEATURED"),homeTrendingPageView:o("CORE/PAGE_VIEW/HOME/TRENDING"),homeFreshPageView:o("CORE/PAGE_VIEW/HOME/FRESH"),homeMyGamesPageView:o("CORE/PAGE_VIEW/HOME/MY_GAMES"),homeBannerClick:o("CORE/HOME/BANNER_CLICK"),homeGetUnityClick:o("CORE/HOME/GET_UNITY"),homeGetUnityAccept:o("CORE/HOME/GET_UNITY/ACCEPT"),homeStartCreatingClick:o("CORE/HOME/START_CREATING"),homeChallengesItemClick:o("CORE/HOME/CHALLENGES/ITEM_CLICK"),homeChallengesAllClick:o("CORE/HOME/CHALLENGES/ALL_CLICK"),homeFeaturedItemClick:o("CORE/HOME/FEATURED/ITEM_CLICK"),homeFeaturedAllClick:o("CORE/HOME/FEATURED/ALL_CLICK"),homeTrendingItemClick:o("CORE/HOME/TRENDING/ITEM_CLICK"),homeTrendingAllClick:o("CORE/HOME/TRENDING/ALL_CLICK"),homeFreshItemClick:o("CORE/HOME/FRESH/ITEM_CLICK"),homeFreshAllClick:o("CORE/HOME/FRESH/ALL_CLICK"),homeMyGamesItemClick:o("CORE/HOME/MY_GAMES/ITEM_CLICK"),homeMyGamesAllClick:o("CORE/HOME/MY_GAMES/ALL_CLICK"),webglEditMadeWithChosen:o("CORE/WEBGL_EDIT/MADE_WITH/CHOSEN"),webglDetailPageView:o("CORE/PAGE_VIEW/WEBGL_DETAIL"),webglDetailChallengeBannerNotNow:o("CORE/WEBGL_DETAIL/CHALLENGE_BANNER/NOT_NOW"),webglDetailChallengeBannerJoin:o("CORE/WEBGL_DETAIL/CHALLENGE_BANNER/JOIN"),webglDetailRecommendedItemClick:o("CORE/WEBGL_DETAIL/RECOMMENDED/ITEM_CLICK"),webglDetailMadeWithUnityClick:o("CORE/WEBGL_DETAIL/MADE_WITH/UNITY"),webglDetailMadeWithMicrogameClick:o("CORE/WEBGL_DETAIL/MADE_WITH/MICROGAME"),webglDetailCustomMadeWithClick:o("CORE/WEBGL_DETAIL/MADE_WITH/CUSTOM"),webglDetailCommentCreated:o("CORE/WEBGL_DETAIL/COMMENTS/CREATED"),webglDetailCommentLikeClick:o("CORE/WEBGL_DETAIL/COMMENTS/LIKE_CLICK"),webglDetailCommentReplyClick:o("CORE/WEBGL_DETAIL/COMMENTS/REPLY_CLICK"),webglDetailReplyCommentCreated:o("CORE/WEBGL_DETAIL/COMMENTS/REPLY_COMMENT/CREATED"),webglDetailAuthorClick:o("CORE/WEBGL_DETAIL/WEBGL/AUTHOR_CLICK"),webglDetailEditClick:o("CORE/WEBGL_DETAIL/WEBGL/EDIT_CLICK"),webglDetailReportClick:o("CORE/WEBGL_DETAIL/WEBGL/REPORT_CLICK"),webglDetailDeleteClick:o("CORE/WEBGL_DETAIL/WEBGL/DELETE_CLICK"),webglDetailLikeClick:o("CORE/WEBGL_DETAIL/WEBGL/LIKE_CLICK"),webglDetailShareEmbedClick:o("CORE/WEBGL_DETAIL/SHARE/EMBED_CLICK"),webglDetailShareMailClick:o("CORE/WEBGL_DETAIL/SHARE/MAIL_CLICK"),webglDetailShareMessengerClick:o("CORE/WEBGL_DETAIL/SHARE/MESSENGER_CLICK"),webglDetailShareTwitterClick:o("CORE/WEBGL_DETAIL/SHARE/TWITTER_CLICK"),webglDetailShareFacebookClick:o("CORE/WEBGL_DETAIL/SHARE/FACEBOOK_CLICK"),webglDetailShareRedditClick:o("CORE/WEBGL_DETAIL/SHARE/REDDIT_CLICK"),webglDetailShareCopyClick:o("CORE/WEBGL_DETAIL/SHARE/COPY_CLICK"),webglDetailFullscreenClick:o("CORE/WEBGL_DETAIL/PLAYER/FULLSCREEN_CLICK"),webglDetailUnmuteClick:o("CORE/WEBGL_DETAIL/PLAYER/UNMUTE_CLICK"),webglDetailScreenshotCommentClick:o("CORE/WEBGL_DETAIL/PLAYER/SCREENSHOT_COMMENT_CLICK"),webglDetailRecordClick:o("CORE/WEBGL_DETAIL/PLAYER/RECORD_CLICK"),webglDetailPauseRecordingClick:o("CORE/WEBGL_DETAIL/PLAYER/PAUSE_RECORDING_CLICK"),webglDetailStopRecordingClick:o("CORE/WEBGL_DETAIL/PLAYER/STOP_RECORDING_CLICK"),webglDetailAcceptRecordingClick:o("CORE/WEBGL_DETAIL/PLAYER/ACCEPT_RECORDING_CLICK"),webglDetailRetryRecordingClick:o("CORE/WEBGL_DETAIL/PLAYER/RETRY_RECORDING_CLICK"),webglDetailPlayClick:o("CORE/WEBGL_DETAIL/PLAYER/PLAY_CLICK"),webglDetailDownloadClick:o("CORE/WEBGL_DETAIL/MADE_WITH/UNITY/DOWNLOAD"),webglDetailEnableMobile:o("CORE/WEBGL_DETAIL/GAME/EDIT/MOBILE/ENABLE"),webglDetailDisableMobile:o("CORE/WEBGL_DETAIL/GAME/EDIT/MOBILE/DISABLE"),assetUnlockGetAssetClicked:o("CORE/ASSET_UNLOCK/ACTIONS/GET_ASSET_CLICKED"),assetUnlockNotNowClicked:o("CORE/ASSET_UNLOCK/ACTIONS/NOT_NOW_CLICKED"),assetUnlockFirstAndThirdKartingDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/KARTING/FIRST_AND THIRD"),assetUnlockFirstKartingDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/KARTING/FIRST"),assetUnlockSecondKartingDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/KARTING/SECOND"),assetUnlockThirdKartingDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/KARTING/THIRD"),assetUnlockFirstAndThirdFpsDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/FPS/FIRST_AND THIRD"),assetUnlockFirstFpsDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/FPS/FIRST"),assetUnlockSecondFpsDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/FPS/SECOND"),assetUnlockThirdFpsDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/FPS/THIRD"),assetUnlockFirstAndThirdLegoDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/LEGO/FIRST_AND THIRD"),assetUnlockFirstLegoDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/LEGO/FIRST"),assetUnlockSecondLegoDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/LEGO/SECOND"),assetUnlockThirdLegoDisplayed:o("CORE/ASSET_UNLOCK/DISPLAYED/LEGO/THIRD"),downloadTermDialogAgreeAndDownload:o("CORE/WEBGL_DETAIL/MADE_WITH/UNITY/DOWNLOAD/ACCEPT")});t.isAmplitudeInitialized=function(){return!!window.amplitude&&window.amplitude.getInstance()._isInitialized},t.setUserProperties=function(e){var t,n;e&&(t=new window.amplitude.Identify,(n=window.amplitude.getInstance()).setUserId(e.id),t.set(i.ROLE,e.role).set(i.LAST_SEEN,(new Date).toISOString()).setOnce(i.FIRST_SEEN,(new Date).toISOString()),window.amplitude.isNewSession()&&(t.add(i.NUMBER_OF_SESSIONS,1),c.newSession()),n.identify(t))}},function(e,t,n){var _=n(36),y=n(145),b=n(147),w=Math.max,S=Math.min;e.exports=function(a,s,e){var r,o,i,c,u,l,d=0,f=!1,p=!1,t=!0;if("function"!=typeof a)throw new TypeError("Expected a function");function g(e){var t=r,n=o;return r=o=void 0,d=e,c=a.apply(n,t)}function h(e){var t=e-l;return void 0===l||s<=t||t<0||p&&i<=e-d}function m(){var e,t,n=y();if(h(n))return v(n);u=setTimeout(m,(t=s-((e=n)-l),p?S(t,i-(e-d)):t))}function v(e){return u=void 0,t&&r?g(e):(r=o=void 0,c)}function n(){var e,t=y(),n=h(t);if(r=arguments,o=this,l=t,n){if(void 0===u)return d=e=l,u=setTimeout(m,s),f?g(e):c;if(p)return clearTimeout(u),u=setTimeout(m,s),g(l)}return void 0===u&&(u=setTimeout(m,s)),c}return s=b(s)||0,_(e)&&(f=!!e.leading,p="maxWait"in e,i=p?w(b(e.maxWait)||0,s):i,t="trailing"in e?!!e.trailing:t),n.cancel=function(){void 0!==u&&clearTimeout(u),r=l=o=u=void(d=0)},n.flush=function(){return void 0===u?c:v(y())},n}},function(e,t,n){var a=n(146);e.exports=function(){return a.Date.now()}},function(e,t,n){e.exports=n(0)(98)},function(e,t,n){var a=n(36),s=n(148),r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;var t;if(a(e)&&(t="function"==typeof e.valueOf?e.valueOf():e,e=a(t)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=i.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?NaN:+e}},function(e,t,n){var a=n(149),s=n(150);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==a(e)}},function(e,t,n){e.exports=n(0)(161)},function(e,t,n){e.exports=n(0)(120)},function(e,t){e.exports={content:"content_36_pIz9x","webgl-content":"webgl-content_1Ef0QSss","game-wrapper":"game-wrapper_3FW7WRHI","black-background":"black-background_zZWSpCpZ","webgl-not-support-tip":"webgl-not-support-tip_2Udilwhq","go-back":"go-back_1wvbPy1n","screeshot-dialog":"screeshot-dialog_h8edKq_w","record-content":"record-content_lL9zgtiV","preview-wrapper":"preview-wrapper_GmvVL09g","preview-controller":"preview-controller_2p7eF-pp","preview-controller-tip":"preview-controller-tip_3V2C4PsJ","record-again":"record-again_NPFOGa-e","record-yes-button":"record-yes-button_1StiW-D9","record-yes":"record-yes_y0HFYnoC","video-container":"video-container_1IUb4txS","close-game":"close-game_2NeHoLkg",close:"close_2E7DDKdj","blink-wrapper":"blink-wrapper_28KReRV4",blink:"blink_2UXKYPEv","white-blink":"white-blink_u_HCe_CW","upload-failed":"upload-failed_14SAYnhi","failed-tip":"failed-tip_Peu2ZVSI",retry:"retry_36wQfaRU",hide:"hide_3NP13DgO","webgl-player":"webgl-player_AonumrYC",footer:"footer_1gx64gZX","shared-time":"shared-time_3HqIUBWD",buttons:"buttons_3bNggM3R","button-wrapper":"button-wrapper_tAUsHfsA",disable:"disable_2_FC1VBk","fullscreen-icon":"fullscreen-icon_2gOOq4pY","screenshot-icon":"screenshot-icon_2af30804","share-icon":"share-icon_1n0o9ck-","mute-icon":"mute-icon_3uh9Xtyn","more-icon":"more-icon_1ljGXYu_","report-icon":"report-icon_2SafJvhf",more:"more_1Fnl8NET",popup:"popup_9tgufo_D",button:"button_26S7oaQR",report:"report_1GSOtieS",display:"display_1VozgIpw",share:"share_2kkhU84h",cover:"cover_WRydlWjw","mobile-warn":"mobile-warn_147wEG8q","play-shift":"play-shift_2Vw-HJsL",play:"play_2KXKgqxU",playtxt:"playtxt_3wJ6YPjH","text-shift":"text-shift_2btN1xSB",mwu:"mwu_3XyXxJvt","icon-play":"icon-play_h4dGOqXG",loading:"loading_3YczaUwD","progress-bar":"progress-bar_1CKV5o_U",progress:"progress_1GXkZ6aT","progress-percent":"progress-percent_343wtrMc","popup-back":"popup-back_dQsXff4k","default-image":"default-image_RN8dW0b5","share-wrapper":"share-wrapper_3UrVo3pF","title-wrap":"title-wrap_190OIihK","embed-webgl":"embed-webgl_2z_BRYwJ","link-share":"link-share_2rmT4WS1",container:"container_2r3Ojoex",title:"title_KC0eBVhf",author:"author_1AbRa2Dj",description:"description_1xvWuO-b",counts:"counts_CE6as177",count:"count_1pZLwByW","preview-video":"preview-video_2S8gItVk","video-control":"video-control_1bAHacWi","top-bar":"top-bar_wn21akgt",percentage:"percentage_3b04NpJ2","video-note":"video-note_1vNsLnLz","record-video":"record-video_1PTCKT-o"}},function(e,t){e.exports={loading_game:"loading_game_KTSK",shared_on:"shared_on_2b7R",fullscreen:"fullscreen_xLw_",screenshot:"screenshot_frjI",screenshot_tip:"screenshot_tip_3ZD3",click_to_play:"click_to_play_1xeP",play:"play_2DWy",share:"share_1gvd",share_title:"share_title_30xm",play_on_desktop:"play_on_desktop_y2GF",views_hint:"views_hint_2Bra",play_hint:"play_hint_1fjL",reactions_hint:"reactions_hint_33yD",comments_hint:"comments_hint_1oke",more:"more_332G",mute:"mute_30Ka",volume_on:"volume_on_3_LO",report:"report_1J68",play_on_computer:"play_on_computer_2qbM",mobile_tip:"mobile_tip_eNVO",like:"like_22bw",save_for_later:"save_for_later_19j9",record_timer:"record_timer_2gM3",webgl_not_support_tip:"webgl_not_support_tip_OKbh",go_back:"go_back_3LG3",failed_tip:"failed_tip_1QzY",retry:"retry_1a1r",video_note:"video_note_38Se",preview_controller_tip:"preview_controller_tip_oY1u",record_again:"record_again_1qwq",record_yes:"record_yes_qGqD",pause_tip:"pause_tip_2hmo",stop_tip:"stop_tip_Ds-u"}},function(e,t,n){e.exports=n.p+"../styles/i/webgl/default_mg_karting.b8f7fdf98b31bdfe55b997182e7f2d34.png"},function(e,t,n){e.exports=n.p+"../styles/i/webgl/default_mg_fps.ae3dce48f07e61b50ca019622711902a.png"},function(e,t,n){e.exports=n.p+"../styles/i/webgl/default_mg_platformer.ca35cff2b759c2dd4ced562c07046307.png"},function(e,t,n){e.exports=n.p+"../styles/i/webgl/default_mg_other.40ac2ddd8d888d9fa96339c5045ae5ab.png"},function(e,t,n){e.exports=n.p+"../styles/i/webgl/default_mg_lego.011205e14996fbd14630d8be1b19132d.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=O(n(159)),s=O(n(160)),r=O(n(162)),o=O(n(163)),i=O(n(31)),c=O(n(26)),u=O(n(164)),l=O(n(165)),d=O(n(166)),f=O(n(167)),p=O(n(168)),g=O(n(169)),h=O(n(170)),m=O(n(24)),v=O(n(171)),_=O(n(172)),y=O(n(173)),b=O(n(174)),w=O(n(196)),S=O(n(198)),I=O(n(199)),E=O(n(200)),C=O(n(69));function O(e){return e&&e.__esModule?e:{default:e}}var k=[a.default,s.default,r.default,o.default,i.default,c.default,u.default,l.default,d.default,f.default,p.default,g.default,h.default,m.default,v.default,_.default,y.default,b.default,w.default,S.default,I.default,E.default,C.default];t.default={header:k}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=["header","tooltips"];t.default={name:e,depends:[],signals:{tooltipShow:[function(e){var t=e.props;e.state.set([].concat(n,[t.id]),t)}],tooltipHide:[function(e){var t=e.props;e.state.unset([].concat(n,[t.id]))}]},getState:function(){return{tooltips:{}}}}}).call(t,"views/modules/common/header/TooltipStore.js")},function(e,n,a){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var o=t(a(9)),i=t(a(161));function t(e){return e&&e.__esModule?e:{default:e}}var c=["header","popouts"];function s(e){var t,n=e.props,a=e.state,s=a.get(c),r=s[n.id];r&&(t=!1,o.default.forEach(s,function(e){return e.dependsOn!==n.id||!(t=!0)}),t||(i.default.remove(r.popoutElementId),a.unset([].concat(c,[n.id]))))}n.default={name:e,depends:[],signals:{popoutOpen:[function(e){var t=e.props,n=e.state,a=n.get(c);o.default.forEach(a,function(e){t.dependsOn&&e.id!==t.id||s({input:e,state:n})}),n.set([].concat(c,[t.id]),t)}],popoutClose:[s],popoutUpdate:[function(e){e.state.set(["header","popoutsTicks"],Date.now())}]},getState:function(){return{popouts:{},popoutsTicks:0}}}}).call(n,"views/modules/common/header/PopoutStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(9),r=(a=s)&&a.__esModule?a:{default:a};var o={},i=0;function c(){if("undefined"==typeof window)throw new Error("can only be used in browser")}t.default={get:function(e){return c(),o[e]},getId:function(n){c();var a="";return r.default.forEach(o,function(e,t){return e!==n||(a=t,!1)}),a},set:function(e,t){c(),o[e]=t},add:function(e){c();var t=(i++).toString();return o[t]=e,t},remove:function(e){c(),delete o[e]}}},function(e,a,y){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f=t(y(30)),p=t(y(54)),g=t(y(55)),h=y(17);t(y(56));function t(e){return e&&e.__esModule?e:{default:e}}var m=["header","inPageNotification"],v=y(57),_=1;function n(r,o){return function(e){var t=e.props,n=e.state,a=t.id,s=n.get(m).map(function(e){return e.id===a?i({},e,{show:r,toRemove:o}):e});n.set(m,s)}}a.default={name:e,depends:[],signals:{inPageNotificationNotice:[function(e){var t,n,a,s,r,o,i,c,u=e.props,l=e.state,d=y(23).get("DesktopNotificationNotice.dismissed");f.default.hasPermission()&&!d||(t=l.get(m),n=l.get(),a=u.type,r=(s=u.data).role,o=(0,g.default)(a,r,s),i=(0,h.i18n)(n,p.default,a+"_"+r+"_text",s),c={tag:"notifications",onClick:function(){window.focus();var e=o;e+=(-1<e.indexOf("?")?"&":"?")+"_nid="+u.id,window.location.href=e}},t.length===_&&(t=t.slice(0,t.length-1)),l.set(m,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t),[{id:u.id,icon:v,title:"Unity Play",body:i,options:c,show:!1,toRemove:!1,type:a,data:s}])))}],requestInPageNotificationShow:[n(!0,!1)],requestInPageNotificationHide:[n(!1,!1)],requestInPageNotificationToRemove:[n(!1,!0)],requestInPageNotificationRemove:[function(e){var t=e.props,n=e.state,a=t.id,s=n.get(m);n.set(m,s.filter(function(e){return e.id!==a}))}]},getState:function(){return{inPageNotification:[]}}}}).call(a,"views/modules/common/header/InPageNotificationStore.js")},function(e,o,c){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=r(["loginUser.expandKey"],["loginUser.expandKey"]),n=r(["key"],["key"]),a=c(2),s=c(1);function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var i=["header","setting"];o.default={name:e,depends:[],signals:{nop:[function(){}],setHeaderPosition:[function(e){var t=e.props,n=e.state,a=t.headerTop,s=t.scrollTop;n.merge(i,{headerTop:a,scrollTop:s})}],setCurrHeaderTop:[function(e){var t=e.props,n=e.state,a=t.currHeaderTop;n.merge(i,{currHeaderTop:a})}],messagesOpen:[function(e){var t=e.state;t.get([].concat(i,["messagesOpen"]))||t.set([].concat(i,["messagesOpen"]),!0)}],messagesClose:[function(e){var t=e.state;t.get([].concat(i,["messagesOpen"]))&&t.set([].concat(i,["messagesOpen"]),!1)}],setWindowSize:[function(e){var t,n,a,s,r,o=e.state;(window||document)&&(t=window&&window.innerWidth||document&&(document.documentElement.clientWidth||document.body.clientWidth),n=window&&window.innerHeight||document&&(document.documentElement.clientHeight||document.body.clientHeight),s=(a=o.get(i)).windowWidth,r=a.windowHeight,t===s&&n===r||o.merge(i,{windowWidth:t,windowHeight:n}))}],sideMenuOpen:[function(e){var t=e.state;t.get([].concat(i,["sideMenuOpen"]))||t.set([].concat(i,["sideMenuOpen"]),!0)}],sideMenuClose:[function(e){var t=e.state;t.get([].concat(i,["sideMenuOpen"]))&&t.set([].concat(i,["sideMenuOpen"]),!1)}],appSwitcherOpen:[function(e){var t=e.state;t.get([].concat(i,["appSwitcherOpen"]))||t.set([].concat(i,["appSwitcherOpen"]),!0)}],appSwitcherClose:[function(e){var t=e.state;t.get([].concat(i,["appSwitcherOpen"]))&&t.set([].concat(i,["appSwitcherOpen"]),!1)}],setExpandKey:[(0,a.set)((0,s.state)(t),(0,s.props)(n))]},getServices:function(e){window.addEventListener("resize",function(){e.getSignal("header.setWindowSize")()})},getState:function(){return{setting:{headerHeight:72,headerTop:0,scrollTop:0,currHeaderTop:0,windowWidth:0,windowHeight:0,sideMenuOpen:!1,messagesOpen:!1,appSwitcherOpen:!1}}}}}).call(o,"views/modules/common/header/HeaderSettingStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=["header","popupMessages"];t.default={name:e,depends:[],signals:{showMessage:[function(e){var t=e.props,n=e.state,a=t||{},s=a.params,r=void 0===s?{}:s,o={message:a.message,type:a.type,duration:2,lastClicking:Date.now(),params:r};n.set(i,o)}],hideMessage:[function(e){e.state.set([].concat(i,["duration"]),0)}]},getServices:function(){return{}},getState:function(){return{popupMessages:{}}}}}).call(t,"views/modules/common/header/PopupMessageStore.js")},function(e,o,c){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=s(c(26)),n=s(c(24)),a=s(c(31)),i=s(c(13));function s(e){return e&&e.__esModule?e:{default:e}}function r(e){var t,n,a,s=e.props,r=e.state,o=e.controller;"/jobs/0/new"===r.get("currentPath")?o.getSignal("job.closeRecruit")():(a=(t=s.query)?"/jobs/0/new?"+t:"/jobs/0/new","home"===(n=s.source)?o.getSignal("header.sendCDPRequest")({type:"post",data:{postType:"job"},redirectUrl:a}):"header"===n?o.getSignal("header.sendCDPRequest")({type:"menu",data:{menuType:"jobs",subtype:"post_jobs"},redirectUrl:a}):(0,i.default)(a))}o.default={name:e,depends:[],signals:{postJob:a.default.LoginRequired(n.default.EmailRequired(t.default.TfaNotified(r,"header.postJobInternal"))),postJobInternal:[r]},getServices:function(){},getState:function(){return{}}}}).call(o,"views/modules/common/header/PostJobStore.js")},function(e,f,p){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t=u(["header.postProject.teamId"],["header.postProject.teamId"]),n=u(["header.postProject.challengeId"],["header.postProject.challengeId"]),a=p(2),s=p(1),_=c(p(40)),y=c(p(13)),r=c(p(26)),o=c(p(24)),i=c(p(31));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var b=["header","postProject"];function l(e){var t=e.props,n=e.state,a=t.teamId,s=t.challengeId;a&&n.set([].concat(b,["teamId"]),a),s&&n.set([].concat(b,["challengeId"]),s),n.set([].concat(b,["open"]),!0)}function d(e){var t,n,a=e.props,s=e.state,r=e.controller,o=a.type,i=a.skipPopup,c=void 0!==i&&i,u=a.groupId,l=void 0===u?"":u,d=a.source,f=s.get([].concat(b)),p=f.teamId,g=f.challengeId,h="/p/0/new?type="+o,m=a.teamId||p,v=a.challengeId||g;m&&(h+="&teamId="+m),v&&(h+="&challengeId="+v),l&&(h+="&groupId="+l),!0===c?"home"===d?(t={postType:o},r.getSignal("header.sendCDPRequest")({type:"post",data:t,redirectUrl:h})):(0,y.default)(h):("home"===d?(n={postType:o},r.getSignal("header.sendCDPRequest")({type:"post",data:n,redirectUrl:h})):(0,_.default)(h),s.merge(b,{noAnimation:!0,open:!1}))}f.default={name:e,depends:[],signals:{openCreateDialog:i.default.LoginRequired(o.default.EmailRequired(l)),openCreateDialogInternal:[l],closeCreateDialog:[function(e){e.state.set(b,{open:!1})},(0,a.set)((0,s.state)(t),""),(0,a.set)((0,s.state)(n),"")],createProjectByType:o.default.EmailRequired(r.default.TfaNotified(d,"header.createProjectByTypeInternal")),createProjectByTypeInternal:[d],toggleSelectGame:[function(e){var t=e.state,n=t.get("header.postProject.isSelectGameMode");t.set("header.postProject.isSelectGameMode",!n)}]},getState:function(){return{postProject:{open:!1,isSelectGameMode:!1,teamId:"",challengeId:""}}}}}).call(f,"views/modules/common/header/PostProjectStore.js")},function(e,i,c){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t=r(c(26)),n=r(c(24)),a=r(c(31)),s=r(c(13));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t,n,a=e.props;"/s/0/new"!==e.state.get("currentPath")&&(n=(t=a.query)?"/s/0/new?"+t:"/s/0/new",(0,s.default)(n))}i.default={name:e,depends:[],signals:{postSchool:a.default.LoginRequired(n.default.EmailRequired(t.default.TfaNotified(o,"header.postSchoolInternal"))),postSchoolInternal:[o]},getServices:function(){},getState:function(){return{}}}}).call(i,"views/modules/common/header/PostSchoolStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:e,depends:[],signals:{INITIAL_DATA:[function(e){var t=e.state,n=e.http,a=e.path;return t.get("currentUserId")?n.get("/api/user/current").then(a.success).catch(a.error):a.dummy()},{success:[function(e){var t=e.props,n=e.state,a=t.result;200===t.status&&a&&(n.set("loginUser",a),a.emailRequired&&n.set("header.setting.headerHeight",100))}],dummy:[]}]},getServices:function(){},getState:function(){return{}}}}).call(t,"views/modules/common/header/LoginUserStore.js")},function(e,s,r){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["header.browserConfirmDialog.open"],{raw:{value:Object.freeze(["header.browserConfirmDialog.open"])}})),n=r(2),a=r(1);s.default={name:e,depends:[],signals:{openBrowserConfirmDialog:[(0,n.set)((0,a.state)(t),!0)],closeBrowserConfirmDialog:[(0,n.set)((0,a.state)(t),!1)]},getState:function(){return{browserConfirmDialog:{open:!1}}}}}).call(s,"views/modules/common/header/BrowserCheckStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:e,depends:[],signals:{weixinConfig:[function(e){var t,n,a,s,r,o=e.state.get("weixinConfig");o&&wx&&(t=o.appId,n=o.timestamp,a=o.nonceStr,s=o.signature,r=o.debug,wx.config({appId:t,timestamp:n,nonceStr:a,signature:s,debug:r,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),wx.ready(function(){!function(e){{var t,n,a;e&&wx&&(t=e.title,n=e.link,a=e.imgUrl,wx.onMenuShareTimeline({title:t,link:n,imgUrl:a}))}}(o),function(e){{var t,n,a,s;e&&wx&&(t=e.title,n=e.desc,a=e.link,s=e.imgUrl,wx.onMenuShareAppMessage({title:t,desc:n,link:a,imgUrl:s}))}}(o),function(e){{var t,n,a,s;e&&wx&&(t=e.title,n=e.desc,a=e.link,s=e.imgUrl,wx.onMenuShareQQ({title:t,desc:n,link:a,imgUrl:s}))}}(o),function(e){{var t,n,a,s;e&&wx&&(t=e.title,n=e.desc,a=e.link,s=e.imgUrl,wx.onMenuShareWeibo({title:t,desc:n,link:a,imgUrl:s}))}}(o),function(e){{var t,n,a,s;e&&wx&&(t=e.title,n=e.desc,a=e.link,s=e.imgUrl,wx.onMenuShareQZone({title:t,desc:n,link:a,imgUrl:s}))}}(o)}),wx.error(function(e){return console.log(e)}))}]},getState:function(){return{}}}}).call(t,"views/modules/common/header/WeixinConfigStore.js")},function(e,a,t){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var i="header.deleteConfirmDialog";function n(n,a){return function(e){var t=e.props;e.state.set(i,{open:!0,signalPath:n,actionProps:t,type:a})}}function t(e){e.state.set(i,{open:!1,signalPath:"",actionProps:{},type:"default",loadingStatus:""})}a.default={name:e,depends:[],signals:{openDeleteConfirm:[n],closeDeleteConfirm:[t],doConfirmDelete:[function(e){var t=e.state,n=e.controller,a=t.get(i),s=a.signalPath,r=a.actionProps,o=n.getSignal(s);o&&o(r)},t]},getServices:function(){},getState:function(){return{deleteConfirmDialog:{open:!1,type:"default",signalPath:"",actionProps:{}}}},DeleteConfirmed:function(e,t){return[n(e,1<arguments.length&&void 0!==t?t:"default")]}}}).call(a,"views/modules/common/header/DeleteConfirmStore.js")},function(e,u,l){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=c(["header.getRecentSearchStatus"],["header.getRecentSearchStatus"]),a=c(["header.deleteSearchLogStatus"],["header.deleteSearchLogStatus"]),s=l(2),r=l(1),o=l(3),i=(t=o)&&t.__esModule?t:{default:t};function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}u.default={name:e,depends:[],signals:{getRecentSearch:[(0,s.set)((0,r.state)(n),i.default.inProgress),function(e){var t=e.http,n=e.path;return t.get("/api/search/recentSearch").then(n.success).catch(n.error)},{success:[(0,s.set)((0,r.state)(n),i.default.succeeded),function(e){var t=e.state,n=e.props.result;n&&t.set("header.recentSearch",n.keywords||[])}],error:[(0,s.set)((0,r.state)(n),i.default.failed)]}],deleteSearchLog:[(0,s.set)((0,r.state)(a),i.default.inProgress),function(e){var t,n=e.state,a=e.props,s=a.keyword,r=a.deleteAll;void 0!==r&&r?n.set("header.recentSearch",[]):0<=(t=n.get("header.recentSearch").findIndex(function(e){var t=e.keyword;return s===t}))&&n.splice("header.recentSearch",t,1)},[function(e){var t=e.props,n=e.http,a=e.path,s=t.keyword,r=t.deleteAll,o=void 0!==r&&r;return n.post("/api/search/deleteSearchLog",{keyword:s,deleteAll:o}).then(a.success).catch(a.error)},{success:[(0,s.set)((0,r.state)(a),i.default.succeeded)],error:[(0,s.set)((0,r.state)(a),i.default.failed)]}]],initSearchData:[function(e){var t=e.controller;t.getSignal("header.getRecentSearch")(),t.getSignal("header.getPopularSearch")()}]},getState:function(){return{recentSearch:[]}}}}).call(u,"views/modules/common/header/RecentSearchStore.js")},function(e,i,c){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t,n=Object.freeze(Object.defineProperties(["header.getPopularSearchStatus"],{raw:{value:Object.freeze(["header.getPopularSearchStatus"])}})),a=c(2),s=c(1),r=c(3),o=(t=r)&&t.__esModule?t:{default:t};i.default={name:e,depends:[],signals:{getPopularSearch:[(0,a.set)((0,s.state)(n),o.default.inProgress),function(e){var t=e.http,n=e.path;return t.get("/api/search/popularSearch").then(n.success).catch(n.error)},{success:[(0,a.set)((0,s.state)(n),o.default.succeeded),function(e){var t=e.state,n=e.props.result;n&&t.set("header.popularSearch",n)}],error:[(0,a.set)((0,s.state)(n),o.default.failed)]}]},getState:function(){return{popularSearch:[]}}}}).call(i,"views/modules/common/header/PopularSearchStore.js")},function(e,b,w){"use strict";(function(e){Object.defineProperty(b,"__esModule",{value:!0});var t=g(["header.groupBaseDataStatus"],["header.groupBaseDataStatus"]),n=g(["",".updateStatus"],["",".updateStatus"]),a=g(["",".show"],["",".show"]),s=w(2),r=w(1),f=w(41),o=w(3),i=d(o),c=w(194),p=d(w(13)),u=d(w(40)),l=d(w(69));function d(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var m=["header","createGroupDialog"],v=[].concat(m,["form"]);function _(n){return[function(e){var t=e.props;return{field:[].concat(h(v),[n]),value:t.value,touched:!0}}].concat(h(f.chains.fieldChanged))}function y(e){var t=e||{},n=t.id,a=t.avatar,s=t.name,r=t.categoryIds,o=t.description,i=t.privacy,c=t.preferredLanguages,u=t.tags,l=t.unityLicense,d=c&&0<c.length&&c[0]||"";return(0,f.Form)({id:{value:n},avatar:{value:a,validations:["isValue"],errorMessages:["error_isRequired"],isRequired:!0},name:{value:s,validations:["isValue","maxLength:60"],errorMessages:["error_isRequired","error_maxLength60"],isRequired:!0},category:{value:r&&0<r.length&&r[0]||"",validations:["isValue"],errorMessages:["error_isRequired"],isRequired:!0},description:{value:o,validations:["isValue","maxLength:1000"],errorMessages:["error_isRequired","error_maxLength1000"],isRequired:!0},privacy:{value:i,validations:["isValue"],errorMessages:["error_isRequired"],isRequired:!0},language:{value:d},tags:{value:u||[]},unityLicense:{value:l}})}b.default={name:e,depends:[],signals:{getGroupBaseData:[(0,s.set)((0,r.state)(t),i.default.inProgress),function(e){var t=e.http,n=e.path;return t.get("/api/group/0/getGroupOptions",{isCreate:!0}).then(n.success).catch(n.error)},{success:[function(e){var t=e.state,n=e.props.result,a=n.categoryOptions,s=n.languageOptions;t.set("header.groupCategory",a),t.set("header.languageOptions",s)},(0,s.set)((0,r.state)(t),i.default.succeeded)],error:[(0,s.set)((0,r.state)(t),i.default.failed)]}],changeGroupAvatar:_("avatar"),changeGroupName:_("name"),changeGroupCategory:_("category"),changeDescription:_("description"),changePrivacyField:_("privacy"),changeLanguage:_("language"),changeLicense:_("unityLicense"),changePrivacy:[function(e){var t=e.props,n=e.controller,a=t.value;n.getSignal("header.changePrivacyField")({value:a}),n.getSignal("header.changeLicense")({value:""})}],changeTags:_("tags"),addTag:[function(e){var t,n=e.props,a=e.state,s=e.controller,r=n.value,o=r.id,i=a.get([].concat(h(v),["tags"])).value;i.findIndex(function(e){return e===o})<0&&(10<=i.length?s.getSignal("header.showMessage")({message:"project_tags_limit"}):((t=[].concat(h(i))).unshift(o),s.getSignal("header.changeTags")({value:t}),a.set([].concat(m,["skillMap",o]),r)))}],deleteTag:[function(e){var t,n=e.props,a=e.state,s=e.controller,r=n.value,o=a.get([].concat(h(v),["tags"])).value,i=o.findIndex(function(e){return e===r});0<=i&&((t=[].concat(h(o))).splice(i,1),s.getSignal("header.changeTags")({value:t}))}],createGroup:[function(e){return e.props.formPath?{}:{formPath:[].concat(h(v))}}].concat(h(f.chains.formValidated),[function(e){var t=e.state,n=e.path,a=t.get(v);return(0,f.isValidForm)(a)?n.yes():n.no()},{yes:[(0,s.set)((0,r.state)(n,m.join(".")),i.default.inProgress),[function(e){var t=e.state,n=e.http,a=e.path,s=t.get(v);if((0,f.isValidForm)(s)){var r={id:s.id.value,avatar:s.avatar.value,name:s.name.value,category:s.category.value,description:s.description.value,privacy:s.privacy.value,language:s.language.value,tags:s.tags.value,unityLicense:s.unityLicense.value},o=l.default.getRequestHeaderOption(t);return n.post("/api/group/0/create",r,o).then(a.success).catch(a.error)}return a.dummy()},{success:[(0,s.set)((0,r.state)(n,m.join(".")),i.default.succeeded),function(e){var t,n,a=e.state,s=e.props,r=e.controller,o=s.isEdit,i=void 0!==o&&o,c=s.result,u=c.group,l=c.skillMap,d=c.languageMap;i?(a.set(["group","group"],u),a.merge(["group","skillMap"],l||{}),a.merge(["group","languageMap"],d||{}),r.getSignal("header.closeCreateGroupDialog")()):(t=u.id,n=u.slug,(0,p.default)("/g/"+(n||t)+"?setup=true"))}],error:[(0,s.set)((0,r.state)(n,m.join(".")),i.default.failed),function(e){var t=e.props,n=e.controller,a=(t.result||{}).errorCode;"DuplicateParameter"===a?n.getSignal("header.showMessage")({message:"group_name_duplicate"}):l.default.recaptchaError(a,n)||(0,c.onError)("group")({props:t,controller:n})}],dummy:[]}]],no:[]}]),openCreateGroupDialog:[function(e){var t=e.state,n=e.props,a=n.group,s=n.skillMap;a&&t.set([].concat(m,["isEdit"]),!0),s&&t.set([].concat(m,["skillMap"]),s),t.set(v,y(a))},function(e){var t=e.state,n=e.controller,a=t.get("header.groupCategory")||[],s=t.get("header.groupBaseDataStatus");0!==a.length||(0,o.isLoadingOrSucceeded)(s)||n.getSignal("header.getGroupBaseData")()},(0,s.set)((0,r.state)(a,m.join(".")),!0),(0,s.set)((0,r.state)(n,m.join(".")),i.default.initial)],closeCreateGroupDialog:[(0,s.set)((0,r.state)(a,m.join(".")),!1)],closePaymentResultDialog:[function(e){var t=e.state,n=e.props.refresh;t.set("header.paymentResultDialog.show",!1),n&&window.location.reload()}],buyLicense:[function(e){var t=e.state;(0,u.default)("https://store.unity.com/","_blank"),t.set("header.paymentResultDialog.show",!0)}]},getState:function(){return{createGroupDialog:{show:!1,isEdit:!1,form:y()},groupCategory:[],languageOptions:[],paymentResultDialog:{show:!1}}}}}).call(b,"views/modules/common/header/CreateGroupStore.js")},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};var a=[{site:"google",pattern:new RegExp("^(https?://)?plus.google.com/.+$","i")},{site:"twitter",pattern:new RegExp("^(https?://)?(www.)?twitter.com/.+$","i")},{site:"facebook",pattern:new RegExp("^(https?://)?(www.)?([a-zA-Z-.]*)?facebook.com/.+$","i")},{site:"linkedin",pattern:new RegExp("^(https?://)?(www.)?linkedin.com/.+$","i")},{site:"instagram",pattern:new RegExp("^(https?://)?(www.)?instagram.com/.+$","i")},{site:"github",pattern:new RegExp("^(https?://)?(www.)?github.com/.+$","i")},{site:"flickr",pattern:new RegExp("^(https?://)?(www.)?flickr.com/.+$","i")},{site:"indiedb",pattern:new RegExp("^(https?://)?(www.)?indiedb.com/.+$","i")},{site:"pinterest",pattern:new RegExp("^(https?://)?(www.)?pinterest.com/.+$","i")},{site:"reddit",pattern:new RegExp("^(https?://)?(www.)?reddit.com/.+$","i")},{site:"steam",pattern:new RegExp("^(https?://)?(www.)?store.steampowered.com/.+$","i")},{site:"tumblr",pattern:new RegExp("^(https?://)?.*tumblr.com(/.*)?$","i")},{site:"twitch",pattern:new RegExp("^(https?://)?(www.)?twitch.tv/.+$","i")},{site:"vimeo",pattern:new RegExp("^(https?://)?(www.)?vimeo.com/.+$","i")},{site:"vk",pattern:new RegExp("^(https?://)?(www.)?vk.com/.+$","i")},{site:"weibo",pattern:new RegExp("^(https?://)?(www.)?weibo.com/.+$","i")},{site:"qq",pattern:new RegExp("^(https?://)?(www.)?qzone.qq.com/.+$","i")},{site:"youtube",pattern:new RegExp("^(https?://)?(www.)?youtube.com/.+$","i")},{site:"medium",pattern:new RegExp("^(https?://)?(www.)?medium.com/.+$","i")},{site:"behance",pattern:new RegExp("^(https?://)?(www.)?behance.net/.+$","i")},{site:"artstation",pattern:new RegExp("^(https?://)?(www.)?artstation.com/.+$","i")},{site:"sketchfab",pattern:new RegExp("^(https?://)?(www.)?sketchfab.com/.+$","i")},{site:"dribbble",pattern:new RegExp("^(https?://)?(www.)?dribbble.com/.+$","i")},{site:"personal",pattern:new RegExp("^(https?://)?(www.)?[-a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}([-a-zA-Z0-9@:%_+.~#?&//=]*)","i")}];e.exports={getSocialUrlSite:function(t){if(!t)return"";var e=a.findIndex(function(e){return e.pattern.test(t)});return 0<=e?a[e].site:""},testSocialUrl:function(e){var t=a.reduce(function(e,t){return r({},e,(n={},a=t.site,s=t.pattern,a in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,n));var n,a,s},{})[e];return function(e){return t&&t.test(e)}}}},function(e,t,n){"use strict";var a=n(32);e.exports=function(t){return(t=t||{}).rules&&Object.keys(t.rules).forEach(function(e){a[e]=t.rules[e]}),function(e,t){e.alias("cerebral-module-forms"),e.addSignals({fieldAdded:n(58),fieldRemoved:n(61),fieldChanged:{chain:n(62),immediate:!0},formAdded:n(184),formRemoved:n(186),formValidated:n(66),reset:n(67)})}}},function(e,t,n){"use strict";var s=n(11);e.exports=function(e){var t=e.props,n=e.state,a=s(t.fieldPath);n.unset(a)}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){var t=e.props,n=e.state,a=r(t.field).concat("isTouched"),s=n.get(a);n.set(a,t.touched||s||!1)}},function(e,t,n){"use strict";var s=n(11);e.exports=function(e){var t=e.props,n=e.state,a=s(t.field);n.set(a.concat("value"),t.value)}},function(e,t,n){"use strict";var c=n(60),u=n(11);e.exports=function(e){var t=e.props,n=e.state,a=u(t.field),s=a.slice(),r=s.pop(),o=n.get(s),i=o[r];n.set(a.concat("hasValue"),c(o,i.value,i.isValue))}},function(e,t,n){"use strict";var r=n(63),o=n(11);e.exports=function(e){var t=e.props,n=e.state,a=o(t.field).slice(),s=n.get(a);n.merge(a,{isValid:t.preventValidation?s.isValid:!r(s),errorMessage:null})}},function(e,t,n){"use strict";function a(e){var t=e.state.get(e.props.field);return!e.props.preventValidation&&t.validations&&t.hasValue?e.path.yes():e.path.no()}a.outputs=["yes","no"],e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t){for(var n="."===t[0]||".."===t[0]?0:1,a=arguments[n].slice(),s=1+n;s<arguments.length;s++)a=arguments[s].reduce(function(e,t){return"."===t?e:".."===t?e.slice(0,-1):e.concat(t)},a);return a}},function(e,t,n){"use strict";e.exports=[n(185)]},function(e,t,n){"use strict";var r=n(65),o=n(11);e.exports=function(e){var t=e.props,n=e.state,a=o(t.formPath).slice(),s=n.get(a);Array.isArray(s)?n.push(a,r(t.formDetails)):n.set(a,r(t.formDetails))}},function(e,t,n){"use strict";e.exports=[n(187)]},function(e,t,n){"use strict";var o=n(11);e.exports=function(e){var t=e.props,n=e.state,a=o(t.formPath).slice(),s=n.get(a),r=a.pop();Array.isArray(s)?n.splice(a,r,1):n.unset(a.concat(r))}},function(e,t,n){"use strict";var c=n(63),u=n(43),l=n(11);e.exports=function(e){function a(t,n){Object.keys(n).forEach(function(e){Array.isArray(n[e])?r(t.concat(e),n[e]):"value"in n[e]?i(t.concat(e),n,e):a(t.concat(e),n[e])})}var t=e.props,o=e.state,n=l(t.formPath).slice(),s=o.get(n),r=function(n,e){e.forEach(function(e,t){a(n.concat(t),e)})},i=function(e,t,n){var a=t[n],s=u(t,a.value,a.validations),r=s.isValid&&!c(a);o.merge(e,{isValid:r,errorMessage:r?null:a.errorMessages[s.failedRuleIndex],isTouched:!0})};a(n,s)}},function(e,t,n){"use strict";var i=n(42),c=n(11);e.exports=function(e){function s(a){return Object.keys(a).reduce(function(e,n){var t;return Array.isArray(a[n])?e[n]=o(a[n]):"value"in a[n]?((t=Object.keys(a[n]).reduce(function(e,t){return e[t]=a[n][t],e},{})).value=t.defaultValue,e[n]=i(a,t)):e[n]=s(a[n]),e},{})}var t=e.props,n=e.state,a=c(t.formPath).slice(),r=n.get(a),o=function(e){return e.reduce(function(e,t,n){return e[n]=s(t),e},[])};n.set(a,s(r))}},function(e,t,n){"use strict";var a=n(68),s=n(191);e.exports=function(e){return a(e,s)}},function(e,t,n){"use strict";e.exports=function(e){return e.isValid&&(!e.isRequired||e.isRequired&&e.hasValue)}},function(e,t,n){"use strict";var a=n(68),s=n(193);e.exports=function(e){return a(e,s)}},function(e,t,n){"use strict";e.exports=function(e){return e.isValidating}},function(e,t,n){"use strict";var a,s=n(195),r=(a=s)&&a.__esModule?a:{default:a};function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var d=/<iframe.*(\/>|<\/iframe>)/i,f=/\bwidth="(\s|\d)*"/i,p=/\bheight="(\s|\d)*"/i;function i(e,t,n){var a,s=e||{},r=s.width,o=s.height,i=1;0<t&&(i=Math.round(100*t/r)/100),1<n&&(a=Math.round(100*n/o)/100,i=Math.min(i,a));var c=Math.round(r*i),u=Math.round(o*i);return 0<t&&(c=Math.min(c,t)),1<n&&(u=Math.min(u,n)),{width:c,height:u}}var c=/<[^>]+>/g,u=[{reg:/&nbsp;/g,str:" "},{reg:/&lt;/g,str:"<"},{reg:/&gt;/g,str:">"},{reg:/&amp;/g,str:"&"},{reg:/&quot;/g,str:'"'},{reg:/&apos;/g,str:"'"}];function l(e,t){if(!t)return null;var n=t.errorCode,a=t.target,s=t.message,r=[e,n];return a?r.push(a.trim().replace(/(\s|[-:.])+/g,"_")):s&&r.push(s.trim().replace(/(\s|[-:.])+/g,"_")),r.join("_")}e.exports={formatSize:function(e){var t=["Bytes","KB","MB","GB","TB"],n=0,a=0;return 0<e&&(a=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),n=(e/Math.pow(1024,a)).toFixed(1)),n+" "+t[a]},formatNumber:function(e){var t=["","K","M"],n=0,a=0;return 0<e&&(n=0<(a=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),t.length-1))?(e/Math.pow(1e3,a)).toFixed(1):Math.round(e/Math.pow(1e3,a))),n+" "+t[a]},formatNumberV2:function(e){return e<1e3?e:e<1e6?Math.sign(e)*(Math.abs(e)/1e3).toFixed(0)+"K":Math.sign(e)*(Math.abs(e)/1e6).toFixed(0)+"M"},getPackageVersionDescription:function(e,t){return e&&e.locales?(e.locales[t]||e.locales.en_US||e.locales[0]).longDescription:null},getCategoryPath:function n(e,a){var s=null;return e.forEach(function(e){var t;e.id===a?s=e.path:!e.categories||(t=n(e.categories,a))&&(s=t)}),s},getCountryData:function(){return{BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BA:"Bosnia and Herzegovina",BB:"Barbados",WF:"Wallis and Futuna",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei",BO:"Bolivia",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BT:"Bhutan",JM:"Jamaica",BV:"Bouvet Island",BW:"Botswana",WS:"Samoa",BQ:"Bonaire, Saint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",JE:"Jersey",BY:"Belarus",BZ:"Belize",RU:"Russia",RW:"Rwanda",RS:"Serbia",TL:"East Timor",RE:"Reunion",TM:"Turkmenistan",TJ:"Tajikistan",RO:"Romania",TK:"Tokelau",GW:"Guinea-Bissau",GU:"Guam",GT:"Guatemala",GS:"South Georgia and the South Sandwich Islands",GR:"Greece",GQ:"Equatorial Guinea",GP:"Guadeloupe",JP:"Japan",GY:"Guyana",GG:"Guernsey",GF:"French Guiana",GE:"Georgia",GD:"Grenada",GB:"United Kingdom",GA:"Gabon",SV:"El Salvador",GN:"Guinea",GM:"Gambia",GL:"Greenland",GI:"Gibraltar",GH:"Ghana",OM:"Oman",TN:"Tunisia",JO:"Jordan",HR:"Croatia",HT:"Haiti",HU:"Hungary",HK:"Hong Kong",HN:"Honduras",HM:"Heard Island and McDonald Islands",VE:"Venezuela",PR:"Puerto Rico",PS:"Palestinian Territory",PW:"Palau",PT:"Portugal",SJ:"Svalbard and Jan Mayen",PY:"Paraguay",IQ:"Iraq",PA:"Panama",PF:"French Polynesia",PG:"Papua New Guinea",PE:"Peru",PK:"Pakistan",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PM:"Saint Pierre and Miquelon",ZM:"Zambia",EH:"Western Sahara",EE:"Estonia",EG:"Egypt",ZA:"South Africa",EC:"Ecuador",IT:"Italy",VN:"Vietnam",SB:"Solomon Islands",ET:"Ethiopia",SO:"Somalia",ZW:"Zimbabwe",SA:"Saudi Arabia",ES:"Spain",ER:"Eritrea",ME:"Montenegro",MD:"Moldova",MG:"Madagascar",MF:"Saint Martin",MA:"Morocco",MC:"Monaco",UZ:"Uzbekistan",MM:"Myanmar",ML:"Mali",MO:"Macao",MN:"Mongolia",MH:"Marshall Islands",MK:"Macedonia",MU:"Mauritius",MT:"Malta",MW:"Malawi",MV:"Maldives",MQ:"Martinique",MP:"Northern Mariana Islands",MS:"Montserrat",MR:"Mauritania",IM:"Isle of Man",UG:"Uganda",TZ:"Tanzania",MY:"Malaysia",MX:"Mexico",IL:"Israel",FR:"France",IO:"British Indian Ocean Territory",SH:"Saint Helena",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Micronesia",FO:"Faroe Islands",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NA:"Namibia",VU:"Vanuatu",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NZ:"New Zealand",NP:"Nepal",NR:"Nauru",NU:"Niue",CK:"Cook Islands",XK:"Kosovo",CI:"Ivory Coast",CH:"Switzerland",CO:"Colombia",CN:"China",CM:"Cameroon",CL:"Chile",CC:"Cocos Islands",CA:"Canada",CG:"Republic of the Congo",CF:"Central African Republic",CD:"Democratic Republic of the Congo",CZ:"Czech Republic",CY:"Cyprus",CX:"Christmas Island",CR:"Costa Rica",CW:"Curacao",CV:"Cape Verde",CU:"Cuba",SZ:"Swaziland",SY:"Syria",SX:"Sint Maarten",KG:"Kyrgyzstan",KE:"Kenya",SS:"South Sudan",SR:"Suriname",KI:"Kiribati",KH:"Cambodia",KN:"Saint Kitts and Nevis",KM:"Comoros",ST:"Sao Tome and Principe",SK:"Slovakia",KR:"South Korea",SI:"Slovenia",KP:"North Korea",KW:"Kuwait",SN:"Senegal",SM:"San Marino",SL:"Sierra Leone",SC:"Seychelles",KZ:"Kazakhstan",KY:"Cayman Islands",SG:"Singapore",SE:"Sweden",SD:"Sudan",DO:"Dominican Republic",DM:"Dominica",DJ:"Djibouti",DK:"Denmark",VG:"British Virgin Islands",DE:"Germany",YE:"Yemen",DZ:"Algeria",US:"United States",UY:"Uruguay",YT:"Mayotte",UM:"United States Minor Outlying Islands",LB:"Lebanon",LC:"Saint Lucia",LA:"Laos",TV:"Tuvalu",TW:"Taiwan",TT:"Trinidad and Tobago",TR:"Turkey",LK:"Sri Lanka",LI:"Liechtenstein",LV:"Latvia",TO:"Tonga",LT:"Lithuania",LU:"Luxembourg",LR:"Liberia",LS:"Lesotho",TH:"Thailand",TF:"French Southern Territories",TG:"Togo",TD:"Chad",TC:"Turks and Caicos Islands",LY:"Libya",VA:"Vatican",VC:"Saint Vincent and the Grenadines",AE:"United Arab Emirates",AD:"Andorra",AG:"Antigua and Barbuda",AF:"Afghanistan",AI:"Anguilla",VI:"U.S. Virgin Islands",IS:"Iceland",IR:"Iran",AM:"Armenia",AL:"Albania",AO:"Angola",AQ:"Antarctica",AS:"American Samoa",AR:"Argentina",AU:"Australia",AT:"Austria",AW:"Aruba",IN:"India",AX:"Aland Islands",AZ:"Azerbaijan",IE:"Ireland",ID:"Indonesia",UA:"Ukraine",QA:"Qatar",MZ:"Mozambique"}},isChild:function(e,t){if(e.hasChildNodes())for(var n=e.children||e.childNodes,a=0;a<n.length;a++)if(n[a]===t)return!0;return!1},isParent:function(e,t){if(null===e||null===t)return!1;for(t=t.parentNode;t!==document.body;){if(t===e)return!0;t=t.parentNode}return!1},buildAssetStoreUrl:function(e){return"https://www.assetstore.unity3d.com/"+e},buildAssetStorePackageUrl:function(e,t){var n,a="en";return!t||0<(n=t.split("_")).length&&n[0]!==a&&(a=n[n.length-1].toLowerCase()),"https://www.assetstore.unity3d.com/"+a+"/#!/content/"+e},toProposalAttachmentUrl:function(e,t){return"/proposal-attachments/"+t+"/"+e},buildGithubUrl:function(e){return"https://github.com/"+e},buildFacebookUrl:function(e){return"https://www.facebook.com/"+e},buildTwitterUrl:function(e){return"https://twitter.com/"+e},buildLinkedinUrl:function(e){return"https://www.linkedin.com/in/"+e},compare:function(e,t){return e.startTime>t.startTime?-1:e.startTime<t.startTime?1:0},buildOutWebsiteUrl:function(e,t){return e?e.startsWith("http")?e:t?"http://"+e:"https://"+e:""},extractName:function(e){return e?(e=e.trim(),/^\W+/.test(e)?e[0]:(t=0<e.indexOf(" ")?" ":",",1<(a=(n=e.split(t)).length)?""+n[0][0]+n[a-1][0]:n[0][0])):"";var t,n,a},validateEmail:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},getHost:function(e){return e?e=(e=(e=(e=e.replace("http://","")).replace("https://","")).split("/")[0]).replace("www.",""):""},normalizeHtml:function(e,t,n){var a=e||{},s=a.html,r=a.width,o=a.height;if(d.test(s)){var i,c=1;0<t&&(c=Math.round(100*t/r)/100),1<n&&(i=Math.round(100*n/o)/100,c=Math.min(c,i));var u=Math.round(r*c),l=Math.round(o*c);return 0<t&&(u=Math.min(u,t)),1<n&&(l=Math.min(l,n)),s.replace(f,'width="'+u+'"').replace(p,'height="'+l+'"')}return s},normalizeImage:function(e,t,n){var a=e||{},s=a.width,r=a.height;return i(e,Math.min(s,t),Math.min(r,n))},normalizeContent:i,arrayEqual:function e(t,n){if(!t)return!1;if(!n)return!1;if(t.length!==n.length)return!1;for(var a=0,s=t.length;a<s;a++)if(t[a]instanceof Array&&n[a]instanceof Array){if(!e(t[a],n[a]))return!1}else if(t[a]!==n[a])return(0,r.default)(t[a],n[2]);return!0},getPreviewText:function(e,t){if(!e)return{};if(t>=e.length||t<=0)return{text:e,isShort:!1};for(var n=t,a=e[n];0<n&&/\w/.test(a);)a=e[--n];return{text:e.substr(0,n||t),isShort:!0}},getPreviewTextV2:function(e,t){var n=/[^\x00-\xff]/g;if(e.replace(n,"mm").length<=t)return{text:e,isShort:!1};for(var a=Math.floor(t/2);a<e.length;a++)if(e.substr(0,a).replace(n,"mm").length>=t)return{text:e.substr(0,a),isShort:!0};return{text:e,isShort:!1}},getDaysFromNumOfUnit:function(e,t,n){if(e&&t&&n){var a=n().subtract(e,t);return n().diff(a,"days")}return 0},getNumOfUnitFromDays:function(e,t){var n,a={num:1,unit:"days"},s=[];return e&&t&&(n=t().subtract(e,"days"),s=["months","weeks","days"].map(function(e){return{num:t().diff(n,e),unit:e}})),(s=s.filter(function(e){return 0<e.num}))&&0<s.length&&(a=s[0]),a},splitTags:function(e){return e?e.trim().split(/\s*[,|，|、]\s*/):[""]},arrayInsert:function(e,t){var n,a=[];return e&&(n=e.findIndex(function(e){return e===t}),a=[].concat(o(e)),n<0&&t&&a.push(t)),a},arrayRemove:function(e,t){var n,a=[];return e&&(n=e.findIndex(function(e){return e===t}),a=[].concat(o(e)),0<=n&&t&&a.splice(n,1)),a},arrayMove:function(e,s,r){if(s===r)return e;var o=e[s];return e.reduce(function(e,t,n){var a=t;return n===r&&(s<r&&(e=e.concat(t),a=o),r<s&&(e=e.concat(o))),n===s?e:e.concat(a)},[])},minWindowWidth:800,getFileIcon:function(e){return"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e||"application/msword"===e?"file-word":"application/pdf"===e?"file-pdf":"file-empty"},pauseEvent:function(e){e.stopPropagation(),e.preventDefault()},timeCompare:function(e,t,n){if(!e)return 1;if(!t)return-1;if(!n)return 0;var a=n(e),s=n(t),r=a.diff(s);return r<0?1:0<r?-1:0},convertHtmlToStr:function(e){if(!e||"string"!=typeof e||""===e)return e;var t=e.replace(c,"");return u.forEach(function(e){t=t.replace(e.reg,e.str)}),t},getUserTitleRole:function(e,t){if(!e||!t)return null;var n,a=e.title,s=e.jobRoleIds,r=a;return s&&0<s.length&&(n=t[s[0]],r=r?a+" - "+n.name:n.name),r},securedURL:function(e){return e?e.startsWith("https://")||e.startsWith("//")?e:e.replace(/^(http:\/\/)?/,"https://"):""},getLangText:function(e){switch(e){case"zh_CN":return"简体中文";case"ja_JP":return"日本語";case"ko_KR":return"한국어";case"ru_RU":return"Русский";case"es_ES":return"Español";case"fr_FR":return"Français";case"de_DE":return"Deutsch";case"pt_PT":return"Português";default:return"English"}},getErrorMsg:l,onError:function(r){return function(e){var t=e.props,n=e.controller,a=t.result,s=l(r,a);s&&n.getSignal("header.showMessage")({message:s})}},contains:function(e,t){return!(!e||0===e.length)&&0<=e.findIndex(function(e){return e===t})},parseCriteria:function(e){var t=(e||{}).k,n=t?JSON.parse(t):[],s={};return n.forEach(function(e,t){var n,a=e.split(":");2===a.length&&((n=s[a[0]]||[]).push({value:a[1],index:t}),s[a[0]]=n)}),s},isUserDeleted:function(e,t){return"Deleted User"===t&&(e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e))},groupLimitations:{pro:"pro",plus:"plus",none:""}}},function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.prototype.hasOwnProperty;e.exports=function(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":o(e))||null===e||"object"!==(void 0===t?"undefined":o(t))||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var s=i.bind(t),r=0;r<n.length;r++)if(!s(n[r])||e[n[r]]!==t[n[r]])return!1;return!0}},function(e,f,g){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t=u(["header.matching.editRequestFormStatus"],["header.matching.editRequestFormStatus"]),n=u(["header.matching.widgetShow"],["header.matching.widgetShow"]),a=u(["header.matching.closeQuestionStatus"],["header.matching.closeQuestionStatus"]),s=g(2),r=g(1),p=c(g(37)),o=c(g(197)),i=c(g(3));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=void 0;function d(e){var t=e.state.get("header.matching.question").id;(0,o.default)("/client/question/?questionId="+t)}f.default={name:e,depends:[],signals:{INITIAL_DATA:[function(e){return e.path.dummy()},{success:[function(e){var t,n,a,s,r,o=e.state,i=e.props.result,c=i.question,u=i.users,l=i.acceptedUser,d=i.totalWithoutBudget,f=i.waitingFinished;c&&(t=c.matchingStartTime,n=c.status,a=c.type,s=parseInt((0,p.default)().diff((0,p.default)(t))/1e3,10),r=o.get("currentPath"),o.set("header.matching.question",c),o.set("header.matching.users",u||[]),o.set("header.matching.acceptedUser",l),o.set("header.matching.seconds",s),o.set("header.matching.totalWithoutBudget",d),o.set("header.matching.waitingFinished",f),-1!==r.indexOf("/matching")||-1!==r.indexOf("/workspace")||"realtime"!==a||"matching"!==n&&"matching_finished"!==n&&"accepted"!==n||o.set("header.matching.widgetShow",!0))}],dummy:[]}],matchingResultReceived:[function(e){var t=e.state,n=e.props,a=n.users,s=n.total;t.set("header.matching.users",a||[]),t.set("header.matching.question.requests",s)}],matchingFinishedResultReceived:[function(e){var t=e.state,n=e.props,a=n.users,s=n.total,r=n.totalWithoutBudget;t.set("header.matching.users",a||[]),t.set("header.matching.totalWithoutBudget",r),t.set("header.matching.question.status","matching_finished"),t.set("header.matching.question.requests",s)}],matchingWaitingFinishedResultReceived:[function(e){var t=e.state,n=e.props.totalWithoutBudget;t.set("header.matching.totalWithoutBudget",n),t.set("header.matching.waitingFinished",!0)}],requestAccepted:[function(e){var t,n=e.state,a=e.props.acceptedUser,s=(n.get("header.matching.question")||{}).id;s&&(t=n.get("currentPath"),n.merge("header.matching.question",{acceptedUserId:a.id,status:"accepted"}),n.set("header.matching.acceptedUser",a),-1!==t.indexOf("/matching")&&(0,o.default)("/workspace/"+s))}],requestDeclined:[function(e){var t=e.state,n=e.props,a=n.requests,s=n.declinedRequests,r=n.status;t.merge("header.matching.question",{requests:a,declinedRequests:s,status:r})}],startMatchingTimer:[function(e){var t=e.controller;l=setInterval(function(){return t.getSignal("header.increaseSeconds")()},1e3)}],increaseSeconds:[function(e){var t=e.state,n=t.get("header.matching.seconds");t.set("header.matching.seconds",n+1)}],endTimer:[function(){l&&clearInterval(l)}],onEditRequestForm:[(0,s.set)((0,r.state)(t),i.default.inProgress),function(e){var t=e.http,n=e.path;return t.post("/api/livehelp/editResponse",{source:"waiting_screen"}).then(n.success).catch(n.error)},{success:[d],error:[d]}],closeMatchingWidget:[(0,s.set)((0,r.state)(n),!1)],continueWaiting:[function(e){var t=e.state,n=e.http,a=e.path,s=t.get("header.matching.question").id;return n.post("/api/livehelp/client/continueWaiting",{questionId:s}).then(a.success).catch(a.error)},{success:[function(e){e.state.set("header.matching.waitingFinished",!1)}]}],closeQuestion:[(0,s.set)((0,r.state)(a),i.default.inProgress),[function(e){var t=e.state,n=e.http,a=e.path,s=(t.get("header.matching").question||{}).id;return n.post("/api/livehelp/client/closeQuestion",{id:s}).then(a.success).catch(a.error)},{success:[(0,s.set)((0,r.state)(a),i.default.succeeded),function(e){e.controller.getSignal("header.closeMatchingWidget")()}],error:[(0,s.set)((0,r.state)(a),i.default.failed)],dummy:[]}]]},getServices:function(){},getState:function(){return{matching:{users:[],totalWithoutBudget:0,seconds:0,widgetShow:!1}}}}}).call(f,"views/ods/modules/header/MatchingStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(56),r=(a=s)&&a.__esModule?a:{default:a};t.default=function(e){e=(0,r.default)(e),window.location.href=e}},function(e,r,o){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["header.ongoingSession.show"],{raw:{value:Object.freeze(["header.ongoingSession.show"])}})),n=o(2),a=o(1);function s(e){var t=e.state,n=72;t.get("header.ongoingSession.show")&&(n+=46),t.get("header.unpaidSession.show")&&(n+=46),t.get("header.desktopNotification.show")&&(n+=46),t.set("header.setting.headerHeight",n)}r.default={name:e,depends:[],signals:{INITIAL_DATA:[function(e){return e.path.dummy()},{success:[function(e){var t=e.state,n=e.props.result,a=n.question,s=n.user;a&&(t.set("header.ongoingSession.question",a),t.set("header.ongoingSession.user",s),t.set("header.ongoingSession.show",!0))},s],dummy:[]}],closeOngoingSessionWidget:[(0,n.set)((0,a.state)(t),!1),s]},getServices:function(){},getState:function(){return{ongoingSession:{show:!1}}},updateHeaderHeight:s}}).call(r,"views/ods/modules/header/OngoingSessionStore.js")},function(e,a,s){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var i=t(s(13)),c=t(s(40));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.props,n=e.controller,a=t.redirectUrl,s=t.loginRequired,r=t.popup,o=void 0!==r&&r;a&&(s?n.getSignal("header.loginTo")({url:a}):(!0===o?(0,c.default):(0,i.default))(a))}a.default={name:e,depends:[],signals:{sendCDPRequest:[function(e){var t=e.props,n=e.http,a=e.path,s=t.type,r=t.eventType,o=t.data;return n.post("/api/cdp",{type:s,eventType:r,data:o}).then(a.success).catch(a.error)},{success:[n],error:[n]}]},getState:function(){}}}).call(a,"views/modules/common/header/CDPStore.js")},function(e,u,l){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=c(["header.clipboardTip.show"],["header.clipboardTip.show"]),a=c(["header.clipboardTip.copied"],["header.clipboardTip.copied"]),s=l(2),r=l(1),o=l(201),i=(t=o)&&t.__esModule?t:{default:t};function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}u.default={name:e,depends:[],signals:{copyLink:[(0,s.set)((0,r.state)(n),!0),(0,s.set)((0,r.state)(a),!0),function(e){var t=e.state,n=e.props.content;(0,i.default)(n),setTimeout(function(){t.set("header.clipboardTip.copied",!1),setTimeout(function(){t.set("header.clipboardTip.show",!1)},500)},2e3)}]},getServices:function(){},getState:function(){return{clipboardTip:{show:!1,copied:!1}}}}}).call(u,"views/ods/modules/header/ClipboardTipStore.js")},function(e,t,n){e.exports=n(0)(607)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(203)),s=r(n(204));function r(e){return e&&e.__esModule?e:{default:e}}var o=[a.default,s.default];t.default={footer:o}},function(e,o,i){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=r(["footer.height"],["footer.height"]),n=r(["height"],["height"]),a=i(2),s=i(1);function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}o.default={name:e,depends:[],signals:{setHeight:[(0,a.set)((0,s.state)(t),(0,s.props)(n))]},getState:function(){return{height:0}}}}).call(o,"views/v2/modules/footer/FooterStore.js")},function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var i=/language=[a-zA-Z]{2,}/i;function t(){var e=window&&window.location&&window.location.href;i.test(e)?window.location.href=e.replace(i,""):window.location.reload()}n.default={name:e,depends:[],signals:{languageChange:[[function(e){var t=e.props,n=e.state,a=e.path,s=e.http,r=t.locale;if(r===n.get("locale")){var o=window&&window.location&&window.location.href;if(!i.test(o))return a.dummy()}return s.post("/api/changeLanguage",{locale:r}).then(a.success).catch(a.error)},{success:[t],error:[],dummy:[]}]],regionChange:[[function(e){var t=e.props,n=e.path,a=e.http,s=t.regionRefId;return a.post("/api/changePreferredRegion",{regionRefId:s}).then(n.success).catch(n.error)},{success:[t],error:[]}]],switchLangStatus:[function(e){var t=e.state,n=e.props;t.set("footer.langStatus",n.open)}],switchRegionStatus:[function(e){var t=e.state,n=e.props;t.set("footer.regionStatus",n.open)}]},getState:function(){return{langStatus:!1,regionStatus:!1}}}}).call(n,"views/v2/modules/footer/LanguageChooseStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Ie(n(206)),s=Ie(n(207)),r=Ie(n(236)),o=Ie(n(74)),i=Ie(n(14)),c=Ie(n(237)),u=Ie(n(238)),l=Ie(n(77)),d=Ie(n(28)),f=Ie(n(5)),p=Ie(n(27)),g=Ie(n(33)),h=Ie(n(78)),m=Ie(n(249)),v=Ie(n(6)),_=Ie(n(79)),y=Ie(n(19)),b=Ie(n(7)),w=Ie(n(252)),S=Ie(n(255)),I=Ie(n(4)),E=Ie(n(45)),C=Ie(n(256)),O=Ie(n(257)),k=Ie(n(80)),M=Ie(n(81)),T=Ie(n(258)),R=Ie(n(259)),P=Ie(n(260)),j=Ie(n(46)),A=Ie(n(261)),x=Ie(n(47)),D=Ie(n(48)),L=Ie(n(262)),F=Ie(n(34)),U=Ie(n(263)),N=Ie(n(264)),$=Ie(n(265)),H=Ie(n(266)),q=Ie(n(75)),W=Ie(n(82)),V=Ie(n(277)),z=Ie(n(283)),B=Ie(n(84)),G=Ie(n(284)),K=Ie(n(285)),J=Ie(n(49)),Y=Ie(n(286)),Q=Ie(n(287)),Z=Ie(n(288)),X=Ie(n(289)),ee=Ie(n(290)),te=Ie(n(291)),ne=Ie(n(292)),ae=Ie(n(293)),se=Ie(n(294)),re=Ie(n(295)),oe=Ie(n(296)),ie=Ie(n(297)),ce=Ie(n(298)),ue=Ie(n(299)),le=Ie(n(73)),de=Ie(n(300)),fe=Ie(n(301)),pe=Ie(n(302)),ge=Ie(n(306)),he=Ie(n(307)),me=Ie(n(308)),ve=Ie(n(309)),_e=Ie(n(310)),ye=Ie(n(311)),be=Ie(n(312)),we=Ie(n(313)),Se=Ie(n(314));function Ie(e){return e&&e.__esModule?e:{default:e}}var Ee=[_e.default,a.default,s.default,o.default,i.default,d.default,ie.default,f.default,p.default,g.default,h.default,m.default,v.default,_.default,z.default,y.default,b.default,w.default,S.default,I.default,E.default,C.default,c.default,u.default,O.default,k.default,M.default,T.default,L.default,F.default,U.default,N.default,R.default,P.default,j.default,A.default,x.default,D.default,Y.default,$.default,H.default,q.default,l.default,r.default,W.default,V.default,B.default,G.default,K.default,J.default,Q.default,Z.default,X.default,ee.default,te.default,ne.default,ae.default,se.default,re.default,oe.default,ce.default,ue.default,le.default,de.default,fe.default,pe.default,ge.default,he.default,me.default,ve.default,ye.default,be.default,we.default,Se.default];t.default={messages:Ee}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=[].concat(["messages"],["currentTab"]);t.default={name:e,depends:[],signals:{switchTab:[function(e){var t=e.props,n=e.state,a=t.tab;n.set(s,a)}]},getState:function(){return{currentTab:"conversations"}}}}).call(t,"views/v2/modules/messages/TabStore.js")},function(e,f,p){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t=d(["messages.showContent"],["messages.showContent"]),n=d(["messages.displayMobileMore"],["messages.displayMobileMore"]),a=d(["value"],["value"]),s=d(["messages.showSideBar"],["messages.showSideBar"]),r=l(p(6)),o=l(p(27)),i=p(21),c=p(2),u=p(1);function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}f.default={name:e,depends:[r.default],signals:{channelSelect:[function(e){var t=e.props,n=e.state,a=t.channelId;o.default.isConnected(n)&&a&&(0,i.isTouch)()&&n.set("messages.showContent",!0)}],hideContent:[(0,c.set)((0,u.state)(t),!1)],openExplore:[(0,c.set)((0,u.state)(t),!0)],toggleMobileMore:[(0,c.set)((0,u.state)(n),(0,u.props)(a))],stopExplore:[(0,c.set)((0,u.state)(t),!1)],toggleSideBar:[(0,c.set)((0,u.state)(s),(0,u.props)(a))],syncFromLocation:[(0,c.set)((0,u.state)(s),!0)]},getState:function(){return{contentType:"friends-list",displayAddMember:!1,isNewAddMember:!1,showContent:!1,displayMobileMore:!1,showSideBar:!0}},getContentType:function(e){return e.get(contentTypeKey)}}}).call(f,"views/v2/modules/messages/ContentStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(209),r=(a=s)&&a.__esModule?a:{default:a};r.default.registerLanguage("javascript",n(210)),r.default.registerLanguage("java",n(211)),r.default.registerLanguage("python",n(212)),r.default.registerLanguage("css",n(213)),r.default.registerLanguage("php",n(214)),r.default.registerLanguage("ruby",n(215)),r.default.registerLanguage("cpp",n(216)),r.default.registerLanguage("sql",n(217)),r.default.registerLanguage("json",n(218)),r.default.registerLanguage("xml",n(219)),r.default.registerLanguage("bash",n(220)),r.default.registerLanguage("cs",n(221)),r.default.registerLanguage("go",n(222)),r.default.registerLanguage("objectivec",n(223)),r.default.registerLanguage("swift",n(224)),t.default=r.default},function(e,t,n){e.exports=n(0)(991)},function(e,t,n){e.exports=n(0)(972)},function(e,t,n){e.exports=n(0)(971)},function(e,t,n){e.exports=n(0)(970)},function(e,t,n){e.exports=n(0)(969)},function(e,t,n){e.exports=n(0)(968)},function(e,t,n){e.exports=n(0)(967)},function(e,t,n){e.exports=n(0)(966)},function(e,t,n){e.exports=n(0)(965)},function(e,t,n){e.exports=n(0)(964)},function(e,t,n){e.exports=n(0)(963)},function(e,t,n){e.exports=n(0)(947)},function(e,t,n){e.exports=n(0)(946)},function(e,t,n){e.exports=n(0)(945)},function(e,t,n){e.exports=n(0)(944)},function(e,t,n){e.exports=n(0)(943)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=w(["loginUser"],["loginUser"]),i=w(["messages.users"],["messages.users"]),c=w(["messages.channels"],["messages.channels"]),u=w(["messages.channelMembers"],["messages.channelMembers"]),l=w(["project.mentionUsers"],["project.mentionUsers"]),d=w(["messages.showUserCard"],["messages.showUserCard"]),f=b(n(12)),m=b(n(10)),p=b(n(50)),g=b(n(20)),h=n(25),v=n(1),_=b(n(22)),y=b(n(226));function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var S=(0,h.decorator)({loginUser:(0,v.state)(o),users:(0,v.state)(i),channels:(0,v.state)(c),allChannelMembers:(0,v.state)(u),messageUsers:(0,v.state)(i),projectUsers:(0,v.state)(l),showUserCard:(0,v.signal)(d)})(a=(0,_.default)(y.default)((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(I,g.default),s(I,[{key:"onMsgMentionClick",value:function(e){e.stopPropagation();var t=p.default.findDOMNode(this.refs.mention).getBoundingClientRect(),n=t.left,a=t.top,s=t.width,r=t.height,o=this.props;(0,o.showUserCard)({user:o.users[o.userId],src:"mention",pos:{left:n,top:a,height:r,width:s}})}},{key:"renderMessageMention",value:function(){var e,t=this,n=this.props,a=n.userId,s=n.channels,r=n.allChannelMembers,o=n.mentioned,i=n.children,c=n.messageUsers,u=n.channelId,l=n.loginUser,d=n.authorIsAdmin,f=l.id,p=c[a],g=r[u],h=s[u];return h&&"direct"!==h.type&&("@everyone"===a||p&&g)&&("@everyone"!==a||"lobby"!==h.type||d)?p&&p.id?(e=f===a,m.default.createElement("span",{ref:"mention",className:this.ss("highlight",o&&"mentioned",e&&"mentionSelf"),onClick:function(e){return t.onMsgMentionClick(e)}},p?"@"+p.fullname:i)):m.default.createElement("span",{className:this.ss("highlight",o&&"mentioned","mentionSelf")},p?"@"+p.fullname:i):m.default.createElement("span",null,i)}},{key:"renderProjectMention",value:function(){var e,t=this.props,n=t.projectUsers,a=t.mentioned,s=t.children,r=n[t.userId],o=void 0;return o=r&&r.id?(e="/u/"+r.id,m.default.createElement("a",{href:e,target:"_blank"},r?"@"+r.fullname:s)):m.default.createElement("a",null,r?"@"+r.fullname:s),m.default.createElement("span",{className:this.ss("highlight",a&&"mentioned")},o)}},{key:"renderFeedProjectMention",value:function(){var e,t=this.props,n=t.mentionUser,a=t.mentioned,s=t.children,r=void 0;return r=n&&n.id?(e="/u/"+n.id,m.default.createElement("a",{href:e,target:"_blank"},n?"@"+n.fullname:s)):m.default.createElement("a",null,n?"@"+n.fullname:s),m.default.createElement("span",{className:this.ss("highlight",a&&"mentioned")},r)}},{key:"render",value:function(){var e=this.props.mentionType;return"message"===e?this.renderMessageMention():"project"===e||"post"===e?this.renderProjectMention():this.renderFeedProjectMention()}}]),I.propTypes={userId:f.default.string.isRequired,channelId:f.default.string,messageId:f.default.string,authorIsAdmin:f.default.bool,users:f.default.object,channels:f.default.object,loginUser:f.default.object,allChannelMembers:f.default.object,messageUsers:f.default.object,projectUsers:f.default.object,mentioned:f.default.bool.isRequired,children:f.default.any,mentionType:f.default.string.isRequired,mentionUser:f.default.object,currentUserId:f.default.string,showUserCard:f.default.func},a=I))||a)||a;function I(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}t.default=S},function(e,t){e.exports={highlight:"highlight_21JavRta",mentioned:"mentioned_2u67lrWI",mentionSelf:"mentionSelf_2WnojLFz"}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(9)),a=s(n(39));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){return{order:e.order,match:e.match,parse:function(e){return{type:"text",content:e[0]}}}}var i=s(n(70)).default.getDefaultRules(),c={link:o(i.link),autolink:o(i.autolink),url:o(i.url),inlineCode:o(i.inlineCode),codeBlock:o(i.codeBlock),mentionWithTitle:{match:function(e,t){return function(a,n,e){if(n[0]!==a)return null;var t=e.sortBy(function(e){return-e.textWithTitle.length}).filter(function(e){var t=e.textWithTitle;return 1===n.indexOf(t)}).map(function(e){var t=e.id,n=e.textWithTitle;return[a+n,t]}).value(),s=void 0;return t&&0!==t.length&&(s=[t[0][0]]),t.forEach(function(e){e[0]===s[0]&&(s=s.concat(e[1]))}),s}("@",e.toLowerCase(),t.users)},parse:function(n){var a="";return n.forEach(function(e,t){0!==t&&(a=a.concat("<@"+n[t]+">"),t!==n.length-1&&(a=a.concat(" ")))}),{type:"mention",content:a}}},mention:{match:function(e,t){return a="@",n=e.toLowerCase(),s=t.users,n[0]!==a?null:s.sortBy(function(e){return-e.text.length}).filter(function(e){var t=e.text;return 1===n.indexOf(t)}).map(function(e){var t=e.id,n=e.text;return[a+n,t]}).first();var a,n,s},parse:function(e){return{type:"mention",content:"<@"+e[1]+">"}}},text:r.default.clone(i.text)};Object.keys(c).forEach(function(e,t){c[e].order=t});var u=a.default.parserFor(c);t.default={parse:function(e,t){var n=t.users,n=(0,r.default)(n).map(function(e){return{id:e.id,text:e.fullname.toLowerCase(),textWithTitle:e.fullname.concat("#",e.title).toLowerCase()}}),a=u(e,{inline:!0,users:n}),s=[];return a.forEach(function(e){var t;"mention"===e.type&&(t=/<@([a-f0-9]+)>/g.exec(e.content),s=s.concat(t[1]))}),{content:function t(e){var n="";return e.forEach(function(e){e.content.constructor===String?n+=e.content:e.content.constructor===Array?n+=t(e.content):console.warn("Unknown message item type: ",e)}),n}(a),mentions:s}},unparse:function(e,t){var a=t.users;return e.replace(/<@([a-f0-9]+)>/g,function(e,t){var n=a[t];return n?"@"+n.fullname:e})}}},function(e,t,n){e.exports=n(0)(1096)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=c(n(231)),o=c(n(18)),i=c(n(35));function c(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,r.default),a(l,[{key:"isFull",value:function(){return this.queue.length>=this.maxSize}},{key:"drain",value:function(e,t){var n=e.type,a=e.message;switch(n){case"send":this.handleSend(a,t);break;case"edit":this.handleEdit(a,t);break;case"delete":this.handleDelete(a,t);break;default:t()}}},{key:"handleResponse",value:function(t){return function(e){t(null,e)}}},{key:"handleSend",value:function(e,t){var n=e.channelId,a=function(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["channelId"]);i.default.post("/api/channels/"+n+"/messages",a).then(this.handleResponse(t)).catch(this.handleResponse(t))}},{key:"handleEdit",value:function(e,t){var n=e.messageId,a=e.content;i.default.post("/api/messages/"+n,{content:a}).then(this.handleResponse(t)).catch(this.handleResponse(t))}},{key:"handleDelete",value:function(e,t){var n=e.messageId;e.deleteAsAdmin?i.default.post("/api/messages/"+n+"/adminDelete",{}).then(this.handleResponse(t)).catch(this.handleResponse(t)):i.default.post("/api/messages/"+n+"/delete",{}).then(this.handleResponse(t)).catch(this.handleResponse(t))}}]),l);function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,{logger:o.default.create("MessageQueue")}));return t.maxSize=e,t}t.default=new u},function(e,s,l){"use strict";(function(o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},e=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=t(l(234));function t(e){return e&&e.__esModule?e:{default:e}}var c=t(l(18)).default.create("Queue"),n=(e(u,[{key:"enqueue",value:function(e,t,n,a){var s=2<arguments.length&&void 0!==n?n:null,r=3<arguments.length&&void 0!==a?a:null;this.queue.push({message:e,completed:t,progress:s,started:r}),this._drainIfNecessary()}},{key:"_drainIfNecessary",value:function(){var e,a,s,r=this;null===this.timeout&&0!==this.queue.length&&!0!==this.draining&&(this.draining=!0,e=this.queue.shift(),a=e.message,s=function(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["message"]),this.drain(a,function(e,t){if(r.draining=!1,e){var n=e.retryAfter||r.defaultRetryAfter;r.logger.info("Rate limited. Delaying draining of queue for "+n+" ms."),r.timeout=setTimeout(function(){r.queue.unshift(i({message:a},s)),r.timeout=null,r._drainIfNecessary()},n)}else{o(function(){return r._drainIfNecessary()});try{s.completed(t)}catch(e){console.error(e)}}},s.progress))}},{key:"drain",value:function(){throw Error("Not Implemented")}}]),u);function u(e){var t=e.defaultRetryAfter,n=void 0===t?100:t,a=e.logger,s=void 0===a?c:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.queue=new r.default,this.timeout=null,this.draining=!1,this.defaultRetryAfter=n,this.logger=s}s.default=n}).call(s,l(232).setImmediate)},function(e,t,n){var a=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new s(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(233),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){e.exports=n(0)(662)},function(e,t,n){e.exports=n(0)(611)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};t.getPipe=function(e){return a[e]||{}},t.registerPipe=function(e,t){a[e]||(a[e]={});for(var n=1;a[e][n];)n++;return a[e][n]=t,n},t.withdrawPipe=function(e,t){delete a[e][t]}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=["messages","messagePop"];t.default={name:e,depends:[],signals:{changeMessagePopStatusToTrue:[function(e){e.state.set(n,!0)}],changeMessagePopStatusToFalse:[function(e){e.state.set(n,!1)}],popMessage:[function(e){var t=e.state;!1===t.get(n)&&t.set(n,!0)}]},getState:function(){return{messagePop:!1}},getMessagePopStatus:function(e){return e.get(n)}}}).call(t,"views/v2/modules/messages/MessagePopStore.js")},function(e,u,t){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t=["messages","filter"],n=[].concat(t,["conversations"]),a=[].concat(t,["projects"]),s=[].concat(t,["jobs"]),r=[].concat(t,["addMember"]),o=[].concat(t,["conversationsFilterFocus"]),i=[].concat(t,["mouseDownFlag"]);function c(a){return function(e){var t=e.state,n=e.props.value;t.set(a,n)}}u.default={name:e,depends:[],signals:{onConversationsFilterFocus:[function(e){e.state.set(o,!0)}],onConversationsFilterBlur:[function(e){var t=e.state;t.get(i)||t.set(o,!1)}],onConversationsFilterChanged:[c(n)],onProjectsFilterChanged:[c(a)],onJobsFilterChanged:[c(s)],onAddMemberFilterChanged:[c(r)],setMouseDownFlagToTrue:[function(e){e.state.set(i,!0)}],setMouseDownFlagToFalse:[function(e){e.state.set(i,!1)}]},getState:function(){return{filter:{conversationsFilterFocus:!1,mouseDownFlag:!1,conversations:"",projects:"",jobs:"",addMember:""}}}}}).call(u,"views/v2/modules/messages/MessagesFilterStore.js")},function(e,y,b){"use strict";(function(e){Object.defineProperty(y,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=n(b(15)),c=n(b(75)),u=b(44);function n(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var p=4,g=5,i=6,s=7,a=8,h=(0,t.default)({RINGING:null,IN_CALL:null}),r=["messages","call"],m=[].concat(r,["ringing"]),v=[].concat(r,["callInfo"]),_=[].concat(r,["voiceServerInfoAPI"]);function o(e){e.state.set(["messages","call","notSupportedTip"],!0)}y.default={name:e,depends:[c.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.controller,a=e.state,s=t.ringings,r=t.voiceServerInfoAPI;a.set(_,r),s.forEach(function(e){return n.getSignal("messages.onRingingStart")(e)})}],channelSelect:[function(e){var t,n=e.props,a=e.state,s=e.messages,r=n.channelId,o=s.socket,i=a.get(["messages","channels"])[r];i&&("direct"!==(t=i.type)&&"private"!==t||o.send(p,{channelId:r}))}],createCall:[function(e){var t=e.path,n=!0;return void 0===(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)&&(n=!1),void 0===(window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription)&&(n=!1),n?t.yes():t.no()},{yes:[function(e){var t=e.props,n=e.state,a=e.controller,s=e.http,r=e.path,o=t.channelId,i=n.get(_);return a.getSignal("messages.onVoiceStateStart")({sessionId:n.get("messages.sessionId"),userId:n.get("loginUser.id"),channelId:o,fakeSig:!0}),s.get(i).then(r.success).catch(r.error)},{success:[function(e){var t=e.props,n=e.messages,a=e.state,s=n.socket,r=t.result.serverId,o=t.channelId,i=c.default.selfMute(a);s.send(g,{channelId:o,selfMute:i,voiceServerId:r})}],error:[function(e){var t=e.props,n=e.state,a=e.controller,s=t.channelId;a.getSignal("messages.onVoiceStateEnd")({sessionId:n.get("messages.sessionId"),userId:n.get("loginUser.id"),channelId:s,fakeSig:!0})}]}],no:[o]}],showNotSupportedTip:[o],hideNotSupportedTip:[function(e){e.state.set(["messages","call","notSupportedTip"],!1)}],updateCall:[function(e){var t=e.props,n=e.messages,a=t.channelId,s=t.isSpeaking,r=t.selfMute;n.socket.send(g,{channelId:a,updateOnly:!0,isSpeaking:s,selfMute:r})}],quitCall:[function(e){var t=e.props,n=e.state,a=e.messages,s=e.controller,r=t.channelId,o=a.socket;s.getSignal("messages.onVoiceStateEnd")({sessionId:n.get("messages.sessionId"),userId:n.get("loginUser.id"),channelId:r,fakeSig:!0}),o.send(i,{channelId:r})}],declineCall:[function(e){var t=e.props,n=e.messages,a=t.channelId;n.socket.send(s,{channelId:a})}],onCallInfo:[function(e){var t=e.props,n=e.controller,a=t.ringings;t.voiceStates.forEach(function(e){return n.getSignal("messages.onVoiceStateStart")(e)}),a.forEach(function(e){return n.getSignal("messages.onRingingStart")(e)})}],onRingingStart:[function(e){var t,n=e.props,a=e.state,s=n.channelId,r=n.userId;a.get(["loginUser","id"])===r&&((t=a.get(m)).find(function(e){return e.channelId===s})||a.set(m,[].concat(f(t),[n])));var o=a.get([].concat(f(v),[s]))||{};o[r]||a.set([].concat(f(v),[s]),l({},o,d({},r,{status:h.RINGING})))}],onRingingStop:[function(e){var t,n,a,s=e.props,r=e.state,o=s.channelId,i=s.userId;r.get(["loginUser","id"])!==i||(n=(t=r.get(m)).find(function(e){return e.channelId===o}))&&((a=[].concat(f(t))).splice(a.indexOf(n),1),r.set(m,a));var c,u=r.get([].concat(f(v),[o]));u&&u[i]&&u[i].status===h.RINGING&&(delete(c=l({},u))[i],r.set([].concat(f(v),[o]),c))}],onVoiceStateStart:[function(e){var t=e.props,n=e.state,a=t.channelId,s=t.userId,r=t.updateOnly,o=function(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,["channelId","userId","updateOnly"]),i=n.get([].concat(f(v),[a]));if(r){if(!i||!i[s]||i[s].status!==h.IN_CALL)return}else i&&i[s]&&i[s].status===h.IN_CALL||s!==n.get(["loginUser","id"])&&n.get("messages.window.isMaster")&&(0,u.playSound)("User_Join",.4);n.set([].concat(f(v),[a]),l({},i,d({},s,l({},i&&i[s],o,{status:h.IN_CALL}))))}],onVoiceStateEnd:[function(e){var t,n=e.props,a=e.state,s=n.channelId,r=n.userId,o=a.get([].concat(f(v),[s]));o&&o[r]&&(delete(t=l({},o))[r],a.set([].concat(f(v),[s]),t),r!==a.get(["loginUser","id"])&&a.get("messages.window.isMaster")&&(0,u.playSound)("User_Leave",.4))}],onVoiceConnState:[function(e){var t=e.props,n=e.messages.socket;"VOICE_DISCONNECTED"===t.state&&(0,u.playSound)("Voice_Disconnected",.4),"DISCONNECTED"===t.state&&t.payload&&t.payload.willReconnect&&n.send(a,{})}]},getState:function(){return{call:{ringing:[],callInfo:{},voiceServerInfoAPI:"",notSupportedTip:!1}}}}}).call(y,"views/v2/modules/messages/CallStore.js")},function(e,t,n){var a={"./Incoming_Ring.mp3":240,"./Message.mp3":241,"./Mute.mp3":242,"./Outgoing_Ring.mp3":243,"./Unmute.mp3":244,"./User_Join.mp3":245,"./User_Leave.mp3":246,"./Voice_Disconnected.mp3":247};function s(e){return n(r(e))}function r(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(a)},s.resolve=r,(e.exports=s).id=239},function(e,t,n){e.exports=n.p+"../styles/sound/Incoming_Ring.6be5e580c0409785b22980dc0ed31c25.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/Message.e85a9218a4cb32862969882888550546.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/Mute.e158dcdd686665a230616d98c0438583.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/Outgoing_Ring.f7a6a9fe9b12dcbb9b61d761b6cc6ee2.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/Unmute.6b260aea3a1cd0ed9f0c79c7234b74d3.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/User_Join.05c7c9c4dce52b8a2dea07ed0290a4df.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/User_Leave.bf99d24febc0eae6d1d33ece76e775ad.mp3"},function(e,t,n){e.exports=n.p+"../styles/sound/Voice_Disconnected.811d5bc4f2caa4014a53e4aae6d468a1.mp3"},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(d,[{key:"_update",value:function(){this.currentVolume=function(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var a=4;a<t.length;a++)t[a]>n&&t[a]<0&&(n=t[a]);return n}(this.analyser,this.fftBins),this.speakingHistory[this.speakingHistoryIndex]&&this.speakingCounter--;var e=this.currentVolume>this.threshold;(this.speakingHistory[this.speakingHistoryIndex]=e)&&this.speakingCounter++,++this.speakingHistoryIndex===this.speakingHistory.length&&(this.speakingHistoryIndex=0),0<this.speakingCounter?this.silentFrames=0:this.silentFrames++}},{key:"stop",value:function(){this.source.disconnect(),this.processor.disconnect(),this.speakingCounter=0}},{key:"speaking",get:function(){return 0<this.speakingCounter||this.silentFrames<this.silenceThreshold}}]),d);function d(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-40,a=this,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.1,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:10;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var o=e.createAnalyser();o.fftSize=512,o.smoothingTimeConstant=s;var i=e.createMediaStreamSource(t);i.connect(o);for(var c=[],u=0;u<r;u++)c.push(!1);var l=e.createScriptProcessor(1024,0,1);l.onaudioprocess=function(){a._update(),a.onProcess&&a.onProcess(a.speaking,a.currentVolume)},l.connect(e.destination),this.threshold=n,this.analyser=o,this.processor=l,this.fftBins=new Float32Array(o.fftSize),this.source=i,this.currentVolume=0,this.speakingHistory=c,this.speakingHistoryIndex=0,this.speakingCounter=0,this.silenceThreshold=4*this.speakingHistory.length,this.silentFrames=this.silenceThreshold,this.onProcess=null}t.default=s},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=["messages","inProgressText"],i="InProgressText",c=n(23);t.default={name:e,depends:[],signals:{inProgressTextChange:[function(e){var t,n=e.props,a=e.state,s=n.channelId,r=n.textSoFar;a.set([].concat(o,[s]),r),t=a.get(o),c.set(i,t)}],connectionOpen:[function(e){var t=e.state,n=c.get(i)||{};t.set(o,n)}]},getState:function(){return{inProgressText:{}}}}}).call(t,"views/v2/modules/messages/InProgressTextStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n(29).EventEmitter),s(i,[{key:"destroy",value:function(){clearTimeout(this.pingTimeout),clearTimeout(this.checkTimeout),window.removeEventListener("storage",this,!1),window.removeEventListener("unload",this,!1),this.broadcast("bye")}},{key:"handleEvent",value:function(t){if("unload"===t.type)this.destroy();else if("__cross_tab_broadcast__"===t.key)try{var e=JSON.parse(t.newValue);e.id!==this.id&&this[e.type](e)}catch(e){console.error("error get __cross_tab_broadcast__",t,e)}}},{key:"sendPing",value:function(){this.broadcast("ping")}},{key:"hello",value:function(e){this.ping(e),e.id<this.id?this.check():this.sendPing()}},{key:"ping",value:function(e){this.others[e.id]=Date.now()}},{key:"bye",value:function(e){delete this.others[e.id],this.check()}},{key:"check",value:function(){var t=this,n=Date.now(),a=!0;Object.keys(this.others).forEach(function(e){t.others[e]+7e3<n?delete t.others[e]:e<t.id&&(a=!1)}),this.isMaster!==a&&(this.isMaster=a,this.emit("change",{isMaster:this.isMaster}))}},{key:"broadcast",value:function(e,t){var n=a({id:this.id,type:e},t);try{localStorage.setItem("__cross_tab_broadcast__",JSON.stringify(n))}catch(e){console.error("error set __cross_tab_broadcast__",n,e)}}}]),i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),e=window.location.pathname.startsWith("/messages")?"P0_":"P1_";t.id=e+Date.now()+"_"+Math.random().toString().slice(2),t.isMaster=!1,t.others={},window.addEventListener("storage",t,!1),window.addEventListener("unload",t,!1),t.broadcast("hello");t.checkTimeout=setTimeout(function e(){t.check(),t.checkTimeout=setTimeout(e,2e3)},500);return t.pingTimeout=setTimeout(function e(){t.sendPing(),t.pingTimeout=setTimeout(e,5e3)},5e3),t}t.default=o},function(e,t,n){e.exports=n(0)(1123)},function(e,r,o){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(o(9)),b=n(o(253)),p=n(o(254)),w=n(o(4)),t=n(o(7)),S=n(o(5)),I=n(o(14));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var E=["messages","textAreaAutocomplete"],s=["messages","mentionUserIds"],c=new RegExp("@|:|^/"),C=new RegExp("^/("+["jobs","freelancers","assets"].join("|")+")\\s(.+)","i"),O=/\t|\s/g,k=10;function g(e,t){return e.fullname<t.fullname?-1:e.fullname>t.fullname?1:0}function M(e,r,t,n){var o=3<arguments.length&&void 0!==n?n:k;r=r&&r.toLowerCase()||"";var i=new RegExp("^"+b.default.escape(r),"i"),c=[],u=[],l=w.default.getUsers(e),d=I.default.getMembers(e,t),f=S.default.getChannel(e,t);return(0,a.default)(d).values().takeWhile(function(e){var t=e.userId,n=l[t];if(!n)return!0;var a=d[n.id];if(!a)return!0;if("live"===f.type&&"owner"!==a.role&&"admin"!==a.role&&"moderator"!==a.role)return!0;var s=n.fullname.toLowerCase();return i.test(s)?c.push({fullname:s,user:n}):(0,p.default)(r,s)&&u.push({fullname:s,user:n}),c.length<o}).value(),c.sort(g),u.sort(g),c.concat(u.slice(0,Math.max(0,o-c.length))).map(function(e){return e.user})}r.default={name:e,depends:[w.default,t.default,I.default],signals:{maybeShowAutocomplete:[function(e){var t=e.props,u=e.state,l=e.controller,d=t.textAreaKey,f=t.textAreaType,p=t.value,n=t.selectionStart,g=t.selectionEnd,h=t.channelId,m=t.isDefaultWorkspace,v=[].concat(E,[d]),_=u.get(v),a=p.match(C);if(a){var s=a[1],r=a[2];if(_&&_.integration===s&&_.query===r)return;return u.set(v,{textAreaKey:d,textAreaType:f,type:"integration",integration:s,query:r,prefix:"",results:[],loading:!1,selectedIndex:0,selectionStart:0,selectionEnd:p.length}),void l.getSignal("messages.integrationSearch")({textAreaKey:d})}for(var y=n;0<=y;y--)if(c.test(p[y])){var o=function(){var e=p.slice(y,g);if(_&&_.prefix===e)return{v:void 0};function t(e){return n.test(e)}var n=new RegExp("^"+b.default.escape(e.slice(1)),"i"),a=void 0;if("@"===e[0]){0;var s=S.default.getChannel(u,h);if("lobby"===s.type&&m){var r=e.slice(1);if(_&&_.query===r)return{v:void 0};if(" "===r||1<(r.match(O)||[]).length)return"break";var o=M(u,e.slice(1),h),i=w.default.getCurrentUserId(u),c=I.default.getMember(u,s.id,i);return c&&("owner"===c.role||"admin"===c.role)&&t("everyone")&&o.push({content:"everyone"}),u.set(v,{textAreaKey:d,textAreaType:f,type:"mention",integration:"",query:r,prefix:e,results:o,loading:!1,selectedIndex:0,selectionStart:y,selectionEnd:g}),!s.groupId&&o.length<k&&l.getSignal("messages.mentionSearch")({textAreaKey:d,matchedActiveUsers:o}),{v:void 0}}if("direct"!==s.type)return a=M(u,e.slice(1),h),"live"!==s.type&&a.length<k&&t("everyone")&&a.push({content:"everyone"}),u.set(v,{textAreaKey:d,textAreaType:f,type:"mention",integration:"",query:"",prefix:e,results:a,loading:!1,selectedIndex:0,selectionStart:y,selectionEnd:g}),{v:void 0}}}();switch(o){case"break":break;default:if("object"===(void 0===o?"undefined":i(o)))return o.v}}_&&u.unset(v)}],textAreaAutocompleteUnset:[function(e){var t=e.props,n=e.state,a=t.textAreaKey,s=[].concat(E,[a]);n.get(s)&&n.unset(s)}],textAreaAutocompleteSelectPrev:[function(e){var t,n,a,s=e.props,r=e.state,o=s.textAreaKey,i=[].concat(E,[o]),c=r.get(i);c&&(t=c.results,n=c.loading,t&&t.length&&!n&&(a=c.selectedIndex,--a<0&&(a=t.length-1),r.set([].concat(d(i),["selectedIndex"]),a)))}],textAreaAutocompleteSelectNext:[function(e){var t,n,a,s=e.props,r=e.state,o=s.textAreaKey,i=[].concat(E,[o]),c=r.get(i);c&&(t=c.results,n=c.loading,t&&t.length&&!n&&(a=c.selectedIndex,++a>=t.length&&(a=0),r.set([].concat(d(i),["selectedIndex"]),a)))}],textAreaAutocompleteSelectIndex:[function(e){var t,n,a=e.props,s=e.state,r=a.textAreaKey,o=a.selectedIndex,i=[].concat(E,[r]),c=s.get(i);c&&(t=c.results,n=c.loading,t&&t.length&&!n&&0<=o&&o<t.length&&s.set([].concat(d(i),["selectedIndex"]),o))}],integrationSearch:[function(e){var t,n,a=e.props,s=e.state,r=e.services,o=a.textAreaKey,i=[].concat(E,[o]),c=s.get(i);c&&(t=c.integration,n=c.query,s.set([].concat(d(i),["loading"]),!0),r.http.post("/api/integrations/"+t+"/search",{q:n}).then(function(e){r.messages.getSignals().integrationSearchSuccess({textAreaKey:o,results:e.result})}).catch(function(){r.messages.getSignals().integrationSearchFailed({textAreaKey:o})}))}],integrationSearchSuccess:[function(e){var t=e.props,n=e.state,a=t.textAreaKey,s=t.results,r=[].concat(E,[a]);n.set([].concat(d(r),["loading"]),!1),n.set([].concat(d(r),["results"]),s)}],integrationSearchFailed:[function(e){var t=e.props,n=e.state,a=t.textAreaKey,s=[].concat(E,[a]);n.set([].concat(d(s),["loading"]),!1)}],addMentionUser:[function(e){var t=e.props,n=e.state,a=t.user;-1===n.get(s).indexOf(a.id)&&n.push(s,a.id)}],unsetMentionUserIds:[function(e){e.state.set(s,[])}],mentionSearch:[[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.textAreaKey,o=[].concat(E,[r]),i=n.get(o);if(!i)return s.dummy();var c=i.query,u=[];return u.push("q:"+c),a.get("/api/u",{k:JSON.stringify(u)}).then(function(e){return s.success(l({},t,e,{query:c}))}).catch(s.error)},{success:[function(e){var n,t,a=e.props,s=e.state,r=a.textAreaKey,o=a.matchedActiveUsers,i=a.query,c=a.result.items,u=[].concat(E,[r]);s.get([].concat(d(u),["query"]))===i&&(n=[].concat(d(o)),t=(c||[]).map(function(e){return{id:e.id,avatar:e.avatar,fullname:e.fullName,title:e.title}}),k>n.length&&t.slice(0,k-n.length).forEach(function(t){n.find(function(e){return e.id===t.id})||n.unshift(t)}),s.set([].concat(d(u),["results"]),n))}],error:[function(e){var t=e.props,n=e.state,a=t.textAreaKey,s=[].concat(E,[a]);n.set([].concat(d(s),["loading"]),!1)}],dummy:[]}]]},getState:function(){return{textAreaAutocomplete:{},mentionUserIds:[]}},getTextAreaAutocomplete:function(e,t){return e.get(E,t)}}}).call(r,"views/v2/modules/messages/TextAreaAutocompleteStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={escape:function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}}},function(e,t,n){e.exports=n(0)(1e3)},function(e,s,r){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t,n=r(9),u=(t=n)&&t.__esModule?t:{default:t};var i=1e4,l=["messages","typingUsers"],c=["messages","typingTimestamps"];var a=void 0;function d(e){a=a||setTimeout(function(){a=void 0,e.getSignal("messages.typingCheckStop")()},.25*i)}s.default={name:e,depends:[],signals:{connectionOpen:[function(e){e.state.set(l,{})}],messageCreate:[function(e){var t=e.props,n=e.state,a=t.author.id,s=t.channelId,r=t.state,o=[].concat(l,[s]),i=n.get(o);i&&i.length!==(i=i.filter(function(e){return e.userId!==a})).length&&n.set(o,i),"SENDING"===r&&n.unset([].concat(c,[s]))}],typingStart:[function(e){var t=e.props,n=e.state,a=e.controller,s=t.userId,r=t.channelId,o=[].concat(l,[r]),i=(i=n.get(o)||[]).filter(function(e){return e.userId!==s}),c=u.default.sortedIndexBy(i,t,function(e){return e.timestamp});i.splice(c,0,t),n.set(o,i),d(a)}],typingCheckStop:[function(e){var t=e.state,n=e.controller,a=Date.now()-i,s=t.get(l),r=!1;Object.keys(s).forEach(function(e){var t=s[e];if(t.length){for(var n=u.default.sortedIndexBy(t,{timestamp:a},function(e){return e.timestamp});n<t.length&&t[n].timestamp<=a;)n++;n&&(r||(r=!0,s=u.default.clone(s)),s[e]=t.slice(n))}}),r&&t.set(l,s),Object.keys(s).forEach(function(e){s[e].length&&d(n)})}],typing:[function(e){var t=e.props,n=e.state,a=e.http,s=t.channelId,r=[].concat(c,[s]),o=n.get(r);(!o||Date.now()-o>=i/2)&&(n.set(r,Date.now()),a.post("/api/channels/"+s+"/typing"))}]},getState:function(){return{typingUsers:{},typingTimestamps:{}}}}}).call(s,"views/v2/modules/messages/TypingStore.js")},function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var t=["messages","jobFilter"],s=[].concat(t,["title"]),r=[].concat(t,["role"]);n.default={name:e,depends:[],signals:{changeJobsFilter:[function(e){var t=e.props,n=e.state,a=t.value;n.set(s,a)}],changeRole:[function(e){var t=e.props,n=e.state,a=t.role;n.set(r,a)}]},getState:function(){return{jobFilter:{role:"recruits",title:"all"}}}}}).call(n,"views/v2/modules/messages/JobFilterStore.js")},function(e,i,c){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=Object.freeze(Object.defineProperties(["messages.addMember.submitStatus"],{raw:{value:Object.freeze(["messages.addMember.submitStatus"])}})),E=s(c(7)),C=s(c(14)),O=s(c(74)),k=s(c(28)),M=s(c(19)),T=s(c(80)),R=s(c(5)),P=s(c(4)),j=s(c(34)),A=s(c(77)),n=c(2),a=c(1);function s(e){return e&&e.__esModule?e:{default:e}}var r=["messages","addMember"],x=[].concat(r,["displayAddMember"]),D=[].concat(r,["popoutPos"]),L=[].concat(r,["addUserList"]);function F(e,t,n){var a=1<arguments.length&&void 0!==t&&t,s=2<arguments.length&&void 0!==n&&n;return{id:e.id,fullname:e.fullname,avatar:e.avatar,presenceStatus:e.presenceStatus,isBot:e.isBot,selected:a,inChannel:s}}function o(e){var t=e.state;t.set(x,!1),t.set(L,{})}i.default={name:e,depends:[],signals:{showAddMember:[function(e){var t,n,a,s,r,o,i,c,u,l,d,f,p,g,h,m,v,_=e.props,y=e.state,b=_.isNew,w=_.pos,S=(t=b,n=y,f=E.default.getChannelId(n),p=M.default.getWorkspaceId(n),g=k.default.getWorkspace(n,p),h=!g||!g.organizationId,m={},v={},h?(a=T.default.getRelationships(n),Object.values(a).forEach(function(e){"accepted"===e.status&&(v[e.otherUserId]=F(P.default.getUser(n,e.otherUserId)))})):(s=O.default.getMembers(n,p),r=P.default.getCurrentUserId(n),Object.values(s).forEach(function(e){e.userId!==r&&(v[e.userId]=F(P.default.getUser(n,e.userId)))})),t?m=I({},v):f&&("direct"===(o=R.default.getChannel(n,f)).type?(m=I({},v),i=o.recipientId,m[i]=F(P.default.getUser(n,i),!0,!0)):"private"===o.type&&o.proposalId?(c=j.default.getChannelJob(n,o.id)).freelancerId!==P.default.getCurrentUserId(n)&&(u=A.default.getJobTeamMembers(n,c.id),l=C.default.getMembers(n,f),Object.values(u).forEach(function(e){m[e.id]=F(e,!1,!1)}),Object.values(l).forEach(function(e){m[e.userId]=F(P.default.getUser(n,e.userId),!0,!0)})):(m=I({},v),d=C.default.getMembers(n,f),Object.values(d).forEach(function(e){m[e.userId]=F(P.default.getUser(n,e.userId),!0,!0)}))),m);y.set(D,w),y.set(L,S),y.set(x,!0)}],hideAddMember:[o],addChannelPopoutSubmit:[(0,n.set)((0,a.state)(t),"inProgress"),[function(e){var t,n,a=e.state,s=e.controller,r=e.path,o=M.default.getWorkspaceId(a),i=a.get(L),c=Object.values(i).filter(function(e){return!0===e.selected&&!1===e.inChannel}).map(function(e){return e.id}),u=Object.values(i).filter(function(e){return!0===e.inChannel}).map(function(e){return e.id}),l=0===u.length,d=E.default.getChannelId(a),f=null,p=!1;return d&&(f=R.default.getChannel(a,d))&&"direct"===f.type&&(p=!0),0===c.length&&0===u.length?s.getSignal("messages.createGroupChannel")({selectedUserIds:c,workspaceId:o}):!l&&p&&-1===c.indexOf(f.recipientId)&&(c.push(f.recipientId),1===c.length)||(l&&1===c.length?(t=R.default.getWorkspaceChannels(a,o),(n=Object.values(t).find(function(e){return e.recipientId===c[0]}))?s.getSignal("messages.channelSelect")({channelId:n.id,workspaceId:n.workspaceId}):s.getSignal("messages.createDirectChannel")({recipientId:c[0],workspaceId:o})):(l||p)&&c?s.getSignal("messages.createGroupChannel")({selectedUserIds:c,workspaceId:o}):s.getSignal("messages.addChannelMembers")({selectedChannelId:d,userIds:c,role:"member"})),r.success()},{success:[o,(0,n.set)((0,a.state)(t),"succeeded")],error:[(0,n.set)((0,a.state)(t),"failed")]}]],toggleSelectUser:[function(e){var t,n,a,s,r,o=e.props,i=e.state,c=o.inChannel,u=o.userId;c||(t=i.get(L))&&t[u]&&((n=I({},t[u])).selected=!t[u].selected,i.merge(L,(a={},s=n.id,r=n,s in a?Object.defineProperty(a,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[s]=r,a)))}]},getState:function(){return{addMember:{addUserList:{},popoutPos:{},displayAddMember:!1}}}}}).call(i,"views/v2/modules/messages/AddUserListStore.js")},function(e,n,a){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var c=t(a(5)),u=t(a(7)),l=a(21);function t(e){return e&&e.__esModule?e:{default:e}}var d=[].concat(["messages"],["showInfoType"]);n.default={name:e,depends:[],signals:{channelReady:[function(e){var t=e.props,n=e.state,a=t.normalChannels;a&&a.find(function(e){return"live"===e.type})&&n.set(d,"liveChat")}],toggleInfo:[function(e){var t,n,a,s=e.props,r=e.state,o=e.controller,i=u.default.getChannelId(r);i?(t=c.default.getChannel(r,i),n=s.type,a=s.messageId,n&&("userInfo"===n?(0,l.isTouch)()?window.open("/u/"+t.recipientId,"_blank"):o.getSignal("messages.fetchUserInfo")({userId:t.recipientId}):"projectInfo"===n?(o.getSignal("messages.fetchProjectInfo")({projectId:t.projectId,channelId:t.id}),o.getSignal("messages.fetchChannelMember")({channelId:t.id})):"mention"===n?o.getSignal("messages.fetchMentionInfo")({channelId:t.id,firstLoad:!0}):"star"===n?o.getSignal("messages.fetchStarInfo")({channelId:t.id,firstLoad:!0}):"reply"===n?(o.getSignal("messages.clearShowInfo")(),o.getSignal("messages.fetchReplyInfo")({channelId:t.id,messageId:a,firstLoad:!0})):"report"===n?o.getSignal("messages.fetchReportInfo")({channelId:t.id,firstLoad:!0}):"search"===n||"liveChat"===n||"lobbyInfo"===n||"groupInfo"===n?r.set(d,n):"ticketInfo"===n&&o.getSignal("messages.fetchTicketInfo")({ticketId:t.ticketId}))):o.getSignal("messages.clearShowInfo")()}],clearShowInfo:[function(e){e.state.set(d,"")}],toggleMobileOps:[function(e){var t=e.props,n=e.state,a=t.value;n.set("messages.showMobileOps",a)}],channelSelect:[function(e){var t=e.props,n=e.controller,a=e.state,s=t.channelId,r=c.default.getChannel(a,s),o=a.get("isSupport");r&&"public"===r.type&&!(0,l.isTouch)()?n.getSignal("messages.toggleInfo")({type:"projectInfo"}):r&&r.liveChannelId&&!(0,l.isTouch)()?n.getSignal("messages.toggleInfo")({type:"liveChat"}):r&&"ticket"===r.type&&o?n.getSignal("messages.toggleInfo")({type:"ticketInfo"}):(a.set(d,""),n.getSignal("messages.clearShowInfo")())}],setCombinedOptionKey:[function(e){var t=e.props,n=e.state,a=t.messageId;n.set("messages.combinedOptionKey",a)}],setShowMoreOperationKey:[function(e){var t=e.props,n=e.state,a=t.channelId;n.set("messages.showMoreOperationKey",a)}],setShowCardOptionKey:[function(e){var t=e.props,n=e.state,a=t.channelId;n.set("messages.showCardOptionKey",a)}],setShowTermsKey:[function(e){var t=e.props,n=e.state,a=t.channelId;n.set("messages.showTermsKey",a)}]},getState:function(){return{showInfoType:"",showMobileOps:!1,fetchInfoStatus:{},combinedOptionKey:"",showMoreOperationKey:"",cardShowOptionKey:"",showTermsKey:""}},getInfoType:function(e){return e.get(d)}}}).call(n,"views/v2/modules/messages/InfoStore.js")},function(e,f,p){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t,n=l(["messages.fetchInfoStatus.projectInfo"],["messages.fetchInfoStatus.projectInfo"]),a=l(["messages.fetchMemberStatus.",""],["messages.fetchMemberStatus.",""]),s=l(["channelId"],["channelId"]),r=l(["messages.showInfoType"],["messages.showInfoType"]),o=p(2),i=p(1),c=p(3),u=(t=c)&&t.__esModule?t:{default:t};function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=[].concat(["messages"],["projectInfo"]);f.default={name:e,depends:[],signals:{fetchProjectInfo:[(0,o.set)((0,i.state)(n),u.default.inProgress),(0,o.set)((0,i.state)(a,(0,i.props)(s)),u.default.inProgress),(0,o.set)((0,i.state)(r),"projectInfo"),[function(e){var t=e.props,n=e.path,a=e.http,s=t.projectId;return a.get("/api/p/"+s).then(n.success).catch(n.error)},{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncProjectInfo")(n)},(0,o.set)((0,i.state)(n),u.default.succeeded)],error:[(0,o.set)((0,i.state)(n),u.default.failed)]}]],syncProjectInfo:[function(e){var t=e.props,n=e.state,a=t.result;200===t.status&&a&&a.project&&n.set(d,a.project)}]},getState:function(){return{projectInfo:{}}}}}).call(f,"views/v2/modules/messages/ProjectInfoStore.js")},function(e,u,d){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=c(["messages.fetchInfoStatus.ticketInfo"],["messages.fetchInfoStatus.ticketInfo"]),a=c(["messages.showInfoType"],["messages.showInfoType"]),s=d(2),r=d(1),o=d(3),i=(t=o)&&t.__esModule?t:{default:t};function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=[].concat(["messages"],["ticketInfo"]);u.default={name:e,depends:[],signals:{fetchTicketInfo:[(0,s.set)((0,r.state)(n),i.default.inProgress),(0,s.set)((0,r.state)(a),"ticketInfo"),[function(e){var t=e.props,n=e.path,a=e.http,s=t.ticketId;return a.get("/api/supportTickets/"+s).then(n.success).catch(n.error)},{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncTicketInfo")(n)},(0,s.set)((0,r.state)(n),i.default.succeeded)],error:[(0,s.set)((0,r.state)(n),i.default.failed)]}]],syncTicketInfo:[function(e){var t,n,a,s,r,o,i=e.props,c=e.state,u=i.result;200===i.status&&u&&(t=u.data,n=u.tags||{},a=u.unityVersions||{},s=t.tagIds,r=t.platformIds,o={title:t.title,description:t.description,area:"Crash",tags:s.map(function(e){return n[e].name}),platform:0<r.length?n[r[0]].name:"",unityVersion:(a[t.unityVersion]||{}).nameNormalized},u.data.assignee&&(o.assignee=u.data.assignee),c.set(l,o))}]},getState:function(){return{ticketInfo:{}}}}}).call(u,"views/v2/modules/messages/TicketInfoStore.js")},function(e,p,g){"use strict";(function(e){Object.defineProperty(p,"__esModule",{value:!0});var t,n=c(["messages.fetchInfoStatus.userInfo"],["messages.fetchInfoStatus.userInfo"]),a=c(["messages.showInfoType"],["messages.showInfoType"]),s=g(2),r=g(1),o=g(3),i=(t=o)&&t.__esModule?t:{default:t};function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=["messages"],l=[].concat(u,["userInfo","info"]),d=[].concat(u,["userInfo","tab"]);function f(e){var t=e.props,n=e.path,a=e.http,s=t.userId;return a.get("/api/profile/"+s).then(n.success).catch(n.error)}f.async=!0,p.default={name:e,depends:[],signals:{fetchUserInfo:[(0,s.set)((0,r.state)(n),i.default.inProgress),(0,s.set)((0,r.state)(a),"userInfo"),[f,{success:[function(e){var t=e.controller,n=e.props;t.getSignal("messages.syncUserInfo")(n)},(0,s.set)((0,r.state)(n),i.default.succeeded)],error:[(0,s.set)((0,r.state)(n),i.default.failed)]}]],syncUserInfo:[function(e){var t=e.props,n=e.state,a=t.result;200===t.status&&a&&n.set(l,a)}],switchUserInfoTab:[function(e){var t=e.props,n=e.state,a=t.tab;n.set(d,a)}]},getState:function(){return{userInfo:{tab:"projects",info:{}}}}}}).call(p,"views/v2/modules/messages/UserInfoStore.js")},function(e,c,u){"use strict";(function(e){Object.defineProperty(c,"__esModule",{value:!0});var t,n=u(3),r=(t=n)&&t.__esModule?t:{default:t};function a(e){var t=e.props,n=e.http,a=e.path,s=t.type,r=t.followeeId;return n.post("/api/follow",{type:s,followeeId:r}).then(a.success).catch(a.error)}function s(e){var t=e.props,n=e.http,a=e.path,s=t.followeeId;return n.post("/api/unfollow",{followeeId:s}).then(a.success).catch(a.error)}function o(s){return function(e){var t=e.props,n=e.state,a=t.followeeId;n.get("messages.followUpdateStatus.follow"+a)===r.default.succeeded&&n.set("messages.userInfo.info.followMap."+a,s)}}function i(s){return function(e){var t=e.props,n=e.state,a=t.followeeId;n.set("messages.followUpdateStatus.follow"+a,s)}}s.async=a.async=!0,c.default={name:e,depends:[],signals:{follow:[i(r.default.inProgress),[a,{success:[i(r.default.succeeded)],error:[i(r.default.failed)]}],o(!0)],unFollow:[i(r.default.inProgress),[s,{success:[i(r.default.succeeded)],error:[i(r.default.failed)]}],o(!1)],mouseOver:[function(e){var t,n,a,s=e.props,r=e.state,o=s.followeeId;r.set("messages.followMouseOver",(a=!0,(n=o)in(t={})?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}],mouseOut:[function(e){var t=e.props,n=e.state,a=t.followeeId;n.set("messages.followMouseOver."+a,!1)}]},getState:function(){return{mouseOver:{},followUpdateStatus:{}}}}}).call(c,"views/v2/modules/messages/FollowStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=["messages","channelTeams"];function o(e){var t=e.channelTeam;return t?{id:t.id,name:t.name,avatar:t.avatar}:null}t.default={name:e,depends:[],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,a=t.privateChannels,s={};a.forEach(function(e){var t;!e.proposalId||(t=o(e))&&(s[e.id]=t)}),n.set(r,s)}],channelCreate:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&t.channelTeam&&n.set([].concat(r,[t.id]),o(t))}],channelDelete:[function(e){var t=e.props,n=e.state;"private"===t.type&&t.proposalId&&n.unset([].concat(r,[t.id]))}]},getState:function(){return{channelTeams:{}}},getChannelTeam:function(e,t){return e.get([].concat(r,[t]))}}}).call(t,"views/v2/modules/messages/ChannelTeamStore.js")},function(e,m,v){"use strict";(function(e){Object.defineProperty(m,"__esModule",{value:!0});var o=r(v(9)),p=r(v(71)),g=r(v(4)),t=r(v(27)),n=r(v(33)),a=r(v(7)),s=r(v(14)),d=r(v(8));function r(e){return e&&e.__esModule?e:{default:e}}var i=["messages","uploads"],f={};function c(t,e){var n=e.get([].concat(i,["uploadToChannels",t]));return n?o.default.find(e.get([].concat(i,["channelUploads",n])),function(e){return e.id===t}):null}function h(e,t){t.set([].concat(i,["uploadToChannels",e.id]),e.channelId),t.get([].concat(i,["channelUploads",e.channelId]))||t.set([].concat(i,["channelUploads",e.channelId]),[]),t.push([].concat(i,["channelUploads",e.channelId]),e)}function u(t,e){var n,a,s=e.get([].concat(i,["uploadToChannels",t.id]));s&&((n=o.default.slice(e.get([].concat(i,["channelUploads",s]))))[a=o.default.findIndex(n,function(e){return e.id===t.id})]=o.default.assign({},n[a],t),e.set([].concat(i,["channelUploads",s]),n))}function l(t,e){var n,a=e.get([].concat(i,["uploadToChannels",t]));a&&(e.unset([].concat(i,["uploadToChannels",t])),(n=e.get([].concat(i,["channelUploads",a])))&&(n=o.default.slice(n),o.default.remove(n,function(e){return e.id===t}),e.set([].concat(i,["channelUploads",a]),n)),delete f[t])}m.default={name:e,depends:[t.default,g.default,n.default,s.default,a.default],signals:{uploadAttachment:[function(e){var t,n,a,s,r,o=e.props,i=e.state,c=e.messages,u=o.channelId,l=o.content,d=o.parentMessageId,f=(t=i,n=u,a=o.upload,s=l,r=d,{id:p.default.createNonce(),channelId:n,parentMessageId:r||null,author:g.default.getCurrentUser(t),filename:a.file.name,fileSize:a.file.size,contentType:a.file.type,width:a.width,height:a.height,dataUrl:a.dataUrl,file:a.file,voice:a.voice,duration:a.duration,content:s,loaded:0,speed:0});h(f,i),c.httpUpload(f)}],retryUploadAttachment:[function(e){var t=e.props,n=e.state,a=e.messages,s=c(t.id,n),r=o.default.clone(s);r.loaded=0,r.speed=0,r.id=p.default.createNonce(),delete r.err,h(r,n),l(t.id,n),a.httpUpload(r)}],cancelUploadAttachment:[function(e){var t=e.props,n=e.state,a=t.id;f[a]&&f[a].abort(),u({id:a,cancelled:!0},n)}],uploadStart:[function(e){u(e.props,e.state)}],uploadCreate:[function(e){h(e.props,e.state)}],uploadComplete:[function(e){var t=e.props,n=e.state;l(t.id,n)}],uploadProgress:[function(e){var t,n,a=e.props,s=e.state,r=c(a.id,s);r&&(t=0,r.progressTime&&((n=a.progressTime-r.progressTime.getTime())<=0&&(n=1),t=1e3*(a.loaded-r.loaded)/n),a.speed=t,u(a,s))}],uploadFail:[function(e){var t=e.props,n=e.state;c(t.id,n)&&u({id:t.id,err:t.err},n)}],uploadAbort:[function(e){var t=e.props,n=e.state;l(t.id,n)}],openAttachment:[function(e){var t=e.props;e.state.set([].concat(i,["activeAttachment"]),t.url)}],closeAttachment:[function(e){e.state.unset([].concat(i,["activeAttachment"]))}]},getServices:function(l){return{httpUpload:function(t){var e=t.channelId,n=t.file,a=t.content,s=t.id,r=t.parentMessageId,o=t.voice,i=new XMLHttpRequest,c=void 0,c=o?"voice":"attachments";i.open("POST",d.default.REQUEST_BASE_URL+"/api/channels/"+e+"/messages/"+c,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.timeout=0,i.upload.addEventListener("progress",function(e){return l.getSignal("messages.uploadProgress")({id:t.id,loaded:e.loaded,processTime:(new Date).getTime()})}),i.addEventListener("timeout",function(){return l.getSignal("messages.uploadFail")({id:t.id})}),i.addEventListener("error",function(){l.getSignal("messages.uploadFail")({id:t.id,err:"network_error"})}),i.addEventListener("abort",function(){return l.getSignal("messages.uploadAbort")({id:t.id})}),i.addEventListener("readystatechange",function(){i&&4===i.readyState&&(200<=i.status&&i.status<300?(l.getSignal("messages.uploadComplete")({id:t.id}),l.getSignal("messages.messageCreate")(JSON.parse(i.responseText))):0<i.status&&l.getSignal("messages.uploadFail")({id:t.id,err:JSON.parse(i.responseText)}))});var u=new FormData;u.append("channel",e),u.append("nonce",s),u.append("content",a),u.append("parentMessageId",r||""),u.append("size",n.size),u.append("file",n),(f[t.id]=i).send(u),l.getSignal("messages.uploadStart")({id:t.id})}}},getState:function(){return{uploads:{channelUploads:{},uploadToChannels:{},activeAttachment:""}}},getUploads:function(t,e){return o.default.map(t.get([].concat(i,["channelUploads",e])),function(e){return t.get([].concat(i,["uploadToChannels",e]))})}}}).call(m,"views/v2/modules/messages/UploadStore.js")},function(e,r,o){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var l=s(o(5)),t=s(o(34)),n=s(o(79)),a=s(o(82)),d=s(o(19)),f=s(o(28)),p=s(o(7));function s(e){return e&&e.__esModule?e:{default:e}}var i="last-visit-channel-id";r.default={name:e,depends:[l.default,a.default,t.default,n.default],signals:{workspaceRouted:[function(e){var t=e.props,n=e.controller,a=e.state,s=t.workspaceId,r=t.channelId;n.getSignal("messages.workspaceSelect")({workspaceId:s}),r?n.getSignal("messages.channelSelect")({workspaceId:s,channelId:r}):(a.get("isSupport")?n.getSignal("messages.openSupportTickets"):n.getSignal("messages.openExplore"))({workspaceId:s})}],connectionOpen:[function(e){var t=e.router;t&&t.goTo(t.getPath())}],channelRouted:[function(e){var t=e.props,n=e.controller,a=e.state,s=t.channelId,r=t.workspaceId,o=l.default.getChannel(a,s),i=p.default.getChannelId(a,r),c=f.default.getWorkspace(a,r),u=d.default.getWorkspaceId(a);o&&i!==s&&n.getSignal("messages.channelSelect")({channelId:s,workspaceId:r}),c&&u!==r&&n.getSignal("messages.workspaceSelect")({workspaceId:r})}],channelSelect:[function(e){var t=e.state,n=e.props.channelId,a=l.default.getChannel(t,n),s=localStorage.getItem(i);!a||s&&s===a.id||localStorage.setItem(i,a.id)}],exploreRouted:[function(e){e.controller.getSignal("messages.openExplore")()}],rootRouted:[function(e){var t=e.state,n=e.controller;if(!t.get("appVersion")){var a=localStorage.getItem(i);if(a){var s=l.default.getChannel(t,a);if(s)return void n.getSignal("messages.channelSelect")({channelId:s.id,workspaceId:s.workspaceId});localStorage.removeItem(i)}}var r=f.default.getWorkspaces(t),o=Object.values(r).find(function(e){return""===e.organizationId});o&&n.getSignal("messages.openExplore")({workspaceId:o.id})}]},getState:function(){return{}}}}).call(r,"views/v2/modules/messages/LocationStore.js")},function(e,a,l){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var t,n=l(27),i=(t=n)&&t.__esModule?t:{default:t};var c=["messages","voiceConn"],u=null;a.default={name:e,depends:[i.default],signals:{onVoiceStateStart:[function(e){var t,n=e.props,a=e.messages,s=e.controller,r=e.state,o=i.default.getSessionId(r);n.sessionId===o&&(n.fakeSig||(u&&(u.sessionId===n.sessionId&&u.channelId===n.channelId||(u.destroy(),a.voiceConn.currentConn=u=null)),u||(t=l(267).default,a.voiceConn.currentConn=u=new t({sessionId:n.sessionId,channelId:n.channelId}),u.on("state",function(e,t){s.getSignal("messages.onVoiceConnState")({channelId:u.channelId,state:e,payload:t})}),u.on("ping",function(){s.getSignal("messages.onVoiceConnPing")({pings:u.getPings(),averagePing:u.getAveragePing(),lastPing:u.getLastPing(),quality:u.getQuality()})})),r.merge(c,{disabled:!1,channelId:u.channelId,state:u.state})))}],onVoiceStateEnd:[function(e){var t=e.props,n=e.messages,a=e.state,s=i.default.getSessionId(a);t.sessionId===s&&u&&u.sessionId===t.sessionId&&u.channelId===t.channelId&&(u.destroy(),n.voiceConn.currentConn=u=null,t.isConflicting?(a.set([].concat(c,["disabled"]),!0),a.set([].concat(c,["lastChannelId"]),t.channelId),a.set([].concat(c,["state"]),"DISCONNECTED")):(a.set([].concat(c,["state"]),"DISCONNECTED"),a.unset([].concat(c,["channelId"]))),a.set([].concat(c,["quality"]),"UNKNOWN"))}],onVoiceServerUpdate:[function(e){var t,n=e.props,a=e.messages;u&&u.channelId===n.channelId&&(u.connect(n),(t=a.audioInput.currentInput).stream&&u.setStream(t.stream))}],onVoiceConnState:[function(e){var t=e.props,n=e.state,a=n.get(c);a.channelId===t.channelId&&a.state!==t.state&&n.merge(c,{state:t.state})}],onVoiceConnPing:[function(e){var t=e.props,n=e.state;u&&n.merge(c,t)}],connectionClosed:[function(e){var t=e.controller;u&&t.getSignal("messages.onVoiceStateEnd")({sessionId:u.sessionId,channelId:u.channelId})}],refreshConnDisabled:[function(e){var t=e.state;t.set([].concat(c,["disabled"]),!1),t.set([].concat(c,["lastChannelId"]),"")}]},getServices:function(){return{voiceConn:{currentConn:null}}},getState:function(){return{voiceConn:{disabled:!1,lastChannelId:"",state:"DISCONNECTED"}}}}}).call(a,"views/v2/modules/messages/VoiceConnectionStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=n(29),o=p(n(18)),i=p(n(268)),c=p(n(269)),u=n(271),l=p(n(272)),d=n(83),f=p(n(276));function p(e){return e&&e.__esModule?e:{default:e}}var g=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,r.EventEmitter),a(h,[{key:"_cleanupSocket",value:function(){this._socket&&(this._socket.removeAllListeners(),this._socket.close(),this._socket=null,this._handleDisconnect(!0,1e3,""))}},{key:"reconnect",value:function(){this._socket&&(this._socket.close(),this._socket.connect())}},{key:"destroy",value:function(){this._backoff.cancel(),this._cleanupSocket(),this.removeAllListeners(),this._stream=null,this._pings=[],this._destroyed=!0}},{key:"setState",value:function(e,t){var n,a=this,s=1<arguments.length&&void 0!==t?t:{};this.logger.info("State: "+e),this.state=e,this.emit("state",e,s),e===u.VoiceConnectionStates.VOICE_CONNECTED?(this._backoff.succeed(),this.pingInterval||(this.pingInterval=setInterval(function(){return a._socket.ping()},5e3)),this._socket.ping()):e===u.VoiceConnectionStates.VOICE_FAILED?(n=((n=this._backoff.fail(function(){return a.reconnect()}))/1e3).toFixed(2),this.logger.warn("Voice failed! Reconnecting in "+n+" seconds...")):(e===u.VoiceConnectionStates.VOICE_DISCONNECTED||u.VoiceConnectionStates.VOICE_CLOSED)&&this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}},{key:"setStream",value:function(e){this._stream=e,this._peerConn&&this._peerConn.setStream(e)}},{key:"connect",value:function(e){var a=this,t=e.endpoint,n=e.token;if(this._destroyed)throw new Error("VoiceConnection is already destroyed");this._backoff.cancel();var s,r=this.endpoint;this.endpoint=t,this.token=n,r!==this.endpoint&&this._cleanupSocket(),this._socket||((s=this._socket=new c.default(this.endpoint)).on("connecting",function(){a.logger.info("Connecting to voice server "+a.endpoint+"."),a.setState(u.VoiceConnectionStates.CONNECTING)}),s.on("connect",function(){a.logger.info("Connected to voice server."),a.setState(u.VoiceConnectionStates.AUTHENTICATING),a._socket.identify({sessionId:a.sessionId,channelId:a.channelId,token:a.token})}),s.on("disconnect",function(e,t,n){return a._handleDisconnect(e,t,n)}),s.on("sdpOffer",function(e){a.logger.info("Received sdpOffer from voice server."),a.setState(u.VoiceConnectionStates.CONNECTED),a._createPeerConn(e)}),s.on("ssrcsUpdate",function(e){a.logger.info("Received ssrcsUpdate from voice server."),a._ssrcsUpdate(e)}),s.on("ping",function(e){for(a._pings.push(e);20<=a._pings.length;)a._pings.shift();a.emit("ping")}),s.on("token",function(e){a.logger.info("voice server token updated."),a.token=e.token})),this._socket.connect()}},{key:"_handleDisconnect",value:function(e,t,n){var a=this;this.logger.info("Disconnected from voice server.",{wasClean:e,code:t,reason:n}),this._closePeerConn();var s,r=1e3!==t;this.setState(u.VoiceConnectionStates.DISCONNECTED,{willReconnect:r}),r&&(this._backoff.cancel(),s=((s=this._backoff.fail(function(){return a._socket.connect()}))/1e3).toFixed(2),this.logger.warn("Disconnect was not clean! Reconnecting in "+s+" seconds..."))}},{key:"_ssrcsUpdate",value:function(n){if(!this._peerConn)throw new Error("this._peerConn not created yet");var a={};n.audioSsrcs&&Object.keys(n.audioSsrcs).forEach(function(e){var t=n.audioSsrcs[e];t.ssrc?a[e]=t.parameters:a[e]=null}),this._peerConn.ssrcsUpdate({audioSsrcs:a})}},{key:"_createPeerConn",value:function(e){var s=this;if(this._peerConn)throw new Error("this._peerConn already exists");var t=this._peerConn=new l.default;t.on("connected",function(){return s.setState(u.VoiceConnectionStates.VOICE_CONNECTED)}),t.on("checking",function(){return s.setState(u.VoiceConnectionStates.VOICE_ICE_CHECKING)}),t.on("failed",function(){return s.setState(u.VoiceConnectionStates.VOICE_FAILED)}),t.on("disconnected",function(){return s.setState(u.VoiceConnectionStates.VOICE_DISCONNECTED)}),t.on("closed",function(){return s.setState(u.VoiceConnectionStates.VOICE_CLOSED)}),t.on("addStream",function(e){return s._addStream(e)}),t.on("removeStream",function(e){return s._removeStream(e)}),t.on("ssrcsUpdate",function(n){var a;t===s._peerConn&&(a={},n.audioSsrcs&&Object.keys(n.audioSsrcs).forEach(function(e){e=Number(e);var t=n.audioSsrcs[e];a[e]=t?{ssrc:e,sessionId:s.sessionId,parameters:t}:{sessionId:s.sessionId}}),s._socket.ssrcsUpdate({channelId:s.channelId,audioSsrcs:a}))}),this._stream&&t.setStream(this._stream);var n=(0,d.fromJitsiSdp)(e.sdpOffer);t.connect(n,function(e){t===s._peerConn&&s._socket.sdpAnswer({channelId:s.channelId,sdpAnswer:(0,d.toJitsiSdp)(e)})}),this.setState(u.VoiceConnectionStates.VOICE_CONNECTING)}},{key:"_closePeerConn",value:function(){var t=this;this._peerConn&&(this._peerConn.removeAllListeners(),this._peerConn.close(),this._peerConn=null,this.setState(u.VoiceConnectionStates.VOICE_CLOSED)),Object.keys(this._audioOutputs).forEach(function(e){t._audioOutputs[e].destroy(),delete t._audioOutputs[e]})}},{key:"_addStream",value:function(e){this._audioOutputs[e.id]&&(this._audioOutputs[e.id].destroy(),delete this._audioOutputs[e.id]),this._audioOutputs[e.id]=new f.default(e.id,e)}},{key:"_removeStream",value:function(e){this._audioOutputs[e.id]&&(this._audioOutputs[e.id].destroy(),delete this._audioOutputs[e.id])}},{key:"getPings",value:function(){return this._pings.slice(0)}},{key:"getAveragePing",value:function(){var e=this._pings;if(e.length)return e.reduce(function(e,t){return e+t},0)/e.length}},{key:"getLastPing",value:function(){var e=this._pings;if(e.length)return e[e.length-1]}},{key:"getQuality",value:function(){var e=this.getLastPing();return this.state!==u.VoiceConnectionStates.VOICE_CONNECTED||void 0===e?u.VoiceConnectionQuality.UNKNOWN:500<e?u.VoiceConnectionQuality.BAD:250<e?u.VoiceConnectionQuality.AVERAGE:u.VoiceConnectionQuality.FINE}}]),h);function h(e){var t=e.sessionId,n=e.channelId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return a.sessionId=t,a.channelId=n,a.endpoint=null,a.token=null,a.state=u.VoiceConnectionStates.NEW,a._backoff=new i.default(1e3,1e4),a._socket=null,a._peerConn=null,a._stream=null,a._audioOutputs={},a._pings=[],a._destroyed=!1,a.pingInterval=null,a.logger=o.default.create("VoiceConnection("+t+","+n+")"),a}t.default=g},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(r,[{key:"succeed",value:function(){this.cancel(),this._fails=0,this._current=this.min}},{key:"fail",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:null;this._fails+=1;var a=2*this._current;if(this.jitter&&(a*=Math.random()),this._current=Math.min(this._current+a,this.max),null!==n){if(null!==this._timeoutId)throw new Error("callback already pending");this._timeoutId=setTimeout(function(){try{n()}finally{t._timeoutId=null}},this._current)}return this._current}},{key:"cancel",value:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)}},{key:"fails",get:function(){return this._fails}},{key:"current",get:function(){return this._current}},{key:"pending",get:function(){return null!==this._timeoutId}}]),r);function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.min=e,this.max=null!==t?t:10*e,this.jitter=n,this._current=e,this._timeoutId=null,this._fails=0}t.default=s},function(e,u,l){"use strict";(function(t){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var e=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n,s=l(29),r=l(18),o=(n=r)&&n.__esModule?n:{default:n};var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s.EventEmitter),e(c,[{key:"connect",value:function(){var e,s,r=this;this.ws||(e=!1,(s=this.ws=new WebSocket(this.url)).onopen=function(){e=!0,r.emit("connect")},s.onmessage=function(e){var t=JSON.parse(e.data);switch(t.op){case 1:r.emit("sdpOffer",t.d);break;case 3:r.emit("ssrcsUpdate",t.d);break;case 4:r.emit("ping",Date.now()-t.d.ts);break;case 5:r.emit("token",t.d);break;default:r.logger.warn("unknown payload.op ",t.op)}},s.onerror=function(e){s.onclose({wasClean:!1,code:0,reason:e.message})},s.onclose=function(e){var t=e.wasClean,n=e.code,a=e.reason;r.ws===s&&(r.ws=null,r.emit("disconnect",t,n,a))},t.nextTick(function(){e||r.emit("connecting")}))}},{key:"send",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:null,a=JSON.stringify({op:e,d:n});if(this.ws&&1===this.ws.readyState)try{this.ws.send(a)}catch(e){this.logger.warn("failed to send payload ",e)}else this.logger.warn("ws not opened yet. ignore sending: ",a)}},{key:"close",value:function(){var e;this.ws&&((e=this.ws).onclose({wasClean:!0,code:1e3,reason:""}),e.close(),this.ws=null)}},{key:"identify",value:function(e){var t=e.sessionId,n=e.channelId,a=e.token;this.send(0,{sessionId:t,channelId:n,token:a})}},{key:"ping",value:function(){this.send(4,{ts:Date.now()})}},{key:"sdpAnswer",value:function(e){var t=e.channelId,n=e.sdpAnswer;this.send(2,{channelId:t,sdpAnswer:n})}},{key:"ssrcsUpdate",value:function(e){var t=e.channelId,n=e.audioSsrcs;this.send(3,{channelId:t,audioSsrcs:n})}},{key:"connected",get:function(){return this.ws&&1===this.ws.readyState}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return t.url=e,t.ws=null,t.logger=o.default.create("VoiceControlSocket("+e+")"),t}u.default=i}).call(u,l(270))},function(e,t,n){e.exports=n(0)(89)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceConnectionQuality=t.VoiceConnectionStates=void 0;var a,s=n(15),r=(a=s)&&a.__esModule?a:{default:a};t.VoiceConnectionStates=(0,r.default)({NEW:null,CONNECTING:null,AUTHENTICATING:null,CONNECTED:null,DISCONNECTED:null,VOICE_CONNECTING:null,VOICE_ICE_CHECKING:null,VOICE_CONNECTED:null,VOICE_FAILED:null,VOICE_DISCONNECTED:null,VOICE_CLOSED:null}),t.VoiceConnectionQuality=(0,r.default)({UNKNOWN:null,BAD:null,AVERAGE:null,FINE:null})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=n(29),o=d(n(18)),i=d(n(273)),c=n(83),u=n(275),l=d(n(9));function d(e){return e&&e.__esModule?e:{default:e}}var f=o.default.create("PeerConnection");window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,window.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription;var p=void 0;function g(e,t){this.pc=new RTCPeerConnection(e,t),this.interop=new u.Interop}p="Firefox"===i.default.name?{offerToReceiveAudio:!0,offerToReceiveVideo:!1}:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}},g.prototype.setLocalDescription=function(e,t,n){"Firefox"===i.default.name&&(e=this.interop.toUnifiedPlan(e)),this.pc.setLocalDescription(e,t,n)},g.prototype.setRemoteDescription=function(e,t,n){"Firefox"===i.default.name&&(e=this.interop.toUnifiedPlan(e)),this.pc.setRemoteDescription(e,t,n)},g.prototype.createAnswer=function(t,e,n){var a=this;this.pc.createAnswer(function(e){"Firefox"===i.default.name&&(e=a.interop.toPlanB(e)),t(e)},e,n)},g.prototype.createOffer=function(t,e,n){this.pc.createOffer(function(e){"Firefox"===i.default.name&&(e=self.interop.toPlanB(e)),t(e)},e,n)};var h=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,r.EventEmitter),a(m,[{key:"connect",value:function(e,t){var n=this;if(!e)throw new Error("remoteSdp is null");if(this._pcAdapter)throw new Error("PeerConnection is already connected");var a,s={iceServers:[]};"Chrome"!==i.default.name||0<(a=(i.default.version||"").split(".")||[]).length&&72<=parseInt(a[0],10)&&(s.sdpSemantics="plan-b");var r=this._pcAdapter=new g(s);r.pc.onnegotiationneeded=function(){f.info("negotiationNeeded"),n._safeExecute(function(){n._updateRemoteDescription(function(){var t=(0,c.parseSdp)(n._pcAdapter.pc.localDescription.sdp);n._createLocalAnswer(function(e){return n.diffSdp(t,e)})})})},r.pc.oniceconnectionstatechange=function(){var e=n._pcAdapter.pc.iceConnectionState;f.info("iceConnectionState =>",e),"completed"===e&&(e="connected"),n.emit(e)},r.pc.onsignalingstatechange=function(){var e;f.info("signalingState =>",n._pcAdapter.pc.signalingState),"stable"===n._pcAdapter.pc.signalingState&&(n._safeExecuting=!1,(e=n._safeQueue.shift())&&(f.info("safeExecute: running queued function"),n._safeExecute(e)))},"ontrack"in r.pc?r.pc.ontrack=function(e){return n.emit("addStream",e.streams[0])}:r.pc.onaddstream=function(e){return n.emit("addStream",e.stream)},r.pc.onremovestream=function(e){return n.emit("removeStream",e.stream)},this._remoteSdp=e,this._stream&&r.pc.addStream(this._stream),this._safeExecute(function(){n._updateRemoteDescription(function(){n._createLocalAnswer(t)})})}},{key:"ssrcsUpdate",value:function(e){var n=this,a=e.audioSsrcs;if(!this._pcAdapter)throw new Error("PeerConnection is not connected");var s,r=!1;!a||(s=this._remoteSdp.media.find(function(e){return"audio"===e.mid}))&&Object.keys(a).forEach(function(e){var t=a[e];t?s.sources[e]||(s.sources[e]=t,r=!0):s.sources[e]&&(delete s.sources[e],r=!0)}),r&&this._safeExecute(function(){n._updateRemoteDescription(function(){var t=(0,c.parseSdp)(n._pcAdapter.pc.localDescription.sdp);n._createLocalAnswer(function(e){return n.diffSdp(t,e)})})})}},{key:"diffSdp",value:function(e,t){var n={},a=(0,c.diffSdp)(e,t);a&&a.forEach(function(t){"audio"===t.mid&&Object.keys(t.sources).forEach(function(e){n[e]=t.sources[e]})}),(a=(0,c.diffSdp)(t,e))&&a.forEach(function(e){"audio"===e.mid&&Object.keys(e.sources).forEach(function(e){n[e]=null})}),Object.keys(n).length&&this.emit("ssrcsUpdate",{audioSsrcs:n})}},{key:"close",value:function(){this._pcAdapter&&("closed"!==this._pcAdapter.pc.signalingState&&this._pcAdapter.pc.close(),this._pcAdapter.pc.onnegotiationneeded=null,this._pcAdapter.pc.oniceconnectionstatechange=null,this._pcAdapter.pc.onsignalingstatechange=null,"ontrack"in this._pcAdapter.pc?this._pcAdapter.pc.ontrack=null:this._pcAdapter.pc.onaddstream=null,this._pcAdapter.pc.onremovestream=null,this._pcAdapter=null),this._remoteSdp=null,this._stream=null,this._safeExecuting=!1,this._safeQueue=[]}},{key:"setStream",value:function(t){var n=this;if(!t)throw new Error("stream is null");var e=!this._pcAdapter||"closed"===this._pcAdapter.pc.signalingState;this._stream&&!e&&(this._pcAdapter.pc.removeStream?this._pcAdapter.pc.removeStream(this._stream):this._pcAdapter.pc.getSenders().forEach(function(e){t.getTracks().includes(e.track)&&n._pcAdapter.pc.removeTrack(e)})),this._stream=t,this._stream&&!e&&this._pcAdapter.pc.addStream(this._stream)}},{key:"_safeExecute",value:function(e){"closed"!==this._pcAdapter.pc.iceConnectionState?this._safeExecuting?(f.info("safeExecute: currently executing"),this._safeQueue.push(e)):"stable"!==this._pcAdapter.pc.signalingState?(f.info("safeExecute: signaling state",this._pcAdapter.pc.signalingState),this._safeQueue.push(e)):(this._safeExecuting=!0,e()):f.info("safeExecute: ICE connection closed")}},{key:"_createLocalAnswer",value:function(n){var e=this;this._pcAdapter.createAnswer(function(t){e._pcAdapter.setLocalDescription(t,function(){var e;f.info("createAnswer+setLocalDescription success"),n&&(e=(0,c.parseSdp)(t.sdp),n(e))},function(e){throw f.error("failed to setLocalDescription",e),e})},function(e){throw f.error("failed to createAnswer",e),e},p)}},{key:"_updateRemoteDescription",value:function(e){var t=(0,c.writeSdp)(l.default.cloneDeep(this._remoteSdp));this._pcAdapter.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:t}),function(){f.info("setRemoteDescription success"),e&&e()},function(e){throw f.error("failed to setRemoteDescription",e),e})}}]),m);function m(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return e._pcAdapter=null,e._remoteSdp=null,e._stream=null,e._safeExecuting=!1,e._safeQueue=[],e}t.default=h},function(e,t,n){e.exports=n(0)(1124)},function(e,t,n){e.exports=n(0)(437)},function(e,t,n){e.exports=n(0)(1125)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r,o=n(18),i=(r=o)&&r.__esModule?r:{default:r};var c=(a(u,[{key:"destroy",value:function(){this.logger.info("destroy"),this._audioElement.pause(),this._audioElement=null}},{key:"_updateAudioElement",value:function(){this._audioElement.muted=this._mute,this._audioElement.volume=this.volume/100}},{key:"mute",get:function(){return this._mute},set:function(e){this._mute=e||!1,this._updateAudioElement()}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=Math.min(Math.round(e),100),this._updateAudioElement()}}]),u);function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.id=e,this.logger=i.default.create("AudioOutput("+this.id+")");var n=document.createElement("audio");(this._audioElement=n).autoplay=!0,n.srcObject=t,this._mute=!1,this._volume=100,this._updateAudioElement(),this.logger.info("create")}t.default=c},function(e,n,O){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var m=t(O(4)),v=t(O(5)),_=t(O(6)),y=t(O(45)),b=t(O(72)),w=O(17),S=t(O(30)),I=t(O(278)),E=O(44);function t(e){return e&&e.__esModule?e:{default:e}}var C=/image\/(jpeg|pjpeg|gif|png)$/i;n.default={name:e,depends:[m.default,v.default,_.default,y.default],signals:{messageCreate:[function(e){var t,n,a,s,r,o,i,c,u,l=e.props,d=e.state,f=e.controller,p=O(23).get("DesktopNotificationNotice.dismissed"),g=d.get("currentPath").startsWith("/messages"),h=l;m.default.getCurrentUserId(d)===h.author.id||g&&y.default.isFocused(d)||(t=_.default.transformMessage(d,h),(n=v.default.getChannel(d,h.channelId))&&!n.isMute&&(n&&"direct"===n.type||t.mentioned)&&d.get("messages.window.isMaster")&&("call"!==t.type&&(0,E.playSound)("Message",.4),!p&&S.default.hasPermission()&&(a=I.default.getUserAvatar(h.author),s=h.author.fullname,c="",c=!t.contentParsedPlainText&&t.attachments.length?(r=t.attachments[0],o=C.test(r.contentType),i=d.get(),o?(0,w.i18n)(i,b.default,"image_message",{}):(0,w.i18n)(i,b.default,"file_message",{})):t.contentParsedPlainText,u={tag:h.channelId,onClick:function(){g?(window.focus(),f.getSignal("messages.channelSelect")({channelId:n.id,workspaceId:n.workspaceId})):window.open("/messages/c/"+h.channelId,"_blank")}},S.default.showNotification(a,s,c,u))))}]},getState:function(){return{}}}}).call(n,"views/v2/modules/messages/DesktopNtfStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(279)),s=i(n(280)),r=i(n(281)),o=i(n(282));function i(e){return e&&e.__esModule?e:{default:e}}var c=[a.default,s.default,r.default,o.default];t.default={getUserAvatar:function(e){var t=e.id,n=e.avatar;if(n)return n;var a=parseInt(t.slice(0,8),16);return c[a%c.length]}}},function(e,t,n){e.exports=n.p+"../styles/i/default-icon-purple.e9c0075bd93c54d020e4485f35755728.png"},function(e,t,n){e.exports=n.p+"../styles/i/default-icon-pink.a339692c0f8078047e5bfdecbe24e3e5.png"},function(e,t,n){e.exports=n.p+"../styles/i/default-icon-green.0893a32538c298a86b81180d91b58bb6.png"},function(e,t,n){e.exports=n.p+"../styles/i/default-icon-yellow.82ebc9a57fc3e2e8bdf07b3cc704fb25.png"},function(e,n,a){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var d=t(a(5)),f=t(a(34)),p=t(a(4)),g=t(a(84));function t(e){return e&&e.__esModule?e:{default:e}}var o=["messages","displayLevel"];n.default={name:e,depends:[d.default,f.default],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,a=t.workspaces,s={};a.forEach(function(e){var t={level:"default"};e.organizationId||(t.job={}),s[e.id]=t}),n.set(o,s)}],changeLevel:[function(e){var t=e.props,n=e.state,a=t.workspaceId,s=t.level,r=t.job;"recruit-list"===s?n.set([].concat(o,[a,"job"]),r):n.set([].concat(o,[a,"job"]),{}),n.set([].concat(o,[a,"level"]),s)}],channelSelect:[function(e){var t,n,a,s=e.props,r=e.state,o=e.controller,i=s.channelId,c=s.workspaceId,u=d.default.getChannel(r,i),l=g.default.getSelectedMenuItem(r);u&&"default"===l&&(t=o.getSignal("messages.changeLevel"),"direct"===u.type?t({level:"default",workspaceId:c}):"private"===u.type?u.proposalId?(n=p.default.getCurrentUserId(r),(a=f.default.getChannelJob(r,u.id)).freelancerId===n?t({level:"applied-list",workspaceId:c}):t({level:"recruit-list",job:a,workspaceId:c})):t({level:"default",workspaceId:c}):"public"===u.type&&t({level:"public-list",workspaceId:c}))}],workspaceCreate:[function(e){var t=e.props,n=e.state,a={};a[t.id]={level:"default"},n.merge(o,a)}]},getState:function(){return{displayLevel:{}}}}}).call(n,"views/v2/modules/messages/DisplayLevelStore.js")},function(e,n,a){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var o=a(21),t=["messages","userCard"],i=[].concat(t,["itemPos"]),c=[].concat(t,["user"]),u=[].concat(t,["showCard"]),l=[].concat(t,["src"]);n.default={name:e,depends:[],signals:{hideUserCard:[function(e){var t=e.state;t.set(c,{}),t.set(i,{}),t.set(u,!1),t.set(l,"")}],showUserCard:[function(e){var t=e.state,n=e.props,a=n.pos,s=n.user,r=n.src;(0,o.isTouch)()?window.open("/u/"+s.id,"_blank"):(t.set(c,s),t.set(i,a),t.set(u,!0),t.set(l,r))}]},getState:function(){return{userCard:{user:{},itemPos:{},showCard:!1,src:""}}}}}).call(n,"views/v2/modules/messages/UserCardStore.js")},function(e,n,b){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var g=t(b(6)),h=t(b(4)),m=t(b(5)),v=t(b(30)),_=b(3);function t(e){return e&&e.__esModule?e:{default:e}}var y=["messages","bubbleMessages"];n.default={name:e,depends:[h.default,m.default,g.default],signals:{messageCreate:[function(e){var t,n=e.props,a=e.state,s=n.trackingId;!s||null!==(t=a.get(y)).messageToReply&&t.messageToReply.id===s&&(0,_.isLoading)(t.messageToReplyStatus)&&a.merge(y,{messageToReplyStatus:"succeeded"});var r=b(23).get("DesktopNotificationNotice.dismissed"),o=a.get("currentPath").startsWith("/messages");if((!v.default.hasPermission()||r)&&!o){var i=n;if(!(h.default.getCurrentUserId(a)===i.author.id)){var c,u,l,d=g.default.transformMessage(a,i),f=m.default.getChannel(a,d.channelId),p=f&&"direct"===f.type;if(f&&!f.isMute){if("call"===d.type)if(!d.call.duration)return;(p||d.mentioned)&&(u=!1,null!==(c=a.get(y)).messageToReply&&(c.messageToReply.id===d.id?(a.merge(y,{messageToReply:d}),u=!0):c.messageToReply.authorId===d.authorId&&c.messageToReply.channelId===d.channelId&&""===c.messageToReplyStatus&&(""!==d.contentParsedPlainText?d.contentParsedPlainText=c.messageToReply.contentParsedPlainText+"\n"+d.contentParsedPlainText:d.contentParsedPlainText=c.messageToReply.contentParsedPlainText,d.attachments=c.messageToReply.attachments.concat(d.attachments),a.merge(y,{messageToReply:d}),u=!0)),u||((l=c.messagesQueue.find(function(e){return e.id===d.id||e.authorId===d.authorId&&e.channelId===d.channelId}))&&(""!==d.contentParsedPlainText?d.contentParsedPlainText=l.contentParsedPlainText+"\n"+d.contentParsedPlainText:d.contentParsedPlainText=l.contentParsedPlainText,d.attachments=l.attachments.concat(d.attachments)),a.merge(y,{messagesQueue:c.messagesQueue.filter(function(e){return!l||e.id!==l.id}).concat([d])})))}}}}],sendMessageFailed:[function(e){var t,n=e.props,a=e.state,s=n.trackingId;!s||null!==(t=a.get(y)).messageToReply&&t.messageToReply.id===s&&(0,_.isLoading)(t.messageToReplyStatus)&&a.merge(y,{messageToReplyStatus:"failed"})}],bubbleTryToReplyMessage:[function(e){var t=e.props,n=e.state,a=t.messageId,s=n.get(y),r=s.messagesQueue.find(function(e){return e.id===a});r&&null===s.messageToReply&&n.merge(y,{messageToReply:r,messageToReplyStatus:"",messagesQueue:s.messagesQueue.filter(function(e){return e.id!==a})})}],bubbleReplyMessage:[function(e){var t=e.props,n=e.state,a=e.controller,s=t.messageId,r=t.content,o=n.get(y);null!==o.messageToReply&&o.messageToReply.id===s&&""===o.messageToReplyStatus&&(n.merge(y,{messageToReplyStatus:"inProgress"}),a.getSignal("messages.sendMessage")({channelId:o.messageToReply.channelId,content:r,trackingId:s}))}],bubbleCloseMessage:[function(e){var t=e.props,n=e.state,a=t.messageIds,s={};(void 0===a?[]:a).forEach(function(e){s[e]=!0});var r=n.get(y);null!==r.messageToReply&&s[r.messageToReply.id]&&n.merge(y,{messageToReply:null,messageToReplyStatus:""}),n.merge(y,{messagesQueue:r.messagesQueue.filter(function(e){return!s[e.id]})})}]},getState:function(){return{bubbleMessages:{messagesQueue:[],messageToReply:null,messageToReplyStatus:""}}}}}).call(n,"views/v2/modules/messages/BubbleStore.js")},function(e,S,I){"use strict";(function(e){Object.defineProperty(S,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=g(["messages.reportStatus"],["messages.reportStatus"]),n=g(["messages.reportInfo.firstLoad"],["messages.reportInfo.firstLoad"]),a=g(["firstLoad"],["firstLoad"]),s=g(["messages.fetchInfoStatus.report"],["messages.fetchInfoStatus.report"]),r=g(["messages.showInfoType"],["messages.showInfoType"]),o=I(2),i=I(1),f=p(I(6)),c=p(I(4)),u=I(41),l=p(I(3));function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var m=["messages"],v=[].concat(m,["reportInfo"]),_=[].concat(m,["reportForm"]);function y(e){e.state.set([].concat(h(v),["reportingKey"]),"")}function b(){return[function(){return{fieldPath:[].concat(h(_),["inputReasons"]),fieldDetails:{value:""}}},u.chains.addField]}function w(n){return[function(e){var t=e.props;return{field:[].concat(h(_),[n]),value:t.value,touched:!0}}].concat(h(u.chains.fieldChanged),[(0,o.set)((0,i.state)(t),l.default.initial)])}S.default={name:e,depends:[c.default],signals:{ignoreReport:[function(e){var t=e.props,n=e.state,a=e.path,s=e.http,r=t.reportId,o=t.messageId,i=n.get([].concat(h(v),["items"]));return Object.values(i).filter(function(e){return e.message&&e.message.id===o}).map(function(e){return e.id}).forEach(function(e){n.unset([].concat(h(v),["items",e]))}),s.post("/api/reports/"+r+"/ignore",{}).then(a.success).catch(a.error)},{success:[],error:[]}],fetchReportInfo:[(0,o.set)((0,i.state)(n),(0,i.props)(a)),(0,o.set)((0,i.state)(s),l.default.inProgress),(0,o.set)((0,i.state)(r),"report"),[function(e){var t=e.props,n=e.path,a=e.http,s=e.state,r=t.channelId,o=t.firstLoad,i=s.get(v),c=i.currentPage,u=i.hasMore;return o||u?a.get("/api/channels/"+r+"/reportedMessages",{page:o?0:c+1}).then(n.success).catch(n.error):n.dummy},{success:[function(e){var t,n,a,s,i,r=e.props,o=e.controller,c=e.state,u=r.status,l=r.result;200===u&&l&&(t=l.reports,n=l.hasMore,a=l.page,s=c.get([].concat(h(v),["items"])),i=d({},s),t.forEach(function(e){var t=e.id,n=e.reportUser,a=e.message,s=e.status,r=e.reason,o=e.updatedTime;i[e.id]={id:t,reportUserId:n.id,message:f.default.transformMessage(c,a),status:s,reason:r,updatedTime:o}}),o.getSignal("messages.syncFetchedReportInfo")({reports:t}),c.set([].concat(h(v),["items"]),i),c.set([].concat(h(v),["hasMore"]),n),c.set([].concat(h(v),["currentPage"]),a))},(0,o.set)((0,i.state)(s),l.default.succeeded)],error:[(0,o.set)((0,i.state)(s),l.default.failed)],dummy:[(0,o.set)((0,i.state)(s),l.default.succeeded)]}]],messageDelete:[function(e){var t=e.props,n=e.state,a=t,s=n.get([].concat(h(v),["items"]));Object.values(s).filter(function(e){return e.message&&e.message.id===a.id}).map(function(e){return e.id}).forEach(function(e){n.unset([].concat(h(v),["items",e]))})}],changeReportType:[].concat(h(w("type")),[function(e){var t=e.state,n=e.path;return"other"!==t.get([].concat(h(_),["type","value"]))?(t.set("messages.reportForm.inputReasons.value",""),n.no()):n.yes()},{yes:[function(){return{fieldPath:[].concat(h(_),["inputReasons"]),fieldDetails:{value:"",validations:["isValue","minLength:10","maxLength:80"],errorMessages:["error_isRequired","error_minLength10","error_maxLength80"],isRequired:!0}}},u.chains.addField],no:b()}]),changeInputReasons:w("inputReasons"),clearShowInfo:[function(e){e.state.set(v,{items:{},hasMore:!1,firstLoad:!1,currentPage:0})}],openReport:[function(e){var t=e.state,n=e.props.messageId;t.set([].concat(h(v),["reportingKey"]),n)}],closeReport:[y].concat(h(u.chains.reset),h(b())),submitReport:[].concat(h(u.chains.formValidated),[function(e){var t=e.state,n=e.path,a=t.get(_);return(0,u.isValidForm)(a)?n.yes():n.no()},{yes:[(0,o.set)((0,i.state)(t),l.default.inProgress),[function(e){var t=e.state,n=e.http,a=e.path,s=t.get(_),r=t.get([].concat(h(v),["reportingKey"]));if((0,u.isValidForm)(s)){var o={reason:"other"!==s.type.value?s.type.value:"other:"+s.inputReasons.value};return n.post("/api/messages/"+r+"/report",o).then(a.success).catch(a.error)}return a.dummy()},{success:[(0,o.set)((0,i.state)(t),l.default.succeeded),y],error:[(0,o.set)((0,i.state)(t),l.default.failed)],dummy:[]}]],no:[(0,o.set)((0,i.state)(t),l.default.failed)]}])},getState:function(){return{reportInfo:{items:{},firstLoad:!1,hasMore:!1,currentPage:0,reportingKey:""},reportStatus:"",reportForm:(0,u.Form)({type:{value:"spam"},inputReasons:{value:""}})}}}}).call(S,"views/v2/modules/messages/ReportStore.js")},function(e,d,f){"use strict";(function(e){Object.defineProperty(d,"__esModule",{value:!0});var t,n=Object.freeze(Object.defineProperties(["messages.editChannel.editTopicStatus"],{raw:{value:Object.freeze(["messages.editChannel.editTopicStatus"])}})),a=f(15),s=(t=a)&&t.__esModule?t:{default:t},r=f(2),o=f(1);var i=(0,s.default)({initial:null,succeeded:null,failed:null,inProgress:null}),c=["messages","editChannel"];function u(e){e.state.set([].concat(c,["name"]),{isEditing:!1,value:""})}function l(e){e.state.set([].concat(c,["topic"]),{isEditing:!1,value:""})}d.default={name:e,depends:[],signals:{editChannelNameEdit:[function(e){var t=e.props;e.state.set([].concat(c,["name"]),{isEditing:!0,value:t.name})}],editChannelNameEditChange:[function(e){var t=e.props;e.state.set([].concat(c,["name"]),{isEditing:!0,value:t.value||""})}],editChannelNameEditCancel:[u],editChannelNameEditCommit:[[function(e){var t=e.props,n=e.state,a=e.path,s=e.http,r=n.get([].concat(c,["name"]));return s.post("/api/channels/"+t.channelId+"/setName",{name:r.value}).then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;n.getSignal("messages.channelUpdate")(a)},u],error:[u]}]],editChannelTopicEdit:[function(e){var t=e.props;e.state.set([].concat(c,["topic"]),{isEditing:!0,value:t.topic})}],editChannelTopicEditChange:[function(e){var t=e.props;e.state.set([].concat(c,["topic"]),{isEditing:!0,value:t.value})}],editChannelTopicEditCancel:[l],editChannelTopicEditCommit:[(0,r.set)((0,o.state)(n),i.inProgress),[function(e){var t=e.props,n=e.path,a=e.state,s=e.http,r=a.get([].concat(c,["topic"]));return s.post("/api/channels/"+t.channelId+"/setTopic",{topic:r.value}).then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;n.getSignal("messages.channelUpdate")(a)},l,(0,r.set)((0,o.state)(n),i.succeeded)],error:[l,(0,r.set)((0,o.state)(n),i.failed)]}]],setChannelAvatar:[function(e){var t=e.props,n=e.path,a=e.http,s=t.value,r=t.channelId;return a.post("/api/channels/"+r+"/setAvatar",{avatar:s}).then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelUpdate")(a)}],error:[]}],setChannelLive:[function(e){var t=e.props,n=e.path,a=e.http,s=t.live,r=t.channelId;return a.post("/api/channels/"+r+"/setLive",{live:s}).then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.channelUpdate")(a)}],error:[]}]},getState:function(){return{editChannel:{name:{isEditing:!1,value:""},topic:{isEditing:!1,value:""}}}}}}).call(d,"views/v2/modules/messages/EditChannelStore.js")},function(e,a,s){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var m=t(s(6)),v=t(s(4)),_=t(s(46)),y=t(s(48)),b=t(s(47)),w=t(s(49)),r=t(s(3));function t(e){return e&&e.__esModule?e:{default:e}}function n(s){return function(e){var t=e.props,n=e.state,a=t.messageId;n.set("messages.reactionStatus.status",s),s===r.default.inProgress?n.set("messages.reactionStatus.messageId",a):n.set("messages.reactionStatus.messageId","")}}a.default={name:e,depends:[],signals:{toggleReaction:[n(r.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.state,s=e.path,r=t.messageId,o=t.channelId,i=t.reactionType,c=a.get("messages.channels."+o),u=c.type,l=c.ticketId,d=c.workspaceId,f=v.default.getCurrentUserId(a),p=a.get("support.tickets.entities."+l+".data"),g=a.get("messages.workspaces."+d);("ticket"===u&&p.assignee===f||g.residentId===f)&&(f=g.botId);var h=(m.default.getMessage(a,o,r)||b.default.getStarMessage(a,r)||y.default.getReplyMessage(a,r)||_.default.getMentionMessage(a,r)||w.default.getSearchedMessage(a,r)).reactions[i];return h&&h[f]?n.post("/api/messages/"+r+"/removeReaction",{reactionType:i}).then(s.success).catch(s.error):n.post("/api/messages/"+r+"/addReaction",{reactionType:i}).then(s.success).catch(s.error)},{success:[function(e){var t=e.props;e.controller.getSignal("messages.syncReactionResult")(t)},n(r.default.succeeded)],error:[n(r.default.failed)]}]],syncReactionResult:[function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&n.getSignal("messages.messageUpdate")(a)}]},getState:function(){return{reactionStatus:{}}}}}).call(a,"views/v2/modules/messages/ReactionStore.js")},function(e,a,s){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var t,n=s(19),i=(t=n)&&t.__esModule?t:{default:t};var r=["messages","searchUsers"];a.default={name:e,depends:[],signals:{onConversationsFilterChanged:[function(e){var t=e.props,n=e.http,a=e.path,s=e.state,r=t.value,o=i.default.getWorkspaceId(s);return r&&o?n.get("/api/workspaces/"+o+"/searchUser",{keyword:r}).then(a.success).catch(a.error):a.success()},{success:[function(e){var t=e.props,n=e.state,a=(t.result||{}).users,s={};(void 0===a?[]:a).forEach(function(e){s[e.id]={id:e.id,fullname:e.fullname,avatar:e.avatar}}),n.set(r,s)}],error:[]}]},getState:function(){return{searchUsers:{}}}}}).call(a,"views/v2/modules/messages/SearchUserStore.js")},function(e,r,o){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var t,n=o(6),s=(t=n)&&t.__esModule?t:{default:t};var c=["messages","editingMessage"];function a(e){e.state.set(c,{})}r.default={name:e,depends:[],signals:{editMessageStart:[function(e){var t=e.props,n=e.state,a=t.channelId,s=t.id,r=t.content,o=n.get(c),i=0;o&&o.id===s&&o.channelId===a&&(i=o.ticker+1),n.set(c,{channelId:a,id:s,content:r,ticker:i})}],editMessageEnd:[a],channelSelect:[a]},getState:function(){return{editingMessage:{}}},getEditingMessage:function(e){var t=e.get([].concat(c)),n=t.channelId,a=t.id;return s.default.getMessage(e,n,a)},isEditing:function(e,t,n){var a=this.getEditingMessage(e);return a&&a.channelId===t&&a.id===n}}}).call(r,"views/v2/modules/messages/EditMessageStore.js")},function(e,u,l){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var t,n=Object.freeze(Object.defineProperties(["deleteAsAdmin"],{raw:{value:Object.freeze(["deleteAsAdmin"])}})),a=l(26),s=(t=a)&&t.__esModule?t:{default:t},r=l(2),o=l(1);var i=["messages","deletingMessage"];function c(e){var t=e.props,n=e.state,a=t.channelId,s=t.messageId,r=t.deleteAsAdmin;n.set(i,{channelId:a,messageId:s,deleteAsAdmin:r})}u.default={name:e,depends:[],signals:{deleteMessageStart:[(0,r.when)((0,o.props)(n),function(e){return e}),{true:[s.default.TfaRequired(c)],false:[c]}],deleteMessageEnd:[function(e){e.state.set(i,{})}]},getState:function(){return{deletingMessage:{}}}}}).call(u,"views/v2/modules/messages/DeleteMessageStore.js")},function(e,p,g){"use strict";(function(e){Object.defineProperty(p,"__esModule",{value:!0});var t,n=c(["messages.fetchInvitationInfoStatus"],["messages.fetchInvitationInfoStatus"]),a=c(["messages.showInvitationDialog"],["messages.showInvitationDialog"]),s=g(2),r=g(1),o=g(3),i=(t=o)&&t.__esModule?t:{default:t};function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=["messages"],l=[].concat(u,["invitationInfo"]),d=[].concat(u,["showInvitationDialog"]);function f(e){var t=e.controller,n=e.props;t.getSignal("messages.syncInvitationInfo")(n)}p.default={name:e,depends:[],signals:{fetchInvitationInfo:[(0,s.set)((0,r.state)(n),i.default.inProgress),[function(e){var t=e.props,n=e.path,a=e.http,s=t.channelId;return a.get("/api/invitation/channel/"+s).then(n.success).catch(n.error)},{success:[f,(0,s.set)((0,r.state)(n),i.default.succeeded)],error:[(0,s.set)((0,r.state)(n),i.default.failed)]}]],syncInvitationInfo:[function(e){var t=e.props,n=e.state,a=t.result;200===t.status&&a&&(n.set(l,a),n.set(d,!0))}],closeInvitationDialog:[(0,s.set)((0,r.state)(a),!1)],makeInvitationNeverExpire:[(0,s.set)((0,r.state)(n),i.default.inProgress),[function(e){var t=e.props,n=e.path,a=e.http,s=t.id;return a.post("/api/invitation/"+s+"/makeNeverExpire").then(n.success).catch(n.error)},{success:[f,(0,s.set)((0,r.state)(n),i.default.succeeded)],error:[(0,s.set)((0,r.state)(n),i.default.failed)]}]],resetInvitationNeverExpire:[(0,s.set)((0,r.state)(n),i.default.inProgress),[function(e){var t=e.props,n=e.path,a=e.http,s=t.id;return a.post("/api/invitation/"+s+"/resetNeverExpire").then(n.success).catch(n.error)},{success:[f,(0,s.set)((0,r.state)(n),i.default.succeeded)],error:[(0,s.set)((0,r.state)(n),i.default.failed)]}]]},getState:function(){return{invitationInfo:{},showInvitationDialog:!1,fetchInvitationInfoStatus:i.default.initial}}}}).call(p,"views/v2/modules/messages/InvitationInfoStore.js")},function(e,s,r){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["messages.showInvitationEventDialog"],{raw:{value:Object.freeze(["messages.showInvitationEventDialog"])}})),n=r(2),a=r(1);s.default={name:e,depends:[],signals:{openInvitationEventDialog:[function(e){var t=e.props,n=e.state,a=t.eventId,s=n.get("currentHost");a&&(n.set(["messages","invitationEventUrl"],"https://"+s+"/events/"+a),n.set(["messages","showInvitationEventDialog"],!0))}],closeInvitationEventDialog:[(0,n.set)((0,a.state)(t),!1)]},getState:function(){return{invitationEventUrl:"",showInvitationEventDialog:!1}}}}).call(s,"views/v2/modules/messages/InvitationEventStore.js")},function(e,E,C){"use strict";(function(e){Object.defineProperty(E,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=_(["messages.beALobby.uploadImage.open"],["messages.beALobby.uploadImage.open"]),n=_(["messages.beALobby.updateStatus"],["messages.beALobby.updateStatus"]),s=_(["messages.beALobby.displayBeALobbyDialog"],["messages.beALobby.displayBeALobbyDialog"]),r=_(["value"],["value"]),o=_(["messages.beALobby.form"],["messages.beALobby.form"]),i=_(["messages.beALobby.isNew"],["messages.beALobby.isNew"]),c=_(["isNew"],["isNew"]),u=C(2),l=C(1),d=C(41),f=m(C(24)),p=m(C(15)),g=m(C(7)),h=m(C(28));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y=(0,p.default)({initial:null,succeeded:null,failed:null,inProgress:null}),b=["messages","beALobby","form"],w=["messages","beALobby","uploadImage"];function S(){return{open:!1,top:0,left:0,imageFile:"",imageWidth:0,imageHeight:0,originWidth:0,originHeight:0,cropWidth:0,cropHeight:0,maxCropWidth:0,maxCropHeight:0}}function I(){return(0,d.Form)({avatar:{value:"",validations:[],errorMessages:[]},name:{value:"",validations:["isValue"],errorMessages:["error_nameIsRequired"],isRequired:!0},description:{value:"",validations:["isValue"],errorMessages:["error_descriptionIsRequired"],isRequired:!0},tags:{value:[]},isLive:{value:!1,isRequired:!1},isPrivate:{value:!1,isRequired:!1}})}E.default={name:e,depends:[],signals:{openUploadImage:[function(e){var t=e.props,n=S();e.state.merge([].concat(w),a({},n,t,{open:!0}))}],closeUploadImage:[(0,u.set)((0,l.state)(t),!1)],suggestTag:[function(e){var t=e.props,n=e.http,a=e.path,s=t.q;return n.get("/api/searchSuggest",{q:s,t:"tags"}).then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.state,a=t.result.candidates;n.set("messages.beALobby.tagSuggestions",a)}],error:[]}],changeTag:[function(e){var t=e.props;return{field:[].concat(b,["tags"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),saveImage:[function(e){var t=e.props;return{field:[].concat(b,["avatar"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),changeName:[function(e){var t=e.props;return{field:[].concat(b,["name"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),changeDescription:[function(e){var t=e.props;return{field:[].concat(b,["description"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),changeIsLive:[function(e){var t=e.props;return{field:[].concat(b,["isLive"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),changeIsPrivate:[function(e){var t=e.props;return{field:[].concat(b,["isPrivate"]),value:t.value,touched:!0}}].concat(v(d.chains.fieldChanged)),submitLobbyRequest:f.default.EmailRequired([function(e){return e.props.formPath?{}:{formPath:[].concat(b)}}].concat(v(d.chains.formValidated),[function(e){var t=e.state,n=e.path,a=t.get(b);return(0,d.isValidForm)(a)?n.yes():n.no()},{yes:[(0,u.set)((0,l.state)(n),y.inProgress),[function(e){var t=e.state,n=e.http,a=e.path,s=e.props,r=t.get(b),o=s.workspaceId,i=h.default.getWorkspace(t,o);if(!i)return a.error();if((0,d.isValidForm)(r)){var c=Object.keys(r).reduce(function(e,t){return e[t]=r[t].value,e},{});if(c.tags=c.tags.map(function(e){return{id:e.id,type:e.type}}),c.workspaceId=o,t.get("messages.beALobby.isNew"))return n.post("/api/workspaces/"+o+"/channels_lobby",c).then(a.createSuccess).catch(a.error);var u=g.default.getChannelId(t);return c.channelId=u,n.post("/api/channels/"+u+"/convertToLobby",c).then(function(e){return a.convertSuccess({resp:e,isTicket:""===i.organizationId})}).catch(a.error)}return a.dummy()},{convertSuccess:[(0,u.set)((0,l.state)(n),y.succeeded),function(e){var t,n,a,s=e.props,r=e.state,o=e.controller,i=s.resp,c=i.result,u=i.status,l=s.isTicket;200===u&&c&&(l?(t=g.default.getChannelId(r),r.set("messages.channels."+t+".ticket",c),o.getSignal("header.showMessage")({message:"be_a_lobby_request_sent",type:"info"})):(n=c.lobbyChannel,a=c.lobbyCount,o.getSignal("messages.channelCreate")(n),o.getSignal("messages.channelSelect")({channelId:n.id,workspaceId:n.workspaceId}),o.getSignal("messages.handleChannelScroll")(),o.getSignal("messages.syncLobbyCount")({count:a,workspaceId:n.workspaceId})))},(0,u.set)((0,l.state)(s),!1)],createSuccess:[(0,u.set)((0,l.state)(n),y.succeeded),function(e){var t,n,a=e.props,s=e.controller,r=a.result;200===a.status&&r&&(t=r.lobbyChannel,n=r.lobbyCount,s.getSignal("messages.channelCreate")(t),s.getSignal("messages.channelSelect")({channelId:t.id,workspaceId:t.workspaceId}),s.getSignal("messages.handleChannelScroll")(),s.getSignal("messages.syncLobbyCount")({count:n,workspaceId:t.workspaceId}))},(0,u.set)((0,l.state)(s),!1)],error:[(0,u.set)((0,l.state)(n),y.failed),function(e){var t=e.props,n=e.controller,a="submitted_failed_"+t.result.errorCode;n.getSignal("header.showMessage")({message:a})}],dummy:[]}]],no:[(0,u.set)((0,l.state)(n),y.failed)]}])),changeDisplayBeALobbyDialog:[(0,u.when)((0,l.props)(r),function(e){return e}),{true:[(0,u.set)((0,l.state)(o),I()),(0,u.set)((0,l.state)(i),(0,l.props)(c))],false:[]},(0,u.set)((0,l.state)(s),(0,l.props)(r))]},getState:function(){return{beALobby:{updateStatus:y.initial,displayBeALobbyDialog:!1,uploadImage:S(),tagSuggestions:[],form:I(),isNew:!1}}}}}).call(E,"views/v2/modules/messages/BeALobbyStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=[].concat(["messages"],["memberOptionKey"]);t.default={name:e,depends:[],signals:{clearShowInfo:[function(e){e.state.set(a,"")}],setMemberOptionKey:[function(e){var t=e.state,n=e.props.userId;t.set(a,n)}]},getState:function(){return{memberOptionKey:""}}}}).call(t,"views/v2/modules/messages/MemberOptionStore.js")},function(e,i,c){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["messages.setRoleInfo.setRoleStatus"],{raw:{value:Object.freeze(["messages.setRoleInfo.setRoleStatus"])}})),n=r(c(15)),a=c(1),s=c(2),u=r(c(14));function r(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)({initial:null,succeeded:null,failed:null,inProgress:null}),l=["messages","setRoleInfo"];i.default={name:e,depends:[],signals:{toggleSetRoleDialog:[function(e){var t=e.controller,n=e.props,a=e.state,s=n.userId;s||t.getSignal("messages.changeSelectedRole")({role:""}),a.set([].concat(l,["userId"]),s)}],changeSelectedRole:[function(e){var t=e.props;e.state.set([].concat(l,["selectedRole"]),t.role)}],setChannelMemberRole:[(0,s.set)((0,a.state)(t),o.inProgress),[function(e){var t=e.props,n=e.state,a=e.http,s=e.path,r=t.channelId,o=t.userId,i=n.get([].concat(l,["selectedRole"])),c=u.default.getMember(n,r,o);return(!c||c.role!==i)&&i?a.post("/api/channels/"+r+"/members/"+o+"/setRole",{role:i}).then(s.success).catch(s.error):s.success()},{success:[(0,s.set)((0,a.state)(t),o.succeeded),function(e){var t=e.props,n=e.controller,a=e.state,s=t.result,r=t.status;a.set([].concat(l,["userId"]),""),200===r&&s&&n.getSignal("messages.channelMemberAdd")(s)}],error:[(0,s.set)((0,a.state)(t),o.failed)]}]]},getState:function(){return{setRoleInfo:{userId:"",selectedRole:""}}}}}).call(i,"views/v2/modules/messages/SetRoleStore.js")},function(e,T,R){"use strict";(function(e){Object.defineProperty(T,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=I(["messages.exploreInfo.",".searchStatus"],["messages.exploreInfo.",".searchStatus"]),n=I(["workspaceId"],["workspaceId"]),a=I(["messages.exploreInfo.",".pageTicker"],["messages.exploreInfo.",".pageTicker"]),s=I(["messages.exploreInfo.",".liveOnly"],["messages.exploreInfo.",".liveOnly"]),r=I(["messages.exploreInfo.",".isExploring"],["messages.exploreInfo.",".isExploring"]),i=I(["page"],["page"]),c=I(["messages.exploreInfo.",".joinLobbyStatus.",""],["messages.exploreInfo.",".joinLobbyStatus.",""]),u=I(["channelId"],["channelId"]),l=I(["display"],["display"]),d=I(["messages.entitlementRequired.eventId"],["messages.entitlementRequired.eventId"]),f=I(["eventId"],["eventId"]),p=I(["messages.entitlementRequired.display"],["messages.entitlementRequired.display"]),g=I(["messages.kickedFromChannel.display"],["messages.kickedFromChannel.display"]),h=I(["messages.exploreInfo.",".lobbyType"],["messages.exploreInfo.",".lobbyType"]),m=I(["value"],["value"]),v=R(2),_=R(1),y=S(R(5)),b=S(R(19)),w=S(R(3));function S(e){return e&&e.__esModule?e:{default:e}}function I(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function E(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var C=["messages","exploreInfo"];function O(){return{isExploring:!1,searchQuery:"",searchStatus:w.default.initial,joinLobbyStatus:{},searchResult:{items:[],currentPage:0,pages:[],total:0},pageTicker:0,lobbyCount:{public:0,live:0,event:0,total:0},lobbyType:"public",liveOnly:!1}}function k(e){var t=e.state,n=e.props,a=e.http,s=e.path,r=n.page,o=n.workspaceId,i=t.get([].concat(C,[o,"searchQuery"])),c=t.get([].concat(C,[o,"lobbyType"])),u=[];return u.push("q:"+i),a.get("/api/c",{k:JSON.stringify(u),page:r,lt:c,workspaceId:o}).then(s.success).catch(s.error)}function M(e){var t,n,a,s,r,o,i=e.state,c=e.props,u=c.result;200===c.status&&u&&(t=i.get([].concat(C,[c.workspaceId,"searchResult"])),n=u.items,a=u.currentPage,s=u.pages,r=u.total,t&&n&&0<a?(o=t.items||[],i.set([].concat(C,[c.workspaceId,"searchResult"]),{items:[].concat(E(o),E(n)),currentPage:a,pages:s,total:t.total})):i.set([].concat(C,[c.workspaceId,"searchResult"]),{items:n,currentPage:a,pages:s,total:r}))}T.default={name:e,depends:[],signals:{openExplore:[(0,v.set)((0,_.state)(t,(0,_.props)(n)),w.default.inProgress),(0,v.set)((0,_.state)(a,(0,_.props)(n)),0),(0,v.set)((0,_.state)(s,(0,_.props)(n)),!1),(0,v.set)((0,_.state)(r,(0,_.props)(n)),!0),[k,{success:[M,(0,v.set)((0,_.state)(t,(0,_.props)(n)),w.default.succeeded)],error:[(0,v.set)((0,_.state)(t,(0,_.props)(n)),w.default.failed)]}]],stopExplore:[(0,v.set)((0,_.state)(r,(0,_.props)(n)),!1)],searchChannel:[(0,v.set)((0,_.state)(t,(0,_.props)(n)),w.default.inProgress),(0,v.set)((0,_.state)(a,(0,_.props)(n)),(0,_.props)(i)),[k,{success:[M,(0,v.set)((0,_.state)(t,(0,_.props)(n)),w.default.succeeded)],error:[(0,v.set)((0,_.state)(t,(0,_.props)(n)),w.default.failed)]}]],channelSelect:[function(e){var t=e.props,n=e.state,a=t.channelId,s=t.workspaceId;a&&(n.set([].concat(C,[s,"isExploring"]),!1),n.set([].concat(C,[s,"searchQuery"]),""))}],onSearchQueryChanged:[function(e){var t=e.props;e.state.set([].concat(C,[t.workspaceId,"searchQuery"]),t.query)}],onExploredLobbySelect:[function(e){var t=e.props,n=e.state,a=e.controller,s=t.channel;y.default.getChannel(n,s.id)?(a.getSignal("messages.channelSelect")({channelId:s.id,workspaceId:s.workspaceId}),a.getSignal("messages.handleChannelScroll")()):a.getSignal("messages.joinLobby")({channelId:s.id})}],joinLobby:[(0,v.set)((0,_.state)(c,(0,_.props)(n),(0,_.props)(u)),w.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.channelId;return n.post("/api/channels/"+s+"/join",{}).then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&a.forEach(function(e){n.getSignal("messages.channelCreate")(e),"live"!==e.type&&(n.getSignal("messages.channelSelect")({channelId:e.id,workspaceId:e.workspaceId}),n.getSignal("messages.handleChannelScroll")())})},(0,v.set)((0,_.state)(c,(0,_.props)(n),(0,_.props)(u)),w.default.succeeded)],error:[function(e){var t,n=e.controller,a=e.props,s=a.result,r=s.errorCode,o=s.target,i=a.status;400===i&&"ChannelMemberWasKicked"===r&&n.getSignal("messages.toggleKickedFromChannel")({display:!0}),400===i&&"EntitlementRequired"===r&&(t=o||null,n.getSignal("messages.toggleEntitlementRequired")({display:!0,eventId:t}))},(0,v.set)((0,_.state)(c,(0,_.props)(n),(0,_.props)(u)),w.default.failed)]}]],connectionOpen:[function(e){var t=e.props,n=e.state,a=t.lobbyCounts,s=t.workspaces,r={};a.forEach(function(e){var t=O();r[e.workspaceId]=o({},t,{lobbyCount:e})}),s.forEach(function(e){r[e.id]||(r[e.id]=O())}),n.set(C,r)}],workspaceCreate:[function(e){var t=e.props,n=e.state,a={};a[t.id]=O(),n.merge(C,a)}],setLiveOnly:[function(e){var t=e.props,n=e.state,a=e.controller,s=t.workspaceId,r=t.value;n.set([].concat(C,[s,"liveOnly"]),r),a.getSignal("messages.searchChannel")({page:0,liveOnly:r,workspaceId:s})}],syncLobbyCount:[function(e){var t=e.props,n=e.state,a=t.count,s=t.workspaceId;n.set([].concat(C,[s,"lobbyCount","total"]),a)}],toggleEntitlementRequired:[(0,v.when)((0,_.props)(l),function(e){return e}),{true:[(0,v.set)((0,_.state)(d),(0,_.props)(f))],false:[(0,v.set)((0,_.state)(d),null)]},(0,v.set)((0,_.state)(p),(0,_.props)(l))],toggleKickedFromChannel:[(0,v.set)((0,_.state)(g),(0,_.props)(l))],switchLobbyType:[(0,v.set)((0,_.state)(h,(0,_.props)(n)),(0,_.props)(m)),function(e){var t=e.controller,n=e.props.workspaceId;t.getSignal("messages.searchChannel")({page:0,workspaceId:n})}],openSupportTickets:[function(e){var t=e.props,n=e.state,a=t.workspaceId;n.set([].concat(C,[a,"isExploring"]),!1),n.set([].concat(C,[a,"searchQuery"]),"")}]},getState:function(){return{exploreInfo:{},entitlementRequired:{display:!1,eventId:null},kickedFromChannel:{display:!1}}},getExploreInfo:function(e,t){var n=(n=1<arguments.length&&void 0!==t?t:"")||b.default.getWorkspaceId(e);return e.get([].concat(C,[n]))}}}).call(T,"views/v2/modules/messages/ExploreLobbyStore.js")},function(e,p,g){"use strict";(function(e){Object.defineProperty(p,"__esModule",{value:!0});var t=d(["value"],["value"]),n=d(["messages.channelTags.tags"],["messages.channelTags.tags"]),a=d(["tags"],["tags"]),s=d(["messages.channelTags.display"],["messages.channelTags.display"]),r=d(["messages.channelTags.updateStatus"],["messages.channelTags.updateStatus"]),o=g(2),i=g(1),c=l(g(15)),u=l(g(7));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=(0,c.default)({initial:null,succeeded:null,failed:null,inProgress:null});p.default={name:e,depends:[],signals:{toggleChannelTags:[(0,o.when)((0,i.props)(t),function(e){return e}),{true:[(0,o.set)((0,i.state)(n),(0,i.props)(a))],false:[(0,o.set)((0,i.state)(n),[])]},(0,o.set)((0,i.state)(s),(0,i.props)(t))],changeChannelTags:[(0,o.set)((0,i.state)(n),(0,i.props)(t))],requestChannelTagsChange:[(0,o.set)((0,i.state)(r),f.inProgress),function(e){var t=e.state,n=e.http,a=e.path,s=t.get("messages.channelTags.tags"),r=u.default.getChannelId(t);return n.post("/api/channels/"+r+"/setTags",{tags:s}).then(a.success).catch(a.error)},{success:[(0,o.set)((0,i.state)(r),f.succeeded),(0,o.set)((0,i.state)(n),[]),(0,o.set)((0,i.state)(s),!1)],error:[(0,o.set)((0,i.state)(r),f.failed)]}]},getState:function(){return{channelTags:{display:!1,tags:[],updateStatus:f.initial}}}}}).call(p,"views/v2/modules/messages/ChannelTagsStore.js")},function(e,v,_){"use strict";(function(e){Object.defineProperty(v,"__esModule",{value:!0});var t=m(["messages.addHostDialog.show"],["messages.addHostDialog.show"]),n=m(["messages.addHostDialog.selectedSuggestUser"],["messages.addHostDialog.selectedSuggestUser"]),a=m(["messages.addHostDialog.hide"],["messages.addHostDialog.hide"]),s=m(["messages.addHostDialog.suggestStatus"],["messages.addHostDialog.suggestStatus"]),r=m(["messages.addHostDialog.suggestUsersList"],["messages.addHostDialog.suggestUsersList"]),o=m(["messages.addHostDialog.updateStatus"],["messages.addHostDialog.updateStatus"]),i=m(["messages.removeHostDialog.updateStatus"],["messages.removeHostDialog.updateStatus"]),c=m(["messages.removeHostDialog.show"],["messages.removeHostDialog.show"]),u=m(["messages.removeHostDialog.channelId"],["messages.removeHostDialog.channelId"]),l=m(["messages.removeHostDialog.userId"],["messages.removeHostDialog.userId"]),d=_(2),f=_(1),p=h(_(3)),g=h(_(7));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}v.default={name:e,depends:[],signals:{openAddHostDialog:[function(e){var t=e.state,n=g.default.getChannelId(t),a=t.get("messages.channels"),s=t.get("messages.channelMembers")[a[n].liveChannelId],r=t.get("messages.users"),o=Object.values(s).filter(function(e){var t=e.role;return"admin"===t||"moderator"===t||"owner"===t}).map(function(e){var t=e.userId;return r[t]});t.set("messages.addHostDialog.selectedSuggestUser",o)},(0,d.set)((0,f.state)(t),!0)],openRemoveHostDialog:[function(e){var t=e.state,n=e.props,a=n.channelId,s=n.userId,r=n.name;t.set("messages.removeHostDialog",{show:!0,channelId:a,userId:s,name:r})}],closeRemoveHostDialog:[function(e){e.state.set("messages.removeHostDialog",{show:!1,channelId:"",userId:""})}],closeAddHostDialog:[(0,d.set)((0,f.state)(t),!1)],addSelectUser:[function(e){var t=e.props,n=e.state,a=n.get("messages.addHostDialog.selectedSuggestUser");n.set("messages.addHostDialog.selectedSuggestUser",[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a),[t]))}],cancelSuggestUsers:[(0,d.set)((0,f.state)(n),null)],hideSearchBar:[(0,d.set)((0,f.state)(a),!0)],showSearchBar:[(0,d.set)((0,f.state)(a),!1)],suggestUsers:[(0,d.set)((0,f.state)(s),p.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path,s=t.v;return n.get("/api/userSuggest",{q:s,limit:5}).then(a.success).catch(a.error)},{success:[(0,d.set)((0,f.state)(s),p.default.succeeded),function(e){var t=e.props,n=e.state,a=t.result.candidates;n.set("messages.addHostDialog.suggestUsersList",a)}],error:[(0,d.set)((0,f.state)(s),p.default.failed)]}]],clearSuggestUser:[(0,d.set)((0,f.state)(r),null)],addHost:[(0,d.set)((0,f.state)(o),p.default.inProgress),[function(e){var t=e.state,n=e.http,a=e.path,s=e.controller,r=t.get("messages.addHostDialog.selectedSuggestUser").map(function(e){return e.id}),o=g.default.getChannelId(t);if(r&&0<r.length){var i=t.get("messages.channels"),c=t.get("messages.channelMembers")[i[o].liveChannelId],u=Object.values(c).filter(function(e){var t=e.role;return"admin"===t||"moderator"===t||"owner"===t}).map(function(e){return e.userId});return n.post("/api/channels/"+o+"/members",{userIds:r.filter(function(t){return-1===u.findIndex(function(e){return e===t})}),role:"admin"}).then(a.success).catch(a.error)}return s.getSignal("header.showMessage")({message:"should_select_user"}),a.error()},{success:[(0,d.set)((0,f.state)(o),p.default.succeeded),(0,d.set)((0,f.state)(t),!1),(0,d.set)((0,f.state)(r),null),(0,d.set)((0,f.state)(n),null),(0,d.set)((0,f.state)(a),!1)],error:[(0,d.set)((0,f.state)(o),p.default.failed)]}]],removeHost:[(0,d.set)((0,f.state)(i),p.default.inProgress),[function(e){var t=e.props,n=e.path,a=e.http,s=t.userId,r=t.channelId;return s&&r?a.post("/api/channels/"+r+"/members/"+s+"/setRole",{role:"member"}).then(n.success).catch(n.error):n.error()},{success:[(0,d.set)((0,f.state)(i),p.default.succeeded),(0,d.set)((0,f.state)(c),!1),(0,d.set)((0,f.state)(u),""),(0,d.set)((0,f.state)(l),"")],error:[(0,d.set)((0,f.state)(i),p.default.failed)]}]]},getState:function(){return{addHostDialog:{show:!1,suggestUsersList:null,selectedSuggestUser:[],updateStatus:"",suggestStatus:"",hide:!1},removeHostDialog:{updateStatus:"",show:!1,channelId:"",userId:"",name:""}}}}}).call(v,"views/v2/modules/messages/AddHostStore.js")},function(e,O,k){"use strict";(function(e){Object.defineProperty(O,"__esModule",{value:!0});var t=S(["messages.addVideoDialog.type"],["messages.addVideoDialog.type"]),n=S(["messages.addVideoDialog.show"],["messages.addVideoDialog.show"]),a=S(["messages.addVideoDialog.cloudType"],["messages.addVideoDialog.cloudType"]),s=S(["messages.addVideoDialog.error"],["messages.addVideoDialog.error"]),r=S(["messages.addVideoDialog.url"],["messages.addVideoDialog.url"]),o=S(["messages.addVideoDialog.readyUrl"],["messages.addVideoDialog.readyUrl"]),i=S(["messages.addVideoDialog.streamData"],["messages.addVideoDialog.streamData"]),c=S(["messages.streamInfoDialog.show"],["messages.streamInfoDialog.show"]),u=S(["value"],["value"]),l=S(["url"],["url"]),d=S(["messages.addRecordDialog.status"],["messages.addRecordDialog.status"]),f=S(["messages.addRecordDialog.percentage"],["messages.addRecordDialog.percentage"]),p=S(["messages.showStream"],["messages.showStream"]),g=S(["messages.showRecords"],["messages.showRecords"]),h=S(["messages.selectedRecord"],["messages.selectedRecord"]),m=k(2),v=k(1),_=w(k(7)),y=w(k(8)),b=w(k(3));function w(e){return e&&e.__esModule?e:{default:e}}function S(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var I=/(.*\.?|^)(youtube|youtu)\.(com|be)/i,E=/(.*\.?|^)(youtube|youtu|vimeo|qq)\.(com|be)/i,C={};O.default={name:e,depends:[],signals:{openAddStreamDialog:[(0,m.set)((0,v.state)(t),"stream"),(0,m.set)((0,v.state)(n),!0),(0,m.set)((0,v.state)(a),"tencent")],openAddRecordDialog:[(0,m.set)((0,v.state)(t),"record"),(0,m.set)((0,v.state)(n),!0)],closeAddVideoDialog:[(0,m.set)((0,v.state)(n),!1),(0,m.set)((0,v.state)(s),""),(0,m.set)((0,v.state)(r),""),(0,m.set)((0,v.state)(o),""),(0,m.set)((0,v.state)(i),null)],closeStreamInfoDialog:[(0,m.set)((0,v.state)(c),!1)],setStreamLoading:[function(e){var t=e.state,n=e.props;t.set("messages.addVideoDialog.streamLoading",n.value)}],previewVideo:[function(e){var t=e.props,n=e.state,a=e.path,s=t.url;return!1===("record"===n.get("messages.addVideoDialog.type")?E:I).test(s)?(n.set("messages.addVideoDialog.error","Invalid "+s),a.no()):(n.unset("messages.addVideoDialog.error"),n.set("messages.addVideoDialog.url",s),a.yes({url:s}))},{yes:[function(e){var t=e.props,n=e.messages,a=e.state,s=a.get("messages.addVideoDialog.type"),r=_.default.getChannelId(a);n.httpPreviewStream(t,r,s)}],no:[]}],addStreamPreview:[function(e){var t=e.props,n=e.state,a=t.result;n.set("messages.addVideoDialog.streamData",a)}],previewStreamFail:[(0,m.set)((0,v.state)(s),"preview_failed")],changeStreamUrl:[(0,m.set)((0,v.state)(r),(0,v.props)(u))],changeStreamReadyUrl:[(0,m.set)((0,v.state)(o),(0,v.props)(l))],addStream:[function(e){var t=e.props,n=e.http,a=e.path,s=e.state,r=t.channelId,o=t.type,i=t.cloudType,c=s.get("messages.addVideoDialog.readyUrl");return n.post("/api/channels/"+r+"/stream",{url:c,type:o,cloudType:i}).then(a.success).catch(a.error)},{success:[(0,m.set)((0,v.state)(n),!1),function(e){var t,n,a,s=e.props,r=e.state;"rtmp"===s.type&&(n=(t=s.result).endpoint,a=t.stream,r.set("messages.streamInfoDialog.endpoint",n),r.set("messages.streamInfoDialog.stream",a),r.set("messages.streamInfoDialog.show",!0))}],error:[]}],addRecord:[function(e){var t=e.state,n=e.http,a=e.path,s=e.props.channelId,r=t.get("messages.addVideoDialog.readyUrl");return n.post("/api/channels/"+s+"/record",{url:r}).then(a.success).catch(a.error)},{success:[(0,m.set)((0,v.state)(n),!1)],error:[]}],removeRecord:[function(e){var t=e.http,n=e.props,a=e.path,s=n.index,r=n.channelId;return t.post("/api/channels/"+r+"/record/remove",{index:s}).then(a.success).catch(a.error)},{success:[],error:[]}],shareRecord:[function(e){var t=e.http,n=e.props,a=e.path,s=n.index,r=n.channelId;return t.post("/api/channels/"+r+"/record/share",{index:s}).then(a.success).catch(a.error)},{success:[function(e){var t,n,a=e.props,s=e.controller;""===a.result.url?s.getSignal("header.showMessage")({message:"channel_record_processing"}):(t=document.createElement("textarea"),n=new URL(window.location.href),t.value=n.protocol+"//"+n.host+a.result.url,t.setAttribute("readonly",""),t.style={position:"fixed",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),s.getSignal("header.showMessage")({message:"channel_record_share_link_copied",type:"info"}))}],error:[]}],uploadRecord:[[(0,m.set)((0,v.state)(d),b.default.inProgress)],function(e){var t=e.props,n=e.http,a=e.path;return n.post("/api/resumableUpload",{fileName:t.upload.file.name,fileType:t.upload.file.type,fileSize:t.upload.file.size,private:!1}).then(a.success).catch(a.error)},{success:[function(e){var t,n,a,s=e.state,r=e.props,o=e.messages;t=r.upload.file,n=function(e){s.set("messages.addRecordDialog.size",r.upload.file.size),s.set("messages.currentUpload",r),s.set("messages.currentUpload.upload.videoDuration",e);var t=_.default.getChannelId(s),n=s.get("messages.currentUpload");o.uploadRecord(t,n.upload,r.result.location,0)},(a=document.createElement("video")).preload="metadata",a.onloadedmetadata=function(){var e=a.src,t=a.duration;a.src="",window.URL.revokeObjectURL(e),n(t)},a.src=URL.createObjectURL(t)}],error:[(0,m.set)((0,v.state)(d),b.default.initial)]}],retryUploadRecord:[[(0,m.set)((0,v.state)(d),b.default.inProgress)],function(e){var t=e.state,n=e.http,a=e.path,s=t.get("messages.currentUpload").result.location,s=encodeURIComponent(s);return n.get("/api/resumableUpload?location="+s).then(a.success).catch(a.error)},{success:[function(e){var t=e.state,n=e.props,a=e.messages,s=_.default.getChannelId(t),r=t.get("messages.currentUpload"),o=n.result.end;a.uploadRecord(s,r.upload,r.result.location,o)}],error:[(0,m.set)((0,v.state)(d),b.default.failed)]}],uploadRecordFail:[[(0,m.set)((0,v.state)(d),b.default.failed)]],uploadRecordUpdateProgress:[function(e){var t=e.state,n=e.props,a=t.get("messages.addRecordDialog.size"),s=n.loaded/a*100;t.set("messages.addRecordDialog.percentage",s.toFixed(0))}],uploadRecordComplete:[(0,m.set)((0,v.state)(d),b.default.succeeded),(0,m.set)((0,v.state)(n),!1),function(e){e.controller.getSignal("header.showMessage")({message:"upload_record_succeed",type:"info"})}],uploadRecordStart:[(0,m.set)((0,v.state)(d),b.default.inProgress),(0,m.set)((0,v.state)(f),"0.00")],removeStream:[function(e){var t=e.props,n=e.http,a=e.path,s=t.channelId;return n.post("/api/channels/"+s+"/stream",{type:"remove"}).then(a.success).catch(a.error)},{success:[],error:[]}],reloadStream:[function(e){var t=e.http,n=e.path,a=e.props.channelId;return t.get("/api/channels/"+a+"/stream").then(n.success).catch(n.error)},{success:[function(e){var t=e.props,n=e.state,a=t.result,s=t.channelId;n.set("messages.channels."+s+".stream",a)}],error:[]}],channelSelect:[function(e){var t=e.state,n=e.props,a=e.controller,s=t.get("messages.channels"),r=n.channelId,o=void 0;s[r]&&(o=s[r].liveChannelId),o&&s[o]&&(s[o].stream?setTimeout(function(){a.getSignal("messages.toggleStream")({value:!0})}):s[o].records&&0!==s[o].records.length&&setTimeout(function(){a.getSignal("messages.toggleRecords")({value:!0})}),t.set("messages.selectedRecord",null))}],toggleStream:[(0,m.set)((0,v.state)(p),(0,v.props)(u)),(0,m.set)((0,v.state)(g),!1)],toggleRecords:[(0,m.set)((0,v.state)(g),(0,v.props)(u)),(0,m.set)((0,v.state)(p),!1)],selectRecord:[(0,m.set)((0,v.state)(h),(0,v.props)(u))],changeCloudType:[(0,m.set)((0,v.state)(a),(0,v.props)(u))]},getServices:function(i){return{httpPreviewStream:function(e,t,n){i.getSignal("messages.setStreamLoading")({value:!0});var a="/api/channels/"+t+"/"+n+"/preview",s=e.url,r=new XMLHttpRequest;r.open("POST",y.default.REQUEST_BASE_URL+a,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.timeout=0,r.addEventListener("readystatechange",function(){r&&4===r.readyState&&(i.getSignal("messages.setStreamLoading")({value:!1}),200<=r.status&&r.status<300?(i.getSignal("messages.changeStreamReadyUrl")({url:s}),i.getSignal("messages.addStreamPreview")({result:JSON.parse(r.response)})):0<r.status&&i.getSignal("messages.previewStreamFail")({error:r.responseText}))}),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify({url:s}))},uploadRecord:function(e,t,n,a){var s=t.file,r=new XMLHttpRequest;r.open("POST",y.default.REQUEST_BASE_URL+"/api/channels/"+e+"/record/upload",!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.timeout=0,r.upload.addEventListener("progress",function(e){return i.getSignal("messages.uploadRecordUpdateProgress")({loaded:e.loaded+a})}),r.addEventListener("timeout",function(){return i.getSignal("messages.uploadRecordFail")({id:t.id})}),r.addEventListener("error",function(){return i.getSignal("messages.uploadRecordFail")({id:t.id,err:"network_error"})}),r.addEventListener("readystatechange",function(){r&&4===r.readyState&&(200<=r.status&&r.status<300?i.getSignal("messages.uploadRecordComplete")():0<r.status&&i.getSignal("messages.uploadRecordFail")())});var o=new FormData;o.append("fileName",s&&s.name||""),o.append("fileType",s&&s.type||""),o.append("size",s&&s.size-a||0),o.append("location",n),o.append("uploadMode","resumable"),o.append("offset",a),o.append("videoDuration",t.videoDuration),o.append("file",s.slice(a)),r.send(o),C[t.id]=r,i.getSignal("messages.uploadRecordStart")()}}},getState:function(){return{addVideoDialog:{type:"",show:!1,streamLoading:!1,url:"",readyUrl:"",cloudType:""},addRecordDialog:{show:!1,size:null,status:b.default.initial,percentage:""},streamInfoDialog:{show:!1,endpoint:"",stream:""},showStream:!0,showRecords:!1,selectedRecord:null}}}}).call(O,"views/v2/modules/messages/AddStreamStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:e,depends:[],signals:{ipcSyncState:[function(e){var t=e.state.get(),n=t.locale,a=t.utcOffset,s=t.cookies,r=t.loginUser;window.sendSignal&&window.sendSignal("ipc_syncState",{locale:n,utcOffset:a,cookies:s,loginUser:r})}]},getServices:function(e){e.on("initialized",function(){e.getSignal("messages.ipcSyncState")()})},getState:function(){return{}}}}).call(t,"views/v2/modules/messages/IpcStore.js")},function(e,l,d){"use strict";(function(e){Object.defineProperty(l,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=u(["messages.recorder.processing"],["messages.recorder.processing"]),n=u(["messages.recorder.recordedTime"],["messages.recorder.recordedTime"]),a=u(["messages.recorder.displayPopup"],["messages.recorder.displayPopup"]),s=u(["id"],["id"]),r=u(["messages.recorder.recording"],["messages.recorder.recording"]),i=d(2),c=d(1);function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}l.default={name:e,depends:[],signals:{record:[function(e){var t=e.messages,n=e.state,a=e.props;n.set("messages.recorder.recordedTime",0),n.set("messages.recorder.channelId",a.channelId),n.set("messages.recorder.parentMessageId",a.parentMessageId),t.recorder.record()}],finishRecord:[function(e){e.messages.recorder.finish()}],cancelRecord:[function(e){e.messages.recorder.cancel()}],postRecord:[function(e){var t=e.state,n=e.controller,a=e.props,s=t.get("messages.recorder.channelId"),r=t.get("messages.recorder.parentMessageId");n.getSignal("messages.uploadAttachment")(o({},a,{channelId:s,content:"",parentMessageId:r}))}],closeRecord:[(0,i.set)((0,c.state)(t),!1),(0,i.set)((0,c.state)(n),0),(0,i.set)((0,c.state)(a),null)],showRecordPopup:[(0,i.set)((0,c.state)(a),(0,c.props)(s))],hideRecordPopup:[(0,i.set)((0,c.state)(a),null)],onStartedRecording:[(0,i.set)((0,c.state)(r),!0)],onFinishedRecording:[(0,i.set)((0,c.state)(t),!0),(0,i.set)((0,c.state)(r),!1)],onCanceledRecording:[(0,i.set)((0,c.state)(r),!1),(0,i.set)((0,c.state)(n),0),(0,i.set)((0,c.state)(a),null)],onRecordedTimeUpdate:[function(e){var t=e.state,n=e.props,a=e.controller,s=n.timeSpan,r=t.get("messages.recorder.recordedTime");t.set("messages.recorder.recordedTime",r+s),60<r+2*s&&a.getSignal("messages.finishRecord")()}]},getServices:function(n){var e=new(d(303).default);return e.on("time-update",function(e){n.getSignal("messages.onRecordedTimeUpdate")({timeSpan:e})}),e.on("started",function(){n.getSignal("messages.onStartedRecording")()}),e.on("finished",function(){n.getSignal("messages.onFinishedRecording")()}),e.on("canceled",function(){n.getSignal("messages.onCanceledRecording")()}),e.on("new-record",function(e,t){e.name="",n.getSignal("messages.closeRecord")(),n.getSignal("messages.postRecord")({upload:{file:e,voice:!0,duration:t,dataUrl:null,width:null,height:null,filename:"voice-message-"+(new Date).getTime()}})}),{recorder:e}},getState:function(){return{recorder:{recording:!1,recordedTime:0,channelId:null,parentMessageId:null,processing:!1,displayPopup:null}}}}}).call(l,"views/v2/modules/messages/AudioRecorderStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=c(n(76)),o=c(n(304)),i=n(29);function c(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i.EventEmitter),a(l,[{key:"stop",value:function(){this.source.disconnect(),this.source=null,this.processor.disconnect(),this.processor=null,this.destination.disconnect(),this.destination=null,this.audioInput.disable(),this.audioInput=null,this.audioContext.close(),this.audioContext=null}},{key:"record",value:function(){var n=this;this.audioInput=new r.default,this.audioInput.enable(function(e,t){e?console.log(e):(n.audioContext=new AudioContext,n.source=n.audioContext.createMediaStreamSource(t),n.processor=n.audioContext.createScriptProcessor(8192,1,1),n.processor.onaudioprocess=function(e){var t={data:e.inputBuffer.getChannelData(0)};n.worker.postMessage({type:"audioProcess",details:t})},n.source.connect(n.processor),n.destination=n.audioContext.createMediaStreamDestination(),n.processor.connect(n.destination),n.worker.postMessage({type:"clear"}),n.worker.postMessage({type:"startRecord",details:{sampleRate:n.audioContext.sampleRate}}))},!1)}},{key:"finish",value:function(){this.worker.postMessage({type:"requestFinishRecord"})}},{key:"cancel",value:function(){this.worker.postMessage({type:"requestCancelRecord"})}}]),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return c.worker=null,c.audioContext=null,c.audioInput=null,c.source=null,c.processor=null,c.destination=null,c.worker=new o.default,c.worker.onmessage=function(e){var t=e.data,n=t.type,a=t.details;switch(n){case"new":var s=a.blob,r=a.duration;c.emit("new-record",s,r);break;case"slice-saved":var o=a.length,i=c.audioContext.sampleRate;c.emit("time-update",o/i);break;case"started":c.emit("started");break;case"finished":c.emit("finished"),c.stop(),c.worker.postMessage({type:"export"});break;case"canceled":c.emit("canceled"),c.stop(),c.worker.postMessage({type:"clear"})}},c}t.default=u},function(e,t,n){e.exports=function(){return n(305)('!function(r){var i={};function n(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=r,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://play-static.unity.com/public/assets/Webgl",n(n.s=0)}([function(t,e,r){"use strict";var i=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t};function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s={Mono:1,Stereo:2},o={Phone:8e3,Promote:11025,WideBand:16e3,RadioBroadcasting:22050,miniDV:32e3,CD:44100,BluRay:96e3},l=[],c=0,u=!1,h=0,f=!1,v=null;self.onmessage=function(t){var e,r=t.data,i=r.type,n=r.details;switch(i){case"audioProcess":var a=n.data;e=a,u&&(l.push(e),h+=e.length,self.postMessage({type:"slice-saved",details:{length:e.length}}),f&&(u=f=!1,v?self.postMessage({type:"finished"}):self.postMessage({type:"canceled"})));break;case"startRecord":u=!0,c=n.sampleRate,self.postMessage({type:"started"});break;case"requestFinishRecord":v=f=!0;break;case"requestCancelRecord":v=!(f=!0);break;case"clear":v=null,c=h=0,f=!(l=[]);break;case"export":!function(){for(var t=new Float32Array(h),e=0,r=0;r<l.length;r++)t.set(l[r],e),e+=l[r].length;var i=function(t){var e=new ArrayBuffer(44+2*t.length),r=new DataView(e),i=new p(r);i.writeString("RIFF"),i.writeUint32(32+2*t.length,!0),i.writeString("WAVE"),i.writeString("fmt "),i.writeUint32(16,!0),i.writeUint16(1,!0),i.writeUint16(s.Mono,!0),i.writeUint32(o.Phone,!0),i.writeUint32(o.Phone*s.Mono*2,!0),i.writeUint16(2*s.Mono,!0),i.writeUint16(16,!0),i.writeString("data"),i.writeUint32(2*t.length,!0);for(var n=0;n<t.length;n++){var a=Math.max(-1,Math.min(1,t[n]));i.writeInt16(a<0?32768*a:32767*a,!0)}return r}(new d(c,o.Phone).resample(t)),n=new Blob([i],{type:"audio/wav"});self.postMessage({type:"new",details:{blob:n,duration:h/c}})}()}};var p=(i(w,[{key:"writeString",value:function(t){for(var e=0;e<t.length;e++)this.view.setUint8(this.cursor+e,t.charCodeAt(e));this.cursor+=e}},{key:"writeUint32",value:function(t,e){var r=1<arguments.length&&void 0!==e&&e;this.view.setUint32(this.cursor,t,r),this.cursor+=4}},{key:"writeUint16",value:function(t,e){var r=1<arguments.length&&void 0!==e&&e;this.view.setUint16(this.cursor,t,r),this.cursor+=2}},{key:"writeInt16",value:function(t,e){var r=1<arguments.length&&void 0!==e&&e;this.view.setInt16(this.cursor,t,r),this.cursor+=2}}]),w);function w(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;a(this,w),this.view=null,this.cursor=0,this.view=t,this.cursor=e}var d=(i(g,[{key:"initialize",value:function(){this.srcRate===this.destRate?this.resample=this._bypass:this.srcRate<this.destRate?this.resample=this._linearInterpolation:this.resample=this._multiTap}}]),g);function g(t,e){var u=this;a(this,g),this._linearInterpolation=function(t){for(var e=Math.ceil(t.length*u.destRate/u.srcRate*1.0000004768371582)+1,r=new Float32Array(e),i=u.srcRate/u.destRate,n=1,a=0,s=0,o=void 0,l=0;n<1;n+=i)a=1-(s=n%1),r[l++]=t[0]*s;for(--n,o=Math.floor(n);o<e-1;)a=1-(s=n%1),r[l++]=t[o]*a+t[o+1]*s,n+=i,o=Math.floor(n);return r},this._multiTap=function(t){var e,r=Math.ceil(t.length*u.destRate/u.srcRate*1.0000004768371582)+1,i=new Float32Array(r),n=u.srcRate/u.destRate,a=0,s=0,o=0,l=0,c=0;do{for(s=n,o=0;0<s&&l<t.length;){if(!((e=1+l-c)<=s)){o+=t[l]*s,c+=s,s=0;break}o+=t[l++]*e,c=l,s-=e}s<=0&&(i[a++]=o/n)}while(l<t.length);return i},this._bypass=function(t){return t},this.srcRate=t,this.destRate=e,this.initialize()}}]);',n.p+"2c98742d1a2ebff00dff.worker.js")}},function(e,t,n){"use strict";var s=window.URL||window.webkitURL;e.exports=function(t,n){try{try{var a;try{(a=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),a=a.getBlob()}catch(e){a=new Blob([t])}return new Worker(s.createObjectURL(a))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(e){if(!n)throw Error("Inline worker is not supported");return new Worker(n)}}},function(e,g,h){"use strict";(function(e){Object.defineProperty(g,"__esModule",{value:!0});var t,n=l(["messages.editVisibilityDialog.value.",""],["messages.editVisibilityDialog.value.",""]),a=l(["type"],["type"]),s=l(["value"],["value"]),r=l(["messages.editVisibilityDialog.show"],["messages.editVisibilityDialog.show"]),o=h(2),i=h(1),c=h(7),u=(t=c)&&t.__esModule?t:{default:t};function l(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var f=/^[.a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,p=/^@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;g.default={name:e,depends:[],signals:{addVisibilityItem:[function(e){var t=e.state,n=e.props,a=t.get("messages.editVisibilityDialog.visibility"),s=n.value,r=n.type,o=void 0;switch(r){case"address":o=f;break;case"domain":o=p;break;default:return{}}return o.test(s)?(t.set("messages.editVisibilityDialog.error."+r,!1),t.set("messages.editVisibilityDialog.visibility",[].concat(d(a),[{value:s,type:r}])),t.set("messages.editVisibilityDialog.value."+r,"")):t.set("messages.editVisibilityDialog.error."+r,!0),{}}],removeVisibilityItem:[function(e){var t=e.state,n=e.props,a=t.get("messages.editVisibilityDialog.visibility"),s=n.value;t.set("messages.editVisibilityDialog.visibility",[].concat(d(a)).filter(function(e){return e.value!==s}))}],changeVisibilityInputValue:[(0,o.set)((0,i.state)(n,(0,i.props)(a)),(0,i.props)(s))],toggleEditVisibilityDialog:[function(e){var t=e.props,n=e.http,a=e.state,s=e.path;if(!t.value)return s.close();var r=u.default.getChannelId(a);return n.get("/api/channels/"+r+"/fetchVisibility").then(s.success).catch(s.error)},{success:[function(e){var t=e.state,n=e.props.result;t.set("messages.editVisibilityDialog.visibility",Object.keys(n).map(function(e){return{value:e,type:n[e]}}))},(0,o.set)((0,i.state)(r),!0)],error:[function(e){e.controller.getSignal("header.showMessage")({message:"error_when_fetch_channel_visibility"})}],close:[(0,o.set)((0,i.state)(r),!1)]}],postVisibility:[function(e){var t=e.http,n=e.path,a=e.state,s=u.default.getChannelId(a),r=a.get("messages.editVisibilityDialog.visibility"),o={};return r.forEach(function(e){var t=e.value,n=e.type;return o[t]=n,{}}),t.post("/api/channels/"+s+"/setVisibility",{visibility:o}).then(n.success).catch(n.error)},{success:[(0,o.set)((0,i.state)(r),!1),function(e){e.controller.getSignal("header.showMessage")({message:"edit_visibility_success",type:"info"})}],error:[]}]},getState:function(){return{editVisibilityDialog:{show:!1,visibility:[],error:{domain:!1,address:!1},value:{domain:"",address:""}}}}}}).call(g,"views/v2/modules/messages/EditVisibilityStore.js")},function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var s=4,r=10,t=["messages","streamCall"],o=["messages","call","voiceServerInfoAPI"];n.default={name:e,signals:{connectionOpen:[function(e){var t=e.state,n=e.messages,a=t.get("channelId");a&&n.socket.send(s,{channelId:a})}],createStreamCall:[function(e){var t=e.path,n=!0;return void 0===(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)&&(n=!1),void 0===(window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription)&&(n=!1),n?t.yes():t.no()},{yes:[function(e){var t=e.state,n=e.http,a=e.path,s=t.get(o);return n.get(s).then(a.success).catch(a.error)},{success:[function(e){var t=e.props,n=e.messages.socket,a=t.result.serverId,s=t.channelId;n.send(r,{channelId:s,selfMute:!1,voiceServerId:a})}],error:[function(){}]}],no:[function(e){e.state.set([].concat(t,["notSupportedTip"]),!0)}]}]},getState:function(){return{streamCall:{callInfo:{},notSupportedTip:!1}}}}}).call(n,"views/v2/modules/messages/StreamCallStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=11,o=12,i=void 0;t.default={name:e,signals:{connectionOpen:[function(e){var t,n,a=e.controller,s=e.state;-1!==s.get("currentPath").indexOf("/workspace")&&(t=s.get("channelId"),n=s.get("currentUserId"),a.getSignal("messages.workspaceStart")({channelId:t,userId:n}),a.getSignal("workspace.checkReady")(),i=setInterval(function(){return a.getSignal("messages.syncTime")()},5e3))}],connectionClosed:[function(){i&&clearInterval(i)}],workspaceStart:[function(e){var t=e.props,n=e.messages.socket,a=t.channelId,s=t.userId;n.send(r,{channelId:a,userId:s})}],syncTime:[function(e){var t=e.state,n=e.messages.socket,a=t.get("questionId"),s=t.get("currentUserId");n.send(o,{questionId:a,userId:s})}],onSyncTimeResult:[function(e){var t=e.state,n=e.props,a=n.sessionTime,s=n.seconds;t.set("workspace.seconds",s),t.set("workspace.sessionTime",a)}]},getState:function(){}}}).call(t,"views/v2/modules/messages/ODSWorkspaceStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:e,signals:{connectionOpen:[function(e){var t=e.controller;-1!==e.state.get("currentPath").indexOf("/matching")&&t.getSignal("match.isAccept")()}]},getState:function(){}}}).call(t,"views/v2/modules/messages/OdsMatchingStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=["messages.initialData"];t.default={name:e,depends:[],signals:{INITIAL_DATA:[function(e){var t=e.http,n=e.state,a=e.path,s=n.get("messages.urlChannelId");return s?t.get("/api/channels/"+s+"/touch").then(a.success).catch(a.error):a.dummy()},{success:[function(e){var t=e.props,n=e.state,a=t.result,s=t.status;a&&200===s&&n.set(r,a)}],error:[],dummy:[]}],parseInitialData:[function(e){var t=e.state,n=e.controller,a=t.get(r);a&&n.getSignal("messages.channelReady")(a)}]}}}).call(t,"views/v2/modules/messages/InitialStore.js")},function(e,o,i){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=r(["support.createTicketStatus"],["support.createTicketStatus"]),n=r(["messages.postTicketDialog.show"],["messages.postTicketDialog.show"]),a=i(2),s=i(1);function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}o.default={name:e,signals:{openPostTicketDialog:[(0,a.set)((0,s.state)(t),""),(0,a.set)((0,s.state)(n),!0)],closePostTicketDialog:[(0,a.set)((0,s.state)(n),!1)]},getState:function(){return{postTicketDialog:{show:!1}}}}}).call(o,"views/v2/modules/messages/PostTicketDialogStore.js")},function(e,o,i){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=Object.freeze(Object.defineProperties(["messages.supportView"],{raw:{value:Object.freeze(["messages.supportView"])}})),n=i(2),a=i(1);var r=["messages","supportTickets"];function s(e){var t=e.state,n=e.props.workspaceId;t.set([].concat(r,[n]),!1)}o.default={name:e,depends:[],signals:{openExplore:[s],channelSelect:[s],openSupportTickets:[function(e){var t=e.state,n=e.props,a=e.controller,s=n.workspaceId;t.set([].concat(r,[s]),!0),a.getSignal("support.searchTickets")({listType:"client"})}],supportTicketsUnSelect:[s],workspaceSelect:[function(e){var t=e.controller;t.getSignal("support.countTickets")(),t.getSignal("messages.closeSupportView")()}],showSupportView:[(0,n.set)((0,a.state)(t),!0)],closeSupportView:[(0,n.set)((0,a.state)(t),!1)]},getState:function(){return{supportTickets:{},supportView:!1}}}}).call(o,"views/v2/modules/messages/SupportTicketsStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=["messages","clipboard"];t.default={name:e,depends:[],signals:{pasteClipboardImage:[function(e){var t=e.props,n=e.state,a=t.imageFile,s={file:a,channelId:t.channelId,parentMessageId:t.parentMessageId},r=new FileReader;r.onload=function(e){var t=new Image;s.dataUrl=e.target.result,t.src=s.dataUrl,t.onload=function(){s.width=t.width,s.height=t.height,n.set([].concat(o,["upload"]),s)}},r.readAsDataURL(a)}],sendClipboardImage:[function(e){var t=e.controller,n=e.state,a=n.get([].concat(o,["upload"]));n.set([].concat(o,["upload"]),null),t.getSignal("messages.uploadAttachment")({channelId:a.channelId,parentMessageId:a.parentMessageId,content:"",upload:a})}],cancelClipboardImage:[function(e){e.state.set([].concat(o,["upload"]),null)}]},getState:function(){return{clipboard:{image:"",upload:null}}},getClipboardImage:function(e){return e.get([].concat(o,["image"]))}}}).call(t,"views/v2/modules/messages/ClipboardStore.js")},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default={name:e,signals:{messageCreate:[function(e){var t=e.state,n=e.props,a=e.controller,s=n.channelId,r=n.channelType,o=n.author,i=l({},o,{fullName:o.fullname}),c=a.getSignal("embeddedMessage.openEmbeddedMessage"),u=t.get("currentUserId");c&&u!==o.id&&"direct"===r&&c({channelId:s,user:i})}]},getState:function(){}}}).call(t,"views/v2/modules/messages/ODSMessageStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(316);var r=[((a=s)&&a.__esModule?a:{default:a}).default];t.default={suggest:r}},function(e,v,_){"use strict";(function(e){Object.defineProperty(v,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=r(["suggest.candidate.q"],["suggest.candidate.q"]),n=r(["suggest.candidate.st"],["suggest.candidate.st"]),a=_(2),s=_(1);function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={};function d(e){return{id:e,type:"q",name:e,value:e,text:e}}function c(e){var t=e.props,n=e.state,a=t.q,s=t.st,r=(t.result||{}).candidates,o=void 0===r?[]:r,i=n.get("suggest.candidate"),c=i.q,u=i.st;return a===c&&s===u?(o.push(d(a)),{candidates:o}):{candidates:null}}function f(e){var t=e.props,n=e.state,a=t.q,s=t.st,r=(t.result||{}).candidates,o=void 0===r?[]:r,i=n.get("suggest.candidate"),c=i.q,u=i.st;return a===c&&s===u?{candidates:o}:{candidates:null}}function p(e){var t=e.props,n=e.state,a=[],s=t.q,r=t.st,o=n.get("suggest.candidate"),i=o.q,c=o.st;return s===i&&r===c?(a.push(d(s)),{candidates:a}):{candidates:null}}function g(e,t,n,a){var i,s,c,r=void 0,o=void 0;return n&&(r=[n]),a&&(o=[a]),[function(e){var t=e.props,n=e.path,a=l[c]||{q:"",noResult:!1},s=a.q,r=a.noResult,o=t.q;return s&&o&&r&&o.startsWith(s)?n.no():n.yes()},{yes:[t,{success:r=[].concat(u(r),[m(e),h,(i=e,function(e){var t=e.props,n=t.q,a=t.addNew,s=t.candidates,r=(s||[]).length,o=0===r;1!==r||!a&&"q"!==s[0].type||(o=!0),l[i]={q:n,noResult:o}})]),error:o=[].concat(u(o),[m(e)])}],no:[(s=c=e,function(e){var t=e.state,n=e.props.q;0<(t.get(["suggest","candidate",s])||[]).length&&t.set(["suggest","candidate",s,0],d(n))})]}]}function h(e){var t=e.props,n=e.state,a=n.get("suggest.followMap")||{},s=(t.result||{}).followMap;n.set("suggest.followMap",i({},a,s))}function m(s){return function(e){var t=e.props,n=e.state,a=t.candidates;a&&(n.set(["suggest","candidate",s],a),n.set(["suggest","candidate","type"],s))}}v.default={name:e,depends:[],signals:{suggestSkill:g("skill",function(e){var t=e.props,n=e.http,a=e.path,s=t.q,r=t.skillType,o={q:s};return r&&(o.type=r),n.get("/api/skillSuggest",o).then(a.success).catch(a.error)},function(e){var t=e.props,n=e.state,a=t.q,s=t.st,r=t.addNew,o=(t.result||{}).candidates,i=void 0===o?[]:o,c=n.get("suggest.candidate"),u=c.q,l=c.st;return a===u&&s===l?(r&&i.push(d(a)),{candidates:i}):{candidates:null}},p),suggestPlace:g("place",function(e){var t=e.props,n=e.http,a=e.path,s={q:t.q};return t.allPlace&&(s.allType="all"),n.get("/api/placeSuggest",s).then(a.success).catch(a.error)},f,p),suggestTeam:g("team",function(e){var t=e.props,n=e.http,a=e.path,s=t.q;return n.get("/api/teamSuggest",{q:s}).then(a.success).catch(a.error)},function(e){var t=e.state,n=e.props,a=n.q,s=n.st,r=n.addNew,o=(n.result||{}).candidates,i=void 0===o?[]:o,c=t.get("suggest.candidate"),u=c.q,l=c.st;return a===u&&s===l?(r&&i.push(d(a)),{candidates:i}):{candidates:null}},p),suggestUser:g("user",function(e){var t=e.props,n=e.http,a=e.path,s=t.q;return n.get("/api/userSuggest",{q:s}).then(a.success).catch(a.error)},function(e){var t=e.props,n=e.state,a=t.q,s=t.st,r=t.addNew,o=(t.result||{}).candidates,i=void 0===o?[]:o,c=n.get("suggest.candidate"),u=c.q,l=c.st;return a===u&&s===l?(r&&i.push(d(a)),{candidates:i}):{candidates:null}},p),suggestSearch:g("search",function(e){var t=e.props,n=e.http,a=e.path,s=t.q,r=t.t,o=t.skillType,i={q:s,t:r};return o&&(i.type=o),n.get("/api/searchSuggest",i).then(a.success).catch(a.error)},c,p),suggestHeader:g("header",function(e){var t=e.props,n=e.http,a=e.path,s=t.q;return n.get("/api/headerSuggest",{q:s}).then(a.success).catch(a.error)},c,p),suggestSchool:g("school",function(e){var t=e.props,n=e.http,a=e.path,s=t.q;return n.get("/api/schoolSuggest",{q:s}).then(a.success).catch(a.error)},f,p),suggestSchoolV2:g("schoolV2",function(e){var t=e.props,n=e.http,a=e.path,s=t.q;return n.get("/api/schoolV2Suggest",{q:s}).then(a.success).catch(a.error)},f,p),suggestQuickSearch:g("quickSearch",function(e){var t=e.props,n=e.http,a=e.path,s={q:t.q,t:t.t};return n.get("/api/quickSearchSuggest",s).then(a.success).catch(a.error)},function(e){var t=e.props,n=e.state,a=t.q,s=t.st,r=t.addNew,o=(t.result||{}).candidates,i=void 0===o?[]:o,c=n.get("suggest.candidate"),u=c.q,l=c.st;return a===u&&s===l?(r&&i.push(d(a)),{candidates:i}):{candidates:null}},p),fetchCandidates:[function(e){var t=e.props,n=e.state,a=e.path,s=t.q,r=t.st,o=n.get("suggest.candidate")||{},i=o.q,c=o.st,u=n.get("suggest.candidate."+r);return!(u&&0<u.length)||s&&s!==i||r&&r!==c?a.yes():a.no()},{yes:[function(e){var t=e.props,n=e.state,a=e.controller,s=t.st,r=t.q,o=t.t,i=t.addNew,c=void 0!==i&&i,u=t.allPlace,l=void 0!==u&&u,d=t.skillType,f=n.get("suggest.candidate"),p=f.q,g=f.st;switch(n.set("suggest.candidate.q",r),n.set("suggest.candidate.st",s),s===g&&r&&r.startsWith(p)||n.set("suggest.candidate."+s,[]),s){case"skill":a.getSignal("suggest.suggestSkill")({q:r,st:s,addNew:c,skillType:d});break;case"team":a.getSignal("suggest.suggestTeam")({q:r,st:s,addNew:c});break;case"user":a.getSignal("suggest.suggestUser")({q:r,st:s,addNew:c});break;case"place":a.getSignal("suggest.suggestPlace")({q:r,st:s,allPlace:l});break;case"header":a.getSignal("suggest.suggestHeader")({q:r,st:s});break;case"search":a.getSignal("suggest.suggestSearch")({q:r,st:s,t:o,skillType:d});break;case"school":a.getSignal("suggest.suggestSchool")({q:r,st:s});break;case"schoolV2":a.getSignal("suggest.suggestSchoolV2")({q:r,st:s});break;case"quickSearch":a.getSignal("suggest.suggestQuickSearch")({q:r,st:s,t:o,addNew:c})}}],no:[]}],clearCandidates:[function(e){var t=e.props,n=e.state,a=t.st;n.set(["suggest","candidate",a],[])}],clearSuggestQuery:[(0,a.unset)((0,s.state)(t)),(0,a.unset)((0,s.state)(n))],clearSuggest:[function(e){var t=e.controller,n=e.props;t.getSignal("suggest.clearCandidates")(i({},n)),t.getSignal("suggest.clearSuggestQuery")()}],saveToMap:[function(e){var t,n=e.props,a=e.state,s=n.candidate,r=n.st;s&&"q"!==s.type&&(t="suggest.candidateMap."+r,a.get(t)?a.merge(t,o({},s.id,s)):a.set(t,o({},s.id,s)))}],removeFromMap:[function(e){var t,n,a=e.props,s=e.state,r=a.candidate,o=a.st;r&&"q"!==r.type&&(t="suggest.candidateMap."+o,(n=i({},s.get(t))||{})[r.id]&&delete n[r.id],s.set(t,n))}]},getState:function(){return{candidate:{skill:[],place:[],team:[],user:[],search:[],header:[],school:[],schoolV2:[]},candidateMap:{skill:{},place:{},team:{},user:{},search:{},header:{},school:{},schoolV2:{}},followMap:{}}}}}).call(v,"views/v2/modules/suggest/SuggestStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(318);var r=[((a=s)&&a.__esModule?a:{default:a}).default];t.default={notification:r}},function(e,u,O){"use strict";(function(e){Object.defineProperty(u,"__esModule",{value:!0});var y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=i(["notification.processStatus"],["notification.processStatus"]),n=i(["notification.unseenCount"],["notification.unseenCount"]),a=O(2),s=O(1),b=O(17),w=o(O(54)),S=o(O(55)),I=o(O(30)),r=o(O(3));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function E(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var C=O(57),c=["notification","firstLoad"];u.default={name:e,depends:[],signals:{connectionOpen:[function(e){var t=e.props,n=e.state,a=t.notificationUnseenCount;n.set("notification.connected",!0),n.set("notification.unseenCount",a)}],notificationCreate:[function(e){var t,n,a,s,r,o,i,c,u,l,d,f,p,g=e.props,h=e.state,m=e.controller,v=h.get("currentHost"),_=g.type;v.startsWith("livehelp")||(n=(t=h.get("notification")).unreadCount,a=t.unseenCount,s=t.status,(r=[].concat(E(t.results))).unshift(g),n++,s?m.getSignal("notification.makeAllSeen")():a++,h.set("notification",y({},t,{unreadCount:n,unseenCount:a,results:r})),h.get("messages.window.isMaster")&&!O(23).get("DesktopNotificationNotice.dismissed")&&I.default.hasPermission()&&(o=h.get(),c=(i=y({},g.data)).role,u=(0,S.default)(_,c,i),l=C,d="Unity Play",f=(0,b.i18n)(o,w.default,_+"_"+c+"_text",i),p={tag:"notifications",onClick:function(){window.focus();var e=u;e+=(-1<e.indexOf("?")?"&":"?")+"_nid="+g.id,window.location.href=e}},"ods_request_received"===_&&(i.questionType=(0,b.i18n)(o,w.default,i.questionType),d=(0,b.i18n)(o,w.default,_+"_"+c+"_text",i),l=i.avatar,f="$"+i.budget+" · "+i.description),I.default.showNotification(l,d,f,p)))}],notificationRead:[function(e){var t=e.props,n=e.state,a=t.id,s=t.total;n.set("notification.unreadCount",s);var r,o=n.get("notification.results");o&&0<o.length&&(-1===(r=o.findIndex(function(e){return e.id===a}))||o[r].read||((o=[].concat(E(o)))[r]=y({},o[r]),o[r].read=!0,n.set("notification.results",o)))}],notificationSeen:[function(e){var t=e.props,n=e.state,a=t.total;n.set("notification.unseenCount",a)}],switchStatus:[function(e){var t=e.state,n=e.controller;t.set("notification.status",!t.get("notification.status"));var a=t.get("notification"),s=a.status,r=a.results;!0===s&&(n.getSignal("notification.makeAllSeen")(),(r.length<=0||t.get(c))&&n.getSignal("notification.getNotifications")())}],switchStatusToFalse:[function(e){e.state.set("notification.status",!1)}],getNotifications:[(0,a.set)((0,s.state)(t),r.default.inProgress),[function(e){var t=e.state,n=e.http,a=e.path,s=t.get("notification").page;return s?s+=1:s=1,n.get("/api/notifications",{page:s}).then(a.success).catch(a.error)},{success:[(0,a.set)((0,s.state)(t),r.default.succeeded),function(e){var t,n,a,s,r,o,i,c,u,l,d=e.props,f=e.state;200===d.status&&(t=f.get("notification"),n=f.get("notification.results"),s=(a=d.result).total,r=a.page,o=a.pageTotal,i=a.results,c=a.unreadCount,u=a.unseenCount,l=i.filter(function(t){return-1===n.findIndex(function(e){return e.id===t.id})}),f.set("notification",y({},t,{firstLoad:!1,unreadCount:c,unseenCount:u,total:s,page:r,pageTotal:o,results:[].concat(E(n),E(l))})))}],error:[(0,a.set)((0,s.state)(t),r.default.failed)]}]],makeAllRead:[(0,a.set)((0,s.state)(t),r.default.inProgress),[function(e){var t=e.http,n=e.path;return t.post("/api/notifications/make-all-read",null).then(n.success).catch(n.error)},{success:[(0,a.set)((0,s.state)(t),r.default.succeeded)],error:[(0,a.set)((0,s.state)(t),r.default.failed)]}]],makeAllSeen:[function(e){var t=e.http,n=e.path;return t.post("/api/notifications/make-all-seen",null).then(n.success).catch(n.error)},{success:[(0,a.set)((0,s.state)(n),0)],error:[]}],setRead:[(0,a.set)((0,s.state)(t),r.default.inProgress),[function(e){var t=e.props,n=e.http,a=e.path;return n.post("/api/notifications/set-read/"+t.id,null).then(a.success).catch(a.error)},{success:[(0,a.set)((0,s.state)(t),r.default.succeeded),function(e){var t,n,a=e.props,s=e.state,r=s.get("notification").results;r&&r instanceof Array&&(-1!==(t=r.findIndex(function(e){return e.id===a.id}))&&(n=y({},r[t],{read:!0}),s.set("notification",y({},s.get("notification"),{results:[].concat(E(r.slice(0,t)),[n],E(r.slice(t,r.length)))}))))}],error:[(0,a.set)((0,s.state)(t),r.default.failed)]}]]},getServices:function(){return{}},getState:function(){return{connected:!1,unseenCount:0,unreadCount:0,status:!1,firstLoad:!0,page:0,total:0,pageTotal:0,results:[]}}}}).call(u,"views/v2/modules/notification/NotificationStore.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(320);var r=[((a=s)&&a.__esModule?a:{default:a}).default];t.default={webgl:r}},function(e,f,p){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t,n=d(["webgl.uploadingPreview"],["webgl.uploadingPreview"]),a=d(["value"],["value"]),s=d(["webgl.uploadedId"],["webgl.uploadedId"]),r=d(["webgl.thumbnail"],["webgl.thumbnail"]),o=d(["webgl.thumbnailUploading"],["webgl.thumbnailUploading"]),i=p(2),c=p(8),u=(t=c)&&t.__esModule?t:{default:t},l=p(1);function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}f.default={name:e,depends:[],signals:{INITIAL_DATA:[function(e){var t=e.state,n=e.http,a=e.path,s=t.get("webglId"),r=t.get("playerUserID");return n.get("/api/webgl/baseData",{webglId:s,playerUserID:r}).then(a.success).catch(a.error)},{success:[function(e){var t=e.state,n=e.props.result,a=n.pkg,s=n.thumbnail,r=n.webgl,o=n.mobileWebgl,i=n.project,c=n.author,u=n.previewAttachmentId;t.set("webgl.package",a),t.set("webgl.thumbnail",s),t.set("webgl.webgl",r),t.set("webgl.mobileWebgl",o),t.set("webgl.project",i),t.set("webgl.author",c),t.set("webgl.previewAttachmentId",u)}]}],checkVideoState:[function(e){var t=e.state,n=e.path,a=e.http,s=t.get("webgl.uploadedId");return a.get("/api/webgl/previewProgress/"+s).then(n.success)},{success:[function(e){var t=e.props,n=e.controller,a=t.result;200===t.status&&a&&"completed"===a.status&&(n.getSignal("webgl.setUploadingPreview")({value:!1}),window.parent.postMessage({action:"processing",value:!1},u.default.DEFAULT_URL))}]}],setUploadingPreview:[(0,i.set)((0,l.state)(n),(0,l.props)(a))],setUploadedId:[(0,i.set)((0,l.state)(s),(0,l.props)(a))],logPlay:[function(e){var t=e.state,n=e.http,a=e.path,s=t.get("webgl.webgl").projectId,r=t.get("playerUserID");return n.post("/api/webgl/logPlay",{projectId:s,userId:r}).then(a.success).catch(a.error)},{success:[function(e){var t=e.state;window.parent.postMessage({action:"increasePlayCount"},u.default.DEFAULT_URL);var n=t.get("plays");n&&t.set("plays",n+1)}]}],updateThumbnail:[(0,i.set)((0,l.state)(r),(0,l.props)(a)),(0,i.set)((0,l.state)(o),!1)],setThumbnailUploading:[(0,i.set)((0,l.state)(r),(0,l.props)(a)),(0,i.set)((0,l.state)(o),!0)]},getState:function(){return{uploadingPreview:!1,thumbnailUploading:!1}}}}).call(f,"views/v2/modules/webgl/WebglStore.js")},,,,,,,function(e,t,n){n(90),e.exports=n(94)}]);